function rp(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function Vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qd={exports:{}},Ma={},Kd={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vn=Symbol.for("react.element"),sp=Symbol.for("react.portal"),np=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),op=Symbol.for("react.provider"),ip=Symbol.for("react.context"),cp=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),up=Symbol.for("react.memo"),mp=Symbol.for("react.lazy"),nc=Symbol.iterator;function hp(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var Gd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jd=Object.assign,Yd={};function js(e,t,s){this.props=e,this.context=t,this.refs=Yd,this.updater=s||Gd}js.prototype.isReactComponent={};js.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};js.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xd(){}Xd.prototype=js.prototype;function ti(e,t,s){this.props=e,this.context=t,this.refs=Yd,this.updater=s||Gd}var ri=ti.prototype=new Xd;ri.constructor=ti;Jd(ri,js.prototype);ri.isPureReactComponent=!0;var ac=Array.isArray,Zd=Object.prototype.hasOwnProperty,si={current:null},eu={key:!0,ref:!0,__self:!0,__source:!0};function tu(e,t,s){var n,a={},l=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Zd.call(t,n)&&!eu.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(i===1)a.children=s;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:vn,type:e,key:l,ref:o,props:a,_owner:si.current}}function pp(e,t){return{$$typeof:vn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ni(e){return typeof e=="object"&&e!==null&&e.$$typeof===vn}function fp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var lc=/\/+/g;function xl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fp(""+e.key):t.toString(36)}function Yn(e,t,s,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vn:case sp:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+xl(o,0):n,ac(a)?(s="",e!=null&&(s=e.replace(lc,"$&/")+"/"),Yn(a,t,s,"",function(d){return d})):a!=null&&(ni(a)&&(a=pp(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(lc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",ac(e))for(var i=0;i<e.length;i++){l=e[i];var c=n+xl(l,i);o+=Yn(l,t,s,c,a)}else if(c=hp(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=n+xl(l,i++),o+=Yn(l,t,s,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Rn(e,t,s){if(e==null)return e;var n=[],a=0;return Yn(e,n,"","",function(l){return t.call(s,l,a++)}),n}function xp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qe={current:null},Xn={transition:null},gp={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:Xn,ReactCurrentOwner:si};function ru(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Rn,forEach:function(e,t,s){Rn(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Rn(e,function(){t++}),t},toArray:function(e){return Rn(e,function(t){return t})||[]},only:function(e){if(!ni(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};te.Component=js;te.Fragment=np;te.Profiler=lp;te.PureComponent=ti;te.StrictMode=ap;te.Suspense=dp;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gp;te.act=ru;te.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Jd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=si.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Zd.call(t,c)&&!eu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:vn,type:e.type,key:a,ref:l,props:n,_owner:o}};te.createContext=function(e){return e={$$typeof:ip,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:op,_context:e},e.Consumer=e};te.createElement=tu;te.createFactory=function(e){var t=tu.bind(null,e);return t.type=e,t};te.createRef=function(){return{current:null}};te.forwardRef=function(e){return{$$typeof:cp,render:e}};te.isValidElement=ni;te.lazy=function(e){return{$$typeof:mp,_payload:{_status:-1,_result:e},_init:xp}};te.memo=function(e,t){return{$$typeof:up,type:e,compare:t===void 0?null:t}};te.startTransition=function(e){var t=Xn.transition;Xn.transition={};try{e()}finally{Xn.transition=t}};te.unstable_act=ru;te.useCallback=function(e,t){return Qe.current.useCallback(e,t)};te.useContext=function(e){return Qe.current.useContext(e)};te.useDebugValue=function(){};te.useDeferredValue=function(e){return Qe.current.useDeferredValue(e)};te.useEffect=function(e,t){return Qe.current.useEffect(e,t)};te.useId=function(){return Qe.current.useId()};te.useImperativeHandle=function(e,t,s){return Qe.current.useImperativeHandle(e,t,s)};te.useInsertionEffect=function(e,t){return Qe.current.useInsertionEffect(e,t)};te.useLayoutEffect=function(e,t){return Qe.current.useLayoutEffect(e,t)};te.useMemo=function(e,t){return Qe.current.useMemo(e,t)};te.useReducer=function(e,t,s){return Qe.current.useReducer(e,t,s)};te.useRef=function(e){return Qe.current.useRef(e)};te.useState=function(e){return Qe.current.useState(e)};te.useSyncExternalStore=function(e,t,s){return Qe.current.useSyncExternalStore(e,t,s)};te.useTransition=function(){return Qe.current.useTransition()};te.version="18.3.1";Kd.exports=te;var v=Kd.exports;const Ba=Vd(v),yp=rp({__proto__:null,default:Ba},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=v,vp=Symbol.for("react.element"),bp=Symbol.for("react.fragment"),Np=Object.prototype.hasOwnProperty,wp=jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sp={key:!0,ref:!0,__self:!0,__source:!0};function su(e,t,s){var n,a={},l=null,o=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Np.call(t,n)&&!Sp.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:vp,type:e,key:l,ref:o,props:a,_owner:wp.current}}Ma.Fragment=bp;Ma.jsx=su;Ma.jsxs=su;Qd.exports=Ma;var r=Qd.exports,Yl={},nu={exports:{}},ot={},au={exports:{}},lu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,T){var B=_.length;_.push(T);e:for(;0<B;){var G=B-1>>>1,re=_[G];if(0<a(re,T))_[G]=T,_[B]=re,B=G;else break e}}function s(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var T=_[0],B=_.pop();if(B!==T){_[0]=B;e:for(var G=0,re=_.length,pe=re>>>1;G<pe;){var ne=2*(G+1)-1,Se=_[ne],V=ne+1,Ee=_[V];if(0>a(Se,B))V<re&&0>a(Ee,Se)?(_[G]=Ee,_[V]=B,G=V):(_[G]=Se,_[ne]=B,G=ne);else if(V<re&&0>a(Ee,B))_[G]=Ee,_[V]=B,G=V;else break e}}return T}function a(_,T){var B=_.sortIndex-T.sortIndex;return B!==0?B:_.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,x=null,p=3,N=!1,h=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(_){for(var T=s(d);T!==null;){if(T.callback===null)n(d);else if(T.startTime<=_)n(d),T.sortIndex=T.expirationTime,t(c,T);else break;T=s(d)}}function b(_){if(y=!1,m(_),!h)if(s(c)!==null)h=!0,$(S);else{var T=s(d);T!==null&&P(b,T.startTime-_)}}function S(_,T){h=!1,y&&(y=!1,f(E),E=-1),N=!0;var B=p;try{for(m(T),x=s(c);x!==null&&(!(x.expirationTime>T)||_&&!O());){var G=x.callback;if(typeof G=="function"){x.callback=null,p=x.priorityLevel;var re=G(x.expirationTime<=T);T=e.unstable_now(),typeof re=="function"?x.callback=re:x===s(c)&&n(c),m(T)}else n(c);x=s(c)}if(x!==null)var pe=!0;else{var ne=s(d);ne!==null&&P(b,ne.startTime-T),pe=!1}return pe}finally{x=null,p=B,N=!1}}var k=!1,w=null,E=-1,R=5,F=-1;function O(){return!(e.unstable_now()-F<R)}function W(){if(w!==null){var _=e.unstable_now();F=_;var T=!0;try{T=w(!0,_)}finally{T?U():(k=!1,w=null)}}else k=!1}var U;if(typeof g=="function")U=function(){g(W)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=W,U=function(){q.postMessage(null)}}else U=function(){j(W,0)};function $(_){w=_,k||(k=!0,U())}function P(_,T){E=j(function(){_(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){h||N||(h=!0,$(S))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(_){switch(p){case 1:case 2:case 3:var T=3;break;default:T=p}var B=p;p=T;try{return _()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,T){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var B=p;p=_;try{return T()}finally{p=B}},e.unstable_scheduleCallback=function(_,T,B){var G=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,_){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=B+re,_={id:u++,callback:T,priorityLevel:_,startTime:B,expirationTime:re,sortIndex:-1},B>G?(_.sortIndex=B,t(d,_),s(c)===null&&_===s(d)&&(y?(f(E),E=-1):y=!0,P(b,B-G))):(_.sortIndex=re,t(c,_),h||N||(h=!0,$(S))),_},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(_){var T=p;return function(){var B=p;p=T;try{return _.apply(this,arguments)}finally{p=B}}}})(lu);au.exports=lu;var kp=au.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cp=v,lt=kp;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ou=new Set,en={};function Fr(e,t){cs(e,t),cs(e+"Capture",t)}function cs(e,t){for(en[e]=t,e=0;e<t.length;e++)ou.add(t[e])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xl=Object.prototype.hasOwnProperty,Ep=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oc={},ic={};function _p(e){return Xl.call(ic,e)?!0:Xl.call(oc,e)?!1:Ep.test(e)?ic[e]=!0:(oc[e]=!0,!1)}function Pp(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Lp(e,t,s,n){if(t===null||typeof t>"u"||Pp(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ke(e,t,s,n,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new Ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ie[t]=new Ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new Ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new Ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new Ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new Ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new Ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new Ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new Ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var ai=/[\-:]([a-z])/g;function li(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ai,li);Ie[t]=new Ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ai,li);Ie[t]=new Ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ai,li);Ie[t]=new Ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new Ke(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new Ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function oi(e,t,s,n){var a=Ie.hasOwnProperty(t)?Ie[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Lp(t,s,a,n)&&(s=null),n||a===null?_p(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Ht=Cp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tn=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Vr=Symbol.for("react.fragment"),ii=Symbol.for("react.strict_mode"),Zl=Symbol.for("react.profiler"),iu=Symbol.for("react.provider"),cu=Symbol.for("react.context"),ci=Symbol.for("react.forward_ref"),eo=Symbol.for("react.suspense"),to=Symbol.for("react.suspense_list"),di=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),du=Symbol.for("react.offscreen"),cc=Symbol.iterator;function Ps(e){return e===null||typeof e!="object"?null:(e=cc&&e[cc]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,gl;function Us(e){if(gl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);gl=t&&t[1]||""}return`
`+gl+e}var yl=!1;function jl(e,t){if(!e||yl)return"";yl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{yl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Us(e):""}function Rp(e){switch(e.tag){case 5:return Us(e.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return e=jl(e.type,!1),e;case 11:return e=jl(e.type.render,!1),e;case 1:return e=jl(e.type,!0),e;default:return""}}function ro(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vr:return"Fragment";case qr:return"Portal";case Zl:return"Profiler";case ii:return"StrictMode";case eo:return"Suspense";case to:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cu:return(e.displayName||"Context")+".Consumer";case iu:return(e._context.displayName||"Context")+".Provider";case ci:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case di:return t=e.displayName||null,t!==null?t:ro(e.type)||"Memo";case Kt:t=e._payload,e=e._init;try{return ro(e(t))}catch{}}return null}function Tp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ro(t);case 8:return t===ii?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ap(e){var t=uu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function An(e){e._valueTracker||(e._valueTracker=Ap(e))}function mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=uu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function ha(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function so(e,t){var s=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function dc(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=dr(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hu(e,t){t=t.checked,t!=null&&oi(e,"checked",t,!1)}function no(e,t){hu(e,t);var s=dr(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ao(e,t.type,s):t.hasOwnProperty("defaultValue")&&ao(e,t.type,dr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ao(e,t,s){(t!=="number"||ha(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ms=Array.isArray;function ss(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+dr(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function lo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(I(92));if(Ms(s)){if(1<s.length)throw Error(I(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:dr(s)}}function pu(e,t){var s=dr(t.value),n=dr(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function hc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Fn,xu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Fn=Fn||document.createElement("div"),Fn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fp=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(e){Fp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qs[t]=qs[e]})});function gu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||qs.hasOwnProperty(e)&&qs[e]?(""+t).trim():t+"px"}function yu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=gu(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var Dp=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function io(e,t){if(t){if(Dp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function co(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uo=null;function ui(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mo=null,ns=null,as=null;function pc(e){if(e=wn(e)){if(typeof mo!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Va(t),mo(e.stateNode,e.type,t))}}function ju(e){ns?as?as.push(e):as=[e]:ns=e}function vu(){if(ns){var e=ns,t=as;if(as=ns=null,pc(e),t)for(e=0;e<t.length;e++)pc(t[e])}}function bu(e,t){return e(t)}function Nu(){}var vl=!1;function wu(e,t,s){if(vl)return e(t,s);vl=!0;try{return bu(e,t,s)}finally{vl=!1,(ns!==null||as!==null)&&(Nu(),vu())}}function rn(e,t){var s=e.stateNode;if(s===null)return null;var n=Va(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(I(231,t,typeof s));return s}var ho=!1;if($t)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){ho=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{ho=!1}function Ip(e,t,s,n,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Vs=!1,pa=null,fa=!1,po=null,Op={onError:function(e){Vs=!0,pa=e}};function $p(e,t,s,n,a,l,o,i,c){Vs=!1,pa=null,Ip.apply(Op,arguments)}function Up(e,t,s,n,a,l,o,i,c){if($p.apply(this,arguments),Vs){if(Vs){var d=pa;Vs=!1,pa=null}else throw Error(I(198));fa||(fa=!0,po=d)}}function Dr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Su(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fc(e){if(Dr(e)!==e)throw Error(I(188))}function Mp(e){var t=e.alternate;if(!t){if(t=Dr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===s)return fc(a),e;if(l===n)return fc(a),t;l=l.sibling}throw Error(I(188))}if(s.return!==n.return)s=a,n=l;else{for(var o=!1,i=a.child;i;){if(i===s){o=!0,s=a,n=l;break}if(i===n){o=!0,n=a,s=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===s){o=!0,s=l,n=a;break}if(i===n){o=!0,n=l,s=a;break}i=i.sibling}if(!o)throw Error(I(189))}}if(s.alternate!==n)throw Error(I(190))}if(s.tag!==3)throw Error(I(188));return s.stateNode.current===s?e:t}function ku(e){return e=Mp(e),e!==null?Cu(e):null}function Cu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cu(e);if(t!==null)return t;e=e.sibling}return null}var Eu=lt.unstable_scheduleCallback,xc=lt.unstable_cancelCallback,Bp=lt.unstable_shouldYield,zp=lt.unstable_requestPaint,ke=lt.unstable_now,Hp=lt.unstable_getCurrentPriorityLevel,mi=lt.unstable_ImmediatePriority,_u=lt.unstable_UserBlockingPriority,xa=lt.unstable_NormalPriority,Wp=lt.unstable_LowPriority,Pu=lt.unstable_IdlePriority,za=null,_t=null;function qp(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(za,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:Kp,Vp=Math.log,Qp=Math.LN2;function Kp(e){return e>>>=0,e===0?32:31-(Vp(e)/Qp|0)|0}var Dn=64,In=4194304;function Bs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ga(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,o=s&268435455;if(o!==0){var i=o&~a;i!==0?n=Bs(i):(l&=o,l!==0&&(n=Bs(l)))}else o=s&~a,o!==0?n=Bs(o):l!==0&&(n=Bs(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-jt(t),a=1<<s,n|=e[s],t&=~a;return n}function Gp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-jt(l),i=1<<o,c=a[o];c===-1?(!(i&s)||i&n)&&(a[o]=Gp(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function fo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lu(){var e=Dn;return Dn<<=1,!(Dn&4194240)&&(Dn=64),e}function bl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function bn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=s}function Yp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-jt(s),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~l}}function hi(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-jt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var le=0;function Ru(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tu,pi,Au,Fu,Du,xo=!1,On=[],tr=null,rr=null,sr=null,sn=new Map,nn=new Map,Jt=[],Xp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gc(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":sn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nn.delete(t.pointerId)}}function Rs(e,t,s,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=wn(t),t!==null&&pi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Zp(e,t,s,n,a){switch(t){case"focusin":return tr=Rs(tr,e,t,s,n,a),!0;case"dragenter":return rr=Rs(rr,e,t,s,n,a),!0;case"mouseover":return sr=Rs(sr,e,t,s,n,a),!0;case"pointerover":var l=a.pointerId;return sn.set(l,Rs(sn.get(l)||null,e,t,s,n,a)),!0;case"gotpointercapture":return l=a.pointerId,nn.set(l,Rs(nn.get(l)||null,e,t,s,n,a)),!0}return!1}function Iu(e){var t=vr(e.target);if(t!==null){var s=Dr(t);if(s!==null){if(t=s.tag,t===13){if(t=Su(s),t!==null){e.blockedOn=t,Du(e.priority,function(){Au(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=go(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);uo=n,s.target.dispatchEvent(n),uo=null}else return t=wn(s),t!==null&&pi(t),e.blockedOn=s,!1;t.shift()}return!0}function yc(e,t,s){Zn(e)&&s.delete(t)}function ef(){xo=!1,tr!==null&&Zn(tr)&&(tr=null),rr!==null&&Zn(rr)&&(rr=null),sr!==null&&Zn(sr)&&(sr=null),sn.forEach(yc),nn.forEach(yc)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,ef)))}function an(e){function t(a){return Ts(a,e)}if(0<On.length){Ts(On[0],e);for(var s=1;s<On.length;s++){var n=On[s];n.blockedOn===e&&(n.blockedOn=null)}}for(tr!==null&&Ts(tr,e),rr!==null&&Ts(rr,e),sr!==null&&Ts(sr,e),sn.forEach(t),nn.forEach(t),s=0;s<Jt.length;s++)n=Jt[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Jt.length&&(s=Jt[0],s.blockedOn===null);)Iu(s),s.blockedOn===null&&Jt.shift()}var ls=Ht.ReactCurrentBatchConfig,ya=!0;function tf(e,t,s,n){var a=le,l=ls.transition;ls.transition=null;try{le=1,fi(e,t,s,n)}finally{le=a,ls.transition=l}}function rf(e,t,s,n){var a=le,l=ls.transition;ls.transition=null;try{le=4,fi(e,t,s,n)}finally{le=a,ls.transition=l}}function fi(e,t,s,n){if(ya){var a=go(e,t,s,n);if(a===null)Rl(e,t,n,ja,s),gc(e,n);else if(Zp(a,e,t,s,n))n.stopPropagation();else if(gc(e,n),t&4&&-1<Xp.indexOf(e)){for(;a!==null;){var l=wn(a);if(l!==null&&Tu(l),l=go(e,t,s,n),l===null&&Rl(e,t,n,ja,s),l===a)break;a=l}a!==null&&n.stopPropagation()}else Rl(e,t,n,null,s)}}var ja=null;function go(e,t,s,n){if(ja=null,e=ui(n),e=vr(e),e!==null)if(t=Dr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Su(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ja=e,null}function Ou(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hp()){case mi:return 1;case _u:return 4;case xa:case Wp:return 16;case Pu:return 536870912;default:return 16}default:return 16}}var Xt=null,xi=null,ea=null;function $u(){if(ea)return ea;var e,t=xi,s=t.length,n,a="value"in Xt?Xt.value:Xt.textContent,l=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[l-n];n++);return ea=a.slice(e,1<n?1-n:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $n(){return!0}function jc(){return!1}function it(e){function t(s,n,a,l,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s?s(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?$n:jc,this.isPropagationStopped=jc,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),t}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=it(vs),Nn=ye({},vs,{view:0,detail:0}),sf=it(Nn),Nl,wl,As,Ha=ye({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==As&&(As&&e.type==="mousemove"?(Nl=e.screenX-As.screenX,wl=e.screenY-As.screenY):wl=Nl=0,As=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:wl}}),vc=it(Ha),nf=ye({},Ha,{dataTransfer:0}),af=it(nf),lf=ye({},Nn,{relatedTarget:0}),Sl=it(lf),of=ye({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),cf=it(of),df=ye({},vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uf=it(df),mf=ye({},vs,{data:0}),bc=it(mf),hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ff[e])?!!t[e]:!1}function yi(){return xf}var gf=ye({},Nn,{key:function(e){if(e.key){var t=hf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yi,charCode:function(e){return e.type==="keypress"?ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yf=it(gf),jf=ye({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nc=it(jf),vf=ye({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yi}),bf=it(vf),Nf=ye({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),wf=it(Nf),Sf=ye({},Ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kf=it(Sf),Cf=[9,13,27,32],ji=$t&&"CompositionEvent"in window,Qs=null;$t&&"documentMode"in document&&(Qs=document.documentMode);var Ef=$t&&"TextEvent"in window&&!Qs,Uu=$t&&(!ji||Qs&&8<Qs&&11>=Qs),wc=" ",Sc=!1;function Mu(e,t){switch(e){case"keyup":return Cf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qr=!1;function _f(e,t){switch(e){case"compositionend":return Bu(t);case"keypress":return t.which!==32?null:(Sc=!0,wc);case"textInput":return e=t.data,e===wc&&Sc?null:e;default:return null}}function Pf(e,t){if(Qr)return e==="compositionend"||!ji&&Mu(e,t)?(e=$u(),ea=xi=Xt=null,Qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Uu&&t.locale!=="ko"?null:t.data;default:return null}}var Lf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Lf[e.type]:t==="textarea"}function zu(e,t,s,n){ju(n),t=va(t,"onChange"),0<t.length&&(s=new gi("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Ks=null,ln=null;function Rf(e){Zu(e,0)}function Wa(e){var t=Jr(e);if(mu(t))return e}function Tf(e,t){if(e==="change")return t}var Hu=!1;if($t){var kl;if($t){var Cl="oninput"in document;if(!Cl){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Cl=typeof Cc.oninput=="function"}kl=Cl}else kl=!1;Hu=kl&&(!document.documentMode||9<document.documentMode)}function Ec(){Ks&&(Ks.detachEvent("onpropertychange",Wu),ln=Ks=null)}function Wu(e){if(e.propertyName==="value"&&Wa(ln)){var t=[];zu(t,ln,e,ui(e)),wu(Rf,t)}}function Af(e,t,s){e==="focusin"?(Ec(),Ks=t,ln=s,Ks.attachEvent("onpropertychange",Wu)):e==="focusout"&&Ec()}function Ff(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wa(ln)}function Df(e,t){if(e==="click")return Wa(t)}function If(e,t){if(e==="input"||e==="change")return Wa(t)}function Of(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:Of;function on(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Xl.call(t,a)||!bt(e[a],t[a]))return!1}return!0}function _c(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pc(e,t){var s=_c(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=_c(s)}}function qu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vu(){for(var e=window,t=ha();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=ha(e.document)}return t}function vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $f(e){var t=Vu(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&qu(s.ownerDocument.documentElement,s)){if(n!==null&&vi(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Pc(s,l);var o=Pc(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Uf=$t&&"documentMode"in document&&11>=document.documentMode,Kr=null,yo=null,Gs=null,jo=!1;function Lc(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;jo||Kr==null||Kr!==ha(n)||(n=Kr,"selectionStart"in n&&vi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gs&&on(Gs,n)||(Gs=n,n=va(yo,"onSelect"),0<n.length&&(t=new gi("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Kr)))}function Un(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Gr={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionend:Un("Transition","TransitionEnd")},El={},Qu={};$t&&(Qu=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function qa(e){if(El[e])return El[e];if(!Gr[e])return e;var t=Gr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Qu)return El[e]=t[s];return e}var Ku=qa("animationend"),Gu=qa("animationiteration"),Ju=qa("animationstart"),Yu=qa("transitionend"),Xu=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(e,t){Xu.set(e,t),Fr(t,[e])}for(var _l=0;_l<Rc.length;_l++){var Pl=Rc[_l],Mf=Pl.toLowerCase(),Bf=Pl[0].toUpperCase()+Pl.slice(1);hr(Mf,"on"+Bf)}hr(Ku,"onAnimationEnd");hr(Gu,"onAnimationIteration");hr(Ju,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(Yu,"onTransitionEnd");cs("onMouseEnter",["mouseout","mouseover"]);cs("onMouseLeave",["mouseout","mouseover"]);cs("onPointerEnter",["pointerout","pointerover"]);cs("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zf=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Tc(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Up(n,t,void 0,e),e.currentTarget=null}function Zu(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;Tc(a,i,d),l=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;Tc(a,i,d),l=c}}}if(fa)throw e=po,fa=!1,po=null,e}function de(e,t){var s=t[So];s===void 0&&(s=t[So]=new Set);var n=e+"__bubble";s.has(n)||(em(t,e,2,!1),s.add(n))}function Ll(e,t,s){var n=0;t&&(n|=4),em(s,e,n,t)}var Mn="_reactListening"+Math.random().toString(36).slice(2);function cn(e){if(!e[Mn]){e[Mn]=!0,ou.forEach(function(s){s!=="selectionchange"&&(zf.has(s)||Ll(s,!1,e),Ll(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mn]||(t[Mn]=!0,Ll("selectionchange",!1,t))}}function em(e,t,s,n){switch(Ou(t)){case 1:var a=tf;break;case 4:a=rf;break;default:a=fi}s=a.bind(null,t,s,e),a=void 0,!ho||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Rl(e,t,s,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=vr(i),o===null)return;if(c=o.tag,c===5||c===6){n=l=o;continue e}i=i.parentNode}}n=n.return}wu(function(){var d=l,u=ui(s),x=[];e:{var p=Xu.get(e);if(p!==void 0){var N=gi,h=e;switch(e){case"keypress":if(ta(s)===0)break e;case"keydown":case"keyup":N=yf;break;case"focusin":h="focus",N=Sl;break;case"focusout":h="blur",N=Sl;break;case"beforeblur":case"afterblur":N=Sl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=bf;break;case Ku:case Gu:case Ju:N=cf;break;case Yu:N=wf;break;case"scroll":N=sf;break;case"wheel":N=kf;break;case"copy":case"cut":case"paste":N=uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Nc}var y=(t&4)!==0,j=!y&&e==="scroll",f=y?p!==null?p+"Capture":null:p;y=[];for(var g=d,m;g!==null;){m=g;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,f!==null&&(b=rn(g,f),b!=null&&y.push(dn(g,b,m)))),j)break;g=g.return}0<y.length&&(p=new N(p,h,null,s,u),x.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",p&&s!==uo&&(h=s.relatedTarget||s.fromElement)&&(vr(h)||h[Ut]))break e;if((N||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,N?(h=s.relatedTarget||s.toElement,N=d,h=h?vr(h):null,h!==null&&(j=Dr(h),h!==j||h.tag!==5&&h.tag!==6)&&(h=null)):(N=null,h=d),N!==h)){if(y=vc,b="onMouseLeave",f="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=Nc,b="onPointerLeave",f="onPointerEnter",g="pointer"),j=N==null?p:Jr(N),m=h==null?p:Jr(h),p=new y(b,g+"leave",N,s,u),p.target=j,p.relatedTarget=m,b=null,vr(u)===d&&(y=new y(f,g+"enter",h,s,u),y.target=m,y.relatedTarget=j,b=y),j=b,N&&h)t:{for(y=N,f=h,g=0,m=y;m;m=Mr(m))g++;for(m=0,b=f;b;b=Mr(b))m++;for(;0<g-m;)y=Mr(y),g--;for(;0<m-g;)f=Mr(f),m--;for(;g--;){if(y===f||f!==null&&y===f.alternate)break t;y=Mr(y),f=Mr(f)}y=null}else y=null;N!==null&&Ac(x,p,N,y,!1),h!==null&&j!==null&&Ac(x,j,h,y,!0)}}e:{if(p=d?Jr(d):window,N=p.nodeName&&p.nodeName.toLowerCase(),N==="select"||N==="input"&&p.type==="file")var S=Tf;else if(kc(p))if(Hu)S=If;else{S=Ff;var k=Af}else(N=p.nodeName)&&N.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Df);if(S&&(S=S(e,d))){zu(x,S,s,u);break e}k&&k(e,p,d),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&ao(p,"number",p.value)}switch(k=d?Jr(d):window,e){case"focusin":(kc(k)||k.contentEditable==="true")&&(Kr=k,yo=d,Gs=null);break;case"focusout":Gs=yo=Kr=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,Lc(x,s,u);break;case"selectionchange":if(Uf)break;case"keydown":case"keyup":Lc(x,s,u)}var w;if(ji)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Qr?Mu(e,s)&&(E="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(Uu&&s.locale!=="ko"&&(Qr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Qr&&(w=$u()):(Xt=u,xi="value"in Xt?Xt.value:Xt.textContent,Qr=!0)),k=va(d,E),0<k.length&&(E=new bc(E,e,null,s,u),x.push({event:E,listeners:k}),w?E.data=w:(w=Bu(s),w!==null&&(E.data=w)))),(w=Ef?_f(e,s):Pf(e,s))&&(d=va(d,"onBeforeInput"),0<d.length&&(u=new bc("onBeforeInput","beforeinput",null,s,u),x.push({event:u,listeners:d}),u.data=w))}Zu(x,t)})}function dn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function va(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=rn(e,s),l!=null&&n.unshift(dn(e,l,a)),l=rn(e,t),l!=null&&n.push(dn(e,l,a))),e=e.return}return n}function Mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ac(e,t,s,n,a){for(var l=t._reactName,o=[];s!==null&&s!==n;){var i=s,c=i.alternate,d=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&d!==null&&(i=d,a?(c=rn(s,l),c!=null&&o.unshift(dn(s,c,i))):a||(c=rn(s,l),c!=null&&o.push(dn(s,c,i)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Hf=/\r\n?/g,Wf=/\u0000|\uFFFD/g;function Fc(e){return(typeof e=="string"?e:""+e).replace(Hf,`
`).replace(Wf,"")}function Bn(e,t,s){if(t=Fc(t),Fc(e)!==t&&s)throw Error(I(425))}function ba(){}var vo=null,bo=null;function No(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var wo=typeof setTimeout=="function"?setTimeout:void 0,qf=typeof clearTimeout=="function"?clearTimeout:void 0,Dc=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof Dc<"u"?function(e){return Dc.resolve(null).then(e).catch(Qf)}:wo;function Qf(e){setTimeout(function(){throw e})}function Tl(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),an(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);an(t)}function nr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ic(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Et="__reactFiber$"+bs,un="__reactProps$"+bs,Ut="__reactContainer$"+bs,So="__reactEvents$"+bs,Kf="__reactListeners$"+bs,Gf="__reactHandles$"+bs;function vr(e){var t=e[Et];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ut]||s[Et]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Ic(e);e!==null;){if(s=e[Et])return s;e=Ic(e)}return t}e=s,s=e.parentNode}return null}function wn(e){return e=e[Et]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Va(e){return e[un]||null}var ko=[],Yr=-1;function pr(e){return{current:e}}function ue(e){0>Yr||(e.current=ko[Yr],ko[Yr]=null,Yr--)}function ce(e,t){Yr++,ko[Yr]=e.current,e.current=t}var ur={},ze=pr(ur),Xe=pr(!1),_r=ur;function ds(e,t){var s=e.type.contextTypes;if(!s)return ur;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in s)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ze(e){return e=e.childContextTypes,e!=null}function Na(){ue(Xe),ue(ze)}function Oc(e,t,s){if(ze.current!==ur)throw Error(I(168));ce(ze,t),ce(Xe,s)}function tm(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(I(108,Tp(e)||"Unknown",a));return ye({},s,n)}function wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ur,_r=ze.current,ce(ze,e),ce(Xe,Xe.current),!0}function $c(e,t,s){var n=e.stateNode;if(!n)throw Error(I(169));s?(e=tm(e,t,_r),n.__reactInternalMemoizedMergedChildContext=e,ue(Xe),ue(ze),ce(ze,e)):ue(Xe),ce(Xe,s)}var Ft=null,Qa=!1,Al=!1;function rm(e){Ft===null?Ft=[e]:Ft.push(e)}function Jf(e){Qa=!0,rm(e)}function fr(){if(!Al&&Ft!==null){Al=!0;var e=0,t=le;try{var s=Ft;for(le=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}Ft=null,Qa=!1}catch(a){throw Ft!==null&&(Ft=Ft.slice(e+1)),Eu(mi,fr),a}finally{le=t,Al=!1}}return null}var Xr=[],Zr=0,Sa=null,ka=0,ct=[],dt=0,Pr=null,Dt=1,It="";function gr(e,t){Xr[Zr++]=ka,Xr[Zr++]=Sa,Sa=e,ka=t}function sm(e,t,s){ct[dt++]=Dt,ct[dt++]=It,ct[dt++]=Pr,Pr=e;var n=Dt;e=It;var a=32-jt(n)-1;n&=~(1<<a),s+=1;var l=32-jt(t)+a;if(30<l){var o=a-a%5;l=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Dt=1<<32-jt(t)+a|s<<a|n,It=l+e}else Dt=1<<l|s<<a|n,It=e}function bi(e){e.return!==null&&(gr(e,1),sm(e,1,0))}function Ni(e){for(;e===Sa;)Sa=Xr[--Zr],Xr[Zr]=null,ka=Xr[--Zr],Xr[Zr]=null;for(;e===Pr;)Pr=ct[--dt],ct[dt]=null,It=ct[--dt],ct[dt]=null,Dt=ct[--dt],ct[dt]=null}var at=null,nt=null,he=!1,yt=null;function nm(e,t){var s=ut(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Uc(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,nt=nr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Pr!==null?{id:Dt,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ut(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,at=e,nt=null,!0):!1;default:return!1}}function Co(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eo(e){if(he){var t=nt;if(t){var s=t;if(!Uc(e,t)){if(Co(e))throw Error(I(418));t=nr(s.nextSibling);var n=at;t&&Uc(e,t)?nm(n,s):(e.flags=e.flags&-4097|2,he=!1,at=e)}}else{if(Co(e))throw Error(I(418));e.flags=e.flags&-4097|2,he=!1,at=e}}}function Mc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function zn(e){if(e!==at)return!1;if(!he)return Mc(e),he=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!No(e.type,e.memoizedProps)),t&&(t=nt)){if(Co(e))throw am(),Error(I(418));for(;t;)nm(e,t),t=nr(t.nextSibling)}if(Mc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){nt=nr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=at?nr(e.stateNode.nextSibling):null;return!0}function am(){for(var e=nt;e;)e=nr(e.nextSibling)}function us(){nt=at=null,he=!1}function wi(e){yt===null?yt=[e]:yt.push(e)}var Yf=Ht.ReactCurrentBatchConfig;function Fs(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(I(309));var n=s.stateNode}if(!n)throw Error(I(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(I(284));if(!s._owner)throw Error(I(290,e))}return e}function Hn(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bc(e){var t=e._init;return t(e._payload)}function lm(e){function t(f,g){if(e){var m=f.deletions;m===null?(f.deletions=[g],f.flags|=16):m.push(g)}}function s(f,g){if(!e)return null;for(;g!==null;)t(f,g),g=g.sibling;return null}function n(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function a(f,g){return f=ir(f,g),f.index=0,f.sibling=null,f}function l(f,g,m){return f.index=m,e?(m=f.alternate,m!==null?(m=m.index,m<g?(f.flags|=2,g):m):(f.flags|=2,g)):(f.flags|=1048576,g)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function i(f,g,m,b){return g===null||g.tag!==6?(g=Ml(m,f.mode,b),g.return=f,g):(g=a(g,m),g.return=f,g)}function c(f,g,m,b){var S=m.type;return S===Vr?u(f,g,m.props.children,b,m.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kt&&Bc(S)===g.type)?(b=a(g,m.props),b.ref=Fs(f,g,m),b.return=f,b):(b=ia(m.type,m.key,m.props,null,f.mode,b),b.ref=Fs(f,g,m),b.return=f,b)}function d(f,g,m,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=Bl(m,f.mode,b),g.return=f,g):(g=a(g,m.children||[]),g.return=f,g)}function u(f,g,m,b,S){return g===null||g.tag!==7?(g=kr(m,f.mode,b,S),g.return=f,g):(g=a(g,m),g.return=f,g)}function x(f,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ml(""+g,f.mode,m),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tn:return m=ia(g.type,g.key,g.props,null,f.mode,m),m.ref=Fs(f,null,g),m.return=f,m;case qr:return g=Bl(g,f.mode,m),g.return=f,g;case Kt:var b=g._init;return x(f,b(g._payload),m)}if(Ms(g)||Ps(g))return g=kr(g,f.mode,m,null),g.return=f,g;Hn(f,g)}return null}function p(f,g,m,b){var S=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return S!==null?null:i(f,g,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Tn:return m.key===S?c(f,g,m,b):null;case qr:return m.key===S?d(f,g,m,b):null;case Kt:return S=m._init,p(f,g,S(m._payload),b)}if(Ms(m)||Ps(m))return S!==null?null:u(f,g,m,b,null);Hn(f,m)}return null}function N(f,g,m,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return f=f.get(m)||null,i(g,f,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tn:return f=f.get(b.key===null?m:b.key)||null,c(g,f,b,S);case qr:return f=f.get(b.key===null?m:b.key)||null,d(g,f,b,S);case Kt:var k=b._init;return N(f,g,m,k(b._payload),S)}if(Ms(b)||Ps(b))return f=f.get(m)||null,u(g,f,b,S,null);Hn(g,b)}return null}function h(f,g,m,b){for(var S=null,k=null,w=g,E=g=0,R=null;w!==null&&E<m.length;E++){w.index>E?(R=w,w=null):R=w.sibling;var F=p(f,w,m[E],b);if(F===null){w===null&&(w=R);break}e&&w&&F.alternate===null&&t(f,w),g=l(F,g,E),k===null?S=F:k.sibling=F,k=F,w=R}if(E===m.length)return s(f,w),he&&gr(f,E),S;if(w===null){for(;E<m.length;E++)w=x(f,m[E],b),w!==null&&(g=l(w,g,E),k===null?S=w:k.sibling=w,k=w);return he&&gr(f,E),S}for(w=n(f,w);E<m.length;E++)R=N(w,f,E,m[E],b),R!==null&&(e&&R.alternate!==null&&w.delete(R.key===null?E:R.key),g=l(R,g,E),k===null?S=R:k.sibling=R,k=R);return e&&w.forEach(function(O){return t(f,O)}),he&&gr(f,E),S}function y(f,g,m,b){var S=Ps(m);if(typeof S!="function")throw Error(I(150));if(m=S.call(m),m==null)throw Error(I(151));for(var k=S=null,w=g,E=g=0,R=null,F=m.next();w!==null&&!F.done;E++,F=m.next()){w.index>E?(R=w,w=null):R=w.sibling;var O=p(f,w,F.value,b);if(O===null){w===null&&(w=R);break}e&&w&&O.alternate===null&&t(f,w),g=l(O,g,E),k===null?S=O:k.sibling=O,k=O,w=R}if(F.done)return s(f,w),he&&gr(f,E),S;if(w===null){for(;!F.done;E++,F=m.next())F=x(f,F.value,b),F!==null&&(g=l(F,g,E),k===null?S=F:k.sibling=F,k=F);return he&&gr(f,E),S}for(w=n(f,w);!F.done;E++,F=m.next())F=N(w,f,E,F.value,b),F!==null&&(e&&F.alternate!==null&&w.delete(F.key===null?E:F.key),g=l(F,g,E),k===null?S=F:k.sibling=F,k=F);return e&&w.forEach(function(W){return t(f,W)}),he&&gr(f,E),S}function j(f,g,m,b){if(typeof m=="object"&&m!==null&&m.type===Vr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Tn:e:{for(var S=m.key,k=g;k!==null;){if(k.key===S){if(S=m.type,S===Vr){if(k.tag===7){s(f,k.sibling),g=a(k,m.props.children),g.return=f,f=g;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kt&&Bc(S)===k.type){s(f,k.sibling),g=a(k,m.props),g.ref=Fs(f,k,m),g.return=f,f=g;break e}s(f,k);break}else t(f,k);k=k.sibling}m.type===Vr?(g=kr(m.props.children,f.mode,b,m.key),g.return=f,f=g):(b=ia(m.type,m.key,m.props,null,f.mode,b),b.ref=Fs(f,g,m),b.return=f,f=b)}return o(f);case qr:e:{for(k=m.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){s(f,g.sibling),g=a(g,m.children||[]),g.return=f,f=g;break e}else{s(f,g);break}else t(f,g);g=g.sibling}g=Bl(m,f.mode,b),g.return=f,f=g}return o(f);case Kt:return k=m._init,j(f,g,k(m._payload),b)}if(Ms(m))return h(f,g,m,b);if(Ps(m))return y(f,g,m,b);Hn(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(s(f,g.sibling),g=a(g,m),g.return=f,f=g):(s(f,g),g=Ml(m,f.mode,b),g.return=f,f=g),o(f)):s(f,g)}return j}var ms=lm(!0),om=lm(!1),Ca=pr(null),Ea=null,es=null,Si=null;function ki(){Si=es=Ea=null}function Ci(e){var t=Ca.current;ue(Ca),e._currentValue=t}function _o(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function os(e,t){Ea=e,Si=es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},es===null){if(Ea===null)throw Error(I(308));es=e,Ea.dependencies={lanes:0,firstContext:e}}else es=es.next=e;return t}var br=null;function Ei(e){br===null?br=[e]:br.push(e)}function im(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Ei(t)):(s.next=a.next,a.next=s),t.interleaved=s,Mt(e,n)}function Mt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Gt=!1;function _i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ot(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ar(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,se&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Mt(e,s)}return a=n.interleaved,a===null?(t.next=t,Ei(n)):(t.next=a.next,a.next=t),n.interleaved=t,Mt(e,s)}function ra(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,hi(e,s)}}function zc(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?a=l=o:l=l.next=o,s=s.next}while(s!==null);l===null?a=l=t:l=l.next=t}else a=l=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function _a(e,t,s,n){var a=e.updateQueue;Gt=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==o&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(l!==null){var x=a.baseState;o=0,u=d=c=null,i=l;do{var p=i.lane,N=i.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:N,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,y=i;switch(p=t,N=s,y.tag){case 1:if(h=y.payload,typeof h=="function"){x=h.call(N,x,p);break e}x=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=y.payload,p=typeof h=="function"?h.call(N,x,p):h,p==null)break e;x=ye({},x,p);break e;case 2:Gt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[i]:p.push(i))}else N={eventTime:N,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=N,c=x):u=u.next=N,o|=p;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;p=i,i=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=x),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Rr|=o,e.lanes=o,e.memoizedState=x}}function Hc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(I(191,a));a.call(n)}}}var Sn={},Pt=pr(Sn),mn=pr(Sn),hn=pr(Sn);function Nr(e){if(e===Sn)throw Error(I(174));return e}function Pi(e,t){switch(ce(hn,t),ce(mn,e),ce(Pt,Sn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oo(t,e)}ue(Pt),ce(Pt,t)}function hs(){ue(Pt),ue(mn),ue(hn)}function dm(e){Nr(hn.current);var t=Nr(Pt.current),s=oo(t,e.type);t!==s&&(ce(mn,e),ce(Pt,s))}function Li(e){mn.current===e&&(ue(Pt),ue(mn))}var fe=pr(0);function Pa(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fl=[];function Ri(){for(var e=0;e<Fl.length;e++)Fl[e]._workInProgressVersionPrimary=null;Fl.length=0}var sa=Ht.ReactCurrentDispatcher,Dl=Ht.ReactCurrentBatchConfig,Lr=0,xe=null,_e=null,Te=null,La=!1,Js=!1,pn=0,Xf=0;function Oe(){throw Error(I(321))}function Ti(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!bt(e[s],t[s]))return!1;return!0}function Ai(e,t,s,n,a,l){if(Lr=l,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=e===null||e.memoizedState===null?rx:sx,e=s(n,a),Js){l=0;do{if(Js=!1,pn=0,25<=l)throw Error(I(301));l+=1,Te=_e=null,t.updateQueue=null,sa.current=nx,e=s(n,a)}while(Js)}if(sa.current=Ra,t=_e!==null&&_e.next!==null,Lr=0,Te=_e=xe=null,La=!1,t)throw Error(I(300));return e}function Fi(){var e=pn!==0;return pn=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?xe.memoizedState=Te=e:Te=Te.next=e,Te}function pt(){if(_e===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=_e.next;var t=Te===null?xe.memoizedState:Te.next;if(t!==null)Te=t,_e=e;else{if(e===null)throw Error(I(310));_e=e,e={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Te===null?xe.memoizedState=Te=e:Te=Te.next=e}return Te}function fn(e,t){return typeof t=="function"?t(e):t}function Il(e){var t=pt(),s=t.queue;if(s===null)throw Error(I(311));s.lastRenderedReducer=e;var n=_e,a=n.baseQueue,l=s.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}n.baseQueue=a=l,s.pending=null}if(a!==null){l=a.next,n=n.baseState;var i=o=null,c=null,d=l;do{var u=d.lane;if((Lr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var x={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=x,o=n):c=c.next=x,xe.lanes|=u,Rr|=u}d=d.next}while(d!==null&&d!==l);c===null?o=n:c.next=i,bt(n,t.memoizedState)||(Ye=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do l=a.lane,xe.lanes|=l,Rr|=l,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ol(e){var t=pt(),s=t.queue;if(s===null)throw Error(I(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,l=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);bt(l,t.memoizedState)||(Ye=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,n]}function um(){}function mm(e,t){var s=xe,n=pt(),a=t(),l=!bt(n.memoizedState,a);if(l&&(n.memoizedState=a,Ye=!0),n=n.queue,Di(fm.bind(null,s,n,e),[e]),n.getSnapshot!==t||l||Te!==null&&Te.memoizedState.tag&1){if(s.flags|=2048,xn(9,pm.bind(null,s,n,a,t),void 0,null),Ae===null)throw Error(I(349));Lr&30||hm(s,t,a)}return a}function hm(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function pm(e,t,s,n){t.value=s,t.getSnapshot=n,xm(t)&&gm(e)}function fm(e,t,s){return s(function(){xm(t)&&gm(e)})}function xm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!bt(e,s)}catch{return!0}}function gm(e){var t=Mt(e,1);t!==null&&vt(t,e,1,-1)}function Wc(e){var t=Ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fn,lastRenderedState:e},t.queue=e,e=e.dispatch=tx.bind(null,xe,e),[t.memoizedState,e]}function xn(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function ym(){return pt().memoizedState}function na(e,t,s,n){var a=Ct();xe.flags|=e,a.memoizedState=xn(1|t,s,void 0,n===void 0?null:n)}function Ka(e,t,s,n){var a=pt();n=n===void 0?null:n;var l=void 0;if(_e!==null){var o=_e.memoizedState;if(l=o.destroy,n!==null&&Ti(n,o.deps)){a.memoizedState=xn(t,s,l,n);return}}xe.flags|=e,a.memoizedState=xn(1|t,s,l,n)}function qc(e,t){return na(8390656,8,e,t)}function Di(e,t){return Ka(2048,8,e,t)}function jm(e,t){return Ka(4,2,e,t)}function vm(e,t){return Ka(4,4,e,t)}function bm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nm(e,t,s){return s=s!=null?s.concat([e]):null,Ka(4,4,bm.bind(null,t,e),s)}function Ii(){}function wm(e,t){var s=pt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Ti(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Sm(e,t){var s=pt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Ti(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function km(e,t,s){return Lr&21?(bt(s,t)||(s=Lu(),xe.lanes|=s,Rr|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=s)}function Zf(e,t){var s=le;le=s!==0&&4>s?s:4,e(!0);var n=Dl.transition;Dl.transition={};try{e(!1),t()}finally{le=s,Dl.transition=n}}function Cm(){return pt().memoizedState}function ex(e,t,s){var n=or(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Em(e))_m(t,s);else if(s=im(e,t,s,n),s!==null){var a=Ve();vt(s,e,n,a),Pm(s,t,n)}}function tx(e,t,s){var n=or(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Em(e))_m(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,s);if(a.hasEagerState=!0,a.eagerState=i,bt(i,o)){var c=t.interleaved;c===null?(a.next=a,Ei(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=im(e,t,a,n),s!==null&&(a=Ve(),vt(s,e,n,a),Pm(s,t,n))}}function Em(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function _m(e,t){Js=La=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Pm(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,hi(e,s)}}var Ra={readContext:ht,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},rx={readContext:ht,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:qc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,na(4194308,4,bm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return na(4194308,4,e,t)},useInsertionEffect:function(e,t){return na(4,2,e,t)},useMemo:function(e,t){var s=Ct();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Ct();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ex.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:Wc,useDebugValue:Ii,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=Wc(!1),t=e[0];return e=Zf.bind(null,e[1]),Ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=xe,a=Ct();if(he){if(s===void 0)throw Error(I(407));s=s()}else{if(s=t(),Ae===null)throw Error(I(349));Lr&30||hm(n,t,s)}a.memoizedState=s;var l={value:s,getSnapshot:t};return a.queue=l,qc(fm.bind(null,n,l,e),[e]),n.flags|=2048,xn(9,pm.bind(null,n,l,s,t),void 0,null),s},useId:function(){var e=Ct(),t=Ae.identifierPrefix;if(he){var s=It,n=Dt;s=(n&~(1<<32-jt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=pn++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Xf++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sx={readContext:ht,useCallback:wm,useContext:ht,useEffect:Di,useImperativeHandle:Nm,useInsertionEffect:jm,useLayoutEffect:vm,useMemo:Sm,useReducer:Il,useRef:ym,useState:function(){return Il(fn)},useDebugValue:Ii,useDeferredValue:function(e){var t=pt();return km(t,_e.memoizedState,e)},useTransition:function(){var e=Il(fn)[0],t=pt().memoizedState;return[e,t]},useMutableSource:um,useSyncExternalStore:mm,useId:Cm,unstable_isNewReconciler:!1},nx={readContext:ht,useCallback:wm,useContext:ht,useEffect:Di,useImperativeHandle:Nm,useInsertionEffect:jm,useLayoutEffect:vm,useMemo:Sm,useReducer:Ol,useRef:ym,useState:function(){return Ol(fn)},useDebugValue:Ii,useDeferredValue:function(e){var t=pt();return _e===null?t.memoizedState=e:km(t,_e.memoizedState,e)},useTransition:function(){var e=Ol(fn)[0],t=pt().memoizedState;return[e,t]},useMutableSource:um,useSyncExternalStore:mm,useId:Cm,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Po(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:ye({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ga={isMounted:function(e){return(e=e._reactInternals)?Dr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Ve(),a=or(e),l=Ot(n,a);l.payload=t,s!=null&&(l.callback=s),t=ar(e,l,a),t!==null&&(vt(t,e,a,n),ra(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Ve(),a=or(e),l=Ot(n,a);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=ar(e,l,a),t!==null&&(vt(t,e,a,n),ra(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ve(),n=or(e),a=Ot(s,n);a.tag=2,t!=null&&(a.callback=t),t=ar(e,a,n),t!==null&&(vt(t,e,n,s),ra(t,e,n))}};function Vc(e,t,s,n,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,o):t.prototype&&t.prototype.isPureReactComponent?!on(s,n)||!on(a,l):!0}function Lm(e,t,s){var n=!1,a=ur,l=t.contextType;return typeof l=="object"&&l!==null?l=ht(l):(a=Ze(t)?_r:ze.current,n=t.contextTypes,l=(n=n!=null)?ds(e,a):ur),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ga,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Qc(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Ga.enqueueReplaceState(t,t.state,null)}function Lo(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},_i(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=ht(l):(l=Ze(t)?_r:ze.current,a.context=ds(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Po(e,t,l,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ga.enqueueReplaceState(a,a.state,null),_a(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ps(e,t){try{var s="",n=t;do s+=Rp(n),n=n.return;while(n);var a=s}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function $l(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ro(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ax=typeof WeakMap=="function"?WeakMap:Map;function Rm(e,t,s){s=Ot(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Aa||(Aa=!0,Bo=n),Ro(e,t)},s}function Tm(e,t,s){s=Ot(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Ro(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Ro(e,t),typeof n!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Kc(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new ax;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=jx.bind(null,e,t,s),t.then(e,e))}function Gc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jc(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Ot(-1,1),t.tag=2,ar(s,t,1))),s.lanes|=1),e)}var lx=Ht.ReactCurrentOwner,Ye=!1;function qe(e,t,s,n){t.child=e===null?om(t,null,s,n):ms(t,e.child,s,n)}function Yc(e,t,s,n,a){s=s.render;var l=t.ref;return os(t,a),n=Ai(e,t,s,n,l,a),s=Fi(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bt(e,t,a)):(he&&s&&bi(t),t.flags|=1,qe(e,t,n,a),t.child)}function Xc(e,t,s,n,a){if(e===null){var l=s.type;return typeof l=="function"&&!Wi(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,Am(e,t,l,n,a)):(e=ia(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(s=s.compare,s=s!==null?s:on,s(o,n)&&e.ref===t.ref)return Bt(e,t,a)}return t.flags|=1,e=ir(l,n),e.ref=t.ref,e.return=t,t.child=e}function Am(e,t,s,n,a){if(e!==null){var l=e.memoizedProps;if(on(l,n)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,Bt(e,t,a)}return To(e,t,s,n,a)}function Fm(e,t,s){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(rs,st),st|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ce(rs,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:s,ce(rs,st),st|=n}else l!==null?(n=l.baseLanes|s,t.memoizedState=null):n=s,ce(rs,st),st|=n;return qe(e,t,a,s),t.child}function Dm(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,s,n,a){var l=Ze(s)?_r:ze.current;return l=ds(t,l),os(t,a),s=Ai(e,t,s,n,l,a),n=Fi(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bt(e,t,a)):(he&&n&&bi(t),t.flags|=1,qe(e,t,s,a),t.child)}function Zc(e,t,s,n,a){if(Ze(s)){var l=!0;wa(t)}else l=!1;if(os(t,a),t.stateNode===null)aa(e,t),Lm(t,s,n),Lo(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=ht(d):(d=Ze(s)?_r:ze.current,d=ds(t,d));var u=s.getDerivedStateFromProps,x=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";x||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==d)&&Qc(t,o,n,d),Gt=!1;var p=t.memoizedState;o.state=p,_a(t,n,o,a),c=t.memoizedState,i!==n||p!==c||Xe.current||Gt?(typeof u=="function"&&(Po(t,s,u,n),c=t.memoizedState),(i=Gt||Vc(t,s,i,n,p,c,d))?(x||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,cm(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:xt(t.type,i),o.props=d,x=t.pendingProps,p=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=Ze(s)?_r:ze.current,c=ds(t,c));var N=s.getDerivedStateFromProps;(u=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==x||p!==c)&&Qc(t,o,n,c),Gt=!1,p=t.memoizedState,o.state=p,_a(t,n,o,a);var h=t.memoizedState;i!==x||p!==h||Xe.current||Gt?(typeof N=="function"&&(Po(t,s,N,n),h=t.memoizedState),(d=Gt||Vc(t,s,d,n,p,h,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,h,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,h,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Ao(e,t,s,n,l,a)}function Ao(e,t,s,n,a,l){Dm(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&$c(t,s,!1),Bt(e,t,l);n=t.stateNode,lx.current=t;var i=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ms(t,e.child,null,l),t.child=ms(t,null,i,l)):qe(e,t,i,l),t.memoizedState=n.state,a&&$c(t,s,!0),t.child}function Im(e){var t=e.stateNode;t.pendingContext?Oc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Oc(e,t.context,!1),Pi(e,t.containerInfo)}function ed(e,t,s,n,a){return us(),wi(a),t.flags|=256,qe(e,t,s,n),t.child}var Fo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Om(e,t,s){var n=t.pendingProps,a=fe.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ce(fe,a&1),e===null)return Eo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Xa(o,n,0,null),e=kr(e,n,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Do(s),t.memoizedState=Fo,e):Oi(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return ox(e,t,o,n,i,a,s);if(l){l=n.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ir(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=ir(i,l):(l=kr(l,o,s,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=e.child.memoizedState,o=o===null?Do(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Fo,n}return l=e.child,e=l.sibling,n=ir(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Oi(e,t){return t=Xa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wn(e,t,s,n){return n!==null&&wi(n),ms(t,e.child,null,s),e=Oi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ox(e,t,s,n,a,l,o){if(s)return t.flags&256?(t.flags&=-257,n=$l(Error(I(422))),Wn(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Xa({mode:"visible",children:n.children},a,0,null),l=kr(l,a,o,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&ms(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Fo,l);if(!(t.mode&1))return Wn(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(I(419)),n=$l(l,n,void 0),Wn(e,t,o,n)}if(i=(o&e.childLanes)!==0,Ye||i){if(n=Ae,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,Mt(e,a),vt(n,e,a,-1))}return Hi(),n=$l(Error(I(421))),Wn(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=vx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,nt=nr(a.nextSibling),at=t,he=!0,yt=null,e!==null&&(ct[dt++]=Dt,ct[dt++]=It,ct[dt++]=Pr,Dt=e.id,It=e.overflow,Pr=t),t=Oi(t,n.children),t.flags|=4096,t)}function td(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),_o(e.return,t,s)}function Ul(e,t,s,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=s,l.tailMode=a)}function $m(e,t,s){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(qe(e,t,n.children,s),n=fe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&td(e,s,t);else if(e.tag===19)td(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ce(fe,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Pa(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Ul(t,!1,a,s,l);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Pa(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Ul(t,!0,s,null,l);break;case"together":Ul(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Rr|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,s=ir(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=ir(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ix(e,t,s){switch(t.tag){case 3:Im(t),us();break;case 5:dm(t);break;case 1:Ze(t.type)&&wa(t);break;case 4:Pi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ce(Ca,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ce(fe,fe.current&1),t.flags|=128,null):s&t.child.childLanes?Om(e,t,s):(ce(fe,fe.current&1),e=Bt(e,t,s),e!==null?e.sibling:null);ce(fe,fe.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return $m(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ce(fe,fe.current),n)break;return null;case 22:case 23:return t.lanes=0,Fm(e,t,s)}return Bt(e,t,s)}var Um,Io,Mm,Bm;Um=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Io=function(){};Mm=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Nr(Pt.current);var l=null;switch(s){case"input":a=so(e,a),n=so(e,n),l=[];break;case"select":a=ye({},a,{value:void 0}),n=ye({},n,{value:void 0}),l=[];break;case"textarea":a=lo(e,a),n=lo(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ba)}io(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(en.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(i=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(l||(l=[]),l.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(en.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&de("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}s&&(l=l||[]).push("style",s);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Bm=function(e,t,s,n){s!==n&&(t.flags|=4)};function Ds(e,t){if(!he)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function cx(e,t,s){var n=t.pendingProps;switch(Ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return Ze(t.type)&&Na(),$e(t),null;case 3:return n=t.stateNode,hs(),ue(Xe),ue(ze),Ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(zn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(Wo(yt),yt=null))),Io(e,t),$e(t),null;case 5:Li(t);var a=Nr(hn.current);if(s=t.type,e!==null&&t.stateNode!=null)Mm(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(I(166));return $e(t),null}if(e=Nr(Pt.current),zn(t)){n=t.stateNode,s=t.type;var l=t.memoizedProps;switch(n[Et]=t,n[un]=l,e=(t.mode&1)!==0,s){case"dialog":de("cancel",n),de("close",n);break;case"iframe":case"object":case"embed":de("load",n);break;case"video":case"audio":for(a=0;a<zs.length;a++)de(zs[a],n);break;case"source":de("error",n);break;case"img":case"image":case"link":de("error",n),de("load",n);break;case"details":de("toggle",n);break;case"input":dc(n,l),de("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},de("invalid",n);break;case"textarea":mc(n,l),de("invalid",n)}io(s,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&Bn(n.textContent,i,e),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Bn(n.textContent,i,e),a=["children",""+i]):en.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&de("scroll",n)}switch(s){case"input":An(n),uc(n,l,!0);break;case"textarea":An(n),hc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ba)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Et]=t,e[un]=n,Um(e,t,!1,!1),t.stateNode=e;e:{switch(o=co(s,n),s){case"dialog":de("cancel",e),de("close",e),a=n;break;case"iframe":case"object":case"embed":de("load",e),a=n;break;case"video":case"audio":for(a=0;a<zs.length;a++)de(zs[a],e);a=n;break;case"source":de("error",e),a=n;break;case"img":case"image":case"link":de("error",e),de("load",e),a=n;break;case"details":de("toggle",e),a=n;break;case"input":dc(e,n),a=so(e,n),de("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ye({},n,{value:void 0}),de("invalid",e);break;case"textarea":mc(e,n),a=lo(e,n),de("invalid",e);break;default:a=n}io(s,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?yu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xu(e,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&tn(e,c):typeof c=="number"&&tn(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(en.hasOwnProperty(l)?c!=null&&l==="onScroll"&&de("scroll",e):c!=null&&oi(e,l,c,o))}switch(s){case"input":An(e),uc(e,n,!1);break;case"textarea":An(e),hc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+dr(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?ss(e,!!n.multiple,l,!1):n.defaultValue!=null&&ss(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ba)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)Bm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));if(s=Nr(hn.current),Nr(Pt.current),zn(t)){if(n=t.stateNode,s=t.memoizedProps,n[Et]=t,(l=n.nodeValue!==s)&&(e=at,e!==null))switch(e.tag){case 3:Bn(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bn(n.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Et]=t,t.stateNode=n}return $e(t),null;case 13:if(ue(fe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(he&&nt!==null&&t.mode&1&&!(t.flags&128))am(),us(),t.flags|=98560,l=!1;else if(l=zn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[Et]=t}else us(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),l=!1}else yt!==null&&(Wo(yt),yt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?Pe===0&&(Pe=3):Hi())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return hs(),Io(e,t),e===null&&cn(t.stateNode.containerInfo),$e(t),null;case 10:return Ci(t.type._context),$e(t),null;case 17:return Ze(t.type)&&Na(),$e(t),null;case 19:if(ue(fe),l=t.memoizedState,l===null)return $e(t),null;if(n=(t.flags&128)!==0,o=l.rendering,o===null)if(n)Ds(l,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Pa(e),o!==null){for(t.flags|=128,Ds(l,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)l=s,e=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ce(fe,fe.current&1|2),t.child}e=e.sibling}l.tail!==null&&ke()>fs&&(t.flags|=128,n=!0,Ds(l,!1),t.lanes=4194304)}else{if(!n)if(e=Pa(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ds(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!he)return $e(t),null}else 2*ke()-l.renderingStartTime>fs&&s!==1073741824&&(t.flags|=128,n=!0,Ds(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ke(),t.sibling=null,s=fe.current,ce(fe,n?s&1|2:s&1),t):($e(t),null);case 22:case 23:return zi(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?st&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function dx(e,t){switch(Ni(t),t.tag){case 1:return Ze(t.type)&&Na(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hs(),ue(Xe),ue(ze),Ri(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Li(t),null;case 13:if(ue(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(fe),null;case 4:return hs(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return zi(),null;case 24:return null;default:return null}}var qn=!1,Me=!1,ux=typeof WeakSet=="function"?WeakSet:Set,H=null;function ts(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ne(e,t,n)}else s.current=null}function Oo(e,t,s){try{s()}catch(n){Ne(e,t,n)}}var rd=!1;function mx(e,t){if(vo=ya,e=Vu(),vi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var o=0,i=-1,c=-1,d=0,u=0,x=e,p=null;t:for(;;){for(var N;x!==s||a!==0&&x.nodeType!==3||(i=o+a),x!==l||n!==0&&x.nodeType!==3||(c=o+n),x.nodeType===3&&(o+=x.nodeValue.length),(N=x.firstChild)!==null;)p=x,x=N;for(;;){if(x===e)break t;if(p===s&&++d===a&&(i=o),p===l&&++u===n&&(c=o),(N=x.nextSibling)!==null)break;x=p,p=x.parentNode}x=N}s=i===-1||c===-1?null:{start:i,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(bo={focusedElem:e,selectionRange:s},ya=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var y=h.memoizedProps,j=h.memoizedState,f=t.stateNode,g=f.getSnapshotBeforeUpdate(t.elementType===t.type?y:xt(t.type,y),j);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(b){Ne(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return h=rd,rd=!1,h}function Ys(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Oo(t,s,l)}a=a.next}while(a!==n)}}function Ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function $o(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function zm(e){var t=e.alternate;t!==null&&(e.alternate=null,zm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Et],delete t[un],delete t[So],delete t[Kf],delete t[Gf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hm(e){return e.tag===5||e.tag===3||e.tag===4}function sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ba));else if(n!==4&&(e=e.child,e!==null))for(Uo(e,t,s),e=e.sibling;e!==null;)Uo(e,t,s),e=e.sibling}function Mo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Mo(e,t,s),e=e.sibling;e!==null;)Mo(e,t,s),e=e.sibling}var Fe=null,gt=!1;function Qt(e,t,s){for(s=s.child;s!==null;)Wm(e,t,s),s=s.sibling}function Wm(e,t,s){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(za,s)}catch{}switch(s.tag){case 5:Me||ts(s,t);case 6:var n=Fe,a=gt;Fe=null,Qt(e,t,s),Fe=n,gt=a,Fe!==null&&(gt?(e=Fe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Fe.removeChild(s.stateNode));break;case 18:Fe!==null&&(gt?(e=Fe,s=s.stateNode,e.nodeType===8?Tl(e.parentNode,s):e.nodeType===1&&Tl(e,s),an(e)):Tl(Fe,s.stateNode));break;case 4:n=Fe,a=gt,Fe=s.stateNode.containerInfo,gt=!0,Qt(e,t,s),Fe=n,gt=a;break;case 0:case 11:case 14:case 15:if(!Me&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Oo(s,t,o),a=a.next}while(a!==n)}Qt(e,t,s);break;case 1:if(!Me&&(ts(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(i){Ne(s,t,i)}Qt(e,t,s);break;case 21:Qt(e,t,s);break;case 22:s.mode&1?(Me=(n=Me)||s.memoizedState!==null,Qt(e,t,s),Me=n):Qt(e,t,s);break;default:Qt(e,t,s)}}function nd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new ux),t.forEach(function(n){var a=bx.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function ft(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:Fe=i.stateNode,gt=!1;break e;case 3:Fe=i.stateNode.containerInfo,gt=!0;break e;case 4:Fe=i.stateNode.containerInfo,gt=!0;break e}i=i.return}if(Fe===null)throw Error(I(160));Wm(l,o,a),Fe=null,gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ne(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qm(t,e),t=t.sibling}function qm(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),St(e),n&4){try{Ys(3,e,e.return),Ja(3,e)}catch(y){Ne(e,e.return,y)}try{Ys(5,e,e.return)}catch(y){Ne(e,e.return,y)}}break;case 1:ft(t,e),St(e),n&512&&s!==null&&ts(s,s.return);break;case 5:if(ft(t,e),St(e),n&512&&s!==null&&ts(s,s.return),e.flags&32){var a=e.stateNode;try{tn(a,"")}catch(y){Ne(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=s!==null?s.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&hu(a,l),co(i,o);var d=co(i,l);for(o=0;o<c.length;o+=2){var u=c[o],x=c[o+1];u==="style"?yu(a,x):u==="dangerouslySetInnerHTML"?xu(a,x):u==="children"?tn(a,x):oi(a,u,x,d)}switch(i){case"input":no(a,l);break;case"textarea":pu(a,l);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?ss(a,!!l.multiple,N,!1):p!==!!l.multiple&&(l.defaultValue!=null?ss(a,!!l.multiple,l.defaultValue,!0):ss(a,!!l.multiple,l.multiple?[]:"",!1))}a[un]=l}catch(y){Ne(e,e.return,y)}}break;case 6:if(ft(t,e),St(e),n&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){Ne(e,e.return,y)}}break;case 3:if(ft(t,e),St(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{an(t.containerInfo)}catch(y){Ne(e,e.return,y)}break;case 4:ft(t,e),St(e);break;case 13:ft(t,e),St(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Mi=ke())),n&4&&nd(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Me=(d=Me)||u,ft(t,e),Me=d):ft(t,e),St(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(H=e,u=e.child;u!==null;){for(x=H=u;H!==null;){switch(p=H,N=p.child,p.tag){case 0:case 11:case 14:case 15:Ys(4,p,p.return);break;case 1:ts(p,p.return);var h=p.stateNode;if(typeof h.componentWillUnmount=="function"){n=p,s=p.return;try{t=n,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(y){Ne(n,s,y)}}break;case 5:ts(p,p.return);break;case 22:if(p.memoizedState!==null){ld(x);continue}}N!==null?(N.return=p,H=N):ld(x)}u=u.sibling}e:for(u=null,x=e;;){if(x.tag===5){if(u===null){u=x;try{a=x.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=x.stateNode,c=x.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=gu("display",o))}catch(y){Ne(e,e.return,y)}}}else if(x.tag===6){if(u===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(y){Ne(e,e.return,y)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;u===x&&(u=null),x=x.return}u===x&&(u=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:ft(t,e),St(e),n&4&&nd(e);break;case 21:break;default:ft(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Hm(s)){var n=s;break e}s=s.return}throw Error(I(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(tn(a,""),n.flags&=-33);var l=sd(e);Mo(e,l,a);break;case 3:case 4:var o=n.stateNode.containerInfo,i=sd(e);Uo(e,i,o);break;default:throw Error(I(161))}}catch(c){Ne(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hx(e,t,s){H=e,Vm(e)}function Vm(e,t,s){for(var n=(e.mode&1)!==0;H!==null;){var a=H,l=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||qn;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||Me;i=qn;var d=Me;if(qn=o,(Me=c)&&!d)for(H=a;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?od(a):c!==null?(c.return=o,H=c):od(a);for(;l!==null;)H=l,Vm(l),l=l.sibling;H=a,qn=i,Me=d}ad(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,H=l):ad(e)}}function ad(e){for(;H!==null;){var t=H;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Me||Ja(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Me)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:xt(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Hc(t,l,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Hc(t,o,s)}break;case 5:var i=t.stateNode;if(s===null&&t.flags&4){s=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var x=u.dehydrated;x!==null&&an(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Me||t.flags&512&&$o(t)}catch(p){Ne(t,t.return,p)}}if(t===e){H=null;break}if(s=t.sibling,s!==null){s.return=t.return,H=s;break}H=t.return}}function ld(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var s=t.sibling;if(s!==null){s.return=t.return,H=s;break}H=t.return}}function od(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ja(4,t)}catch(c){Ne(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ne(t,a,c)}}var l=t.return;try{$o(t)}catch(c){Ne(t,l,c)}break;case 5:var o=t.return;try{$o(t)}catch(c){Ne(t,o,c)}}}catch(c){Ne(t,t.return,c)}if(t===e){H=null;break}var i=t.sibling;if(i!==null){i.return=t.return,H=i;break}H=t.return}}var px=Math.ceil,Ta=Ht.ReactCurrentDispatcher,$i=Ht.ReactCurrentOwner,mt=Ht.ReactCurrentBatchConfig,se=0,Ae=null,Ce=null,De=0,st=0,rs=pr(0),Pe=0,gn=null,Rr=0,Ya=0,Ui=0,Xs=null,Je=null,Mi=0,fs=1/0,At=null,Aa=!1,Bo=null,lr=null,Vn=!1,Zt=null,Fa=0,Zs=0,zo=null,la=-1,oa=0;function Ve(){return se&6?ke():la!==-1?la:la=ke()}function or(e){return e.mode&1?se&2&&De!==0?De&-De:Yf.transition!==null?(oa===0&&(oa=Lu()),oa):(e=le,e!==0||(e=window.event,e=e===void 0?16:Ou(e.type)),e):1}function vt(e,t,s,n){if(50<Zs)throw Zs=0,zo=null,Error(I(185));bn(e,s,n),(!(se&2)||e!==Ae)&&(e===Ae&&(!(se&2)&&(Ya|=s),Pe===4&&Yt(e,De)),et(e,n),s===1&&se===0&&!(t.mode&1)&&(fs=ke()+500,Qa&&fr()))}function et(e,t){var s=e.callbackNode;Jp(e,t);var n=ga(e,e===Ae?De:0);if(n===0)s!==null&&xc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&xc(s),t===1)e.tag===0?Jf(id.bind(null,e)):rm(id.bind(null,e)),Vf(function(){!(se&6)&&fr()}),s=null;else{switch(Ru(n)){case 1:s=mi;break;case 4:s=_u;break;case 16:s=xa;break;case 536870912:s=Pu;break;default:s=xa}s=eh(s,Qm.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Qm(e,t){if(la=-1,oa=0,se&6)throw Error(I(327));var s=e.callbackNode;if(is()&&e.callbackNode!==s)return null;var n=ga(e,e===Ae?De:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Da(e,n);else{t=n;var a=se;se|=2;var l=Gm();(Ae!==e||De!==t)&&(At=null,fs=ke()+500,Sr(e,t));do try{gx();break}catch(i){Km(e,i)}while(!0);ki(),Ta.current=l,se=a,Ce!==null?t=0:(Ae=null,De=0,t=Pe)}if(t!==0){if(t===2&&(a=fo(e),a!==0&&(n=a,t=Ho(e,a))),t===1)throw s=gn,Sr(e,0),Yt(e,n),et(e,ke()),s;if(t===6)Yt(e,n);else{if(a=e.current.alternate,!(n&30)&&!fx(a)&&(t=Da(e,n),t===2&&(l=fo(e),l!==0&&(n=l,t=Ho(e,l))),t===1))throw s=gn,Sr(e,0),Yt(e,n),et(e,ke()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(I(345));case 2:yr(e,Je,At);break;case 3:if(Yt(e,n),(n&130023424)===n&&(t=Mi+500-ke(),10<t)){if(ga(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ve(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=wo(yr.bind(null,e,Je,At),t);break}yr(e,Je,At);break;case 4:if(Yt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-jt(n);l=1<<o,o=t[o],o>a&&(a=o),n&=~l}if(n=a,n=ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*px(n/1960))-n,10<n){e.timeoutHandle=wo(yr.bind(null,e,Je,At),n);break}yr(e,Je,At);break;case 5:yr(e,Je,At);break;default:throw Error(I(329))}}}return et(e,ke()),e.callbackNode===s?Qm.bind(null,e):null}function Ho(e,t){var s=Xs;return e.current.memoizedState.isDehydrated&&(Sr(e,t).flags|=256),e=Da(e,t),e!==2&&(t=Je,Je=s,t!==null&&Wo(t)),e}function Wo(e){Je===null?Je=e:Je.push.apply(Je,e)}function fx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],l=a.getSnapshot;a=a.value;try{if(!bt(l(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~Ui,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-jt(t),n=1<<s;e[s]=-1,t&=~n}}function id(e){if(se&6)throw Error(I(327));is();var t=ga(e,0);if(!(t&1))return et(e,ke()),null;var s=Da(e,t);if(e.tag!==0&&s===2){var n=fo(e);n!==0&&(t=n,s=Ho(e,n))}if(s===1)throw s=gn,Sr(e,0),Yt(e,t),et(e,ke()),s;if(s===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,Je,At),et(e,ke()),null}function Bi(e,t){var s=se;se|=1;try{return e(t)}finally{se=s,se===0&&(fs=ke()+500,Qa&&fr())}}function Tr(e){Zt!==null&&Zt.tag===0&&!(se&6)&&is();var t=se;se|=1;var s=mt.transition,n=le;try{if(mt.transition=null,le=1,e)return e()}finally{le=n,mt.transition=s,se=t,!(se&6)&&fr()}}function zi(){st=rs.current,ue(rs)}function Sr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,qf(s)),Ce!==null)for(s=Ce.return;s!==null;){var n=s;switch(Ni(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Na();break;case 3:hs(),ue(Xe),ue(ze),Ri();break;case 5:Li(n);break;case 4:hs();break;case 13:ue(fe);break;case 19:ue(fe);break;case 10:Ci(n.type._context);break;case 22:case 23:zi()}s=s.return}if(Ae=e,Ce=e=ir(e.current,null),De=st=t,Pe=0,gn=null,Ui=Ya=Rr=0,Je=Xs=null,br!==null){for(t=0;t<br.length;t++)if(s=br[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,l=s.pending;if(l!==null){var o=l.next;l.next=a,n.next=o}s.pending=n}br=null}return e}function Km(e,t){do{var s=Ce;try{if(ki(),sa.current=Ra,La){for(var n=xe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}La=!1}if(Lr=0,Te=_e=xe=null,Js=!1,pn=0,$i.current=null,s===null||s.return===null){Pe=1,gn=t,Ce=null;break}e:{var l=e,o=s.return,i=s,c=t;if(t=De,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,x=u.tag;if(!(u.mode&1)&&(x===0||x===11||x===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var N=Gc(o);if(N!==null){N.flags&=-257,Jc(N,o,i,l,t),N.mode&1&&Kc(l,d,t),t=N,c=d;var h=t.updateQueue;if(h===null){var y=new Set;y.add(c),t.updateQueue=y}else h.add(c);break e}else{if(!(t&1)){Kc(l,d,t),Hi();break e}c=Error(I(426))}}else if(he&&i.mode&1){var j=Gc(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Jc(j,o,i,l,t),wi(ps(c,i));break e}}l=c=ps(c,i),Pe!==4&&(Pe=2),Xs===null?Xs=[l]:Xs.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=Rm(l,c,t);zc(l,f);break e;case 1:i=c;var g=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(lr===null||!lr.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var b=Tm(l,i,t);zc(l,b);break e}}l=l.return}while(l!==null)}Ym(s)}catch(S){t=S,Ce===s&&s!==null&&(Ce=s=s.return);continue}break}while(!0)}function Gm(){var e=Ta.current;return Ta.current=Ra,e===null?Ra:e}function Hi(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Ae===null||!(Rr&268435455)&&!(Ya&268435455)||Yt(Ae,De)}function Da(e,t){var s=se;se|=2;var n=Gm();(Ae!==e||De!==t)&&(At=null,Sr(e,t));do try{xx();break}catch(a){Km(e,a)}while(!0);if(ki(),se=s,Ta.current=n,Ce!==null)throw Error(I(261));return Ae=null,De=0,Pe}function xx(){for(;Ce!==null;)Jm(Ce)}function gx(){for(;Ce!==null&&!Bp();)Jm(Ce)}function Jm(e){var t=Zm(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Ym(e):Ce=t,$i.current=null}function Ym(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=dx(s,t),s!==null){s.flags&=32767,Ce=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,Ce=null;return}}else if(s=cx(s,t,st),s!==null){Ce=s;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Pe===0&&(Pe=5)}function yr(e,t,s){var n=le,a=mt.transition;try{mt.transition=null,le=1,yx(e,t,s,n)}finally{mt.transition=a,le=n}return null}function yx(e,t,s,n){do is();while(Zt!==null);if(se&6)throw Error(I(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(Yp(e,l),e===Ae&&(Ce=Ae=null,De=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Vn||(Vn=!0,eh(xa,function(){return is(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=mt.transition,mt.transition=null;var o=le;le=1;var i=se;se|=4,$i.current=null,mx(e,s),qm(s,e),$f(bo),ya=!!vo,bo=vo=null,e.current=s,hx(s),zp(),se=i,le=o,mt.transition=l}else e.current=s;if(Vn&&(Vn=!1,Zt=e,Fa=a),l=e.pendingLanes,l===0&&(lr=null),qp(s.stateNode),et(e,ke()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Aa)throw Aa=!1,e=Bo,Bo=null,e;return Fa&1&&e.tag!==0&&is(),l=e.pendingLanes,l&1?e===zo?Zs++:(Zs=0,zo=e):Zs=0,fr(),null}function is(){if(Zt!==null){var e=Ru(Fa),t=mt.transition,s=le;try{if(mt.transition=null,le=16>e?16:e,Zt===null)var n=!1;else{if(e=Zt,Zt=null,Fa=0,se&6)throw Error(I(331));var a=se;for(se|=4,H=e.current;H!==null;){var l=H,o=l.child;if(H.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(H=d;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:Ys(8,u,l)}var x=u.child;if(x!==null)x.return=u,H=x;else for(;H!==null;){u=H;var p=u.sibling,N=u.return;if(zm(u),u===d){H=null;break}if(p!==null){p.return=N,H=p;break}H=N}}}var h=l.alternate;if(h!==null){var y=h.child;if(y!==null){h.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}H=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,H=o;else e:for(;H!==null;){if(l=H,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ys(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,H=f;break e}H=l.return}}var g=e.current;for(H=g;H!==null;){o=H;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,H=m;else e:for(o=g;H!==null;){if(i=H,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Ja(9,i)}}catch(S){Ne(i,i.return,S)}if(i===o){H=null;break e}var b=i.sibling;if(b!==null){b.return=i.return,H=b;break e}H=i.return}}if(se=a,fr(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(za,e)}catch{}n=!0}return n}finally{le=s,mt.transition=t}}return!1}function cd(e,t,s){t=ps(s,t),t=Rm(e,t,1),e=ar(e,t,1),t=Ve(),e!==null&&(bn(e,1,t),et(e,t))}function Ne(e,t,s){if(e.tag===3)cd(e,e,s);else for(;t!==null;){if(t.tag===3){cd(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lr===null||!lr.has(n))){e=ps(s,e),e=Tm(t,e,1),t=ar(t,e,1),e=Ve(),t!==null&&(bn(t,1,e),et(t,e));break}}t=t.return}}function jx(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&s,Ae===e&&(De&s)===s&&(Pe===4||Pe===3&&(De&130023424)===De&&500>ke()-Mi?Sr(e,0):Ui|=s),et(e,t)}function Xm(e,t){t===0&&(e.mode&1?(t=In,In<<=1,!(In&130023424)&&(In=4194304)):t=1);var s=Ve();e=Mt(e,t),e!==null&&(bn(e,t,s),et(e,s))}function vx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Xm(e,s)}function bx(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(t),Xm(e,s)}var Zm;Zm=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Ye=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ye=!1,ix(e,t,s);Ye=!!(e.flags&131072)}else Ye=!1,he&&t.flags&1048576&&sm(t,ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;aa(e,t),e=t.pendingProps;var a=ds(t,ze.current);os(t,s),a=Ai(null,t,n,e,a,s);var l=Fi();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(n)?(l=!0,wa(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_i(t),a.updater=Ga,t.stateNode=a,a._reactInternals=t,Lo(t,n,e,s),t=Ao(null,t,n,!0,l,s)):(t.tag=0,he&&l&&bi(t),qe(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(aa(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=wx(n),e=xt(n,e),a){case 0:t=To(null,t,n,e,s);break e;case 1:t=Zc(null,t,n,e,s);break e;case 11:t=Yc(null,t,n,e,s);break e;case 14:t=Xc(null,t,n,xt(n.type,e),s);break e}throw Error(I(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),To(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),Zc(e,t,n,a,s);case 3:e:{if(Im(t),e===null)throw Error(I(387));n=t.pendingProps,l=t.memoizedState,a=l.element,cm(e,t),_a(t,n,null,s);var o=t.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=ps(Error(I(423)),t),t=ed(e,t,n,s,a);break e}else if(n!==a){a=ps(Error(I(424)),t),t=ed(e,t,n,s,a);break e}else for(nt=nr(t.stateNode.containerInfo.firstChild),at=t,he=!0,yt=null,s=om(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(us(),n===a){t=Bt(e,t,s);break e}qe(e,t,n,s)}t=t.child}return t;case 5:return dm(t),e===null&&Eo(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,No(n,a)?o=null:l!==null&&No(n,l)&&(t.flags|=32),Dm(e,t),qe(e,t,o,s),t.child;case 6:return e===null&&Eo(t),null;case 13:return Om(e,t,s);case 4:return Pi(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ms(t,null,n,s):qe(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),Yc(e,t,n,a,s);case 7:return qe(e,t,t.pendingProps,s),t.child;case 8:return qe(e,t,t.pendingProps.children,s),t.child;case 12:return qe(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,ce(Ca,n._currentValue),n._currentValue=o,l!==null)if(bt(l.value,o)){if(l.children===a.children&&!Xe.current){t=Bt(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Ot(-1,s&-s),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),_o(l.return,s,t),i.lanes|=s;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(I(341));o.lanes|=s,i=o.alternate,i!==null&&(i.lanes|=s),_o(o,s,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}qe(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,os(t,s),a=ht(a),n=n(a),t.flags|=1,qe(e,t,n,s),t.child;case 14:return n=t.type,a=xt(n,t.pendingProps),a=xt(n.type,a),Xc(e,t,n,a,s);case 15:return Am(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),aa(e,t),t.tag=1,Ze(n)?(e=!0,wa(t)):e=!1,os(t,s),Lm(t,n,a),Lo(t,n,a,s),Ao(null,t,n,!0,e,s);case 19:return $m(e,t,s);case 22:return Fm(e,t,s)}throw Error(I(156,t.tag))};function eh(e,t){return Eu(e,t)}function Nx(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,s,n){return new Nx(e,t,s,n)}function Wi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wx(e){if(typeof e=="function")return Wi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ci)return 11;if(e===di)return 14}return 2}function ir(e,t){var s=e.alternate;return s===null?(s=ut(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ia(e,t,s,n,a,l){var o=2;if(n=e,typeof e=="function")Wi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Vr:return kr(s.children,a,l,t);case ii:o=8,a|=8;break;case Zl:return e=ut(12,s,t,a|2),e.elementType=Zl,e.lanes=l,e;case eo:return e=ut(13,s,t,a),e.elementType=eo,e.lanes=l,e;case to:return e=ut(19,s,t,a),e.elementType=to,e.lanes=l,e;case du:return Xa(s,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case iu:o=10;break e;case cu:o=9;break e;case ci:o=11;break e;case di:o=14;break e;case Kt:o=16,n=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=ut(o,s,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function kr(e,t,s,n){return e=ut(7,e,n,t),e.lanes=s,e}function Xa(e,t,s,n){return e=ut(22,e,n,t),e.elementType=du,e.lanes=s,e.stateNode={isHidden:!1},e}function Ml(e,t,s){return e=ut(6,e,null,t),e.lanes=s,e}function Bl(e,t,s){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sx(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bl(0),this.expirationTimes=bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function qi(e,t,s,n,a,l,o,i,c){return e=new Sx(e,t,s,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=ut(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},_i(l),e}function kx(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function th(e){if(!e)return ur;e=e._reactInternals;e:{if(Dr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var s=e.type;if(Ze(s))return tm(e,s,t)}return t}function rh(e,t,s,n,a,l,o,i,c){return e=qi(s,n,!0,e,a,l,o,i,c),e.context=th(null),s=e.current,n=Ve(),a=or(s),l=Ot(n,a),l.callback=t??null,ar(s,l,a),e.current.lanes=a,bn(e,a,n),et(e,n),e}function Za(e,t,s,n){var a=t.current,l=Ve(),o=or(a);return s=th(s),t.context===null?t.context=s:t.pendingContext=s,t=Ot(l,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ar(a,t,o),e!==null&&(vt(e,a,o,l),ra(e,a,o)),o}function Ia(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Vi(e,t){dd(e,t),(e=e.alternate)&&dd(e,t)}function Cx(){return null}var sh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qi(e){this._internalRoot=e}el.prototype.render=Qi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Za(e,t,null,null)};el.prototype.unmount=Qi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tr(function(){Za(null,e,null,null)}),t[Ut]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Jt.length&&t!==0&&t<Jt[s].priority;s++);Jt.splice(s,0,e),s===0&&Iu(e)}};function Ki(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ud(){}function Ex(e,t,s,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=Ia(o);l.call(d)}}var o=rh(t,n,e,0,null,!1,!1,"",ud);return e._reactRootContainer=o,e[Ut]=o.current,cn(e.nodeType===8?e.parentNode:e),Tr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var d=Ia(c);i.call(d)}}var c=qi(e,0,!1,null,null,!1,!1,"",ud);return e._reactRootContainer=c,e[Ut]=c.current,cn(e.nodeType===8?e.parentNode:e),Tr(function(){Za(t,c,s,n)}),c}function rl(e,t,s,n,a){var l=s._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=Ia(o);i.call(c)}}Za(t,o,e,a)}else o=Ex(s,t,e,a,n);return Ia(o)}Tu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Bs(t.pendingLanes);s!==0&&(hi(t,s|1),et(t,ke()),!(se&6)&&(fs=ke()+500,fr()))}break;case 13:Tr(function(){var n=Mt(e,1);if(n!==null){var a=Ve();vt(n,e,1,a)}}),Vi(e,1)}};pi=function(e){if(e.tag===13){var t=Mt(e,134217728);if(t!==null){var s=Ve();vt(t,e,134217728,s)}Vi(e,134217728)}};Au=function(e){if(e.tag===13){var t=or(e),s=Mt(e,t);if(s!==null){var n=Ve();vt(s,e,t,n)}Vi(e,t)}};Fu=function(){return le};Du=function(e,t){var s=le;try{return le=e,t()}finally{le=s}};mo=function(e,t,s){switch(t){case"input":if(no(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Va(n);if(!a)throw Error(I(90));mu(n),no(n,a)}}}break;case"textarea":pu(e,s);break;case"select":t=s.value,t!=null&&ss(e,!!s.multiple,t,!1)}};bu=Bi;Nu=Tr;var _x={usingClientEntryPoint:!1,Events:[wn,Jr,Va,ju,vu,Bi]},Is={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Px={bundleType:Is.bundleType,version:Is.version,rendererPackageName:Is.rendererPackageName,rendererConfig:Is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ku(e),e===null?null:e.stateNode},findFiberByHostInstance:Is.findFiberByHostInstance||Cx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qn.isDisabled&&Qn.supportsFiber)try{za=Qn.inject(Px),_t=Qn}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_x;ot.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ki(t))throw Error(I(200));return kx(e,t,null,s)};ot.createRoot=function(e,t){if(!Ki(e))throw Error(I(299));var s=!1,n="",a=sh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=qi(e,1,!1,null,null,s,!1,n,a),e[Ut]=t.current,cn(e.nodeType===8?e.parentNode:e),new Qi(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=ku(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Tr(e)};ot.hydrate=function(e,t,s){if(!tl(t))throw Error(I(200));return rl(null,e,t,!0,s)};ot.hydrateRoot=function(e,t,s){if(!Ki(e))throw Error(I(405));var n=s!=null&&s.hydratedSources||null,a=!1,l="",o=sh;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=rh(t,null,e,1,s??null,a,!1,l,o),e[Ut]=t.current,cn(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new el(t)};ot.render=function(e,t,s){if(!tl(t))throw Error(I(200));return rl(null,e,t,!1,s)};ot.unmountComponentAtNode=function(e){if(!tl(e))throw Error(I(40));return e._reactRootContainer?(Tr(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};ot.unstable_batchedUpdates=Bi;ot.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!tl(s))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return rl(e,t,s,!1,n)};ot.version="18.3.1-next-f1338f8080-20240426";function nh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nh)}catch(e){console.error(e)}}nh(),nu.exports=ot;var Lx=nu.exports,md=Lx;Yl.createRoot=md.createRoot,Yl.hydrateRoot=md.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yn(){return yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},yn.apply(this,arguments)}var er;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(er||(er={}));const hd="popstate";function Rx(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:o,hash:i}=n.location;return qo("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Oa(a)}return Ax(t,s,null,e)}function ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Tx(){return Math.random().toString(36).substr(2,8)}function pd(e,t){return{usr:e.state,key:e.key,idx:t}}function qo(e,t,s,n){return s===void 0&&(s=null),yn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ns(t):t,{state:s,key:t&&t.key||n||Tx()})}function Oa(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ns(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Ax(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,i=er.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(yn({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function x(){i=er.Pop;let j=u(),f=j==null?null:j-d;d=j,c&&c({action:i,location:y.location,delta:f})}function p(j,f){i=er.Push;let g=qo(y.location,j,f);d=u()+1;let m=pd(g,d),b=y.createHref(g);try{o.pushState(m,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(b)}l&&c&&c({action:i,location:y.location,delta:1})}function N(j,f){i=er.Replace;let g=qo(y.location,j,f);d=u();let m=pd(g,d),b=y.createHref(g);o.replaceState(m,"",b),l&&c&&c({action:i,location:y.location,delta:0})}function h(j){let f=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof j=="string"?j:Oa(j);return g=g.replace(/ $/,"%20"),ge(f,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,f)}let y={get action(){return i},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(hd,x),c=j,()=>{a.removeEventListener(hd,x),c=null}},createHref(j){return t(a,j)},createURL:h,encodeLocation(j){let f=h(j);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:p,replace:N,go(j){return o.go(j)}};return y}var fd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fd||(fd={}));function Fx(e,t,s){return s===void 0&&(s="/"),Dx(e,t,s)}function Dx(e,t,s,n){let a=typeof t=="string"?Ns(t):t,l=xs(a.pathname||"/",s);if(l==null)return null;let o=ah(e);Ix(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=Qx(l);i=qx(o[c],d)}return i}function ah(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(ge(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=cr([n,c.relativePath]),u=s.concat(c);l.children&&l.children.length>0&&(ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ah(l.children,t,u,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Hx(d,l.index),routesMeta:u})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of lh(l.path))a(l,o,c)}),t}function lh(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=lh(n.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ix(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Wx(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Ox=/^:[\w-]+$/,$x=3,Ux=2,Mx=1,Bx=10,zx=-2,xd=e=>e==="*";function Hx(e,t){let s=e.split("/"),n=s.length;return s.some(xd)&&(n+=zx),t&&(n+=Ux),s.filter(a=>!xd(a)).reduce((a,l)=>a+(Ox.test(l)?$x:l===""?Mx:Bx),n)}function Wx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function qx(e,t,s){let{routesMeta:n}=e,a={},l="/",o=[];for(let i=0;i<n.length;++i){let c=n[i],d=i===n.length-1,u=l==="/"?t:t.slice(l.length)||"/",x=Vo({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!x)return null;Object.assign(a,x.params),o.push({params:a,pathname:cr([l,x.pathname]),pathnameBase:Xx(cr([l,x.pathnameBase])),route:p}),x.pathnameBase!=="/"&&(l=cr([l,x.pathnameBase]))}return o}function Vo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Vx(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((d,u,x)=>{let{paramName:p,isOptional:N}=u;if(p==="*"){let y=i[x]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const h=i[x];return N&&!h?d[p]=void 0:d[p]=(h||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Vx(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Gi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Qx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function xs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const Kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gx=e=>Kx.test(e);function Jx(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?Ns(e):e,l;if(s)if(Gx(s))l=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Gi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?l=gd(s.substring(1),"/"):l=gd(s,t)}else l=t;return{pathname:l,search:Zx(n),hash:eg(a)}}function gd(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function zl(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Yx(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Ji(e,t){let s=Yx(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Yi(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Ns(e):(a=yn({},e),ge(!a.pathname||!a.pathname.includes("?"),zl("?","pathname","search",a)),ge(!a.pathname||!a.pathname.includes("#"),zl("#","pathname","hash",a)),ge(!a.search||!a.search.includes("#"),zl("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=s;else{let x=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),x-=1;a.pathname=p.join("/")}i=x>=0?t[x]:"/"}let c=Jx(a,i),d=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const cr=e=>e.join("/").replace(/\/\/+/g,"/"),Xx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eg=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tg(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const oh=["post","put","patch","delete"];new Set(oh);const rg=["get",...oh];new Set(rg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},jn.apply(this,arguments)}const sl=v.createContext(null),ih=v.createContext(null),Wt=v.createContext(null),nl=v.createContext(null),Lt=v.createContext({outlet:null,matches:[],isDataRoute:!1}),ch=v.createContext(null);function sg(e,t){let{relative:s}=t===void 0?{}:t;ws()||ge(!1);let{basename:n,navigator:a}=v.useContext(Wt),{hash:l,pathname:o,search:i}=al(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:cr([n,o])),a.createHref({pathname:c,search:i,hash:l})}function ws(){return v.useContext(nl)!=null}function Ir(){return ws()||ge(!1),v.useContext(nl).location}function dh(e){v.useContext(Wt).static||v.useLayoutEffect(e)}function He(){let{isDataRoute:e}=v.useContext(Lt);return e?yg():ng()}function ng(){ws()||ge(!1);let e=v.useContext(sl),{basename:t,future:s,navigator:n}=v.useContext(Wt),{matches:a}=v.useContext(Lt),{pathname:l}=Ir(),o=JSON.stringify(Ji(a,s.v7_relativeSplatPath)),i=v.useRef(!1);return dh(()=>{i.current=!0}),v.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){n.go(d);return}let x=Yi(d,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:cr([t,x.pathname])),(u.replace?n.replace:n.push)(x,u.state,u)},[t,n,o,l,e])}const ag=v.createContext(null);function lg(e){let t=v.useContext(Lt).outlet;return t&&v.createElement(ag.Provider,{value:e},t)}function Ss(){let{matches:e}=v.useContext(Lt),t=e[e.length-1];return t?t.params:{}}function al(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=v.useContext(Wt),{matches:a}=v.useContext(Lt),{pathname:l}=Ir(),o=JSON.stringify(Ji(a,n.v7_relativeSplatPath));return v.useMemo(()=>Yi(e,JSON.parse(o),l,s==="path"),[e,o,l,s])}function og(e,t){return ig(e,t)}function ig(e,t,s,n){ws()||ge(!1);let{navigator:a}=v.useContext(Wt),{matches:l}=v.useContext(Lt),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ir(),u;if(t){var x;let j=typeof t=="string"?Ns(t):t;c==="/"||(x=j.pathname)!=null&&x.startsWith(c)||ge(!1),u=j}else u=d;let p=u.pathname||"/",N=p;if(c!=="/"){let j=c.replace(/^\//,"").split("/");N="/"+p.replace(/^\//,"").split("/").slice(j.length).join("/")}let h=Fx(e,{pathname:N}),y=hg(h&&h.map(j=>Object.assign({},j,{params:Object.assign({},i,j.params),pathname:cr([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:cr([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,s,n);return t&&y?v.createElement(nl.Provider,{value:{location:jn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:er.Pop}},y):y}function cg(){let e=gg(),t=tg(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),s?v.createElement("pre",{style:a},s):null,null)}const dg=v.createElement(cg,null);class ug extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?v.createElement(Lt.Provider,{value:this.props.routeContext},v.createElement(ch.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mg(e){let{routeContext:t,match:s,children:n}=e,a=v.useContext(sl);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),v.createElement(Lt.Provider,{value:t},n)}function hg(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,i=(a=s)==null?void 0:a.errors;if(i!=null){let u=o.findIndex(x=>x.route.id&&(i==null?void 0:i[x.route.id])!==void 0);u>=0||ge(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let x=o[u];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=u),x.route.id){let{loaderData:p,errors:N}=s,h=x.route.loader&&p[x.route.id]===void 0&&(!N||N[x.route.id]===void 0);if(x.route.lazy||h){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,x,p)=>{let N,h=!1,y=null,j=null;s&&(N=i&&x.route.id?i[x.route.id]:void 0,y=x.route.errorElement||dg,c&&(d<0&&p===0?(jg("route-fallback"),h=!0,j=null):d===p&&(h=!0,j=x.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,p+1)),g=()=>{let m;return N?m=y:h?m=j:x.route.Component?m=v.createElement(x.route.Component,null):x.route.element?m=x.route.element:m=u,v.createElement(mg,{match:x,routeContext:{outlet:u,matches:f,isDataRoute:s!=null},children:m})};return s&&(x.route.ErrorBoundary||x.route.errorElement||p===0)?v.createElement(ug,{location:s.location,revalidation:s.revalidation,component:y,error:N,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var uh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(uh||{}),mh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mh||{});function pg(e){let t=v.useContext(sl);return t||ge(!1),t}function fg(e){let t=v.useContext(ih);return t||ge(!1),t}function xg(e){let t=v.useContext(Lt);return t||ge(!1),t}function hh(e){let t=xg(),s=t.matches[t.matches.length-1];return s.route.id||ge(!1),s.route.id}function gg(){var e;let t=v.useContext(ch),s=fg(),n=hh();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function yg(){let{router:e}=pg(uh.UseNavigateStable),t=hh(mh.UseNavigateStable),s=v.useRef(!1);return dh(()=>{s.current=!0}),v.useCallback(function(a,l){l===void 0&&(l={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,jn({fromRouteId:t},l)))},[e,t])}const yd={};function jg(e,t,s){yd[e]||(yd[e]=!0)}function vg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Qo(e){let{to:t,replace:s,state:n,relative:a}=e;ws()||ge(!1);let{future:l,static:o}=v.useContext(Wt),{matches:i}=v.useContext(Lt),{pathname:c}=Ir(),d=He(),u=Yi(t,Ji(i,l.v7_relativeSplatPath),c,a==="path"),x=JSON.stringify(u);return v.useEffect(()=>d(JSON.parse(x),{replace:s,state:n,relative:a}),[d,x,a,s,n]),null}function bg(e){return lg(e.context)}function ae(e){ge(!1)}function Ng(e){let{basename:t="/",children:s=null,location:n,navigationType:a=er.Pop,navigator:l,static:o=!1,future:i}=e;ws()&&ge(!1);let c=t.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:l,static:o,future:jn({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof n=="string"&&(n=Ns(n));let{pathname:u="/",search:x="",hash:p="",state:N=null,key:h="default"}=n,y=v.useMemo(()=>{let j=xs(u,c);return j==null?null:{location:{pathname:j,search:x,hash:p,state:N,key:h},navigationType:a}},[c,u,x,p,N,h,a]);return y==null?null:v.createElement(Wt.Provider,{value:d},v.createElement(nl.Provider,{children:s,value:y}))}function wg(e){let{children:t,location:s}=e;return og(Ko(t),s)}new Promise(()=>{});function Ko(e,t){t===void 0&&(t=[]);let s=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let l=[...t,a];if(n.type===v.Fragment){s.push.apply(s,Ko(n.props.children,l));return}n.type!==ae&&ge(!1),!n.props.index||!n.props.children||ge(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ko(n.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},$a.apply(this,arguments)}function ph(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function Sg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function kg(e,t){return e.button===0&&(!t||t==="_self")&&!Sg(e)}function Go(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function Cg(e,t){let s=Go(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(l=>{s.append(a,l)})}),s}const Eg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Pg="6";try{window.__reactRouterVersion=Pg}catch{}const Lg=v.createContext({isTransitioning:!1}),Rg="startTransition",jd=yp[Rg];function Tg(e){let{basename:t,children:s,future:n,window:a}=e,l=v.useRef();l.current==null&&(l.current=Rx({window:a,v5Compat:!0}));let o=l.current,[i,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=v.useCallback(x=>{d&&jd?jd(()=>c(x)):c(x)},[c,d]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>vg(n),[n]),v.createElement(Ng,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:o,future:n})}const Ag=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J=v.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:u,viewTransition:x}=t,p=ph(t,Eg),{basename:N}=v.useContext(Wt),h,y=!1;if(typeof d=="string"&&Fg.test(d)&&(h=d,Ag))try{let m=new URL(window.location.href),b=d.startsWith("//")?new URL(m.protocol+d):new URL(d),S=xs(b.pathname,N);b.origin===m.origin&&S!=null?d=S+b.search+b.hash:y=!0}catch{}let j=sg(d,{relative:a}),f=Og(d,{replace:o,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:x});function g(m){n&&n(m),m.defaultPrevented||f(m)}return v.createElement("a",$a({},p,{href:h||j,onClick:y||l?n:g,ref:s,target:c}))}),Dg=v.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:c,viewTransition:d,children:u}=t,x=ph(t,_g),p=al(c,{relative:x.relative}),N=Ir(),h=v.useContext(ih),{navigator:y,basename:j}=v.useContext(Wt),f=h!=null&&Ug(p)&&d===!0,g=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,m=N.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;a||(m=m.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&j&&(b=xs(b,j)||b);const S=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let k=m===g||!o&&m.startsWith(g)&&m.charAt(S)==="/",w=b!=null&&(b===g||!o&&b.startsWith(g)&&b.charAt(g.length)==="/"),E={isActive:k,isPending:w,isTransitioning:f},R=k?n:void 0,F;typeof l=="function"?F=l(E):F=[l,k?"active":null,w?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let O=typeof i=="function"?i(E):i;return v.createElement(J,$a({},x,{"aria-current":R,className:F,ref:s,style:O,to:c,viewTransition:d}),typeof u=="function"?u(E):u)});var Jo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Jo||(Jo={}));var vd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vd||(vd={}));function Ig(e){let t=v.useContext(sl);return t||ge(!1),t}function Og(e,t){let{target:s,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=He(),d=Ir(),u=al(e,{relative:o});return v.useCallback(x=>{if(kg(x,s)){x.preventDefault();let p=n!==void 0?n:Oa(d)===Oa(u);c(e,{replace:p,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,u,n,a,s,e,l,o,i])}function $g(e){let t=v.useRef(Go(e)),s=v.useRef(!1),n=Ir(),a=v.useMemo(()=>Cg(n.search,s.current?null:t.current),[n.search]),l=He(),o=v.useCallback((i,c)=>{const d=Go(typeof i=="function"?i(a):i);s.current=!0,l("?"+d,c)},[l,a]);return[a,o]}function Ug(e,t){t===void 0&&(t={});let s=v.useContext(Lg);s==null&&ge(!1);let{basename:n}=Ig(Jo.useViewTransitionState),a=al(e,{relative:t.relative});if(!s.isTransitioning)return!1;let l=xs(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=xs(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Vo(a.pathname,o)!=null||Vo(a.pathname,l)!=null}const Mg={},bd=e=>{let t;const s=new Set,n=(u,x)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const N=t;t=x??(typeof p!="object"||p===null)?p:Object.assign({},t,p),s.forEach(h=>h(t,N))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(s.add(u),()=>s.delete(u)),destroy:()=>{(Mg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=t=e(n,a,c);return c},Bg=e=>e?bd(e):bd;var fh={exports:{}},xh={},gh={exports:{}},yh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gs=v;function zg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hg=typeof Object.is=="function"?Object.is:zg,Wg=gs.useState,qg=gs.useEffect,Vg=gs.useLayoutEffect,Qg=gs.useDebugValue;function Kg(e,t){var s=t(),n=Wg({inst:{value:s,getSnapshot:t}}),a=n[0].inst,l=n[1];return Vg(function(){a.value=s,a.getSnapshot=t,Hl(a)&&l({inst:a})},[e,s,t]),qg(function(){return Hl(a)&&l({inst:a}),e(function(){Hl(a)&&l({inst:a})})},[e]),Qg(s),s}function Hl(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Hg(e,s)}catch{return!0}}function Gg(e,t){return t()}var Jg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gg:Kg;yh.useSyncExternalStore=gs.useSyncExternalStore!==void 0?gs.useSyncExternalStore:Jg;gh.exports=yh;var Yg=gh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=v,Xg=Yg;function Zg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ey=typeof Object.is=="function"?Object.is:Zg,ty=Xg.useSyncExternalStore,ry=ll.useRef,sy=ll.useEffect,ny=ll.useMemo,ay=ll.useDebugValue;xh.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var l=ry(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=ny(function(){function c(N){if(!d){if(d=!0,u=N,N=n(N),a!==void 0&&o.hasValue){var h=o.value;if(a(h,N))return x=h}return x=N}if(h=x,ey(u,N))return h;var y=n(N);return a!==void 0&&a(h,y)?(u=N,h):(u=N,x=y)}var d=!1,u,x,p=s===void 0?null:s;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,s,n,a]);var i=ty(e,l[0],l[1]);return sy(function(){o.hasValue=!0,o.value=i},[i]),ay(i),i};fh.exports=xh;var ly=fh.exports;const oy=Vd(ly),jh={},{useDebugValue:iy}=Ba,{useSyncExternalStoreWithSelector:cy}=oy;let Nd=!1;const dy=e=>e;function uy(e,t=dy,s){(jh?"production":void 0)!=="production"&&s&&!Nd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nd=!0);const n=cy(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return iy(n),n}const wd=e=>{(jh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Bg(e):e,s=(n,a)=>uy(t,n,a);return Object.assign(s,t),s},Or=e=>e?wd(e):wd;function vh(e,t){return function(){return e.apply(t,arguments)}}const{toString:my}=Object.prototype,{getPrototypeOf:Xi}=Object,{iterator:ol,toStringTag:bh}=Symbol,il=(e=>t=>{const s=my.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Nt=e=>(e=e.toLowerCase(),t=>il(t)===e),cl=e=>t=>typeof t===e,{isArray:ks}=Array,ys=cl("undefined");function kn(e){return e!==null&&!ys(e)&&e.constructor!==null&&!ys(e.constructor)&&tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Nh=Nt("ArrayBuffer");function hy(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Nh(e.buffer),t}const py=cl("string"),tt=cl("function"),wh=cl("number"),Cn=e=>e!==null&&typeof e=="object",fy=e=>e===!0||e===!1,ca=e=>{if(il(e)!=="object")return!1;const t=Xi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(bh in e)&&!(ol in e)},xy=e=>{if(!Cn(e)||kn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},gy=Nt("Date"),yy=Nt("File"),jy=Nt("Blob"),vy=Nt("FileList"),by=e=>Cn(e)&&tt(e.pipe),Ny=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||tt(e.append)&&((t=il(e))==="formdata"||t==="object"&&tt(e.toString)&&e.toString()==="[object FormData]"))},wy=Nt("URLSearchParams"),[Sy,ky,Cy,Ey]=["ReadableStream","Request","Response","Headers"].map(Nt),_y=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function En(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),ks(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(kn(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(n=0;n<o;n++)i=l[n],t.call(null,e[i],i,e)}}function Sh(e,t){if(kn(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const wr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kh=e=>!ys(e)&&e!==wr;function Yo(){const{caseless:e,skipUndefined:t}=kh(this)&&this||{},s={},n=(a,l)=>{const o=e&&Sh(s,l)||l;ca(s[o])&&ca(a)?s[o]=Yo(s[o],a):ca(a)?s[o]=Yo({},a):ks(a)?s[o]=a.slice():(!t||!ys(a))&&(s[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&En(arguments[a],n);return s}const Py=(e,t,s,{allOwnKeys:n}={})=>(En(t,(a,l)=>{s&&tt(a)?Object.defineProperty(e,l,{value:vh(a,s),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),Ly=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Ry=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Ty=(e,t,s,n)=>{let a,l,o;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!n||n(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=s!==!1&&Xi(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Ay=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},Fy=e=>{if(!e)return null;if(ks(e))return e;let t=e.length;if(!wh(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Dy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Xi(Uint8Array)),Iy=(e,t)=>{const n=(e&&e[ol]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},Oy=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},$y=Nt("HTMLFormElement"),Uy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),Sd=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),My=Nt("RegExp"),Ch=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};En(s,(a,l)=>{let o;(o=t(a,l,e))!==!1&&(n[l]=o||a)}),Object.defineProperties(e,n)},By=e=>{Ch(e,(t,s)=>{if(tt(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(tt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},zy=(e,t)=>{const s={},n=a=>{a.forEach(l=>{s[l]=!0})};return ks(e)?n(e):n(String(e).split(t)),s},Hy=()=>{},Wy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function qy(e){return!!(e&&tt(e.append)&&e[bh]==="FormData"&&e[ol])}const Vy=e=>{const t=new Array(10),s=(n,a)=>{if(Cn(n)){if(t.indexOf(n)>=0)return;if(kn(n))return n;if(!("toJSON"in n)){t[a]=n;const l=ks(n)?[]:{};return En(n,(o,i)=>{const c=s(o,a+1);!ys(c)&&(l[i]=c)}),t[a]=void 0,l}}return n};return s(e,0)},Qy=Nt("AsyncFunction"),Ky=e=>e&&(Cn(e)||tt(e))&&tt(e.then)&&tt(e.catch),Eh=((e,t)=>e?setImmediate:t?((s,n)=>(wr.addEventListener("message",({source:a,data:l})=>{a===wr&&l===s&&n.length&&n.shift()()},!1),a=>{n.push(a),wr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",tt(wr.postMessage)),Gy=typeof queueMicrotask<"u"?queueMicrotask.bind(wr):typeof process<"u"&&process.nextTick||Eh,Jy=e=>e!=null&&tt(e[ol]),C={isArray:ks,isArrayBuffer:Nh,isBuffer:kn,isFormData:Ny,isArrayBufferView:hy,isString:py,isNumber:wh,isBoolean:fy,isObject:Cn,isPlainObject:ca,isEmptyObject:xy,isReadableStream:Sy,isRequest:ky,isResponse:Cy,isHeaders:Ey,isUndefined:ys,isDate:gy,isFile:yy,isBlob:jy,isRegExp:My,isFunction:tt,isStream:by,isURLSearchParams:wy,isTypedArray:Dy,isFileList:vy,forEach:En,merge:Yo,extend:Py,trim:_y,stripBOM:Ly,inherits:Ry,toFlatObject:Ty,kindOf:il,kindOfTest:Nt,endsWith:Ay,toArray:Fy,forEachEntry:Iy,matchAll:Oy,isHTMLForm:$y,hasOwnProperty:Sd,hasOwnProp:Sd,reduceDescriptors:Ch,freezeMethods:By,toObjectSet:zy,toCamelCase:Uy,noop:Hy,toFiniteNumber:Wy,findKey:Sh,global:wr,isContextDefined:kh,isSpecCompliantForm:qy,toJSONObject:Vy,isAsyncFn:Qy,isThenable:Ky,setImmediate:Eh,asap:Gy,isIterable:Jy};let Q=class _h extends Error{static from(t,s,n,a,l,o){const i=new _h(t.message,s||t.code,n,a,l);return i.cause=t,i.name=t.name,o&&Object.assign(i,o),i}constructor(t,s,n,a,l){super(t),this.name="AxiosError",this.isAxiosError=!0,s&&(this.code=s),n&&(this.config=n),a&&(this.request=a),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}};Q.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Q.ERR_BAD_OPTION="ERR_BAD_OPTION";Q.ECONNABORTED="ECONNABORTED";Q.ETIMEDOUT="ETIMEDOUT";Q.ERR_NETWORK="ERR_NETWORK";Q.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Q.ERR_DEPRECATED="ERR_DEPRECATED";Q.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Q.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Q.ERR_CANCELED="ERR_CANCELED";Q.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Q.ERR_INVALID_URL="ERR_INVALID_URL";const Yy=null;function Xo(e){return C.isPlainObject(e)||C.isArray(e)}function Ph(e){return C.endsWith(e,"[]")?e.slice(0,-2):e}function kd(e,t,s){return e?e.concat(t).map(function(a,l){return a=Ph(a),!s&&l?"["+a+"]":a}).join(s?".":""):t}function Xy(e){return C.isArray(e)&&!e.some(Xo)}const Zy=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function dl(e,t,s){if(!C.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=C.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,j){return!C.isUndefined(j[y])});const n=s.metaTokens,a=s.visitor||u,l=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(a))throw new TypeError("visitor must be a function");function d(h){if(h===null)return"";if(C.isDate(h))return h.toISOString();if(C.isBoolean(h))return h.toString();if(!c&&C.isBlob(h))throw new Q("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(h)||C.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,y,j){let f=h;if(h&&!j&&typeof h=="object"){if(C.endsWith(y,"{}"))y=n?y:y.slice(0,-2),h=JSON.stringify(h);else if(C.isArray(h)&&Xy(h)||(C.isFileList(h)||C.endsWith(y,"[]"))&&(f=C.toArray(h)))return y=Ph(y),f.forEach(function(m,b){!(C.isUndefined(m)||m===null)&&t.append(o===!0?kd([y],b,l):o===null?y:y+"[]",d(m))}),!1}return Xo(h)?!0:(t.append(kd(j,y,l),d(h)),!1)}const x=[],p=Object.assign(Zy,{defaultVisitor:u,convertValue:d,isVisitable:Xo});function N(h,y){if(!C.isUndefined(h)){if(x.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));x.push(h),C.forEach(h,function(f,g){(!(C.isUndefined(f)||f===null)&&a.call(t,f,C.isString(g)?g.trim():g,y,p))===!0&&N(f,y?y.concat(g):[g])}),x.pop()}}if(!C.isObject(e))throw new TypeError("data must be an object");return N(e),t}function Cd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Zi(e,t){this._pairs=[],e&&dl(e,this,t)}const Lh=Zi.prototype;Lh.append=function(t,s){this._pairs.push([t,s])};Lh.toString=function(t){const s=t?function(n){return t.call(this,n,Cd)}:Cd;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function e0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Rh(e,t,s){if(!t)return e;const n=s&&s.encode||e0,a=C.isFunction(s)?{serialize:s}:s,l=a&&a.serialize;let o;if(l?o=l(t,a):o=C.isURLSearchParams(t)?t.toString():new Zi(t,a).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Ed{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Th={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},t0=typeof URLSearchParams<"u"?URLSearchParams:Zi,r0=typeof FormData<"u"?FormData:null,s0=typeof Blob<"u"?Blob:null,n0={isBrowser:!0,classes:{URLSearchParams:t0,FormData:r0,Blob:s0},protocols:["http","https","file","blob","url","data"]},ec=typeof window<"u"&&typeof document<"u",Zo=typeof navigator=="object"&&navigator||void 0,a0=ec&&(!Zo||["ReactNative","NativeScript","NS"].indexOf(Zo.product)<0),l0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",o0=ec&&window.location.href||"http://localhost",i0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ec,hasStandardBrowserEnv:a0,hasStandardBrowserWebWorkerEnv:l0,navigator:Zo,origin:o0},Symbol.toStringTag,{value:"Module"})),Be={...i0,...n0};function c0(e,t){return dl(e,new Be.classes.URLSearchParams,{visitor:function(s,n,a,l){return Be.isNode&&C.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function d0(e){return C.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function u0(e){const t={},s=Object.keys(e);let n;const a=s.length;let l;for(n=0;n<a;n++)l=s[n],t[l]=e[l];return t}function Ah(e){function t(s,n,a,l){let o=s[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=s.length;return o=!o&&C.isArray(a)?a.length:o,c?(C.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!i):((!a[o]||!C.isObject(a[o]))&&(a[o]=[]),t(s,n,a[o],l)&&C.isArray(a[o])&&(a[o]=u0(a[o])),!i)}if(C.isFormData(e)&&C.isFunction(e.entries)){const s={};return C.forEachEntry(e,(n,a)=>{t(d0(n),a,s,0)}),s}return null}function m0(e,t,s){if(C.isString(e))try{return(t||JSON.parse)(e),C.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const _n={transitional:Th,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,l=C.isObject(t);if(l&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return a?JSON.stringify(Ah(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t)||C.isReadableStream(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return c0(t,this.formSerializer).toString();if((i=C.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return dl(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),m0(t)):t}],transformResponse:[function(t){const s=this.transitional||_n.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(C.isResponse(t)||C.isReadableStream(t))return t;if(t&&C.isString(t)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?Q.from(i,Q.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Be.classes.FormData,Blob:Be.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],e=>{_n.headers[e]={}});const h0=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p0=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||t[s]&&h0[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},_d=Symbol("internals");function Os(e){return e&&String(e).trim().toLowerCase()}function da(e){return e===!1||e==null?e:C.isArray(e)?e.map(da):String(e)}function f0(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const x0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wl(e,t,s,n,a){if(C.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!C.isString(t)){if(C.isString(n))return t.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(t)}}function g0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function y0(e,t){const s=C.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,l,o){return this[n].call(this,t,a,l,o)},configurable:!0})})}let rt=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function l(i,c,d){const u=Os(c);if(!u)throw new Error("header name must be a non-empty string");const x=C.findKey(a,u);(!x||a[x]===void 0||d===!0||d===void 0&&a[x]!==!1)&&(a[x||c]=da(i))}const o=(i,c)=>C.forEach(i,(d,u)=>l(d,u,c));if(C.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(C.isString(t)&&(t=t.trim())&&!x0(t))o(p0(t),s);else if(C.isObject(t)&&C.isIterable(t)){let i={},c,d;for(const u of t){if(!C.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?C.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(i,s)}else t!=null&&l(s,t,n);return this}get(t,s){if(t=Os(t),t){const n=C.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return f0(a);if(C.isFunction(s))return s.call(this,a,n);if(C.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Os(t),t){const n=C.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Wl(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function l(o){if(o=Os(o),o){const i=C.findKey(n,o);i&&(!s||Wl(n,n[i],i,s))&&(delete n[i],a=!0)}}return C.isArray(t)?t.forEach(l):l(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const l=s[n];(!t||Wl(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const s=this,n={};return C.forEach(this,(a,l)=>{const o=C.findKey(n,l);if(o){s[o]=da(a),delete s[l];return}const i=t?g0(l):String(l).trim();i!==l&&delete s[l],s[i]=da(a),n[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return C.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&C.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[_d]=this[_d]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=Os(o);n[i]||(y0(a,o),n[i]=!0)}return C.isArray(t)?t.forEach(l):l(t),this}};rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(rt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});C.freezeMethods(rt);function ql(e,t){const s=this||_n,n=t||s,a=rt.from(n.headers);let l=n.data;return C.forEach(e,function(i){l=i.call(s,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Fh(e){return!!(e&&e.__CANCEL__)}let Pn=class extends Q{constructor(t,s,n){super(t??"canceled",Q.ERR_CANCELED,s,n),this.name="CanceledError",this.__CANCEL__=!0}};function Dh(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new Q("Request failed with status code "+s.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function j0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function v0(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,l=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[l];o||(o=d),s[a]=c,n[a]=d;let x=l,p=0;for(;x!==a;)p+=s[x++],x=x%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-o<t)return;const N=u&&d-u;return N?Math.round(p*1e3/N):void 0}}function b0(e,t){let s=0,n=1e3/t,a,l;const o=(d,u=Date.now())=>{s=u,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const u=Date.now(),x=u-s;x>=n?o(d,u):(a=d,l||(l=setTimeout(()=>{l=null,o(a)},n-x)))},()=>a&&o(a)]}const Ua=(e,t,s=3)=>{let n=0;const a=v0(50,250);return b0(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-n,d=a(c),u=o<=i;n=o;const x={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-o)/d:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(x)},s)},Pd=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Ld=e=>(...t)=>C.asap(()=>e(...t)),N0=Be.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Be.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Be.origin),Be.navigator&&/(msie|trident)/i.test(Be.navigator.userAgent)):()=>!0,w0=Be.hasStandardBrowserEnv?{write(e,t,s,n,a,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];C.isNumber(s)&&i.push(`expires=${new Date(s).toUTCString()}`),C.isString(n)&&i.push(`path=${n}`),C.isString(a)&&i.push(`domain=${a}`),l===!0&&i.push("secure"),C.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function S0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function k0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Ih(e,t,s){let n=!S0(t);return e&&(n||s==!1)?k0(e,t):t}const Rd=e=>e instanceof rt?{...e}:e;function Ar(e,t){t=t||{};const s={};function n(d,u,x,p){return C.isPlainObject(d)&&C.isPlainObject(u)?C.merge.call({caseless:p},d,u):C.isPlainObject(u)?C.merge({},u):C.isArray(u)?u.slice():u}function a(d,u,x,p){if(C.isUndefined(u)){if(!C.isUndefined(d))return n(void 0,d,x,p)}else return n(d,u,x,p)}function l(d,u){if(!C.isUndefined(u))return n(void 0,u)}function o(d,u){if(C.isUndefined(u)){if(!C.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function i(d,u,x){if(x in t)return n(d,u);if(x in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(d,u,x)=>a(Rd(d),Rd(u),x,!0)};return C.forEach(Object.keys({...e,...t}),function(u){const x=c[u]||a,p=x(e[u],t[u],u);C.isUndefined(p)&&x!==i||(s[u]=p)}),s}const Oh=e=>{const t=Ar({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=t;if(t.headers=o=rt.from(o),t.url=Rh(Ih(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),C.isFormData(s)){if(Be.hasStandardBrowserEnv||Be.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(C.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,x])=>{d.includes(u.toLowerCase())&&o.set(u,x)})}}if(Be.hasStandardBrowserEnv&&(n&&C.isFunction(n)&&(n=n(t)),n||n!==!1&&N0(t.url))){const c=a&&l&&w0.read(l);c&&o.set(a,c)}return t},C0=typeof XMLHttpRequest<"u",E0=C0&&function(e){return new Promise(function(s,n){const a=Oh(e);let l=a.data;const o=rt.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=a,u,x,p,N,h;function y(){N&&N(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function f(){if(!j)return;const m=rt.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),S={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:m,config:e,request:j};Dh(function(w){s(w),y()},function(w){n(w),y()},S),j=null}"onloadend"in j?j.onloadend=f:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(f)},j.onabort=function(){j&&(n(new Q("Request aborted",Q.ECONNABORTED,e,j)),j=null)},j.onerror=function(b){const S=b&&b.message?b.message:"Network Error",k=new Q(S,Q.ERR_NETWORK,e,j);k.event=b||null,n(k),j=null},j.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||Th;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new Q(b,S.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,e,j)),j=null},l===void 0&&o.setContentType(null),"setRequestHeader"in j&&C.forEach(o.toJSON(),function(b,S){j.setRequestHeader(S,b)}),C.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),i&&i!=="json"&&(j.responseType=a.responseType),d&&([p,h]=Ua(d,!0),j.addEventListener("progress",p)),c&&j.upload&&([x,N]=Ua(c),j.upload.addEventListener("progress",x),j.upload.addEventListener("loadend",N)),(a.cancelToken||a.signal)&&(u=m=>{j&&(n(!m||m.type?new Pn(null,e,j):m),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const g=j0(a.url);if(g&&Be.protocols.indexOf(g)===-1){n(new Q("Unsupported protocol "+g+":",Q.ERR_BAD_REQUEST,e));return}j.send(l||null)})},_0=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const l=function(d){if(!a){a=!0,i();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Q?u:new Pn(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,l(new Q(`timeout of ${t}ms exceeded`,Q.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>C.asap(i),c}},P0=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},L0=async function*(e,t){for await(const s of R0(e))yield*P0(s,t)},R0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},Td=(e,t,s,n)=>{const a=L0(e,t);let l=0,o,i=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){i(),c.close();return}let x=u.byteLength;if(s){let p=l+=x;s(p)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},Ad=64*1024,{isFunction:Kn}=C,T0=(({Request:e,Response:t})=>({Request:e,Response:t}))(C.global),{ReadableStream:Fd,TextEncoder:Dd}=C.global,Id=(e,...t)=>{try{return!!e(...t)}catch{return!1}},A0=e=>{e=C.merge.call({skipUndefined:!0},T0,e);const{fetch:t,Request:s,Response:n}=e,a=t?Kn(t):typeof fetch=="function",l=Kn(s),o=Kn(n);if(!a)return!1;const i=a&&Kn(Fd),c=a&&(typeof Dd=="function"?(h=>y=>h.encode(y))(new Dd):async h=>new Uint8Array(await new s(h).arrayBuffer())),d=l&&i&&Id(()=>{let h=!1;const y=new s(Be.origin,{body:new Fd,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!y}),u=o&&i&&Id(()=>C.isReadableStream(new n("").body)),x={stream:u&&(h=>h.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!x[h]&&(x[h]=(y,j)=>{let f=y&&y[h];if(f)return f.call(y);throw new Q(`Response type '${h}' is not supported`,Q.ERR_NOT_SUPPORT,j)})});const p=async h=>{if(h==null)return 0;if(C.isBlob(h))return h.size;if(C.isSpecCompliantForm(h))return(await new s(Be.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(C.isArrayBufferView(h)||C.isArrayBuffer(h))return h.byteLength;if(C.isURLSearchParams(h)&&(h=h+""),C.isString(h))return(await c(h)).byteLength},N=async(h,y)=>{const j=C.toFiniteNumber(h.getContentLength());return j??p(y)};return async h=>{let{url:y,method:j,data:f,signal:g,cancelToken:m,timeout:b,onDownloadProgress:S,onUploadProgress:k,responseType:w,headers:E,withCredentials:R="same-origin",fetchOptions:F}=Oh(h),O=t||fetch;w=w?(w+"").toLowerCase():"text";let W=_0([g,m&&m.toAbortSignal()],b),U=null;const D=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let q;try{if(k&&d&&j!=="get"&&j!=="head"&&(q=await N(E,f))!==0){let G=new s(y,{method:"POST",body:f,duplex:"half"}),re;if(C.isFormData(f)&&(re=G.headers.get("content-type"))&&E.setContentType(re),G.body){const[pe,ne]=Pd(q,Ua(Ld(k)));f=Td(G.body,Ad,pe,ne)}}C.isString(R)||(R=R?"include":"omit");const $=l&&"credentials"in s.prototype,P={...F,signal:W,method:j.toUpperCase(),headers:E.normalize().toJSON(),body:f,duplex:"half",credentials:$?R:void 0};U=l&&new s(y,P);let _=await(l?O(U,F):O(y,P));const T=u&&(w==="stream"||w==="response");if(u&&(S||T&&D)){const G={};["status","statusText","headers"].forEach(Se=>{G[Se]=_[Se]});const re=C.toFiniteNumber(_.headers.get("content-length")),[pe,ne]=S&&Pd(re,Ua(Ld(S),!0))||[];_=new n(Td(_.body,Ad,pe,()=>{ne&&ne(),D&&D()}),G)}w=w||"text";let B=await x[C.findKey(x,w)||"text"](_,h);return!T&&D&&D(),await new Promise((G,re)=>{Dh(G,re,{data:B,headers:rt.from(_.headers),status:_.status,statusText:_.statusText,config:h,request:U})})}catch($){throw D&&D(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,h,U),{cause:$.cause||$}):Q.from($,$&&$.code,h,U)}}},F0=new Map,$h=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:a}=t,l=[n,a,s];let o=l.length,i=o,c,d,u=F0;for(;i--;)c=l[i],d=u.get(c),d===void 0&&u.set(c,d=i?new Map:A0(t)),u=d;return d};$h();const tc={http:Yy,xhr:E0,fetch:{get:$h}};C.forEach(tc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Od=e=>`- ${e}`,D0=e=>C.isFunction(e)||e===null||e===!1;function I0(e,t){e=C.isArray(e)?e:[e];const{length:s}=e;let n,a;const l={};for(let o=0;o<s;o++){n=e[o];let i;if(a=n,!D0(n)&&(a=tc[(i=String(n)).toLowerCase()],a===void 0))throw new Q(`Unknown adapter '${i}'`);if(a&&(C.isFunction(a)||(a=a.get(t))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=s?o.length>1?`since :
`+o.map(Od).join(`
`):" "+Od(o[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a}const Uh={getAdapter:I0,adapters:tc};function Vl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pn(null,e)}function $d(e){return Vl(e),e.headers=rt.from(e.headers),e.data=ql.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Uh.getAdapter(e.adapter||_n.adapter,e)(e).then(function(n){return Vl(e),n.data=ql.call(e,e.transformResponse,n),n.headers=rt.from(n.headers),n},function(n){return Fh(n)||(Vl(e),n&&n.response&&(n.response.data=ql.call(e,e.transformResponse,n.response),n.response.headers=rt.from(n.response.headers))),Promise.reject(n)})}const Mh="1.13.4",ul={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ul[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ud={};ul.transitional=function(t,s,n){function a(l,o){return"[Axios v"+Mh+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,i)=>{if(t===!1)throw new Q(a(o," has been removed"+(s?" in "+s:"")),Q.ERR_DEPRECATED);return s&&!Ud[o]&&(Ud[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(l,o,i):!0}};ul.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function O0(e,t,s){if(typeof e!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],o=t[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new Q("option "+l+" must be "+c,Q.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Q("Unknown option "+l,Q.ERR_BAD_OPTION)}}const ua={assertOptions:O0,validators:ul},kt=ua.validators;let Cr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ed,response:new Ed}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Ar(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:l}=s;n!==void 0&&ua.assertOptions(n,{silentJSONParsing:kt.transitional(kt.boolean),forcedJSONParsing:kt.transitional(kt.boolean),clarifyTimeoutError:kt.transitional(kt.boolean)},!1),a!=null&&(C.isFunction(a)?s.paramsSerializer={serialize:a}:ua.assertOptions(a,{encode:kt.function,serialize:kt.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ua.assertOptions(s,{baseUrl:kt.spelling("baseURL"),withXsrfToken:kt.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=l&&C.merge(l.common,l[s.method]);l&&C.forEach(["delete","get","head","post","put","patch","common"],h=>{delete l[h]}),s.headers=rt.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,x=0,p;if(!c){const h=[$d.bind(this),void 0];for(h.unshift(...i),h.push(...d),p=h.length,u=Promise.resolve(s);x<p;)u=u.then(h[x++],h[x++]);return u}p=i.length;let N=s;for(;x<p;){const h=i[x++],y=i[x++];try{N=h(N)}catch(j){y.call(this,j);break}}try{u=$d.call(this,N)}catch(h){return Promise.reject(h)}for(x=0,p=d.length;x<p;)u=u.then(d[x++],d[x++]);return u}getUri(t){t=Ar(this.defaults,t);const s=Ih(t.baseURL,t.url,t.allowAbsoluteUrls);return Rh(s,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){Cr.prototype[t]=function(s,n){return this.request(Ar(n||{},{method:t,url:s,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(t){function s(n){return function(l,o,i){return this.request(Ar(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}Cr.prototype[t]=s(),Cr.prototype[t+"Form"]=s(!0)});let $0=class Bh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{n.subscribe(i),l=i}).then(a);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,i){n.reason||(n.reason=new Pn(l,o,i),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Bh(function(a){t=a}),cancel:t}}};function U0(e){return function(s){return e.apply(null,s)}}function M0(e){return C.isObject(e)&&e.isAxiosError===!0}const ei={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ei).forEach(([e,t])=>{ei[t]=e});function zh(e){const t=new Cr(e),s=vh(Cr.prototype.request,t);return C.extend(s,Cr.prototype,t,{allOwnKeys:!0}),C.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return zh(Ar(e,a))},s}const me=zh(_n);me.Axios=Cr;me.CanceledError=Pn;me.CancelToken=$0;me.isCancel=Fh;me.VERSION=Mh;me.toFormData=dl;me.AxiosError=Q;me.Cancel=me.CanceledError;me.all=function(t){return Promise.all(t)};me.spread=U0;me.isAxiosError=M0;me.mergeConfig=Ar;me.AxiosHeaders=rt;me.formToJSON=e=>Ah(C.isHTMLForm(e)?new FormData(e):e);me.getAdapter=Uh.getAdapter;me.HttpStatusCode=ei;me.default=me;const{Axios:rv,AxiosError:B0,CanceledError:sv,isCancel:nv,CancelToken:av,VERSION:lv,all:ov,Cancel:iv,isAxiosError:cv,spread:dv,toFormData:uv,AxiosHeaders:mv,HttpStatusCode:hv,formToJSON:pv,getAdapter:fv,mergeConfig:xv}=me,z0="http://localhost:3000/api/v1",M=me.create({baseURL:z0,headers:{"Content-Type":"application/json"}});M.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));M.interceptors.response.use(e=>e,async e=>{var s;const t=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const n=localStorage.getItem("refreshToken");if(!n)return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e);const a=await M.post("/auth/refresh",{refreshToken:n}),{accessToken:l,refreshToken:o}=a.data;return localStorage.setItem("accessToken",l),localStorage.setItem("refreshToken",o),t.headers.Authorization=`Bearer ${l}`,M(t)}catch(n){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(n)}}return Promise.reject(e)});const jr={register:(e,t,s)=>M.post("/auth/register",{username:e,email:t,password:s}),login:(e,t)=>M.post("/auth/login",{username:e,password:t}),refresh:e=>M.post("/auth/refresh",{refreshToken:e}),logout:()=>M.post("/auth/logout"),getMe:()=>M.get("/auth/me"),getAllUsers:()=>M.get("/auth/users"),updateUser:(e,t)=>M.put(`/auth/users/${e}`,t)},H0={getAll:()=>M.get("/units")},Ue={getAll:()=>M.get("/cost-items"),getCostItems:e=>M.get("/cost-items",{params:e}),getById:e=>M.get(`/cost-items/${e}`),create:e=>M.post("/cost-items",e),update:(e,t)=>M.put(`/cost-items/${e}`,t),delete:e=>M.delete(`/cost-items/${e}`),getCategories:()=>M.get("/cost-categories"),createCategory:e=>M.post("/cost-categories",e),updateCategory:(e,t)=>M.put(`/cost-categories/${e}`,t),deleteCategory:e=>M.delete(`/cost-categories/${e}`),getSubElements:()=>M.get("/cost-sub-elements"),getSubElementsByCategory:e=>M.get("/cost-sub-elements",{params:{category_id:e}}),createSubElement:e=>M.post("/cost-sub-elements",e),updateSubElement:(e,t)=>M.put(`/cost-sub-elements/${e}`,t),deleteSubElement:e=>M.delete(`/cost-sub-elements/${e}`),getUnits:()=>M.get("/units"),createCostItem:e=>M.post("/cost-items",e),updateCostItem:(e,t)=>M.put(`/cost-items/${e}`,t),deleteCostItem:e=>M.delete(`/cost-items/${e}`)},Tt={getAll:()=>M.get("/projects"),getById:e=>M.get(`/projects/${e}`),create:e=>M.post("/projects",e),update:(e,t)=>M.put(`/projects/${e}`,t),delete:e=>M.delete(`/projects/${e}`),submitEstimate:e=>M.post(`/projects/${e}/submit-estimate`),approveEstimate:(e,t)=>M.post(`/projects/${e}/approve-estimate`,{notes:t}),rejectEstimate:(e,t)=>M.post(`/projects/${e}/reject-estimate`,{reason:t}),duplicate:(e,t)=>M.post(`/projects/${e}/duplicate`,t)},$s={getAll:e=>M.get(`/projects/${e}/estimates`),getById:(e,t)=>M.get(`/projects/${e}/estimates/${t}`),create:(e,t)=>M.post(`/projects/${e}/estimates`,t),update:(e,t,s)=>M.put(`/projects/${e}/estimates/${t}`,s),delete:(e,t)=>M.delete(`/projects/${e}/estimates/${t}`),getSummary:e=>M.get(`/projects/${e}/estimate-summary`)},Hs={getAll:e=>M.get("/clients",{params:e}),getById:e=>M.get(`/clients/${e}`),create:e=>M.post("/clients",e),update:(e,t)=>M.put(`/clients/${e}`,t),delete:e=>M.delete(`/clients/${e}`)},Ws={getAll:e=>M.get("/contractors",{params:e}),getById:e=>M.get(`/contractors/${e}`),create:e=>M.post("/contractors",e),update:(e,t)=>M.put(`/contractors/${e}`,t),delete:e=>M.delete(`/contractors/${e}`)},Br={getAll:(e=!0)=>M.get("/estimate-templates",{params:{shared:e}}),getById:e=>M.get(`/estimate-templates/${e}`),create:e=>M.post("/estimate-templates",e),update:(e,t)=>M.put(`/estimate-templates/${e}`,t),delete:e=>M.delete(`/estimate-templates/${e}`),applyToProject:(e,t)=>M.post(`/estimate-templates/apply/${e}/to/${t}`)},Md={getGroups:()=>M.get("/nrm2/groups"),getGroupById:e=>M.get(`/nrm2/groups/${e}`),getElementById:e=>M.get(`/nrm2/elements/${e}`),getSubElementById:e=>M.get(`/nrm2/sub-elements/${e}`),getWorkSectionById:e=>M.get(`/nrm2/work-sections/${e}`),getWorkSectionByCode:e=>M.get(`/nrm2/work-sections/by-code/${e}`),search:(e,t)=>M.get("/nrm2/search",{params:{q:e,limit:t}}),getTree:e=>M.get("/nrm2/tree",{params:{groupId:e}}),getStatistics:()=>M.get("/nrm2/stats")},Ql={getAll:e=>M.get("/references",{params:{category:e}}),getById:e=>M.get(`/references/${e}`),getByCategory:e=>M.get("/references",{params:{category:e}}),upload:e=>M.post("/references/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>M.patch(`/references/${e}`,t),delete:e=>M.delete(`/references/${e}`),search:e=>M.get("/references/search",{params:{q:e}}),getCategoryStats:()=>M.get("/references/categories/stats"),getDownloadUrl:e=>M.get(`/references/${e}/download`)},mr=Or((e,t)=>({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null,register:async(s,n,a)=>{var l,o;try{e({isLoading:!0,error:null});const i=await jr.register(s,n,a);e({isLoading:!1}),await t().login(s,a)}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Registration failed";throw e({error:c,isLoading:!1}),i}},login:async(s,n)=>{var a,l;try{e({isLoading:!0,error:null});const o=await jr.login(s,n),{user:i,accessToken:c,refreshToken:d}=o.data;localStorage.setItem("accessToken",c),localStorage.setItem("refreshToken",d),localStorage.setItem("user",JSON.stringify(i)),e({user:i,accessToken:c,refreshToken:d,isLoading:!1})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Login failed";throw e({error:i,isLoading:!1}),o}},logout:async()=>{try{e({isLoading:!0}),t().accessToken&&await jr.logout()}catch(s){console.error("Logout error:",s)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),e({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null})}},refreshAccessToken:async()=>{try{const s=t().refreshToken;if(!s)throw new Error("No refresh token available");const n=await jr.refresh(s),{accessToken:a,refreshToken:l}=n.data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",l),e({accessToken:a,refreshToken:l})}catch(s){throw await t().logout(),s}},checkAuth:async()=>{try{e({isLoading:!0});const s=await jr.getMe(),{user:n}=s.data;e({user:n,isLoading:!1})}catch{e({user:null,accessToken:null,refreshToken:null,isLoading:!1})}},clearError:()=>{e({error:null})},hydrate:()=>{const s=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken"),a=localStorage.getItem("user");if(s&&n&&a)try{const l=JSON.parse(a);e({user:l,accessToken:s,refreshToken:n})}catch(l){console.error("Failed to hydrate auth state:",l)}}}));function W0(){const[e,t]=v.useState("monthly"),s=[{name:"Starter",description:"Perfect for freelancers starting out",price:e==="monthly"?19:190,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Up to 10 projects","Custom cost database access","Basic cost estimation","Up to 5 clients","PDF report generation","Email support"],highlighted:!1},{name:"Professional",description:"For established quantity surveyors",price:e==="monthly"?49:490,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Unlimited projects","Full cost database + regional pricing","Advanced cost estimation","Unlimited clients & contractors","Project templates","PDF & Word export","Multi-currency support","Priority support","Cost analysis & benchmarking"],highlighted:!0},{name:"Enterprise",description:"For consulting firms & teams",price:"Custom",period:"",savings:"",features:["Everything in Professional","Team collaboration (unlimited users)","Advanced analytics & reporting","Custom integrations","API access","Dedicated account manager","Custom database modules","On-premise option available"],highlighted:!1}],n=[{name:"Emma Richardson",role:"Freelance Quantity Surveyor",image:"",quote:"QSCostingPro has cut my estimation time in half. The comprehensive cost database and PDF export feature impresses my clients every time.",location:"London, UK"},{name:"David Chen",role:"Senior Cost Consultant",image:"",quote:"Finally a tool built by QS professionals for QS professionals. The regional pricing data and project templates save me hours on every project.",location:"Manchester, UK"},{name:"Sarah McCann",role:"Independent QS",image:"",quote:"The contractor management and client portal features make me look like I have a full team behind me. Absolutely transformed my business.",location:"Edinburgh, UK"},{name:"Michael Patel",role:"Construction Cost Manager",image:"",quote:"Multi-currency support and the ability to work with international projects has opened up new opportunities for my practice.",location:"Birmingham, UK"}],a=[{icon:"",title:"NRM 2 Database",description:"Standard measurement rules to simplify and normalise cost assembly"},{icon:"",title:"Client & Contractor Management",description:"Organize all your clients and contractors in one place. Track contact info, specializations, ratings, and project history."},{icon:"",title:"Professional Estimates",description:"Create detailed, branded cost estimates in PDF and Word formats. Impress clients with polished reports and detailed breakdowns."},{icon:"",title:"Cost Analysis & Benchmarking",description:"Analyze historical project data by region, building type, and specification. Make data-driven decisions on future projects."},{icon:"",title:"Multi-Currency & Regional Support",description:"Work with clients worldwide. Support for multiple currencies, regions, and localized cost databases."},{icon:"",title:"Project Templates",description:"Build reusable templates for common project types. Speed up estimation and ensure consistency across all projects."},{icon:"",title:"Easy Data Management",description:"Import/export data easily. Integrate with your existing workflows. APIs available for custom integrations."},{icon:"",title:"Enterprise Security",description:"Bank-level encryption, regular backups, and GDPR compliant. Your client data and estimates are always secure and private."}];return r.jsxs("div",{className:"bg-blue-200",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(J,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"QS"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"QSCostingPro"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(J,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(J,{to:"/register",className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg font-medium transition",children:"Sign Up Free"})]})]})})}),r.jsx("section",{className:"py-32 bg-cover bg-center bg-no-repeat relative flex items-center justify-center bg-gray-700",style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1581092162384-8987c1d64718?w=1200&h=600&fit=crop')"},children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Construction Costing Made Easy"}),r.jsx("p",{className:"text-lg text-khc-light mb-8 max-w-3xl mx-auto",children:"All-in-one cost-estimate and management platform from just 19/month"}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx(J,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Free Trial"}),r.jsx("button",{className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Watch Demo"})]})]})})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need to Succeed"}),r.jsx("p",{className:"text-xl text-gray-600",children:"From cost estimation to client management, QSCostingPro has the tools QS professionals rely on."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((l,o)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition",children:[r.jsx("div",{className:"text-4xl mb-4",children:l.icon}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:l.title}),r.jsx("p",{className:"text-gray-600",children:l.description})]},o))})]})}),r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Choose the plan that fits your practice"}),r.jsxs("div",{className:"flex justify-center gap-4 mb-12",children:[r.jsx("button",{onClick:()=>t("monthly"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="monthly"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),r.jsx("button",{onClick:()=>t("annual"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="annual"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annual (Save 17%)"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((l,o)=>r.jsxs("div",{className:`rounded-lg shadow overflow-hidden transition ${l.highlighted?"ring-2 ring-khc-primary scale-105":""}`,children:[r.jsxs("div",{className:`p-8 ${l.highlighted?"bg-khc-primary":"bg-gray-50"}`,children:[r.jsx("h3",{className:`text-2xl font-bold mb-2 ${l.highlighted?"text-white":"text-gray-900"}`,children:l.name}),r.jsx("p",{className:`mb-6 ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.description}),r.jsxs("div",{className:`mb-6 ${l.highlighted?"text-white":"text-gray-900"}`,children:[r.jsxs("span",{className:"text-4xl font-bold",children:[typeof l.price=="number"?"":"",l.price]}),r.jsx("span",{className:`text-lg ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.period}),l.savings&&r.jsx("p",{className:`text-sm font-semibold mt-2 ${l.highlighted?"text-khc-light":"text-khc-primary"}`,children:l.savings})]}),r.jsx(J,{to:"/register",className:`block text-center py-3 rounded-lg font-bold transition mb-8 ${l.highlighted?"bg-white text-khc-primary hover:bg-gray-100":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:"Get Started"})]}),r.jsx("div",{className:"p-8",children:r.jsx("ul",{className:"space-y-4",children:l.features.map((i,c)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-khc-primary font-bold mt-1",children:""}),r.jsx("span",{className:"text-gray-700",children:i})]},c))})})]},o))})]})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Loved by QS Professionals"}),r.jsx("p",{className:"text-xl text-gray-600",children:"See how QSCostingPro has transformed practices worldwide"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((l,o)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("span",{className:"text-5xl",children:l.image}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900",children:l.name}),r.jsx("p",{className:"text-sm text-gray-600",children:l.role}),r.jsx("p",{className:"text-xs text-gray-500",children:l.location})]})]}),r.jsxs("p",{className:"text-gray-700 italic",children:['"',l.quote,'"']})]},o))})]})}),r.jsx("section",{className:"py-20 bg-khc-primary text-white",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Work Smarter?"}),r.jsx("p",{className:"text-xl text-khc-light mb-8",children:"Join hundreds of quantity surveyors who are using QSCostingPro to save time and impress clients."}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx(J,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Your Free Trial"}),r.jsx(J,{to:"/login",className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Sign In"})]}),r.jsx("p",{className:"text-khc-light text-sm mt-6",children:"No credit card required. 14-day free trial on all plans."})]})}),r.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),r.jsx("span",{className:"font-bold text-white",children:"QSCostingPro"})]}),r.jsx("p",{className:"text-sm",children:"Professional cost estimation for quantity surveyors worldwide."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Product"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Features"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Pricing"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Security"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx(J,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(J,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Connect"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Support"})})]})]})]}),r.jsx("div",{className:"border-t border-gray-800 pt-8",children:r.jsx("p",{className:"text-sm text-center",children:" 2026 QSCostingPro. All rights reserved."})})]})})]})}function q0(){const e=He(),{login:t,error:s,clearError:n,isLoading:a}=mr(),[l,o]=v.useState(""),[i,c]=v.useState(""),[d,u]=v.useState({}),x=()=>{const h={};return l.trim()||(h.username="Username is required"),i||(h.password="Password is required"),u(h),Object.keys(h).length===0},p=async h=>{if(h.preventDefault(),!!x())try{await t(l,i),e("/dashboard",{replace:!0})}catch{}},N=()=>{s&&n()};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),r.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Login"}),r.jsx(J,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),s&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:s}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),r.jsx("input",{id:"username",type:"text",value:l,onChange:h=>{o(h.target.value),N()},placeholder:"Enter your username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.username?"border-red-500":"border-gray-300"}`,disabled:a}),d.username&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.username})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:h=>{c(h.target.value),N()},placeholder:"Enter your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.password?"border-red-500":"border-gray-300"}`,disabled:a}),d.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.password})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Signing in...":"Sign In"})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Don't have an account?"," ",r.jsx(J,{to:"/register",className:"text-khc-primary hover:underline font-medium",children:"Register here"})]}),r.jsx("div",{className:"mt-3 text-center text-sm text-khc-neutral",children:r.jsx(J,{to:"/password-reset",className:"text-khc-primary hover:underline font-medium",children:"Forgot password?"})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Demo Credentials:"}),r.jsx("p",{className:"text-xs",children:"Admin: username: admin | password: admin123456"}),r.jsx("p",{className:"text-xs",children:"Try creating a new account to get started!"})]})]})})}function V0(){const e=He(),{register:t,error:s,clearError:n,isLoading:a}=mr(),[l,o]=v.useState({username:"",email:"",password:"",confirmPassword:""}),[i,c]=v.useState({}),d=()=>{const p={};return l.username.trim()?l.username.length<3&&(p.username="Username must be at least 3 characters"):p.username="Username is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(p.email="Invalid email format"):p.email="Email is required",l.password?l.password.length<8&&(p.password="Password must be at least 8 characters"):p.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(p.confirmPassword="Passwords do not match"):p.confirmPassword="Please confirm your password",c(p),Object.keys(p).length===0},u=async p=>{if(p.preventDefault(),!!d())try{await t(l.username,l.email,l.password),e("/dashboard",{replace:!0})}catch{}},x=p=>{const{name:N,value:h,type:y,checked:j}=p.target;o(f=>({...f,[N]:y==="checkbox"?j:h})),s&&n()};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4 py-8",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),r.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Create Account"}),r.jsx(J,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),s&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:s}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),r.jsx("input",{id:"username",type:"text",name:"username",value:l.username,onChange:x,placeholder:"Choose a username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.username?"border-red-500":"border-gray-300"}`,disabled:a}),i.username&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.username})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Email"}),r.jsx("input",{id:"email",type:"email",name:"email",value:l.email,onChange:x,placeholder:"Enter your email",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.email?"border-red-500":"border-gray-300"}`,disabled:a}),i.email&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:l.password,onChange:x,placeholder:"Create a password (min 8 characters)",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.password?"border-red-500":"border-gray-300"}`,disabled:a}),i.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:x,placeholder:"Confirm your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.confirmPassword?"border-red-500":"border-gray-300"}`,disabled:a}),i.confirmPassword&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.confirmPassword})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Creating Account...":"Create Account"})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Already have an account?"," ",r.jsx(J,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Sign in here"})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:r.jsxs("p",{className:"text-xs",children:[r.jsx("strong",{children:"Note:"})," After registration, you can add clients and contractors from your dashboard."]})})]})})}function Q0({id:e,type:t,message:s,duration:n=4e3,onClose:a}){v.useEffect(()=>{const i=setTimeout(()=>a(e),n);return()=>clearTimeout(i)},[e,n,a]);const l={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[t],o={success:"",error:"",warning:"",info:""}[t];return r.jsxs("div",{className:`${l} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-in fade-in slide-in-from-right-2 duration-300`,role:"alert",children:[r.jsx("span",{className:"font-bold text-lg",children:o}),r.jsx("span",{className:"text-sm",children:s})]})}let ma=null;const Cs=()=>{const e=ma;return{success:(t,s)=>{e&&e.addToast("success",t,s)},error:(t,s)=>{e&&e.addToast("error",t,s)},warning:(t,s)=>{e&&e.addToast("warning",t,s)},info:(t,s)=>{e&&e.addToast("info",t,s)}}};function K0({maxToasts:e=3}){const[t,s]=v.useState([]),n=v.useRef(null),a=v.useCallback((o,i,c)=>{const u={id:`toast-${Date.now()}-${Math.random()}`,type:o,message:i,duration:c};s(x=>{const p=[...x,u];return p.length>e?p.slice(-e):p})},[e]),l=v.useCallback(o=>{s(i=>i.filter(c=>c.id!==o))},[]);return v.useEffect(()=>(n.current={addToast:a,removeToast:l},ma=n.current,()=>{ma===n.current&&(ma=null)}),[a,l]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:t.map(o=>r.jsx(Q0,{id:o.id,type:o.type,message:o.message,duration:o.duration,onClose:l},o.id))})}function G0(){const[e]=$g(),t=Cs(),s=e.get("token"),[n,a]=v.useState({request:!s,reset:!!s}),[l,o]=v.useState(""),[i,c]=v.useState(""),[d,u]=v.useState(""),[x,p]=v.useState(!1),[N,h]=v.useState(!1),y=async f=>{var g,m;if(f.preventDefault(),!l.trim()){t.error("Please enter your email address");return}p(!0);try{(await me.post("http://localhost:3000/api/v1/password-reset/request",{email:l})).data.success&&(t.success("Reset link sent! Check your email (and spam folder)"),o(""))}catch(b){t.error(((m=(g=b.response)==null?void 0:g.data)==null?void 0:m.error)||"Failed to request password reset")}finally{p(!1)}},j=async f=>{var g,m;if(f.preventDefault(),!i||!d){t.error("Please fill in all fields");return}if(i.length<8){t.error("Password must be at least 8 characters");return}if(i!==d){t.error("Passwords do not match");return}p(!0);try{(await me.post("http://localhost:3000/api/v1/password-reset/reset",{token:s,newPassword:i})).data.success&&(t.success("Password has been reset successfully!"),h(!0),c(""),u(""))}catch(b){t.error(((m=(g=b.response)==null?void 0:g.data)==null?void 0:m.error)||"Failed to reset password")}finally{p(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary mb-2 text-center",children:"Password Reset"}),r.jsx("p",{className:"text-gray-600 text-center mb-8",children:n.request?"Request a password reset link":"Set your new password"}),n.request&&!N&&r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",value:l,onChange:f=>o(f.target.value),placeholder:"admin@qscosting.local",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:x})]}),r.jsx("button",{type:"submit",disabled:x,className:"w-full py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary disabled:bg-gray-400 transition-colors font-medium",children:x?"Sending...":"Send Reset Link"}),r.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Remember your password?"," ",r.jsx(J,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Back to Login"})]})]}),n.reset&&!N&&s&&r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),r.jsx("input",{type:"password",id:"password",value:i,onChange:f=>c(f.target.value),placeholder:"At least 8 characters",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:x})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),r.jsx("input",{type:"password",id:"confirmPassword",value:d,onChange:f=>u(f.target.value),placeholder:"Re-enter your password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:x})]}),r.jsx("button",{type:"submit",disabled:x,className:"w-full py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary disabled:bg-gray-400 transition-colors font-medium",children:x?"Resetting...":"Reset Password"})]}),N&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Password Reset!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset."}),r.jsx(J,{to:"/login",className:"inline-block px-6 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition-colors font-medium",children:"Back to Login"})]}),n.request&&N&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-khc-primary mb-2",children:"Check Your Email!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"A password reset link has been sent to your email address."}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Note: In production, you would receive an email. For testing, the reset link is:"}),s&&r.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-6 text-left",children:r.jsx("p",{className:"text-xs text-gray-600 break-all",children:s})}),r.jsx(J,{to:"/login",className:"inline-block px-6 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition-colors font-medium",children:"Back to Login"})]})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsxs("p",{className:"text-white text-sm",children:["Need help?"," ",r.jsx("a",{href:"mailto:support@qscosting.local",className:"underline hover:text-gray-200",children:"Contact Support"})]})})]})})}function J0(){return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(J,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(J,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(J,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),r.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),r.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Introduction"}),r.jsx("p",{children:'KHConstruct ("we," "us," "our," or "Company") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our application.'}),r.jsx("p",{children:"Please read this Privacy Policy carefully. If you do not agree with our policies and practices, please do not use our services."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Information We Collect"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.1 Information You Provide"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Account registration information (username, email, password)"}),r.jsx("li",{children:"Project data and cost estimates"}),r.jsx("li",{children:"Cost item data including dates, codes, descriptions, and amounts"}),r.jsx("li",{children:"Any communications with our support team"})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.2 Automatically Collected Information"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Device information (browser type, IP address, operating system)"}),r.jsx("li",{children:"Usage analytics (pages visited, features used, time spent)"}),r.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. How We Use Your Information"}),r.jsx("p",{children:"We use the information we collect to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Provide, maintain, and improve our services"}),r.jsx("li",{children:"Process transactions and send related information"}),r.jsx("li",{children:"Send informational and promotional communications"}),r.jsx("li",{children:"Respond to your inquiries and customer support requests"}),r.jsx("li",{children:"Monitor and analyze trends and usage of our services"}),r.jsx("li",{children:"Detect and prevent fraudulent transactions and other illegal activities"}),r.jsx("li",{children:"Comply with legal obligations"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Data Security"}),r.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. These measures include:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"SSL/TLS encryption for data in transit"}),r.jsx("li",{children:"Hashed password storage"}),r.jsx("li",{children:"Regular security audits and updates"}),r.jsx("li",{children:"Limited access to personal information on a need-to-know basis"})]}),r.jsx("p",{className:"mt-4",children:"However, no method of transmission over the Internet or electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Data Retention"}),r.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this Privacy Policy. You can request deletion of your account and associated data at any time by contacting our support team."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Sharing Your Information"}),r.jsx("p",{children:"We do not sell, trade, or rent your personal information to third parties. We may share information:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"With your explicit consent"}),r.jsx("li",{children:"To comply with legal obligations"}),r.jsx("li",{children:"With service providers who assist in operating our website and services"}),r.jsx("li",{children:"In connection with a merger, acquisition, or sale of assets"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Your Rights and Choices"}),r.jsx("p",{children:"Depending on your jurisdiction, you may have the right to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Access your personal information"}),r.jsx("li",{children:"Correct inaccurate information"}),r.jsx("li",{children:"Request deletion of your information"}),r.jsx("li",{children:"Opt-out of marketing communications"}),r.jsx("li",{children:"Data portability"})]}),r.jsx("p",{className:"mt-4",children:"To exercise these rights, please contact us using the information provided at the end of this policy."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Cookies"}),r.jsx("p",{children:"We use cookies to enhance your experience on our website. You can control cookies through your browser settings. However, disabling cookies may affect the functionality of our services."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Children's Privacy"}),r.jsx("p",{children:"Our services are not intended for children under 13 years old. We do not knowingly collect personal information from children. If we become aware that a child has provided us with personal information, we will delete such information and terminate the child's account."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. Changes to This Privacy Policy"}),r.jsx("p",{children:'We may update this Privacy Policy from time to time to reflect changes in our practices or for other operational, legal, or regulatory reasons. We will notify you of any material changes by posting the new Privacy Policy on our website and updating the "Last updated" date.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Contact Us"}),r.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us at:"}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),r.jsx("p",{children:"Email: privacy@khconstruct.com"}),r.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[r.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),r.jsxs("div",{className:"mt-4 space-x-4",children:[r.jsx(J,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx("span",{children:"|"}),r.jsx(J,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function Y0(){return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(J,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(J,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(J,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),r.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Terms of Service"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),r.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Agreement to Terms"}),r.jsx("p",{children:"By accessing and using the KHConstruct application and website, you accept and agree to be bound by and comply with these Terms of Service. If you do not agree to abide by the above, please do not use this service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Use License"}),r.jsx("p",{children:"Permission is granted to temporarily download one copy of the materials (information or software) from KHConstruct for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Modifying or copying the materials"}),r.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),r.jsx("li",{children:"Attempting to decompile, disassemble, or reverse engineer any software contained on KHConstruct"}),r.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),r.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),r.jsx("li",{children:"Using the materials for illegal purposes or in violation of any laws or regulations"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. Disclaimer"}),r.jsx("p",{children:"The materials on KHConstruct are provided on an 'as is' basis. KHConstruct makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."}),r.jsx("p",{className:"mt-4",children:"Further, KHConstruct does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its Internet web site or otherwise relating to such materials or on any sites linked to this site."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Limitations"}),r.jsx("p",{children:"In no event shall KHConstruct or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption,) arising out of the use or inability to use the materials on KHConstruct, even if KHConstruct or a KHConstruct authorized representative has been notified orally or in writing of the possibility of such damage."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Accuracy of Materials"}),r.jsx("p",{children:"The materials appearing on KHConstruct could include technical, typographical, or photographic errors. KHConstruct does not warrant that any of the materials on its website are accurate, complete, or current. KHConstruct may make changes to the materials contained on its website at any time without notice."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Materials and Content"}),r.jsx("p",{children:"The materials and content on KHConstruct are protected by copyright and may be owned by or licensed to KHConstruct by others. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said content, whether in whole or in part, for commercial purposes or for personal gain without express advance written permission from KHConstruct."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Links"}),r.jsx("p",{children:"KHConstruct has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by KHConstruct of the site. Use of any such linked website is at the user's own risk."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Modifications"}),r.jsx("p",{children:"KHConstruct may revise these terms of service for its website at any time without notice. By using this website, you are agreeing to be bound by the then current version of these terms of service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Governing Law"}),r.jsx("p",{children:"These terms and conditions are governed by and construed in accordance with the laws of the United Kingdom, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. User Accounts"}),r.jsx("p",{children:"When you create an account on KHConstruct, you are responsible for maintaining the confidentiality of your account information and password. You agree to accept responsibility for all activities that occur under your account. You must notify us immediately of any unauthorized use of your account."}),r.jsx("p",{className:"mt-4",children:"You represent and warrant that the information you provide upon registration and at all other times is accurate, complete, and truthful."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Prohibited Activities"}),r.jsx("p",{children:"You agree that you will not engage in any activity that:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Violates any laws, regulations, or third-party rights"}),r.jsx("li",{children:"Infringes intellectual property rights"}),r.jsx("li",{children:"Contains viruses, malware, or other harmful code"}),r.jsx("li",{children:"Is defamatory, obscene, or offensive"}),r.jsx("li",{children:"Harasses or threatens others"}),r.jsx("li",{children:"Disrupts the normal flow of dialogue within our services"}),r.jsx("li",{children:"Attempts to gain unauthorized access to our systems"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"12. Intellectual Property Rights"}),r.jsx("p",{children:"Unless otherwise stated, KHConstruct and/or its licensors own the intellectual property rights for all material on KHConstruct. All intellectual property rights are reserved. You may access this from KHConstruct for your own personal use subject to restrictions set in these terms and conditions."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"13. Payment Terms"}),r.jsx("p",{children:"If you subscribe to a paid plan, you agree to pay the subscription fees as advertised. Billing occurs monthly or annually depending on your selected plan. You authorize us to charge your payment method for the subscription fees and any applicable taxes."}),r.jsx("p",{className:"mt-4",children:"You may cancel your subscription at any time. Refunds are subject to our refund policy, which is provided separately."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"14. Termination of Service"}),r.jsx("p",{children:"We reserve the right to suspend or terminate your account and access to our services at any time, for any reason, including but not limited to violation of these Terms of Service or for any unlawful purpose."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"15. Contact Information"}),r.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),r.jsx("p",{children:"Email: support@khconstruct.com"}),r.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[r.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),r.jsxs("div",{className:"mt-4 space-x-4",children:[r.jsx(J,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx("span",{children:"|"}),r.jsx(J,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function qt(){const{user:e,accessToken:t,isLoading:s,error:n,login:a,register:l,logout:o,refreshToken:i,clearError:c}=mr();return{user:e,accessToken:t,isLoading:s,error:n,isAuthenticated:!!e,login:a,register:l,logout:o,refreshToken:i,clearError:c,isAdmin:(e==null?void 0:e.role)==="admin",isEstimator:(e==null?void 0:e.role)==="estimator",isViewer:(e==null?void 0:e.role)==="viewer",hasPermission:d=>e?Array.isArray(d)?d.includes(e.role):e.role===d:!1}}const zt=Or((e,t)=>({projects:[],currentProject:null,isLoading:!1,error:null,filters:{},fetchProjects:async()=>{var s,n;e({isLoading:!0,error:null});try{const a=await Tt.getAll();e({projects:a.data.data,isLoading:!1})}catch(a){const l=((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch projects";throw e({error:l,isLoading:!1}),a}},fetchProjectById:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Tt.getById(s);e({currentProject:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch project";throw e({error:o,isLoading:!1,currentProject:null}),l}},createProject:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Tt.create(s)).data.data;return e(i=>({projects:[o,...i.projects],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to create project";throw e({error:o,isLoading:!1}),l}},updateProject:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Tt.update(s,n)).data.data;return e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update project";throw e({error:i,isLoading:!1}),o}},deleteProject:async s=>{var n,a;e({isLoading:!0,error:null});try{await Tt.delete(s),e(l=>{var o;return{projects:l.projects.filter(i=>i.id!==s),currentProject:((o=l.currentProject)==null?void 0:o.id)===s?null:l.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete project";throw e({error:o,isLoading:!1}),l}},duplicateProject:async(s,n,a,l)=>{var o,i;e({isLoading:!0,error:null});try{const d=(await Tt.duplicate(s,{name:n,include_estimates:a,copy_status:l})).data.data;return e(u=>({projects:[d,...u.projects],isLoading:!1})),d}catch(c){const d=((i=(o=c.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to duplicate project";throw e({error:d,isLoading:!1}),c}},submitEstimate:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Tt.submitEstimate(s)).data.data;e(i=>{var c;return{projects:i.projects.map(d=>d.id===s?o:d),currentProject:((c=i.currentProject)==null?void 0:c.id)===s?o:i.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to submit estimate";throw e({error:o,isLoading:!1}),l}},approveEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Tt.approveEstimate(s,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to approve estimate";throw e({error:i,isLoading:!1}),o}},rejectEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Tt.rejectEstimate(s,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to reject estimate";throw e({error:i,isLoading:!1}),o}},setFilters:s=>{e(n=>({filters:{...n.filters,...s}}))},clearError:()=>{e({error:null})},setCurrentProject:s=>{e({currentProject:s})}}));function Y(e,t="GBP",s="en-GB"){return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function X0(e,t=0,s="en-GB"){return new Intl.NumberFormat(s,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function Hh(e,t="en-GB",s){const n=typeof e=="string"?new Date(e):e,a={year:"numeric",month:"long",day:"numeric",...s};return new Intl.DateTimeFormat(t,a).format(n)}function ml(e,t=1,s="en-GB"){return`${X0(e,t,s)}%`}function Z0(e){return e.filter(t=>t.status!=="completed").reduce((t,s)=>{var a;const n=((a=s.estimate_totals)==null?void 0:a.grand_total)||s.budget_cost||0;return t+n},0)}function ej(e){const t=e.filter(n=>{var a,l;return((a=n.estimate_totals)==null?void 0:a.floor_area_m2)&&n.estimate_totals.floor_area_m2>0&&((l=n.estimate_totals)==null?void 0:l.grand_total)});if(t.length===0)return null;const s=t.reduce((n,a)=>{const l=a.estimate_totals.grand_total/a.estimate_totals.floor_area_m2;return n+l},0);return Math.round(s/t.length*100)/100}function tj(e){const t=e.filter(c=>{var d;return c.budget_cost&&((d=c.estimate_totals)==null?void 0:d.grand_total)}),s=t.reduce((c,d)=>c+(d.budget_cost||0),0),n=t.reduce((c,d)=>{var u;return c+(((u=d.estimate_totals)==null?void 0:u.grand_total)||0)},0),a=n-s,l=s>0?Math.round(a/s*1e3)/10:0,o=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)>(c.budget_cost||0)}).length,i=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)<(c.budget_cost||0)}).length;return{totalBudget:s,totalEstimate:n,variance:a,variancePercentage:l,projectsOverBudget:o,projectsUnderBudget:i}}function Wh(e){const t={};let s=0;return e.forEach(a=>{var o;(((o=a.estimate_totals)==null?void 0:o.categories)||[]).forEach(i=>{t[i.category_name]||(t[i.category_name]={total_cost:0,project_count:0}),t[i.category_name].total_cost+=i.subtotal||0,t[i.category_name].project_count+=1,s+=i.total||0})}),Object.entries(t).map(([a,l])=>({category_name:a,total_cost:l.total_cost,project_count:l.project_count,percentage:s>0?Math.round(l.total_cost/s*1e3)/10:0,avg_cost_per_project:Math.round(l.total_cost/l.project_count*100)/100})).sort((a,l)=>l.total_cost-a.total_cost)}function qh(e,t=5){return e.filter(n=>{var a;return n.budget_cost&&((a=n.estimate_totals)==null?void 0:a.grand_total)}).map(n=>{var a,l,o,i;return{project_id:n.id,project_name:n.name||`Project ${n.id}`,budget:n.budget_cost||0,estimate:((a=n.estimate_totals)==null?void 0:a.grand_total)||0,variance:(((l=n.estimate_totals)==null?void 0:l.grand_total)||0)-(n.budget_cost||0),variancePercentage:(n.budget_cost||0)>0?Math.round(((((o=n.estimate_totals)==null?void 0:o.grand_total)||0)-(n.budget_cost||0))/(n.budget_cost||0)*1e3)/10:0,isOverBudget:(((i=n.estimate_totals)==null?void 0:i.grand_total)||0)>(n.budget_cost||0)}}).sort((n,a)=>a.estimate-n.estimate).slice(0,t)}function rj({projects:e,isLoading:t=!1}){const s=tj(e),n=s.variance>0,a=n?"border-khc-accent":"border-green-500",l=n?"text-khc-accent":"text-green-600",o=n?"bg-orange-50":"bg-green-50";if(t)return r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a}`,children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})});const i=s.projectsOverBudget,c=s.projectsUnderBudget;return r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a} transition-all hover:shadow-lg`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Budget Variance"}),r.jsxs("p",{className:`text-3xl font-bold mt-2 ${l}`,children:[n?"+":"",Y(s.variance)]}),r.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[r.jsxs("span",{className:`inline-flex items-center ${n?"text-khc-accent":"text-green-600"} text-sm font-medium`,children:[n?r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12 15a1 1 0 01-.707-.293l-2.828-2.829a1 1 0 011.414-1.414L11 11.414V5a1 1 0 112 0v5.414l1.121-1.121a1 1 0 111.414 1.414l-2.828 2.829A1 1 0 0112 15z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12 5a1 1 0 01.707.293l2.828 2.829a1 1 0 11-1.414 1.414L13 8.586V15a1 1 0 11-2 0V8.586l-1.121 1.121a1 1 0 11-1.414-1.414l2.828-2.829A1 1 0 0112 5z",clipRule:"evenodd"})}),ml(Math.abs(s.variancePercentage),1)]}),r.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",n?"over":"under"," budget)"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i>0&&`${i} project${i!==1?"s":""} over budget  `,c>0&&`${c} under budget`,i===0&&c===0&&"No budget data available"]})]}),r.jsx("div",{className:`${o} rounded-lg w-16 h-16 flex items-center justify-center flex-shrink-0 text-2xl`,children:n?"":""})]})})}function sj({projects:e,isLoading:t=!1}){const s=qh(e,5);if(t)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>r.jsxs("div",{children:[r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-8 bg-gray-100 rounded"})]},a))})]});if(s.length===0)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),r.jsx("p",{className:"text-center text-gray-600 py-8",children:"Set budgets to compare estimates"})]});const n=Math.max(...s.flatMap(a=>[a.budget,a.estimate]));return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),r.jsx("div",{className:"space-y-5",children:s.map(a=>{const l=a.budget/n*100,o=a.estimate/n*100,i=a.isOverBudget?"text-khc-accent":"text-green-600";return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate flex-1",children:a.project_name}),r.jsxs("span",{className:`text-xs font-semibold ${i}`,children:[a.isOverBudget?"+":"",ml(a.variancePercentage,1)]})]}),r.jsxs("div",{className:"relative h-5 bg-gray-100 rounded overflow-hidden",children:[r.jsx("div",{className:"absolute h-full bg-khc-primary rounded",style:{width:`${l}%`}}),r.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:l>20&&Y(a.budget)})]}),r.jsxs("div",{className:"relative h-5 rounded overflow-hidden",style:{backgroundColor:"#f3f4f6"},children:[r.jsx("div",{className:`absolute h-full rounded ${a.isOverBudget?"bg-khc-accent":"bg-green-500"}`,style:{width:`${o}%`}}),r.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:o>20&&Y(a.estimate)})]}),r.jsx("div",{className:"flex justify-between text-xs text-gray-600 px-1",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Budget:"})," ",Y(a.budget)]}),r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Estimate:"})," ",Y(a.estimate)]})]})})]},a.project_id)})}),r.jsxs("div",{className:"mt-6 pt-4 border-t flex gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-khc-primary"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Budget"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-khc-accent"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Over)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Under)"})]})]})]})}const Bd=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function nj({projects:e,isLoading:t=!1}){const s=Wh(e);if(t)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded"})]});if(s.length===0)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),r.jsx("p",{className:"text-center text-gray-600 py-12",children:"No category data available"})]});const n=s.reduce((i,c)=>i+c.total_cost,0),a=70;let l=-90;const o=s.map((i,c)=>{const d=i.total_cost/n*100,u=l*(Math.PI/180),x=(l+d/100*360)*(Math.PI/180),p=100+a*Math.cos(u),N=100+a*Math.sin(u),h=100+a*Math.cos(x),y=100+a*Math.sin(x),j=d>50?1:0,f=`M ${p} ${N} A ${a} ${a} 0 ${j} 1 ${h} ${y} L ${100+(a-25)*Math.cos(x)} ${100+(a-25)*Math.sin(x)} A ${a-25} ${a-25} 0 ${j} 0 ${100+(a-25)*Math.cos(u)} ${100+(a-25)*Math.sin(u)} Z`;return l+=d/100*360,{path:f,color:Bd[c%Bd.length],...i}});return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-8",children:[r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"relative w-64 h-64",children:[r.jsx("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:o.map((i,c)=>r.jsx("g",{children:r.jsx("path",{d:i.path,fill:i.color,opacity:"0.9",className:"hover:opacity-100 transition-opacity cursor-pointer"})},c))}),r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-khc-primary",children:Y(n)}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total Cost"})]})})]})}),r.jsx("div",{className:"flex-1 space-y-3",children:o.map((i,c)=>r.jsxs("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-gray-50 transition",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:i.color}}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.category_name}),r.jsxs("div",{className:"flex items-center justify-between gap-2 mt-0.5",children:[r.jsx("p",{className:"text-xs text-gray-600",children:Y(i.total_cost)}),r.jsx("p",{className:"text-xs font-semibold text-gray-700",children:ml(i.percentage,1)})]})]})]},c))})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Categories"}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.length})]}),r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Avg per Category"}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:Y(n/s.length)})]})]})]})}const Gn=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function aj({projects:e,isLoading:t=!1}){const s=Wh(e),n=s.reduce((a,l)=>a+l.total_cost,0);return t?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>r.jsx("div",{className:"h-12 bg-gray-100 rounded"},a))})]}):s.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Cost by Category"}),r.jsx("p",{className:"text-center text-gray-600 py-8",children:"No category data available"})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-khc-primary to-khc-secondary",children:[r.jsx("h3",{className:"font-semibold text-white",children:" Cost by Category"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-1",children:[s.length," categories across projects"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Total Cost"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"%"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Projects"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-700",children:"Avg/Project"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map((a,l)=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:Gn[l%Gn.length]}}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.category_name})]})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Y(a.total_cost)})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${a.percentage}%`,backgroundColor:Gn[l%Gn.length]}})}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 w-10 text-right",children:ml(a.percentage,1)})]})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("span",{className:"text-sm font-medium text-gray-600",children:a.project_count})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:Y(a.avg_cost_per_project)})})]},l))})]})}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Project Total"}),r.jsx("span",{className:"text-lg font-bold text-khc-primary",children:Y(n)})]})})]})}function lj(){const{user:e}=qt(),{projects:t,isLoading:s,fetchProjects:n}=zt();v.useEffect(()=>{n()},[n]);const a=Z0(t),l=ej(t),o=t.filter(d=>d.status!=="completed").length,i=qh(t).length,c=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="estimator";return r.jsxs("div",{className:"space-y-6",children:[c&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"md:col-span-2 lg:col-span-6 lg:row-span-2",children:r.jsx("div",{className:"bg-gradient-to-br from-khc-primary to-khc-secondary rounded-lg shadow-md p-8 text-white h-full flex flex-col justify-between overflow-hidden relative",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/3 mb-4"}),r.jsx("div",{className:"h-12 bg-white bg-opacity-20 rounded w-1/2"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white text-opacity-80 mb-2",children:"Total Project Value"}),r.jsx("h2",{className:"text-4xl font-bold mb-1",children:Y(a)}),r.jsxs("p",{className:"text-xs text-white text-opacity-70",children:[t.length," active projects"]})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-white border-opacity-20",children:[r.jsxs("svg",{className:"w-full h-16",viewBox:"0 0 200 60",children:[r.jsx("polyline",{points:"0,40 25,35 50,30 75,25 100,20 125,25 150,30 175,35 200,40",fill:"none",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2"}),r.jsx("polyline",{points:"0,45 25,40 50,35 75,30 100,25 125,30 150,35 175,40 200,45",fill:"rgba(255,255,255,0.1)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"})]}),r.jsx("p",{className:"text-xs text-white text-opacity-70 mt-2",children:"Cumulative estimate trend"})]})]})})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3 lg:row-span-2",children:r.jsx(rj,{projects:t,isLoading:s})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Active Projects"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-green-50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"In Progress"}),r.jsx("p",{className:"font-bold text-green-700",children:t.filter(d=>d.status==="in_progress").length})]}),r.jsxs("div",{className:"bg-blue-50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"Draft"}),r.jsx("p",{className:"font-bold text-blue-700",children:t.filter(d=>d.status==="draft").length})]})]})]})})}),l&&r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Avg Cost per m"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:Y(l)})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsx("p",{children:"Per square meter"}),r.jsx("p",{className:"text-purple-600 font-semibold",children:"Industry metric"})]})})]})})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx(J,{to:"/projects",className:"block bg-gradient-to-br from-khc-accent to-orange-600 rounded-lg shadow-md p-6 text-white h-full hover:shadow-lg transition-shadow cursor-pointer",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-white bg-opacity-20 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white text-opacity-90 mb-2",children:"Projects at Risk"}),r.jsx("p",{className:"text-4xl font-bold",children:i}),r.jsx("p",{className:"text-xs text-white text-opacity-80 mt-1",children:"Over budget"})]}),r.jsx("div",{className:"text-4xl",children:""})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-white border-opacity-20",children:r.jsx("p",{className:"text-xs text-white text-opacity-70",children:"View details "})})]})})}),r.jsx("div",{className:"md:col-span-2 lg:col-span-7",children:r.jsx(sj,{projects:t,isLoading:s})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-5",children:r.jsx(nj,{projects:t,isLoading:s})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(aj,{projects:t,isLoading:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(J,{to:"/projects/new",className:"group block bg-khc-primary hover:bg-khc-neutral text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"Create Project"}),r.jsx("p",{className:"text-xs text-gray-200 mt-2",children:"Start a new project"})]}),r.jsxs(J,{to:"/projects",className:"group block bg-khc-secondary hover:bg-khc-primary text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"All Projects"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:["View ",t.length," projects"]})]}),r.jsxs(J,{to:"/projects",className:"group block bg-gradient-to-br from-emerald-500 to-green-600 text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"Completed"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:[t.filter(d=>d.status==="completed").length," finished"]})]})]})]})]}),!c&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Financial metrics are available to administrators and estimators."})]})]})}const oj=e=>{const[t,s]=v.useState(new Set),n=v.useCallback(u=>{s(x=>{const p=new Set(x);return p.has(u)?p.delete(u):p.add(u),p})},[]),a=v.useCallback(()=>{const u=new Set(e.map(x=>x.id));s(u)},[e]),l=v.useCallback(()=>{s(new Set)},[]),o=v.useCallback(()=>{t.size===e.length?l():a()},[t.size,e.length,a,l]),i=v.useCallback(u=>t.has(u),[t]),c=v.useCallback(()=>e.filter(u=>t.has(u.id)),[e,t]),d=v.useCallback(()=>{s(new Set)},[]);return{selectedIds:t,selectedCount:t.size,isAllSelected:t.size===e.length&&e.length>0,isPartiallySelected:t.size>0&&t.size<e.length,toggleSelection:n,selectAll:a,deselectAll:l,toggleAll:o,isSelected:i,getSelectedItems:c,clearSelection:d}};function ij({selectedCount:e,totalCount:t,isAllSelected:s,isPartiallySelected:n,onSelectAll:a,onDeselectAll:l,onBulkDelete:o,onBulkStatusChange:i,isLoading:c=!1}){return r.jsx("div",{className:"bg-khc-light border-b-2 border-khc-primary sticky top-16 z-30 transition-all duration-300",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",children:[r.jsx("input",{type:"checkbox",checked:s,ref:d=>{d&&(d.indeterminate=n)},onChange:s?l:a,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:s?"Deselect All":"Select All"})]}),r.jsx("div",{className:"h-6 w-px bg-gray-300"}),r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e," of ",t," selected"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("button",{disabled:e===0||c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Change status for selected projects",children:" Change Status"}),r.jsxs("div",{className:"absolute right-0 mt-0 w-48 bg-white rounded-lg shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx("button",{onClick:()=>i("draft"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Draft"}),r.jsx("button",{onClick:()=>i("in_progress"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" In Progress"}),r.jsx("button",{onClick:()=>i("completed"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Completed"})]})]}),r.jsxs("button",{onClick:o,disabled:e===0||c,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Delete selected projects",children:[" Delete (",e,")"]}),r.jsx("button",{onClick:l,disabled:e===0,className:"px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg text-sm font-medium disabled:opacity-50 transition-colors",children:" Clear"})]})]})})})}function Es({isOpen:e,onClose:t,title:s,children:n,footer:a,size:l="md"}){if(!e)return null;const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center modal-overlay",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),r.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl ${o[l]} w-full mx-4 modal-content`,children:[s&&r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"px-6 py-4",children:n}),a&&r.jsx("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200",children:a})]})]})}function cj({isOpen:e,onClose:t,onDuplicate:s,projectName:n,isLoading:a=!1}){const[l,o]=v.useState(`${n} - Copy`),[i,c]=v.useState(!1),[d,u]=v.useState(!1),[x,p]=v.useState({}),N=async()=>{const h={};if(l.trim()||(h.name="Project name is required"),l.length>255&&(h.name="Project name must be less than 255 characters"),Object.keys(h).length>0){p(h);return}try{await s({name:l.trim(),includeEstimates:i,copyStatus:d}),o(`${n} - Copy`),c(!1),u(!1),p({}),t()}catch{}};return r.jsx(Es,{isOpen:e,onClose:t,title:"Duplicate Project",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Project Name *"}),r.jsx("input",{type:"text",value:l,onChange:h=>{o(h.target.value),x.name&&p({...x,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Project Name - Copy",maxLength:255}),x.name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:x.name})]}),r.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Copy Options"}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i,onChange:h=>c(h.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Include Estimates"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Copy all line items and estimates from the original project"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:h=>u(h.target.checked),disabled:!i,className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer disabled:opacity-50"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${d?"text-gray-900":"text-gray-600"}`,children:"Copy Status (if estimates included)"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Copy estimate status (approved, rejected, etc.)"})]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900",children:" The new project will be created as a draft. You can edit it after creation."})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,disabled:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:N,disabled:a,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:a?"Duplicating...":"Duplicate Project"})]})]})})}function Er(e){var t,s,n,a,l,o,i;if(me.isAxiosError(e)){const c=e;if((s=(t=c.response)==null?void 0:t.data)!=null&&s.error)return c.response.data.error;if((a=(n=c.response)==null?void 0:n.data)!=null&&a.message)return c.response.data.message;if((o=(l=c.response)==null?void 0:l.data)!=null&&o.errors){const d=c.response.data.errors;if(Array.isArray(d))return d.map(u=>u.message).join(", ")}if((i=c.response)!=null&&i.status)switch(c.response.status){case 400:return"Invalid request. Please check your input.";case 401:return"Authentication failed. Please login again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 409:return"This resource already exists.";case 422:return"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Please try again later.";case 503:return"Service unavailable. Please try again later.";default:return`Error: ${c.response.status} ${c.response.statusText}`}return c.message==="Network Error"?"Network error. Please check your internet connection.":c.message||"An error occurred"}return e instanceof Error?e.message:"An unknown error occurred"}function dj(){He();const e=Cs(),{user:t,isEstimator:s,isAdmin:n}=qt(),{projects:a,isLoading:l,error:o,fetchProjects:i,deleteProject:c,updateProject:d,duplicateProject:u}=zt(),[x,p]=v.useState({status:"",estimateStatus:"",progress:"",search:""}),[N,h]=v.useState(!1),[y,j]=v.useState(!1),[f,g]=v.useState(!1),[m,b]=v.useState(null),[S,k]=v.useState(""),w=oj(a);v.useEffect(()=>{i()},[i]);const E=a.filter(D=>!(x.status&&D.status!==x.status||x.estimateStatus&&D.estimate_status!==x.estimateStatus||x.progress&&D.progress!==x.progress||x.search&&!D.name.toLowerCase().includes(x.search.toLowerCase()))),R=async D=>{if(window.confirm("Are you sure you want to delete this project?"))try{await c(D)}catch{}},F=async()=>{const D=w.getSelectedItems(),q=`Delete ${D.length} project${D.length!==1?"s":""}? This cannot be undone.`;if(window.confirm(q))try{h(!0);let $=0,P=0;for(const _ of D)try{await c(_.id),$++}catch(T){P++,`${_.id}`}w.clearSelection(),e.success(`Deleted ${$} project${$!==1?"s":""}`),P>0&&e.error(`Failed to delete ${P} project${P!==1?"s":""}`)}finally{h(!1)}},O=async D=>{const q=w.getSelectedItems();try{h(!0);let $=0;for(const P of q)try{await d(P.id,{status:D}),$++}catch(_){`${P.id}`}w.clearSelection(),await i(),e.success(`Updated ${$} project${$!==1?"s":""}`)}finally{h(!1)}},W=(D,q)=>{b(D),k(q),g(!0)},U=async D=>{if(m)try{j(!0),await u(m,D.name,D.includeEstimates,D.copyStatus),await i(),e.success("Project duplicated successfully"),g(!1)}catch{e.error("Failed to duplicate project")}finally{j(!1)}};return r.jsxs("div",{className:"space-y-6",children:[w.selectedCount>0&&r.jsx(ij,{selectedCount:w.selectedCount,totalCount:a.length,isAllSelected:w.isAllSelected,isPartiallySelected:w.isPartiallySelected,onSelectAll:w.selectAll,onDeselectAll:w.deselectAll,onBulkDelete:F,onBulkStatusChange:O,isLoading:N}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Projects"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your estimation projects"})]}),(n||s)&&r.jsx(J,{to:"/projects/new",className:"bg-khc-primary hover:bg-khc-secondary text-white font-medium py-2 px-4 rounded-lg transition",children:"+ New Project"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Search by name...",value:x.search,onChange:D=>p({...x,search:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:x.status,onChange:D=>p({...x,status:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimate Status"}),r.jsxs("select",{value:x.estimateStatus,onChange:D=>p({...x,estimateStatus:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Estimates"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress"}),r.jsxs("select",{value:x.progress,onChange:D=>p({...x,progress:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Progress"}),r.jsx("option",{value:"Not Started",children:"Not Started"}),r.jsx("option",{value:"Progressing",children:"Progressing"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]})]})}),o&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:o}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading projects..."}):E.length===0?r.jsx("div",{className:"p-6 text-center text-gray-600",children:a.length===0?"No projects yet.":"No projects match your filters."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700 w-12",children:r.jsx("input",{type:"checkbox",checked:w.isAllSelected,ref:D=>{D&&(D.indeterminate=w.isPartiallySelected)},onChange:w.toggleAll,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Location"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Estimate"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:E.map(D=>r.jsxs("tr",{className:`hover:bg-gray-50 transition ${w.isSelected(D.id)?"bg-khc-light":""}`,children:[r.jsx("td",{className:"px-6 py-4 w-12",children:r.jsx("input",{type:"checkbox",checked:w.isSelected(D.id),onChange:()=>w.toggleSelection(D.id),className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(J,{to:`/projects/${D.id}`,className:"text-khc-primary hover:underline font-medium",children:D.name})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D.project_address||D.description||"N/A"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${D.progress==="Completed"?"bg-green-100 text-green-700":D.progress==="Progressing"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:D.progress||"Not Started"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium",children:D.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${D.estimate_status==="approved"?"bg-green-100 text-green-700":D.estimate_status==="submitted"?"bg-blue-100 text-blue-700":D.estimate_status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:D.estimate_status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(D.created_at).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 space-x-2 flex",children:[r.jsx(J,{to:`/projects/${D.id}`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"View"}),(n||(t==null?void 0:t.id)===D.created_by&&s)&&r.jsxs(r.Fragment,{children:[r.jsx(J,{to:`/projects/${D.id}/edit`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>W(D.id,D.name),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Duplicate"}),n&&r.jsx("button",{onClick:()=>R(D.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]},D.id))})]})})}),r.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",E.length," of ",a.length," projects"]}),r.jsx(cj,{isOpen:f,onClose:()=>g(!1),onDuplicate:U,projectName:S,isLoading:y})]})}function Ge({label:e="Back",className:t=""}){const s=He();return r.jsxs("button",{onClick:()=>s(-1),className:`
        inline-flex items-center gap-2 px-4 py-2
        bg-gray-200 hover:bg-gray-300
        text-gray-700
        rounded-lg font-medium
        transition duration-200
        ${t}
      `,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e]})}function zd(){const{id:e}=Ss(),t=He(),{currentProject:s,isLoading:n,error:a,fetchProjectById:l,createProject:o,updateProject:i}=zt(),c=!!e,[d,u]=v.useState({name:"",client_id:"",contractor_id:"",budget_cost:"",start_date:"",project_address:"",description:"",notes:"",progress:"Not Started"}),[x,p]=v.useState([]),[N,h]=v.useState([]),[y,j]=v.useState(!0),[f,g]=v.useState(!0),[m,b]=v.useState({});v.useEffect(()=>{(async()=>{try{const[F,O]=await Promise.all([Hs.getAll(),Ws.getAll()]);p(F.data.data||[]),h(O.data.data||[])}catch{console.error("Failed to load clients/contractors")}finally{j(!1),g(!1)}})()},[]),v.useEffect(()=>{c&&e&&l(Number(e)).then(()=>{var R,F,O;s&&u({name:s.name||"",client_id:((R=s.client_id)==null?void 0:R.toString())||"",contractor_id:((F=s.contractor_id)==null?void 0:F.toString())||"",budget_cost:((O=s.budget_cost)==null?void 0:O.toString())||"",start_date:s.start_date||"",project_address:s.project_address||"",description:s.description||"",notes:s.notes||"",progress:s.progress||"Not Started"})})},[e,c,l,s==null?void 0:s.id]);const S=()=>{const R={};return d.name.trim()||(R.name="Project name is required"),d.client_id.trim()||(R.client_id="Client is required"),d.start_date||(R.start_date="Start date is required"),d.budget_cost&&isNaN(Number(d.budget_cost))&&(R.budget_cost="Must be a valid number"),b(R),Object.keys(R).length===0},k=async R=>{if(R.preventDefault(),!!S())try{const F={name:d.name,client_id:Number(d.client_id),contractor_id:d.contractor_id?Number(d.contractor_id):void 0,budget_cost:d.budget_cost?Number(d.budget_cost):void 0,start_date:d.start_date,project_address:d.project_address||void 0,description:d.description||void 0,notes:d.notes||void 0};if(c&&e)await i(Number(e),F),t(`/projects/${e}`);else{const O=await o(F);t(`/projects/${O.id}`)}}catch{}},w=R=>{const{name:F,value:O}=R.target;u(W=>({...W,[F]:O}))},E=async()=>{if(!(!c||!e)&&window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{const R=JSON.parse(localStorage.getItem("deletedProjects")||"[]");R.push(Number(e)),localStorage.setItem("deletedProjects",JSON.stringify(R));const O=JSON.parse(localStorage.getItem("projects")||"[]").filter(W=>W.id!==Number(e));localStorage.setItem("projects",JSON.stringify(O)),t("/projects")}catch(R){console.error("Error deleting project:",R)}};return r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsx(Ge,{}),r.jsx("div",{className:"mb-6",children:r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:c?"Edit Project":"Create New Project"})}),a&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:a}),r.jsxs("form",{onSubmit:k,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[c&&s&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Project ID:"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",s.id]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),r.jsx("input",{type:"text",name:"name",value:d.name,onChange:w,placeholder:"E.g., Kitchen Renovation, Office Expansion",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${m.name?"border-red-500":"border-gray-300"}`,disabled:n}),m.name&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.name})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name *"}),r.jsxs("select",{name:"client_id",value:d.client_id,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${m.client_id?"border-red-500":"border-gray-300"}`,disabled:n||y,children:[r.jsx("option",{value:"",children:"Select a client..."}),x.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),m.client_id&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.client_id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contractor Name"}),r.jsxs("select",{name:"contractor_id",value:d.contractor_id,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n||f,children:[r.jsx("option",{value:"",children:"Select a contractor (optional)..."}),N.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",name:"start_date",value:d.start_date,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${m.start_date?"border-red-500":"border-gray-300"}`,disabled:n}),m.start_date&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.start_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Cost ()"}),r.jsx("input",{type:"number",name:"budget_cost",value:d.budget_cost,onChange:w,placeholder:"0.00",step:"0.01",min:"0",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${m.budget_cost?"border-red-500":"border-gray-300"}`,disabled:n}),m.budget_cost&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.budget_cost})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Progress"}),r.jsxs("select",{name:"progress",value:d.progress,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n,children:[r.jsx("option",{value:"Not Started",children:"Not Started"}),r.jsx("option",{value:"Progressing",children:"Progressing"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Address"}),r.jsx("input",{type:"text",name:"project_address",value:d.project_address,onChange:w,placeholder:"E.g., 123 Main Street, London, SW1A 1AA",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:d.description,onChange:w,placeholder:"Project scope, objectives, and key details...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{name:"notes",value:d.notes,onChange:w,placeholder:"Additional notes, constraints, special requirements...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),r.jsxs("div",{className:"flex gap-4 justify-between pt-6 border-t",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",disabled:n,children:"Cancel"}),c&&r.jsx("button",{type:"button",onClick:E,className:"px-6 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition font-medium",disabled:n,children:"Delete Project"})]}),r.jsx("button",{type:"submit",disabled:n,className:`px-6 py-2 rounded-lg text-white font-medium transition ${n?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:n?"Saving...":c?"Update Project":"Create Project"})]})]})]})}const Vh=Or((e,t)=>({estimates:[],estimateTotals:null,isLoading:!1,error:null,currentProjectId:null,fetchEstimates:async s=>{var n,a;e({isLoading:!0,error:null,currentProjectId:s});try{const l=await $s.getAll(s);e({estimates:l.data.data.estimates,estimateTotals:l.data.data.totals,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimates";throw e({error:o,isLoading:!1,estimates:[],estimateTotals:null}),l}},fetchEstimateSummary:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await $s.getSummary(s);e({estimateTotals:l.data.data.estimate,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimate summary";throw e({error:o,isLoading:!1,estimateTotals:null}),l}},addEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await $s.create(s,n)).data.data;return await t().fetchEstimates(s),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to add estimate";throw e({error:i,isLoading:!1}),o}},updateEstimate:async(s,n,a)=>{var l,o;e({isLoading:!0,error:null});try{const c=(await $s.update(s,n,a)).data.data;return await t().fetchEstimates(s),c}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Failed to update estimate";throw e({error:c,isLoading:!1}),i}},deleteEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{await $s.delete(s,n),await t().fetchEstimates(s)}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to delete estimate";throw e({error:i,isLoading:!1}),o}},clearError:()=>{e({error:null})},clearEstimates:()=>{e({estimates:[],estimateTotals:null,currentProjectId:null})}})),Kl="qscostingpro_recent_projects",uj=5,mj=()=>{const e=()=>{try{const n=localStorage.getItem(Kl);return n?JSON.parse(n):[]}catch{return[]}};return{getRecent:e,addRecent:(n,a)=>{try{const o=e().filter(d=>d.id!==n),c=[{id:Number(n),name:String(a||"Unknown"),viewed_at:Date.now()},...o].slice(0,uj);localStorage.setItem(Kl,JSON.stringify(c))}catch(l){console.error("Failed to add recent project:",l)}},clearRecent:()=>{try{localStorage.removeItem(Kl)}catch{}}}};function Qh({projectId:e,projectName:t,isDisabled:s=!1}){const[n,a]=v.useState(!1),[l,o]=v.useState(null),[i,c]=v.useState("nrm2"),[d,u]=v.useState(!1),x=async()=>{var p,N;a(!0),o(null);try{const h=localStorage.getItem("accessToken");if(!h)throw new Error("No authentication token found");const y=await me.get(`http://localhost:3000/api/v1/projects/${e}/estimates/export-pdf?groupBy=${i}`,{headers:{Authorization:`Bearer ${h}`},responseType:"blob"}),j=new Blob([y.data],{type:"application/pdf"}),f=window.URL.createObjectURL(j),g=document.createElement("a");g.href=f;const m=new Date().toISOString().split("T")[0],b=`BOQ_${t.replace(/[^a-z0-9]/gi,"_")}_${m}.pdf`;g.setAttribute("download",b),document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(f)}catch(h){console.error("PDF export failed:",h),o(((N=(p=h.response)==null?void 0:p.data)==null?void 0:N.error)||"Failed to export PDF. Please ensure there are line items to export.")}finally{a(!1)}};return r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2 items-center relative",children:[r.jsx("button",{onClick:x,disabled:s||n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 flex items-center gap-2 justify-center",children:n?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):r.jsx(r.Fragment,{children:" Export PDF"})}),r.jsx("button",{onClick:()=>u(!d),disabled:s||n,className:"px-2 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg disabled:bg-gray-200 text-xs",title:"PDF export options",children:""}),d&&r.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-max",children:r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Group By:"}),r.jsxs("label",{className:"flex items-center gap-2 text-sm mb-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[r.jsx("input",{type:"radio",name:"groupBy",value:"nrm2",checked:i==="nrm2",onChange:p=>c(p.target.value),className:"cursor-pointer"}),r.jsx("span",{children:"NRM 2 Structure (recommended)"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-gray-50 p-1 rounded",children:[r.jsx("input",{type:"radio",name:"groupBy",value:"category",checked:i==="category",onChange:p=>c(p.target.value),className:"cursor-pointer"}),r.jsx("span",{children:"By Category"})]})]})})]}),l&&r.jsx("p",{className:"text-red-600 text-sm",children:l})]})}function hj({budgetCost:e,actualCost:t,contingencyAmount:s=0}){if(!e)return r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[" No budget set for this project. ",r.jsx("strong",{children:"Set a budget"})," to track costs against estimates."]})});const n=t+s,a=e-n,l=n/e*100,o=a<0;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Budget"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:["",e.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Actual Cost"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["",n.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),r.jsxs("div",{className:`rounded-lg p-4 ${o?"bg-red-50":"bg-emerald-50"}`,children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Remaining"}),r.jsxs("p",{className:`text-2xl font-bold mt-1 ${o?"text-red-600":"text-emerald-600"}`,children:["",Math.abs(a).toLocaleString("en-GB",{maximumFractionDigits:0})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Budget Usage"}),r.jsxs("p",{className:"text-sm font-bold text-gray-600",children:[l.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${l>100?"bg-red-500":l>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(l,100)}%`}})})]}),r.jsx("div",{className:`rounded-lg p-3 ${o?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:r.jsx("p",{className:`text-sm font-medium ${o?"text-red-800":"text-green-800"}`,children:o?r.jsxs(r.Fragment,{children:[" ",r.jsx("strong",{children:"Over Budget:"})," ",Math.abs(a).toLocaleString("en-GB",{maximumFractionDigits:2})," ","over budget"]}):r.jsxs(r.Fragment,{children:[" ",r.jsx("strong",{children:"Within Budget:"})," ",a.toLocaleString("en-GB",{maximumFractionDigits:2})," ","remaining"]})})}),s>0&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-700",children:"Estimate Total:"}),r.jsxs("span",{className:"font-semibold",children:["",t.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",(s/t*100).toFixed(1),"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",s.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})}function pj({projectId:e,notes:t,onAddNote:s,onDeleteNote:n,isLoading:a=!1}){const[l,o]=v.useState(""),[i,c]=v.useState(!1),d=async u=>{if(u.preventDefault(),!!l.trim())try{c(!0),await s(l),o("")}finally{c(!1)}};return r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Project Notes"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add comments and notes about this project"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("form",{onSubmit:d,className:"mb-6",children:[r.jsx("textarea",{value:l,onChange:u=>o(u.target.value),placeholder:"Add a note...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,disabled:i||a}),r.jsx("button",{type:"submit",disabled:!l.trim()||i||a,className:"mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors font-medium",children:i?"Adding...":"Add Note"})]}),r.jsx("div",{className:"space-y-3",children:t.length===0?r.jsx("div",{className:"py-8 text-center text-gray-500",children:r.jsx("p",{className:"text-sm",children:"No notes yet. Add one to get started!"})}):t.map(u=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:u.author}),r.jsx("p",{className:"text-xs text-gray-600",children:new Date(u.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n&&r.jsx("button",{onClick:()=>n(u.id),className:"text-red-600 hover:text-red-700 text-xs font-medium",title:"Delete note",children:""})]}),r.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:u.content})]},u.id))})]})]})}function fj(){var Se;const{id:e}=Ss();He();const{user:t,isAdmin:s}=qt(),n=Cs(),{addRecent:a}=mj(),l=Number(e),{currentProject:o,isLoading:i,error:c,fetchProjectById:d}=zt(),{estimateTotals:u,isLoading:x,error:p,fetchEstimateSummary:N,clearEstimates:h}=Vh(),[y,j]=v.useState(""),[f,g]=v.useState(""),[m,b]=v.useState(!1),[S,k]=v.useState(!1),[w,E]=v.useState(!1),[R,F]=v.useState([]);v.useEffect(()=>(l&&(d(l),N(l)),()=>{h()}),[l,d,N,h]),v.useEffect(()=>{o!=null&&o.name&&a(l,o.name)},[l,o==null?void 0:o.name,a]);const{submitEstimate:O,approveEstimate:W,rejectEstimate:U}=zt(),D=async()=>{if(l)try{E(!0),await O(l),await d(l),await N(l),n.success("Estimate submitted for approval"),E(!1)}catch(V){n.error(Er(V)),E(!1)}},q=async()=>{if(l)try{E(!0),await W(l,y),await d(l),await N(l),n.success("Estimate approved successfully"),b(!1),j(""),E(!1)}catch(V){n.error(Er(V)),E(!1)}},$=async()=>{if(l)try{E(!0),await U(l,f),await d(l),await N(l),n.success("Estimate rejected"),k(!1),g(""),E(!1)}catch(V){n.error(Er(V)),E(!1)}},P=async V=>{const Ee={id:Date.now().toString(),author:(t==null?void 0:t.username)||"Unknown",content:V,createdAt:new Date().toISOString()};F([Ee,...R]),n.success("Note added successfully")},_=async V=>{F(R.filter(Ee=>Ee.id!==V)),n.success("Note deleted successfully")},T=i||x,B=c||p,G=!i&&o&&(s||(t==null?void 0:t.id)===o.created_by),re=s&&(o==null?void 0:o.estimate_status)==="submitted",pe=s&&(o==null?void 0:o.estimate_status)==="submitted",ne=!i&&o&&((t==null?void 0:t.id)===o.created_by||s)&&o.estimate_status==="draft";return T?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading project..."}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:o.name}),r.jsx("p",{className:"text-gray-600 mt-2",children:o.project_address||o.description||"No address provided"})]}),r.jsxs("div",{className:"flex gap-2",children:[u&&u.grand_total>0&&r.jsx(Qh,{projectId:l,projectName:o.name}),G&&r.jsx(J,{to:`/projects/${l}/edit`,className:"px-4 py-2 border border-khc-primary text-khc-primary hover:bg-khc-light rounded-lg transition",children:"Edit"})]})]}),B&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:B}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:o.status})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Estimate Status"}),r.jsx("p",{className:`text-lg font-semibold mt-1 ${o.estimate_status==="approved"?"text-green-600":o.estimate_status==="submitted"?"text-blue-600":o.estimate_status==="rejected"?"text-red-600":"text-gray-600"}`,children:o.estimate_status})]}),o.budget_cost&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Budget Cost"}),r.jsxs("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:["",o.budget_cost.toLocaleString()]})]}),o.start_date&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Start Date"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:new Date(o.start_date).toLocaleDateString()})]})]}),o.budget_cost&&u&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Budget Overview"}),r.jsx(hj,{budgetCost:o.budget_cost,actualCost:u.grand_total,contingencyAmount:u.contingency_amount})]}),o.description&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700",children:o.description})]}),u&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:"Estimate Summary"}),r.jsx(J,{to:`/projects/${l}/estimates`,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:"Manage Estimates"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Cost Breakdown by Category"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Items"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Subtotal"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Contractor"})]})}),r.jsx("tbody",{className:"divide-y",children:u.categories.map(V=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:V.category_name}),r.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:V.line_count}),r.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-khc-primary",children:["",V.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["",V.contractor_items_subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]},V.category_id))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsxs("span",{className:"font-semibold",children:["",u.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",u.contingency_percentage,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",u.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-lg border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),r.jsxs("span",{className:"font-bold text-khc-primary text-xl",children:["",u.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[u.floor_area_m2&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Cost per m:"}),r.jsxs("span",{className:"font-semibold",children:["",(Se=u.cost_per_m2)==null?void 0:Se.toLocaleString("en-GB",{maximumFractionDigits:2})," / m"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Volunteer Cost:"}),r.jsxs("span",{className:"font-semibold",children:["",u.volunteer_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contractor Cost:"}),r.jsxs("span",{className:"font-semibold",children:["",u.contractor_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})]}),(ne||re||pe)&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Actions"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[ne&&r.jsx("button",{onClick:D,disabled:w,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:bg-gray-400",children:w?"Submitting...":"Submit Estimate for Approval"}),re&&r.jsx("button",{onClick:()=>b(!0),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:"Approve Estimate"}),pe&&r.jsx("button",{onClick:()=>k(!0),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition",children:"Reject Estimate"})]})]}),r.jsx(pj,{projectId:l,notes:R,onAddNote:P,onDeleteNote:_}),m&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Approve Estimate"}),r.jsx("textarea",{value:y,onChange:V=>j(V.target.value),placeholder:"Add approval notes (optional)",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{b(!1),j("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:q,disabled:w,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Approving...":"Approve"})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reject Estimate"}),r.jsx("textarea",{value:f,onChange:V=>g(V.target.value),placeholder:"Reason for rejection",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{k(!1),g("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:$,disabled:w,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Rejecting...":"Reject"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Project not found"}),r.jsx(J,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to projects"})]})}const Kh=Or((e,t)=>({templates:[],currentTemplate:null,isLoading:!1,error:null,fetchTemplates:async(s=!0)=>{var n,a;e({isLoading:!0,error:null});try{const l=await Br.getAll(s);e({templates:l.data.data||[],isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch templates";throw e({error:o,isLoading:!1}),l}},fetchTemplateById:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Br.getById(s);e({currentTemplate:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch template";throw e({error:o,isLoading:!1,currentTemplate:null}),l}},saveTemplate:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Br.create(s)).data.data;return e(i=>({templates:[o,...i.templates],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to save template";throw e({error:o,isLoading:!1}),l}},updateTemplate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Br.update(s,n)).data.data;return e(c=>{var d;return{templates:c.templates.map(u=>u.id===s?i:u),currentTemplate:((d=c.currentTemplate)==null?void 0:d.id)===s?i:c.currentTemplate,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update template";throw e({error:i,isLoading:!1}),o}},deleteTemplate:async s=>{var n,a;e({isLoading:!0,error:null});try{await Br.delete(s),e(l=>{var o;return{templates:l.templates.filter(i=>i.id!==s),currentTemplate:((o=l.currentTemplate)==null?void 0:o.id)===s?null:l.currentTemplate,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete template";throw e({error:o,isLoading:!1}),l}},applyTemplate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Br.applyToProject(s,n)).data.data;return e({currentTemplate:i,isLoading:!1}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to apply template";throw e({error:i,isLoading:!1}),o}},setCurrentTemplate:s=>{e({currentTemplate:s})},clearError:()=>{e({error:null})}})),rc=Or(e=>({groups:[],currentGroup:null,currentElement:null,currentSubElement:null,currentWorkSection:null,pendingWorkSection:null,searchResults:[],statistics:null,isLoading:!1,isSearching:!1,error:null,searchKeyword:"",fetchGroups:async()=>{e({isLoading:!0,error:null});try{const s=await(await fetch("/api/v1/nrm2/groups")).json();if(!s.success)throw new Error(s.error||"Failed to fetch groups");e({groups:s.data,isLoading:!1})}catch(t){const s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1})}},fetchTree:async()=>{e({isLoading:!0,error:null});try{const s=await(await fetch("/api/v1/nrm2/tree")).json();if(!s.success)throw new Error(s.error||"Failed to fetch NRM 2 hierarchy");e({groups:s.data,isLoading:!1})}catch(t){const s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1}),console.error("Failed to fetch NRM 2 tree:",t)}},fetchGroupDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/groups/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch group details");e({currentGroup:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},fetchElementDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/elements/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch element details");e({currentElement:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},fetchSubElementDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/sub-elements/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch sub-element details");e({currentSubElement:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},searchNRM2:async t=>{if(!t.trim()){e({searchResults:[],searchKeyword:""});return}e({isSearching:!0,error:null,searchKeyword:t});try{const n=await(await fetch(`/api/v1/nrm2/search?q=${encodeURIComponent(t)}`)).json();if(!n.success)throw new Error(n.error||"Search failed");e({searchResults:n.data,isSearching:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isSearching:!1})}},clearSearch:()=>{e({searchResults:[],searchKeyword:"",error:null})},clearError:()=>{e({error:null})},setCurrentGroup:t=>{e({currentGroup:t})},setCurrentElement:t=>{e({currentElement:t})},setCurrentSubElement:t=>{e({currentSubElement:t})},setCurrentWorkSection:t=>{e({currentWorkSection:t})},setPendingWorkSection:t=>{e({pendingWorkSection:t})},fetchStatistics:async()=>{try{const s=await(await fetch("/api/v1/nrm2/stats")).json();if(!s.success)throw new Error(s.error||"Failed to fetch statistics");e({statistics:s.data})}catch(t){console.error("Failed to fetch NRM 2 statistics:",t)}}}));function xj({tabs:e,activeTab:t,onChange:s}){return r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("div",{className:"flex space-x-8",children:e.map(n=>r.jsxs("button",{onClick:()=>s(n.id),className:`px-1 py-4 border-b-2 font-medium text-sm transition-colors ${t===n.id?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[n.icon&&r.jsx("span",{className:"mr-2",children:n.icon}),n.label]},n.id))})})}function gj({items:e,isLoading:t,onSelectItem:s,selectedItemId:n}){const[a,l]=v.useState(""),o=e.filter(i=>i.description.toLowerCase().includes(a.toLowerCase())||i.code.toLowerCase().includes(a.toLowerCase()));return r.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[r.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:a,onChange:i=>l(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm mb-4"}),r.jsx("div",{className:"max-h-64 overflow-y-auto divide-y border rounded",children:t?r.jsx("div",{className:"p-4 text-center text-gray-600",children:"Loading items..."}):o.length===0?r.jsx("div",{className:"p-4 text-center text-gray-600",children:"No items found"}):o.slice(0,20).map(i=>{var c;return r.jsxs("div",{onClick:()=>s(i.id),className:`p-4 cursor-pointer transition ${n===i.id?"bg-khc-light border-l-4 border-khc-primary":"hover:bg-gray-100"}`,children:[r.jsx("p",{className:"font-semibold text-sm text-gray-900",children:i.description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",i.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})," ","/ ",((c=i.unit)==null?void 0:c.code)||"unit"]})]},i.id)})})]})}const Jn="qscostingpro_estimate_presets",yj=10,Gh=()=>{const e=v.useCallback(()=>{try{const l=localStorage.getItem(Jn);return l?JSON.parse(l):[]}catch{return[]}},[]),t=v.useCallback((l,o)=>{try{const i=e(),c={id:`preset-${Date.now()}`,name:String(l||""),description:String(o.description||""),custom_description:String(o.custom_description||""),quantity:Number(o.quantity||1),custom_unit:String(o.custom_unit||""),custom_unit_rate:Number(o.custom_unit_rate||0),category_id:Number(o.category_id||0),created_at:Date.now(),usage_count:0},d=[c,...i].slice(0,yj);return localStorage.setItem(Jn,JSON.stringify(d)),c}catch(i){return console.error("Failed to save preset:",i),null}},[e]),s=v.useCallback(l=>{try{const i=e().filter(c=>c.id!==l);localStorage.setItem(Jn,JSON.stringify(i))}catch{}},[e]),n=v.useCallback(l=>{try{const i=e().map(c=>({...c,usage_count:c.id===l?c.usage_count+1:c.usage_count}));localStorage.setItem(Jn,JSON.stringify(i))}catch(o){console.error("Failed to increment usage count:",o)}},[e]),a=v.useCallback((l=5)=>e().sort((o,i)=>i.usage_count-o.usage_count).slice(0,l),[e]);return{getPresets:e,savePreset:t,deletePreset:s,incrementUsageCount:n,getTopPresets:a}};function jj({onSelectPreset:e,onSaveAsPreset:t,showSaveOption:s=!1}){const{getTopPresets:n,deletePreset:a}=Gh(),l=n(5);return l.length===0?r.jsxs("div",{className:"p-4 text-center text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No presets saved yet"}),s&&r.jsx("p",{className:"text-xs mt-2",children:"Save frequently used items as presets to reuse them"})]}):r.jsx("div",{className:"space-y-2",children:l.map(o=>r.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 hover:border-khc-primary hover:bg-khc-light transition-all",children:r.jsxs("div",{className:"flex justify-between items-start gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:o.custom_description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[o.quantity,"  ",o.custom_unit_rate," ",o.custom_unit]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used ",o.usage_count," times"]})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[r.jsx("button",{onClick:()=>e(o),className:"px-2 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-xs rounded transition-colors",children:"Use"}),r.jsx("button",{onClick:()=>a(o.id),className:"px-2 py-1 bg-red-100 hover:bg-red-200 text-red-600 text-xs rounded transition-colors",title:"Delete preset",children:""})]})]})},o.id))})}const vj=({value:e,onChange:t,onSelect:s,placeholder:n="Search NRM 2 codes..."})=>{const[a,l]=v.useState(!1),[o,i]=v.useState(""),[c,d]=v.useState([]),[u,x]=v.useState(!1),[p,N]=v.useState(e||null),[h,y]=v.useState(""),[j,f]=v.useState(),g=async S=>{if(i(S),!S.trim()){d([]);return}try{x(!0);const k=await Md.search(S,20);d(k.data)}catch(k){console.error("Search failed:",k),d([])}finally{x(!1)}},m=async S=>{if(S.type==="work_section")try{const w=(await Md.getWorkSectionById(S.id)).data;N(w.code),y(w.title),f(w.unit),l(!1),i(""),d([]),t&&t(w),s&&s(w.code,w.title,w.unit)}catch(k){console.error("Failed to fetch work section:",k)}else N(S.code),y(S.title),l(!1),i(""),d([]),s&&s(S.code,S.title)},b=()=>{N(null),y(""),f(void 0),t&&t(null)};return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"relative",children:r.jsx("button",{onClick:()=>l(!a),type:"button",className:"w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:p?r.jsxs("div",{children:[r.jsx("div",{className:"font-mono font-semibold text-gray-900 text-sm",children:p}),r.jsx("div",{className:"text-gray-600 text-xs",children:h}),j&&r.jsxs("div",{className:"text-gray-500 text-xs",children:["Unit: ",j]})]}):r.jsx("div",{className:"text-gray-500 text-sm",children:n})}),p&&r.jsx("button",{onClick:S=>{S.stopPropagation(),b()},className:"text-gray-400 hover:text-gray-600 text-lg",children:""})]})})}),a&&r.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:[r.jsx("div",{className:"p-3 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:S=>g(S.target.value),placeholder:n,autoFocus:!0,className:"w-full px-3 py-2 border border-gray-300 rounded pl-8 focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"absolute left-2 top-2.5 text-gray-400",children:""})]})}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:u?r.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2",children:"Searching..."})]}):o.trim()===""?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:r.jsx("p",{children:"Type to search NRM 2 codes"})}):c.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:r.jsx("p",{children:"No results found"})}):r.jsx("ul",{className:"space-y-0",children:c.map(S=>r.jsx("li",{children:r.jsx("button",{onClick:()=>m(S),type:"button",className:"w-full text-left px-4 py-2 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-mono font-semibold text-gray-900 text-sm",children:S.code}),r.jsx("div",{className:"text-gray-700 text-sm",children:S.title}),S.description&&r.jsx("div",{className:"text-gray-600 text-xs mt-1",children:S.description})]}),r.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:S.type})]})})},`${S.type}-${S.id}`))})})]}),a&&r.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>l(!1)})]})};function bj({isOpen:e,onClose:t,onAddFromLibrary:s,onAddCustom:n,costItems:a,categories:l,units:o,isSubmitting:i,costItemsLoading:c=!1,initialNRM2Code:d,initialNRM2WorkSectionId:u,initialNRM2Title:x,initialNRM2Unit:p}){const N=Cs(),{incrementUsageCount:h,savePreset:y}=Gh(),[j,f]=v.useState("library"),[g,m]=v.useState(null),[b,S]=v.useState("1"),[k,w]=v.useState(""),[E,R]=v.useState(""),[F,O]=v.useState(""),[W,U]=v.useState("1"),[D,q]=v.useState(""),[$,P]=v.useState(""),[_,T]=v.useState(""),[B,G]=v.useState(""),[re,pe]=v.useState(""),[ne,Se]=v.useState(null),[V,Ee]=v.useState({}),[wt,A]=v.useState(!1),[oe,je]=v.useState(""),ve=a.find(z=>z.id===g);v.useEffect(()=>{if((d||u)&&e)if(console.log("BOQ import detected:",{initialNRM2Code:d,initialNRM2WorkSectionId:u,initialNRM2Title:x,initialNRM2Unit:p}),m(null),S("1"),w(""),R(""),U("1"),q(""),P(""),T(""),G(""),pe(""),Se(null),Ee({}),x||p)console.log("Using title and unit directly from BOQ:",{initialNRM2Title:x,initialNRM2Unit:p}),x&&O(x),p&&q(p),d&&pe(d),U("1"),f("custom");else{let z="";u?z=`/api/v1/nrm2/work-sections/${u}`:d&&(z=`/api/v1/nrm2/work-sections/by-code/${d}`),console.log("Fetching work section from:",z),z&&fetch(z).then(ie=>(console.log("Fetch response status:",ie.status),ie.json())).then(ie=>{console.log("Fetch response data:",ie),ie.success&&ie.data?(console.log("Pre-filling form with:",ie.data),Se(ie.data),pe(ie.data.code),U("1"),ie.data.unit&&q(ie.data.unit),ie.data.title&&O(ie.data.title)):console.error("Invalid response format:",ie)}).catch(ie=>{console.error("Failed to fetch work section:",ie),N.error("Failed to load BOQ item details"),U("1")}),f("custom")}},[d,u,x,p,e,N]);const xr=()=>{m(null),S("1"),w(""),R(""),O(""),U("1"),q(""),P(""),T(""),G(""),pe(""),Se(null),Ee({})},_s=z=>{Se(z),pe(z.code),z.unit&&q(z.unit),z.title&&!F&&O(z.title)},L=z=>{O(z.custom_description),U(String(z.quantity)),q(z.custom_unit),P(String(z.custom_unit_rate)),T(z.category_id),f("custom"),h(z.id)},X=()=>{xr(),t()},K=()=>{const z={};return g||(z.item="Please select an item"),(b===""||isNaN(parseFloat(b))||parseFloat(b)<=0)&&(z.quantity="Quantity must be a valid number greater than 0"),k&&isNaN(parseFloat(k))&&(z.costOverride="Cost override must be a valid number"),Ee(z),Object.keys(z).length===0},be=()=>{const z={};return F.trim()||(z.description="Description is required"),(W===""||isNaN(parseFloat(W))||parseFloat(W)<=0)&&(z.quantity="Quantity must be a valid number greater than 0"),D.trim()||(z.unit="Unit is required"),($===""||isNaN(parseFloat($))||parseFloat($)<0)&&(z.unitRate="Unit rate must be a valid number 0 or greater"),_||(z.category="Category is required"),Ee(z),Object.keys(z).length===0},Le=async()=>{if(K())try{await s({cost_item_id:g,quantity:parseFloat(b),unit_cost_override:k?parseFloat(k):void 0,notes:E||void 0}),N.success("Line item added successfully"),xr()}catch(z){const ie=Er(z);N.error(ie)}},Rt=async()=>{if(be())try{const z=parseFloat(W);if(isNaN(z)||z===null){N.error("Quantity must be a valid number");return}const ie=parseFloat($);if(isNaN(ie)||ie===null){N.error("Unit Rate must be a valid number");return}const Ln={custom_description:F,quantity:z,custom_unit:D,custom_unit_rate:ie,category_id:Number(_),notes:B||void 0,nrm2_work_section_id:ne==null?void 0:ne.id,nrm2_code:re||void 0};console.log("Submitting custom item:",Ln),await n(Ln),N.success("Custom item added successfully"),xr()}catch(z){const ie=Er(z);N.error(ie)}},Re=()=>{if(!be())return;if(!oe.trim()){N.error("Please enter a preset name");return}y(oe,{name:oe,description:`${F} - ${W}  ${$}`,custom_description:F,quantity:parseFloat(W),custom_unit:D,custom_unit_rate:parseFloat($),category_id:Number(_)})?(N.success(`Preset "${oe}" saved successfully`),A(!1),je("")):N.error("Failed to save preset")};return r.jsx(Es,{isOpen:e,onClose:X,title:"Add Line Item",size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(xj,{tabs:[{id:"library",label:"From Library",icon:""},{id:"presets",label:"Quick Add",icon:""},{id:"custom",label:"Custom Item",icon:""}],activeTab:j,onChange:f}),j==="presets"&&r.jsx("div",{className:"space-y-4",children:r.jsx(jj,{onSelectPreset:L})}),j==="library"&&r.jsxs("div",{className:"space-y-4",children:[V.item&&r.jsx("div",{className:"text-sm text-red-600",children:V.item}),r.jsx(gj,{items:a,isLoading:c,onSelectItem:m,selectedItemId:g}),ve&&r.jsxs("div",{className:"bg-khc-light rounded-lg p-4 border border-khc-primary space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:ve.description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Material: ",ve.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",value:b,onChange:z=>S(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),V.quantity&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Override ()"}),r.jsx("input",{type:"number",value:k,onChange:z=>w(z.target.value),placeholder:"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),V.costOverride&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.costOverride})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:E,onChange:z=>R(z.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]})]}),j==="custom"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NRM 2 Code (Optional)"}),r.jsx(vj,{value:re,onChange:_s}),ne&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",ne.code," - ",ne.title]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:F,onChange:z=>O(z.target.value),placeholder:"Enter item description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),F&&r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" From BOQ: ",ne==null?void 0:ne.code]}),V.description&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",value:W,onChange:z=>U(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),V.quantity&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),r.jsx("input",{type:"text",value:D,onChange:z=>q(z.target.value),placeholder:"e.g., m2, sqm, item",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),V.unit&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.unit})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Rate () *"}),r.jsx("input",{type:"number",value:$,onChange:z=>P(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),V.unitRate&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.unitRate})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:_,onChange:z=>T(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",children:[r.jsx("option",{value:"",children:"Select category..."}),l.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]}),V.category&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:V.category})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:B,onChange:z=>G(z.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]}),wt&&j==="custom"&&r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Save as Preset"}),r.jsx("input",{type:"text",value:oe,onChange:z=>je(z.target.value),placeholder:"Preset name (e.g., 'Standard Labor Cost')",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",autoFocus:!0}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{A(!1),je("")},className:"flex-1 px-3 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Cancel"}),r.jsx("button",{onClick:Re,className:"flex-1 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Preset"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-between",children:[j==="custom"&&!wt&&r.jsx("button",{onClick:()=>A(!0),className:"px-4 py-2 border border-blue-300 text-blue-600 hover:bg-blue-50 rounded-lg text-sm transition-colors",children:" Save as Preset"}),r.jsxs("div",{className:"flex gap-2 ml-auto",children:[r.jsx("button",{onClick:X,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 text-sm",children:"Cancel"}),j!=="presets"&&r.jsx("button",{onClick:j==="library"?Le:Rt,disabled:i||j==="library"&&!ve,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 text-sm",children:i?"Adding...":"Add Item"})]})]})]})})}function Nj({categories:e,onUpdateQuantity:t,onDeleteItem:s,isLoading:n,isEmpty:a}){const[l,o]=v.useState(null),[i,c]=v.useState(""),[d,u]=v.useState(!1),x=async N=>{const h=parseFloat(i);if(isNaN(h)||h<=0){alert("Please enter a valid quantity");return}try{u(!0),await t(N,h),o(null),c("")}finally{u(!1)}},p=async N=>{if(window.confirm("Remove this item from the estimate?"))try{u(!0),await s(N)}finally{u(!1)}};return n?r.jsx("div",{className:"bg-white rounded-lg shadow",children:r.jsx("div",{className:"p-8 text-center text-gray-600",children:"Loading estimates..."})}):a?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"text-gray-500",children:[r.jsx("p",{className:"text-lg font-semibold mb-2",children:" Build Your Estimate"}),r.jsx("p",{className:"text-sm",children:'No line items yet. Click "Quick Add Item" to start building your estimate.'})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"#"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"NRM 2 Code"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700",children:"Qty"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700",children:"Unit"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(N=>r.jsxs(Ba.Fragment,{children:[r.jsx("tr",{className:"bg-khc-light border-b hover:bg-opacity-75",children:r.jsx("td",{colSpan:7,className:"px-6 py-3",children:r.jsx("p",{className:"font-semibold text-khc-primary text-sm",children:N.category_name})})}),N.line_items.map((h,y)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 w-8",children:y+1}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("p",{className:"font-medium text-gray-900",children:h.description})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:h.nrm2_code?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-semibold bg-blue-100 text-blue-800",children:h.nrm2_code}):r.jsx("span",{className:"text-gray-400 text-xs",children:""})}),r.jsx("td",{className:"px-6 py-4 text-sm text-right",children:l===h.estimate_id?r.jsx("input",{type:"number",step:"0.01",min:"0",value:i,onChange:j=>c(j.target.value),autoFocus:!0,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right"}):r.jsx("span",{className:"font-medium",children:h.quantity})}),r.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-600",children:h.unit_code}),r.jsx("td",{className:"px-6 py-4 text-sm text-right",children:r.jsxs("span",{className:"font-bold text-khc-primary",children:["",h.line_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("div",{className:"flex gap-2 justify-center",children:l===h.estimate_id?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>x(h.estimate_id),disabled:d,className:"px-3 py-1 bg-khc-primary text-white text-xs rounded hover:bg-khc-secondary disabled:bg-gray-400",children:"Save"}),r.jsx("button",{onClick:()=>o(null),className:"px-3 py-1 border border-gray-300 text-xs rounded hover:bg-gray-100",children:"Cancel"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{o(h.estimate_id),c(h.quantity.toString())},className:"text-khc-primary hover:text-khc-secondary text-xs hover:underline",children:"Edit"}),r.jsx("button",{onClick:()=>p(h.estimate_id),disabled:d,className:"text-red-600 hover:text-red-700 text-xs hover:underline disabled:text-gray-400",children:"Delete"})]})})})]},h.estimate_id)),r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsxs("td",{colSpan:5,className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:[N.category_name," Subtotal:"]}),r.jsxs("td",{className:"px-6 py-3 text-right text-sm font-bold text-khc-primary",children:["",N.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsx("td",{})]})]},N.category_id))})]})})})}function wj({isOpen:e,onClose:t,onSave:s,isLoading:n=!1}){const[a,l]=v.useState(""),[o,i]=v.useState(""),[c,d]=v.useState("standard"),[u,x]=v.useState(!1),[p,N]=v.useState({}),h=async()=>{const y={};if(a.trim()||(y.name="Template name is required"),a.length>255&&(y.name="Template name must be less than 255 characters"),Object.keys(y).length>0){N(y);return}try{await s(a,o,c,u),l(""),i(""),d("standard"),x(!1),N({}),t()}catch{}};return r.jsx(Es,{isOpen:e,onClose:t,title:"Save as Template",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),r.jsx("input",{type:"text",value:a,onChange:y=>{l(y.target.value),p.name&&N({...p,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Residential Interior",maxLength:255}),p.name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:o,onChange:y=>i(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary resize-none",placeholder:"Describe what this template is for...",rows:3,maxLength:500}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.length,"/500"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Type"}),r.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"quick",children:"Quick (5-10 items)"}),r.jsx("option",{value:"standard",children:"Standard (10-50 items)"}),r.jsx("option",{value:"complex",children:"Complex (50+ items)"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"isPublic",checked:u,onChange:y=>x(y.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),r.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Share template with team"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900",children:" Save this estimate as a template to quickly create similar estimates in the future."})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,disabled:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:h,disabled:n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:n?"Saving...":"Save Template"})]})]})})}function Sj({isOpen:e,onClose:t,onSelectTemplate:s,showShared:n=!0}){const{templates:a,isLoading:l,fetchTemplates:o}=Kh(),[i,c]=v.useState(""),[d,u]=v.useState("all");v.useEffect(()=>{e&&o(n)},[e,o,n]);const x=a.filter(p=>!(d!=="all"&&p.template_type!==d||i&&!p.name.toLowerCase().includes(i.toLowerCase())));return r.jsx(Es,{isOpen:e,onClose:t,title:"Template Library",size:"lg",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:p=>c(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("select",{value:d,onChange:p=>u(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"quick",children:"Quick"}),r.jsx("option",{value:"standard",children:"Standard"}),r.jsx("option",{value:"complex",children:"Complex"})]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:l?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading templates..."}):x.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:a.length===0?"No templates available":"No templates match your search"}):r.jsx("div",{className:"divide-y",children:x.map(p=>r.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),p.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:p.description}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.template_type==="quick"?"bg-blue-100 text-blue-700":p.template_type==="standard"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:p.template_type}),p.is_public&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Shared"})]})]}),r.jsx("button",{onClick:()=>{s(p),t()},className:"ml-4 px-3 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded text-sm font-medium transition-colors",children:"Use"})]})},p.id))})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Close"})})]})})}function kj({isOpen:e,onClose:t,onSelectItem:s}){var h,y;const n=Cs(),{groups:a,isLoading:l,fetchGroups:o}=rc(),[i,c]=v.useState(""),[d,u]=v.useState(null);v.useEffect(()=>{e&&a.length===0&&o()},[e,a.length,o]);const x=v.useMemo(()=>{if(!a||a.length===0||i.trim()==="")return[];const j=i.toLowerCase(),f=[];return a.forEach(g=>{var m;(m=g.elements)==null||m.forEach(b=>{var S;(S=b.sub_elements)==null||S.forEach(k=>{var w;(w=k.work_sections)==null||w.forEach(E=>{var R;(E.code.toLowerCase().includes(j)||E.title.toLowerCase().includes(j)||(R=E.description)!=null&&R.toLowerCase().includes(j))&&f.push({id:E.id,code:E.code,title:E.title,description:E.description,unit:E.unit,sub_element_id:k.id})})})})}),f},[a,i]),p=j=>{u(j.id)},N=()=>{if(!d){n.error("Please select an item to import");return}const j=x.find(f=>f.id===d);if(!j){n.error("Selected item not found");return}s(j),c(""),u(null),t(),n.success(`Imported: ${j.code} - ${j.title}`)};return r.jsx(Es,{isOpen:e,onClose:t,title:"Import from BOQ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search BOQ Items"}),r.jsx("input",{type:"text",placeholder:"Search by code, description, or keyword...",value:i,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),l?r.jsx("div",{className:"py-8 text-center text-gray-500",children:"Loading BOQ data..."}):i.trim()===""?r.jsxs("div",{className:"py-8 text-center text-gray-500",children:[r.jsx("p",{children:"Enter a search term to browse BOQ items"}),r.jsx("p",{className:"text-sm mt-2",children:'Try searching for "preliminary", "excavation", or "topsoil"'})]}):x.length===0?r.jsx("div",{className:"py-8 text-center text-gray-500",children:r.jsxs("p",{children:['No items found matching "',i,'"']})}):r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:x.map(j=>r.jsx("div",{onClick:()=>p(j),className:`p-3 border-b cursor-pointer hover:bg-blue-50 transition-colors ${d===j.id?"bg-blue-100 border-l-4 border-l-blue-500":""}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("input",{type:"radio",name:"boq-item",value:j.id,checked:d===j.id,onChange:()=>p(j),className:"mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-sm text-gray-900",children:j.code}),r.jsx("div",{className:"text-sm text-gray-700 mt-0.5",children:j.title}),j.description&&r.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:j.description}),j.unit&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Unit: ",j.unit]})]})]})},j.id))}),d&&x.length>0&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-blue-900",children:["Selected:"," ",r.jsx("strong",{children:(h=x.find(j=>j.id===d))==null?void 0:h.code})," ","-"," ",(y=x.find(j=>j.id===d))==null?void 0:y.title]})}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:N,disabled:!d||l,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors",children:"Import Selected Item"})]})]})})}function Cj(){const{id:e}=Ss();He();const t=Cs(),s=Number(e),{currentProject:n,fetchProjectById:a,isLoading:l}=zt(),{estimates:o,estimateTotals:i,isLoading:c,error:d,fetchEstimates:u,addEstimate:x,updateEstimate:p,deleteEstimate:N}=Vh(),{saveTemplate:h,applyTemplate:y}=Kh(),{pendingWorkSection:j,setPendingWorkSection:f}=rc(),[g,m]=v.useState(!1),[b,S]=v.useState(null),[k,w]=v.useState(null),[E,R]=v.useState(null),[F,O]=v.useState(null),[W,U]=v.useState(!1),[D,q]=v.useState(!1),[$,P]=v.useState(!1),[_,T]=v.useState([]),[B,G]=v.useState([]),[re,pe]=v.useState([]),[ne,Se]=v.useState(!1),[V,Ee]=v.useState(null),[wt,A]=v.useState(""),[oe,je]=v.useState(!1),[ve,xr]=v.useState(!1),[_s,L]=v.useState(!1);v.useEffect(()=>{s&&(a(s),u(s),X(),K(),be())},[s,a,u]),v.useEffect(()=>{j&&!g&&(S(j.code),m(!0),f(null))},[j,g,f]);const X=async()=>{Se(!0);try{const Z=await Ue.getAll();T(Z.data.data||[])}catch(Z){console.error("Failed to fetch cost items:",Z)}finally{Se(!1)}},K=async()=>{try{const Z=await H0.getAll();G(Z.data.data||[])}catch(Z){console.error("Failed to fetch units:",Z)}},be=async()=>{try{const Z=await Ue.getCategories();pe(Z.data.data||[])}catch(Z){console.error("Failed to fetch categories:",Z)}},Le=async Z=>{try{je(!0),await x(s,{cost_item_id:Z.cost_item_id,quantity:Z.quantity,unit_cost_override:Z.unit_cost_override,notes:Z.notes}),m(!1)}finally{je(!1)}},Rt=async Z=>{try{je(!0),await x(s,{custom_description:Z.custom_description,quantity:Z.quantity,custom_unit:Z.custom_unit,custom_unit_rate:Z.custom_unit_rate,category_id:Z.category_id,notes:Z.notes,nrm2_work_section_id:Z.nrm2_work_section_id,nrm2_code:Z.nrm2_code}),m(!1)}finally{je(!1)}},Re=Z=>{S(Z.code),w(Z.id),R(Z.title),O(Z.unit||""),U(!1),m(!0)},z=async(Z,Ur)=>{try{je(!0),await p(s,Z,{quantity:Ur}),t.success("Quantity updated successfully"),Ee(null),A(""),je(!1)}catch(fl){t.error(Er(fl)),je(!1)}},ie=async Z=>{if(window.confirm("Remove this item from the estimate?"))try{je(!0),await N(s,Z),t.success("Item removed successfully"),je(!1)}catch(Ur){t.error(Er(Ur)),je(!1)}},Ln=async(Z,Ur,fl,tp)=>{try{L(!0);const sc=o.map(Vt=>({cost_item_id:Vt.cost_item_id||void 0,custom_description:Vt.custom_description||void 0,custom_unit_rate:Vt.custom_unit_rate||void 0,custom_unit:Vt.custom_unit||void 0,category_id:Vt.category_id||void 0,quantity:Vt.quantity,unit_cost_override:Vt.unit_cost_override||void 0,notes:Vt.notes||void 0}));await h({name:Z,description:Ur,template_type:fl,is_public:tp,line_items:sc}),t.success("Template saved successfully"),q(!1)}catch{t.error("Failed to save template")}finally{L(!1)}},Zh=async Z=>{try{L(!0),await y(Z.id,s),t.success(`Template "${Z.name}" loaded. Add quantities to create estimates.`)}catch{t.error("Failed to load template")}finally{L(!1)}};if((l||c||ne)&&!n)return r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."});if(!n)return r.jsx("div",{className:"text-center py-12",children:"Project not found"});const ep=(i==null?void 0:i.categories)||[];return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Build Estimate"}),r.jsx("p",{className:"text-gray-600 mt-2",children:n.name})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[r.jsx("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Load a saved estimate template",children:" Load Template"}),r.jsx("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 text-sm",title:"Import items from NRM 2 BOQ",children:" Import from BOQ"}),r.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg flex items-center gap-2",children:" Add Line Item"}),o.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Save current estimate as template",children:" Save Template"}),r.jsx(Qh,{projectId:s,projectName:n.name,isDisabled:o.length===0})]})]})]}),d&&!ve&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[r.jsx("span",{children:d}),r.jsx("button",{onClick:()=>xr(!0),className:"text-red-600 hover:text-red-800 font-bold",children:""})]}),r.jsx(kj,{isOpen:W,onClose:()=>U(!1),onSelectItem:Re}),r.jsx(bj,{isOpen:g,onClose:()=>{m(!1),S(null),w(null),R(null),O(null)},onAddFromLibrary:Le,onAddCustom:Rt,costItems:_,categories:re,units:B,isSubmitting:oe,costItemsLoading:ne,initialNRM2Code:b,initialNRM2WorkSectionId:k,initialNRM2Title:E,initialNRM2Unit:F}),r.jsx(wj,{isOpen:D,onClose:()=>q(!1),onSave:Ln,isLoading:_s}),r.jsx(Sj,{isOpen:$,onClose:()=>P(!1),onSelectTemplate:Zh,showShared:!0}),r.jsx(Nj,{categories:ep,onUpdateQuantity:z,onDeleteItem:ie,isLoading:c,isEmpty:o.length===0}),i&&r.jsxs("div",{className:"bg-khc-light rounded-lg p-6 border border-khc-primary",children:[r.jsx("h3",{className:"font-bold text-lg text-khc-primary mb-4",children:"Estimate Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{className:"font-semibold",children:["",i.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsxs("span",{children:["Contingency (",i.contingency_percentage,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",i.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between border-t border-khc-primary pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),r.jsxs("span",{className:"font-bold text-khc-primary text-lg",children:["",i.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),i.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 text-right pt-2",children:["",i.cost_per_m2.toLocaleString("en-GB",{maximumFractionDigits:2})," per m"]})]})]})]})}const Jh=Or((e,t)=>({categories:[],subElements:[],costItems:[],units:[],isLoading:!1,error:null,selectedCategoryId:null,searchTerm:"",fetchCategories:async()=>{e({isLoading:!0,error:null});try{const s=await Ue.getCategories();e({categories:s.data.data||s.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to fetch categories";e({error:n,isLoading:!1})}},fetchSubElements:async s=>{e({isLoading:!0,error:null});try{const n=s?await Ue.getSubElementsByCategory(s):await Ue.getSubElements();e({subElements:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch sub-elements";e({error:a,isLoading:!1})}},fetchCostItems:async s=>{e({isLoading:!0,error:null});try{const n=await Ue.getCostItems(s);e({costItems:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch cost items";e({error:a,isLoading:!1})}},fetchUnits:async()=>{e({isLoading:!0,error:null});try{const s=await Ue.getUnits();e({units:s.data.data||s.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to fetch units";e({error:n,isLoading:!1})}},createCategory:async s=>{try{const n=await Ue.createCategory(s);return e(a=>({categories:[...a.categories,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create category";throw e({error:a}),n}},updateCategory:async(s,n)=>{try{const a=await Ue.updateCategory(s,n);return e(l=>({categories:l.categories.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update category";throw e({error:l}),a}},deleteCategory:async s=>{try{await Ue.deleteCategory(s),e(n=>({categories:n.categories.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete category";throw e({error:a}),n}},createSubElement:async s=>{try{const n=await Ue.createSubElement(s);return e(a=>({subElements:[...a.subElements,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create sub-element";throw e({error:a}),n}},updateSubElement:async(s,n)=>{try{const a=await Ue.updateSubElement(s,n);return e(l=>({subElements:l.subElements.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update sub-element";throw e({error:l}),a}},deleteSubElement:async s=>{try{await Ue.deleteSubElement(s),e(n=>({subElements:n.subElements.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete sub-element";throw e({error:a}),n}},createCostItem:async s=>{try{const n=await Ue.createCostItem(s);return e(a=>({costItems:[...a.costItems,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create cost item";throw e({error:a}),n}},updateCostItem:async(s,n)=>{try{const a=await Ue.updateCostItem(s,n);return e(l=>({costItems:l.costItems.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update cost item";throw e({error:l}),a}},deleteCostItem:async s=>{try{await Ue.deleteCostItem(s),e(n=>({costItems:n.costItems.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete cost item";throw e({error:a}),n}},setSelectedCategory:s=>{e({selectedCategoryId:s})},setSearchTerm:s=>{e({searchTerm:s})},clearError:()=>{e({error:null})},getSubElementsByCategory:s=>t().subElements.filter(n=>n.category_id===s),getCostItemsBySubElement:s=>t().costItems.filter(n=>n.sub_element_id===s),searchCostItems:s=>{const n=s.toLowerCase();return t().costItems.filter(a=>a.description.toLowerCase().includes(n)||a.code.toLowerCase().includes(n))}}));function Ej(){const{isAdmin:e}=qt(),{categories:t,subElements:s,costItems:n,units:a,isLoading:l,error:o,selectedCategoryId:i,searchTerm:c,fetchCategories:d,fetchSubElements:u,fetchCostItems:x,fetchUnits:p,setSelectedCategory:N,setSearchTerm:h,clearError:y,createCategory:j,updateCategory:f,deleteCategory:g,createSubElement:m,updateSubElement:b,deleteSubElement:S,createCostItem:k,updateCostItem:w,deleteCostItem:E}=Jh(),[R,F]=v.useState("costItems"),[O,W]=v.useState(!1),[U,D]=v.useState(null),[q,$]=v.useState({code:"",name:"",description:"",sort_order:0}),[P,_]=v.useState({category_id:0,code:"",name:"",description:"",sort_order:0}),[T,B]=v.useState({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05});v.useEffect(()=>{d(),u(),x(),p()},[d,u,x,p]);const G=async()=>{try{U?(await f(U,q),D(null)):await j(q),$({code:"",name:"",description:"",sort_order:0}),W(!1)}catch(A){console.error("Failed to save category:",A)}},re=async A=>{if(window.confirm("Delete this category? This will affect all sub-elements."))try{await g(A)}catch(oe){console.error("Failed to delete category:",oe)}},pe=async()=>{try{U?(await b(U,P),D(null)):await m(P),_({category_id:0,code:"",name:"",description:"",sort_order:0}),W(!1)}catch(A){console.error("Failed to save sub-element:",A)}},ne=async A=>{if(window.confirm("Delete this sub-element? This will affect all cost items."))try{await S(A)}catch(oe){console.error("Failed to delete sub-element:",oe)}},Se=async()=>{try{U?(await w(U,T),D(null)):await k(T),B({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05}),W(!1)}catch(A){console.error("Failed to save cost item:",A)}},V=async A=>{if(window.confirm("Delete this cost item?"))try{await E(A)}catch(oe){console.error("Failed to delete cost item:",oe)}},Ee=i?s.filter(A=>A.category_id===i):s,wt=n.filter(A=>A.description.toLowerCase().includes(c.toLowerCase())||A.code.toLowerCase().includes(c.toLowerCase()));return e?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Cost Database Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage categories, sub-elements, and cost items"})]}),o&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[r.jsx("span",{children:o}),r.jsx("button",{onClick:y,className:"text-red-600 hover:text-red-800",children:""})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("div",{className:"flex gap-8",children:[r.jsx("button",{onClick:()=>F("categories"),className:`py-4 px-2 border-b-2 font-medium transition ${R==="categories"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Categories"}),r.jsx("button",{onClick:()=>F("subElements"),className:`py-4 px-2 border-b-2 font-medium transition ${R==="subElements"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Sub-Elements"}),r.jsx("button",{onClick:()=>F("costItems"),className:`py-4 px-2 border-b-2 font-medium transition ${R==="costItems"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Cost Items"})]})}),r.jsxs("div",{className:"space-y-4",children:[R==="categories"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Categories"}),r.jsx("button",{onClick:()=>{W(!O),D(null),$({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:O?"Cancel":"+ Add Category"})]}),O&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:q.code,onChange:A=>$({...q,code:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., CAT-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:q.name,onChange:A=>$({...q,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Category name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:q.description||"",onChange:A=>$({...q,description:A.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{W(!1),D(null),$({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:G,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:U?"Update":"Create"})]})]}),l&&!t.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading categories..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(A=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:A.code}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:A.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:A.description||"-"}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{$(A),D(A.id),W(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>re(A.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},A.id))})]})})]}),R==="subElements"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Sub-Elements"}),r.jsx("button",{onClick:()=>{W(!O),D(null),_({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:O?"Cancel":"+ Add Sub-Element"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>N(null),className:`px-3 py-2 rounded-lg text-sm transition ${i===null?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All Categories"}),t.map(A=>r.jsx("button",{onClick:()=>N(A.id),className:`px-3 py-2 rounded-lg text-sm transition ${i===A.id?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:A.name},A.id))]}),O&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:P.category_id,onChange:A=>_({...P,category_id:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select a category"}),t.map(A=>r.jsx("option",{value:A.id,children:A.name},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:P.code,onChange:A=>_({...P,code:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., SUB-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:P.name,onChange:A=>_({...P,name:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Sub-element name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:P.description||"",onChange:A=>_({...P,description:A.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{W(!1),D(null),_({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:pe,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:U?"Update":"Create"})]})]}),l&&!s.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading sub-elements..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:Ee.map(A=>{const oe=t.find(je=>je.id===A.category_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(oe==null?void 0:oe.name)||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:A.code}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:A.name}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{_(A),D(A.id),W(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>ne(A.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},A.id)})})]})})]}),R==="costItems"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Items"}),r.jsx("button",{onClick:()=>{W(!O),D(null),B({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:O?"Cancel":"+ Add Cost Item"})]}),r.jsx("div",{children:r.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:c,onChange:A=>h(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})}),O&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Element *"}),r.jsxs("select",{value:T.sub_element_id,onChange:A=>B({...T,sub_element_id:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select a sub-element"}),s.map(A=>r.jsx("option",{value:A.id,children:A.name},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:T.code,onChange:A=>B({...T,code:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., ITM-001"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:T.description,onChange:A=>B({...T,description:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Item description"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),r.jsxs("select",{value:T.unit_id,onChange:A=>B({...T,unit_id:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select unit"}),a.map(A=>r.jsx("option",{value:A.id,children:A.name},A.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste Factor"}),r.jsx("input",{type:"number",step:"0.01",value:T.waste_factor,onChange:A=>B({...T,waste_factor:parseFloat(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"1.05"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Required"}),r.jsx("input",{type:"checkbox",checked:T.is_contractor_required,onChange:A=>B({...T,is_contractor_required:A.target.checked}),className:"w-4 h-4 mt-2"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Cost *"}),r.jsx("input",{type:"number",step:"0.01",value:T.material_cost,onChange:A=>B({...T,material_cost:parseFloat(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Cost"}),r.jsx("input",{type:"number",step:"0.01",value:T.management_cost,onChange:A=>B({...T,management_cost:parseFloat(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Cost"}),r.jsx("input",{type:"number",step:"0.01",value:T.contractor_cost,onChange:A=>B({...T,contractor_cost:parseFloat(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{W(!1),D(null),B({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Se,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:U?"Update":"Create"})]})]}),l&&!n.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading cost items..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Sub-Element"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Material Cost"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Mgmt Cost"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Contractor Cost"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:wt.map(A=>{const oe=s.find(je=>je.id===A.sub_element_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:A.code}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:A.description}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(oe==null?void 0:oe.name)||"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",A.material_cost.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",A.management_cost.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",A.contractor_cost.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{B(A),D(A.id),W(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>V(A.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},A.id)})})]})})]})]})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access cost management"})})}const zr=e=>{var t;if(e instanceof B0){const s=(t=e.response)==null?void 0:t.data;return(s==null?void 0:s.message)||e.message||"Unknown error"}return"Unknown error"},Hr={getReportData:async e=>{try{return(await M.get(`/projects/${e}/report`)).data.data}catch(t){throw new Error(`Failed to fetch report data: ${zr(t)}`)}},getHistoricAnalysis:async e=>{try{return[]}catch(t){throw new Error(`Failed to fetch historic analysis: ${zr(t)}`)}},getProjectActuals:async e=>{try{return(await M.get(`/projects/${e}/actuals`)).data.data}catch(t){throw new Error(`Failed to fetch project actuals: ${zr(t)}`)}},createProjectActual:async(e,t)=>{try{return(await M.post(`/projects/${e}/actuals`,t)).data.data}catch(s){throw new Error(`Failed to create project actual: ${zr(s)}`)}},updateProjectActual:async(e,t,s)=>{try{return(await M.put(`/projects/${e}/actuals/${t}`,s)).data.data}catch(n){throw new Error(`Failed to update project actual: ${zr(n)}`)}},deleteProjectActual:async(e,t)=>{try{await M.delete(`/projects/${e}/actuals/${t}`)}catch(s){throw new Error(`Failed to delete project actual: ${zr(s)}`)}}},hl=Or((e,t)=>({reportData:null,historicAnalysis:[],projectActuals:[],isLoading:!1,error:null,fetchReportData:async s=>{e({isLoading:!0,error:null});try{const n=await Hr.getReportData(s);e({reportData:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch report";e({error:a,isLoading:!1})}},fetchHistoricAnalysis:async s=>{e({isLoading:!0,error:null});try{const n=await Hr.getHistoricAnalysis(s);e({historicAnalysis:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch historic analysis";e({error:a,isLoading:!1})}},fetchProjectActuals:async s=>{e({isLoading:!0,error:null});try{const n=await Hr.getProjectActuals(s);e({projectActuals:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch project actuals";e({error:a,isLoading:!1})}},addProjectActual:async(s,n)=>{try{const a=await Hr.createProjectActual(s,n);return e(l=>({projectActuals:[...l.projectActuals,a]})),a}catch(a){const l=a instanceof Error?a.message:"Failed to add project actual";throw e({error:l}),a}},updateProjectActual:async(s,n,a)=>{try{const l=await Hr.updateProjectActual(s,n,a);return e(o=>({projectActuals:o.projectActuals.map(i=>i.id===n?l:i)})),l}catch(l){const o=l instanceof Error?l.message:"Failed to update project actual";throw e({error:o}),l}},deleteProjectActual:async(s,n)=>{try{await Hr.deleteProjectActual(s,n),e(a=>({projectActuals:a.projectActuals.filter(l=>l.id!==n)}))}catch(a){const l=a instanceof Error?a.message:"Failed to delete project actual";throw e({error:l}),a}},clearError:()=>{e({error:null})},clearReportData:()=>{e({reportData:null})}}));function we({variant:e="primary",size:t="md",loading:s=!1,fullWidth:n=!1,disabled:a,className:l="",children:o,...i}){const c={primary:"bg-khc-primary hover:bg-khc-secondary text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",outline:"border border-khc-primary text-khc-primary hover:bg-khc-light"},d={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return r.jsx("button",{...i,disabled:a||s,className:`
        rounded-lg font-medium transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${c[e]}
        ${d[t]}
        ${n?"w-full":""}
        ${l}
      `,children:s?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),o]}):o})}function Gl({label:e,error:t,helperText:s,className:n="",id:a,...l}){const o=a||`input-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:"space-y-1",children:[e&&r.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[e,l.required&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),r.jsx("input",{...l,id:o,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${l.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${n}
        `}),t&&r.jsx("p",{className:"text-sm text-red-600",children:t}),s&&!t&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}function Hd({label:e,error:t,helperText:s,options:n,placeholder:a,className:l="",id:o,...i}){const c=o||`select-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:"space-y-1",children:[e&&r.jsxs("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:[e,i.required&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),r.jsxs("select",{...i,id:c,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${i.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${l}
        `,children:[a&&r.jsx("option",{value:"",disabled:!0,selected:!0,children:a}),n.map(d=>r.jsx("option",{value:d.value,children:d.label},d.value))]}),t&&r.jsx("p",{className:"text-sm text-red-600",children:t}),s&&!t&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}function ee({children:e,title:t,subtitle:s,className:n="",hover:a=!1}){return r.jsxs("div",{className:`
        bg-white rounded-lg shadow-md p-6
        ${a?"hover:shadow-lg transition-shadow duration-200 cursor-pointer":""}
        ${n}
      `,children:[t&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),s&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]}),e]})}function Wd({children:e,variant:t="default",size:s="md"}){const n={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"},a={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"};return r.jsx("span",{className:`
        inline-block rounded-full font-medium
        ${n[t]}
        ${a[s]}
      `,children:e})}function pl({size:e="md",text:t="Loading..."}){const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},n={sm:"text-sm",md:"text-base",lg:"text-lg"};return r.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:`
          border-4 border-gray-200 border-t-khc-primary rounded-full animate-spin
          ${s[e]}
        `}),t&&r.jsx("p",{className:`text-gray-600 ${n[e]}`,children:t})]})}function $r({message:e,onDismiss:t,autoClose:s=!1,autoCloseDuration:n=5e3}){const[a,l]=v.useState(!0);if(v.useEffect(()=>{if(s&&a){const i=setTimeout(()=>{l(!1),t==null||t()},n);return()=>clearTimeout(i)}},[s,n,a,t]),!a)return null;const o=()=>{l(!1),t==null||t()};return r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 pt-0.5",children:r.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-red-800",children:e})}),t&&r.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-800 transition",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function _j(e,t="report.csv"){const s=[];if(s.push(["KHConstruct Report"]),s.push([""]),s.push(["Project Name",e.project_name]),s.push(["Project ID",e.project_id.toString()]),e.completion_date&&s.push(["Completion Date",e.completion_date]),s.push([""]),s.push(["Cost Summary"]),s.push(["","Estimated",e.estimated_costs.grand_total.toString()]),e.actual_costs){s.push(["","Actual",e.actual_costs.grand_total.toString()]);const a=e.actual_costs.grand_total-e.estimated_costs.grand_total;s.push(["","Variance",a.toString()])}s.push([""]),s.push(["Cost Breakdown"]),s.push(["Subtotal",e.estimated_costs.subtotal.toString()]),s.push(["Contingency",e.estimated_costs.contingency.toString()]),s.push(["Grand Total",e.estimated_costs.grand_total.toString()]),e.estimated_costs.cost_per_m2&&s.push(["Cost per m",e.estimated_costs.cost_per_m2.toString()]),s.push([""]),s.push(["Line Items"]),s.push(["Description","Category","Estimated","Actual","Variance"]),e.line_items.forEach(a=>{var l,o;s.push([a.description,a.category,a.estimated.toString(),((l=a.actual)==null?void 0:l.toString())||"",((o=a.variance)==null?void 0:o.toString())||""])}),e.notes&&(s.push([""]),s.push(["Notes",e.notes]));const n=s.map(a=>a.map(l=>`"${l}"`).join(",")).join(`
`);Yh(n,t,"text/csv")}function Pj(e,t="report.json"){const s=JSON.stringify(e,null,2);Yh(s,t,"application/json")}function Yh(e,t,s){const n=new Blob([e],{type:s}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}function Xh(e){return`
    <!DOCTYPE html>
    <html>
      <head>
        <title>KHConstruct Report - ${e.project_name}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { background-color: #2C5F8D; color: white; padding: 20px; margin-bottom: 20px; }
          .section { margin-bottom: 30px; }
          .section-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #2C5F8D; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background-color: #f2f2f2; font-weight: bold; }
          tr:hover { background-color: #f5f5f5; }
          .summary { display: flex; gap: 40px; }
          .summary-item { flex: 1; }
          .summary-item label { font-weight: bold; display: block; margin-bottom: 5px; }
          .summary-item value { font-size: 16px; color: #2C5F8D; }
          .variance-under { color: green; }
          .variance-over { color: red; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>KHConstruct Project Report</h1>
          <p>Project: ${e.project_name}</p>
          ${e.completion_date?`<p>Completion Date: ${new Date(e.completion_date).toLocaleDateString()}</p>`:""}
        </div>

        <div class="section">
          <div class="section-title">Cost Summary</div>
          <div class="summary">
            <div class="summary-item">
              <label>Estimated Total:</label>
              <div>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
            </div>
            ${e.actual_costs?`
              <div class="summary-item">
                <label>Actual Total:</label>
                <div>${e.actual_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
              </div>
              <div class="summary-item">
                <label>Variance:</label>
                <div class="${e.actual_costs.grand_total>e.estimated_costs.grand_total?"variance-over":"variance-under"}">
                  ${(e.actual_costs.grand_total-e.estimated_costs.grand_total).toLocaleString("en-GB",{maximumFractionDigits:2})}
                </div>
              </div>
            `:""}
          </div>
        </div>

        <div class="section">
          <div class="section-title">Cost Breakdown</div>
          <table>
            <tr>
              <th>Item</th>
              <th>Amount</th>
            </tr>
            <tr>
              <td>Subtotal</td>
              <td>${e.estimated_costs.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr>
              <td>Contingency</td>
              <td>${e.estimated_costs.contingency.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr style="font-weight: bold;">
              <td>Grand Total</td>
              <td>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
          </table>
        </div>

        <div class="section">
          <div class="section-title">Line Items</div>
          <table>
            <tr>
              <th>Description</th>
              <th>Category</th>
              <th>Estimated</th>
              ${e.actual_costs?"<th>Actual</th><th>Variance</th>":""}
            </tr>
            ${e.line_items.map(t=>`
              <tr>
                <td>${t.description}</td>
                <td>${t.category}</td>
                <td>${t.estimated.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                ${e.actual_costs&&t.actual?`
                  <td>${t.actual.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                  <td class="${t.variance&&t.variance>0?"variance-over":"variance-under"}">
                    ${t.variance?""+t.variance.toLocaleString("en-GB",{maximumFractionDigits:2}):"-"}
                  </td>
                `:""}
              </tr>
            `).join("")}
          </table>
        </div>

        ${e.notes?`
          <div class="section">
            <div class="section-title">Notes</div>
            <p>${e.notes}</p>
          </div>
        `:""}

        <div style="margin-top: 40px; text-align: center; color: #999; font-size: 12px;">
          <p>Generated by KHConstruct on ${new Date().toLocaleDateString()}</p>
        </div>
      </body>
    </html>
  `}function Lj(e){const t=Xh(e),s=window.open("","","height=800,width=1000");s&&(s.document.write(t),s.document.close(),s.print())}function Rj(){const{id:e}=Ss();He();const t=Number(e),{reportData:s,isLoading:n,error:a,fetchReportData:l,clearReportData:o,clearError:i}=hl(),[c,d]=v.useState("csv"),[u,x]=v.useState(!1);v.useEffect(()=>(t&&l(t),()=>{o()}),[t,l,o]);const p=async()=>{if(s)try{x(!0);const h=new Date().toISOString().split("T")[0],y=`report-${s.project_name}-${h}`;switch(c){case"csv":_j(s,`${y}.csv`);break;case"json":Pj(s,`${y}.json`);break;case"html":const j=Xh(s),f=new Blob([j],{type:"text/html"}),g=URL.createObjectURL(f),m=document.createElement("a");m.href=g,m.download=`${y}.html`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(g);break}x(!1)}catch(h){console.error("Export failed:",h),x(!1)}},N=()=>{s&&Lj(s)};return n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading report..."})}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:s.project_name}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Project Report"})]}),a&&r.jsx($r,{message:a,onDismiss:i}),r.jsx(ee,{title:"Export Report",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"csv",checked:c==="csv",onChange:h=>d(h.target.value)}),r.jsx("span",{children:"Export as CSV"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"json",checked:c==="json",onChange:h=>d(h.target.value)}),r.jsx("span",{children:"Export as JSON"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"html",checked:c==="html",onChange:h=>d(h.target.value)}),r.jsx("span",{children:"Export as HTML"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(we,{variant:"primary",onClick:p,loading:u,children:" Download Report"}),r.jsx(we,{variant:"secondary",onClick:N,children:" Print to PDF"})]})]})}),r.jsx(ee,{title:"Cost Summary",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:Y(s.estimated_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contingency:"}),r.jsx("span",{className:"font-semibold",children:Y(s.estimated_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(s.estimated_costs.grand_total)})]}),s.estimated_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",Y(s.estimated_costs.cost_per_m2)]})]}),s.actual_costs&&r.jsxs("div",{className:"space-y-3 border-l pl-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:Y(s.actual_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contingency:"}),r.jsx("span",{className:"font-semibold",children:Y(s.actual_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(s.actual_costs.grand_total)})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),r.jsx("span",{className:`font-bold text-lg ${s.actual_costs.grand_total>s.estimated_costs.grand_total?"text-red-600":"text-green-600"}`,children:Y(s.actual_costs.grand_total-s.estimated_costs.grand_total)})]})}),s.actual_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",Y(s.actual_costs.cost_per_m2)]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(ee,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Project ID"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:s.project_id})]}),s.completion_date&&r.jsxs(ee,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Completion Date"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:Hh(s.completion_date)})]})]}),r.jsx(ee,{title:"Line Items Breakdown",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Estimated"}),s.actual_costs&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Variance"})]})]})}),r.jsx("tbody",{className:"divide-y",children:s.line_items.map((h,y)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:h.description}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:h.category}),r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:Y(h.estimated)}),s.actual_costs&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:h.actual?Y(h.actual):"-"}),r.jsx("td",{className:`px-4 py-3 text-right font-mono ${h.variance&&h.variance>0?"text-red-600":"text-green-600"}`,children:h.variance?Y(h.variance):"-"})]})]},y))})]})})}),s.notes&&r.jsx(ee,{title:"Notes",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.notes})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Report data not available"}),r.jsx(J,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to Projects"})]})}function Tj(){const{historicAnalysis:e,isLoading:t,error:s,fetchHistoricAnalysis:n,clearError:a}=hl(),{categories:l,fetchCategories:o}=Jh(),[i,c]=v.useState(""),[d,u]=v.useState("all");v.useEffect(()=>{o(),n()},[o,n]);const x=y=>{c(y),y?n(Number(y)):n()},p=e.filter(y=>!(d!=="all"&&y.region!==d)),N=["all",...new Set(e.map(y=>y.region).filter(y=>!!y))],h=p.reduce((y,j)=>{const f=j.building_age_range;return y[f]||(y[f]=[]),y[f].push(j),y},{});return t?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading cost analysis..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Historic Cost Analysis"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View cost benchmarks based on completed projects in your region"})]}),s&&r.jsx($r,{message:s,onDismiss:a}),r.jsx(ee,{title:"Filters",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Hd,{label:"Category",value:i,onChange:y=>x(y.target.value),options:[{value:"",label:"All Categories"},...l.map(y=>({value:y.id.toString(),label:y.name}))]}),r.jsx(Hd,{label:"Region",value:d,onChange:y=>u(y.target.value),options:N.map(y=>({value:y,label:y==="all"?"All Regions":y}))})]})}),p.length===0?r.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("p",{className:"text-blue-800 font-semibold mb-2",children:"No Historic Cost Analysis Data"}),r.jsx("p",{className:"text-blue-700 text-sm",children:"Historic cost analysis will be available once completed projects with actual costs are recorded in the system."})]}):r.jsx("div",{className:"space-y-6",children:Object.entries(h).sort(([y],[j])=>{const f={"0-10":0,"10-20":1,"20-30":2,"30+":3};return(f[y]??999)-(f[j]??999)}).map(([y,j])=>r.jsx(ee,{title:`Building Age: ${y} years`,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Condition Rating"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Cost per m"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Std Deviation"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Sample Size"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Confidence"})]})}),r.jsx("tbody",{className:"divide-y",children:j.map(f=>{const g=f.sample_size>=3?"High":"Low";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:f.condition_rating_range}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:Y(f.cost_per_m2)}),r.jsxs("td",{className:"px-4 py-3 text-right font-mono text-gray-600",children:["",Y(f.std_deviation)]}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsxs(Wd,{variant:f.sample_size>=3?"success":"warning",children:[f.sample_size," projects"]})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx(Wd,{variant:g==="High"?"success":"warning",children:g})})]},f.id)})})]})})},y))}),r.jsx(ee,{children:r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:r.jsx("strong",{children:"How to interpret this data:"})}),r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Cost per m:"})," Average cost for this category based on similar projects"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Std Deviation:"})," Expected variance from the average cost"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Sample Size:"})," Number of completed projects this benchmark is based on"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Confidence:"})," Higher confidence indicates more reliable data (3+ projects)"]})]})]})})]})}function Aj(){const{id:e}=Ss();He();const t=Number(e),{projectActuals:s,isLoading:n,error:a,fetchProjectActuals:l,updateProjectActual:o,deleteProjectActual:i,clearError:c}=hl(),{currentProject:d,fetchProjectById:u}=zt(),[x,p]=v.useState(!1),[N,h]=v.useState(null),[y,j]=v.useState({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]}),[f,g]=v.useState(!1);v.useEffect(()=>{t&&(u(t),l(t))},[t,u,l]);const m=w=>{if(w){const E=s.find(R=>R.id===w);E&&(h(w),j({actual_quantity:E.actual_quantity,actual_cost:E.actual_cost,variance_reason:E.variance_reason||"",completed_date:E.completed_date}))}else h(null),j({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]});p(!0)},b=()=>{p(!1),h(null),j({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]})},S=async()=>{if(!(y.actual_quantity<=0||y.actual_cost<0))try{g(!0),N?await o(t,N,{actual_quantity:y.actual_quantity,actual_cost:y.actual_cost,variance_reason:y.variance_reason||void 0,completed_date:y.completed_date}):console.warn("Adding new actual cost requires cost item selection"),g(!1),b()}catch(w){g(!1),console.error("Failed to save actual cost:",w)}},k=async w=>{if(confirm("Are you sure you want to delete this actual cost record?"))try{await i(t,w)}catch(E){console.error("Failed to delete actual cost:",E)}};return n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading project actuals..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Actuals"}),r.jsx("p",{className:"text-gray-600 mt-2",children:d==null?void 0:d.name})]}),a&&r.jsx($r,{message:a,onDismiss:c}),r.jsx(ee,{children:r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:r.jsx("strong",{children:"Record Actual Costs:"})}),r.jsx("p",{children:"Enter actual quantities and costs for completed work items. The system will calculate variances between estimated and actual costs to help track project performance."})]})}),s.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[r.jsx("p",{className:"text-gray-600",children:"No actual cost records yet"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Complete project work items and record actual costs here"})]}):r.jsx(ee,{title:"Recorded Actuals",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Completed Date"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Quantity"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Cost"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Variance Reason"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:Hh(w.completed_date)}),r.jsx("td",{className:"px-4 py-3 text-right",children:w.actual_quantity}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:Y(w.actual_cost)}),r.jsx("td",{className:"px-4 py-3 text-gray-600 text-xs",children:w.variance_reason||r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsxs("td",{className:"px-4 py-3 text-center space-x-2 flex justify-center",children:[r.jsx("button",{onClick:()=>m(w.id),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition",children:"Edit"}),r.jsx("button",{onClick:()=>k(w.id),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition",children:"Delete"})]})]},w.id))})]})})}),r.jsx(Es,{isOpen:x,onClose:b,title:"Edit Actual Cost",children:r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsx(Gl,{label:"Actual Quantity",type:"number",min:"0",step:"0.01",value:y.actual_quantity,onChange:w=>j({...y,actual_quantity:parseFloat(w.target.value)||0}),required:!0}),r.jsx(Gl,{label:"Actual Cost ()",type:"number",min:"0",step:"0.01",value:y.actual_cost,onChange:w=>j({...y,actual_cost:parseFloat(w.target.value)||0}),required:!0}),r.jsx(Gl,{label:"Completed Date",type:"date",value:y.completed_date,onChange:w=>j({...y,completed_date:w.target.value}),required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variance Reason"}),r.jsx("textarea",{value:y.variance_reason,onChange:w=>j({...y,variance_reason:w.target.value}),placeholder:"Explain any significant variance from estimate",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(we,{variant:"secondary",onClick:b,disabled:f,children:"Cancel"}),r.jsx(we,{variant:"primary",onClick:S,loading:f,children:"Save Changes"})]})]})})]})}function Fj(){var E,R,F;const{id:e}=Ss(),t=He(),s=Number(e),{reportData:n,isLoading:a,error:l,fetchReportData:o,clearError:i}=hl(),{currentProject:c,fetchProjectById:d}=zt(),[u,x]=v.useState("none"),[p,N]=v.useState("csv"),[h,y]=v.useState({});v.useEffect(()=>{s&&(d(s),o(s))},[s,d,o]),v.useEffect(()=>{if(n&&n.line_items){const O={};u==="none"?y({}):(n.line_items.forEach(W=>{let U="";u==="pdCode"?U=W.category||"Uncategorized":u==="areaCode"?U="Area: "+W.category||"Uncategorized":u==="projectNumber"?U=String(s)||"Unknown":u==="itemDescription"&&(U=W.description||"Uncategorized"),U&&(O[U]=(O[U]||0)+(W.estimated||0))}),y(O))}},[n,u,s]);const j=()=>{if(!n)return;const O=new Date().toISOString().split("T")[0],W=`project-cost-total-${(c==null?void 0:c.name)||"project"}-${O}`,U={projectName:n.project_name,projectId:n.project_id,contingencyPercentage:10,estimatedCosts:n.estimated_costs,actualCosts:n.actual_costs,lineItems:n.line_items,breakdown:h,exportedAt:new Date().toISOString()};p==="csv"?f(U,`${W}.csv`):g(U,`${W}.json`)},f=(O,W)=>{var q,$,P,_,T;const U=[];U.push(["PROJECT COST TOTAL REPORT"]),U.push([]),U.push(["Project Name",O.projectName]),U.push(["Project ID",String(O.projectId)]),U.push(["Contingency %",String(O.contingencyPercentage)+"%"]),U.push([]),U.push(["COST SUMMARY"]),U.push(["Estimated Subtotal",String((q=O.estimatedCosts)==null?void 0:q.subtotal)]),U.push(["Contingency Amount",String(($=O.estimatedCosts)==null?void 0:$.contingency)]),U.push(["Estimated Total",String((P=O.estimatedCosts)==null?void 0:P.grand_total)]),(_=O.estimatedCosts)!=null&&_.cost_per_m2&&U.push(["Cost per m",String(O.estimatedCosts.cost_per_m2)]),O.actualCosts&&(U.push([]),U.push(["Actual Subtotal",String(O.actualCosts.subtotal)]),U.push(["Actual Contingency",String(O.actualCosts.contingency)]),U.push(["Actual Total",String(O.actualCosts.grand_total)]),O.actualCosts.cost_per_m2&&U.push(["Actual Cost per m",String(O.actualCosts.cost_per_m2)])),U.push([]),U.push(["LINE ITEMS"]),U.push(["Description","Category","Estimated","Actual","Variance"]),(T=O.lineItems)==null||T.forEach(B=>{U.push([B.description||"",B.category||"",String(B.estimated||0),String(B.actual||""),String(B.variance||"")])});const D=U.map(B=>B.map(G=>`"${G}"`).join(",")).join(`
`);m(D,W,"text/csv")},g=(O,W)=>{const U=JSON.stringify(O,null,2);m(U,W,"application/json")},m=(O,W,U)=>{const D=new Blob([O],{type:U}),q=URL.createObjectURL(D),$=document.createElement("a");$.href=q,$.download=W,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(q)};if(a)return r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading project costs..."})});if(!n)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Cost data not available"}),r.jsx(we,{variant:"secondary",onClick:()=>t(`/projects/${s}`),children:"Back to Project"})]});const b=((E=n.estimated_costs)==null?void 0:E.grand_total)||0,S=(R=n.actual_costs)==null?void 0:R.grand_total,k=10,w=(F=n.estimated_costs)==null?void 0:F.cost_per_m2;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Total"}),r.jsx("p",{className:"text-gray-600 mt-2",children:n.project_name})]}),l&&r.jsx($r,{message:l,onDismiss:i}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(ee,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Contingency %"}),r.jsxs("p",{className:"text-4xl font-bold text-khc-primary mt-2",children:[k,"%"]})]}),r.jsxs(ee,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Project Total"}),r.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:Y(b)}),S&&r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Actual: ",Y(S)]})]}),r.jsxs(ee,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Cost per m"}),r.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:w?Y(w):"N/A"})]})]}),r.jsx(ee,{title:"Cost Breakdown",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group By"}),r.jsxs("select",{value:u,onChange:O=>x(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[r.jsx("option",{value:"none",children:"No Grouping (Total Only)"}),r.jsx("option",{value:"pdCode",children:"PD Code / Category"}),r.jsx("option",{value:"areaCode",children:"Area Code"}),r.jsx("option",{value:"projectNumber",children:"Project Number"}),r.jsx("option",{value:"itemDescription",children:"Item Description"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),r.jsxs("select",{value:p,onChange:O=>N(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[r.jsx("option",{value:"csv",children:"CSV (Excel)"}),r.jsx("option",{value:"json",children:"JSON (Data)"})]})]})]}),r.jsx(we,{variant:"primary",onClick:j,fullWidth:!0,children:" Export Cost Total"})]})}),u!=="none"&&Object.keys(h).length>0&&r.jsx(ee,{title:"Cost Breakdown by Category",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"% of Total"})]})}),r.jsx("tbody",{className:"divide-y",children:Object.entries(h).sort(([,O],[,W])=>W-O).map(([O,W])=>{const U=(W/b*100).toFixed(1);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:O}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:Y(W)}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:[U,"%"]})]},O)})}),r.jsx("tfoot",{className:"bg-gray-50 border-t-2",children:r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-bold text-gray-900",children:"Total"}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-khc-primary text-lg",children:Y(b)}),r.jsx("td",{className:"px-4 py-3 text-right font-bold text-gray-600",children:"100%"})]})})]})})}),r.jsx(ee,{title:"Summary",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:Y(n.estimated_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",k,"%):"]}),r.jsx("span",{className:"font-semibold",children:Y(n.estimated_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(b)})]}),n.estimated_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",Y(n.estimated_costs.cost_per_m2)]})]}),S&&n.actual_costs&&r.jsxs("div",{className:"space-y-3 border-l pl-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Actual Subtotal:"}),r.jsx("span",{className:"font-semibold",children:Y(n.actual_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Actual Contingency:"}),r.jsx("span",{className:"font-semibold",children:Y(n.actual_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(S)})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),r.jsx("span",{className:`font-bold text-lg ${S>b?"text-red-600":"text-green-600"}`,children:Y(S-b)})]})}),n.actual_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Actual cost per m: ",Y(n.actual_costs.cost_per_m2)]})]})]})})]})}function Dj(){const{user:e}=qt(),[t,s]=v.useState([]),[n,a]=v.useState(!0),[l,o]=v.useState(null),[i,c]=v.useState(null),[d,u]=v.useState(null),[x,p]=v.useState(!1);if((e==null?void 0:e.role)!=="admin")return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-red-700",children:"Only administrators can access user management."})]})});v.useEffect(()=>{N()},[]);const N=async()=>{var f,g;try{a(!0),o(null);const m=await jr.getAllUsers();s(m.data.users)}catch(m){o(((g=(f=m.response)==null?void 0:f.data)==null?void 0:g.error)||"Failed to load users")}finally{a(!1)}},h=f=>{c(f.id),u({id:f.id,username:f.username,email:f.email,role:f.role,is_active:f.is_active})},y=()=>{c(null),u(null)},j=async()=>{var f,g;if(d)try{p(!0);const m={},b=t.find(S=>S.id===d.id);if(!b)return;if(d.username!==b.username&&(m.username=d.username),d.email!==b.email&&(m.email=d.email),d.role!==b.role&&(m.role=d.role),d.is_active!==b.is_active&&(m.is_active=d.is_active),Object.keys(m).length===0){y();return}await jr.updateUser(d.id,m),s(t.map(S=>S.id===d.id?{...S,username:d.username,email:d.email,role:d.role,is_active:d.is_active}:S)),y()}catch(m){o(((g=(f=m.response)==null?void 0:f.data)==null?void 0:g.error)||"Failed to update user")}finally{p(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"User Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all users in the system"})]}),l&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:l}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading users..."}):t.length===0?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"No users found"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Username"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(f=>r.jsx("tr",{className:"hover:bg-gray-50",children:i===f.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"text",value:(d==null?void 0:d.username)||"",onChange:g=>u({...d,username:g.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"email",value:(d==null?void 0:d.email)||"",onChange:g=>u({...d,email:g.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("select",{value:(d==null?void 0:d.role)||"",onChange:g=>u({...d,role:g.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"estimator",children:"Estimator"}),r.jsx("option",{value:"viewer",children:"Viewer"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:(d==null?void 0:d.is_active)||!1,onChange:g=>u({...d,is_active:g.target.checked}),className:"h-4 w-4 text-khc-primary"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d!=null&&d.is_active?"Active":"Inactive"})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(f.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:j,disabled:x,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:bg-gray-400",children:x?"Saving...":"Save"}),r.jsx("button",{onClick:y,disabled:x,className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded disabled:bg-gray-300",children:"Cancel"})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:f.username}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:f.email}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:f.role})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${f.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:f.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(f.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>h(f),className:"px-3 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-sm rounded",children:"Edit"})})]})},f.id))})]})})})]})}function Ij(){qt();const[e,t]=v.useState([]),[s,n]=v.useState(!1),[a,l]=v.useState(""),[o,i]=v.useState(!1),[c,d]=v.useState(null),[u,x]=v.useState(""),[p,N]=v.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),h=async()=>{var m,b;n(!0),l("");try{const S=await Hs.getAll({search:u});t(S.data.data||[])}catch(S){l(((b=(m=S.response)==null?void 0:m.data)==null?void 0:b.error)||"Failed to load clients")}finally{n(!1)}};v.useEffect(()=>{h()},[u]);const y=async m=>{var b;m.preventDefault(),l("");try{c?await Hs.update(c,p):await Hs.create(p),g(),h()}catch(S){const k=(b=S.response)==null?void 0:b.data;let w="Failed to save client";if(k!=null&&k.error&&(w=k.error,k.details&&Array.isArray(k.details))){const E=k.details.map(R=>`${R.field}: ${R.message}`).join(", ");w=`${k.error} - ${E}`}l(w)}},j=async m=>{var b,S;if(confirm("Are you sure you want to delete this client?"))try{await Hs.delete(m),h()}catch(k){l(((S=(b=k.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to delete client")}},f=m=>{N({name:m.name,email:m.email||"",phone:m.phone||"",address:m.address||"",city:m.city||"",postcode:m.postcode||"",country:m.country||"United Kingdom",website:m.website||"",notes:m.notes||""}),d(m.id),i(!0)},g=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),d(null),i(!1)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Clients"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your client contacts"})]}),r.jsx("button",{onClick:()=>{g(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Client"})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search clients by name, email, or city...",value:u,onChange:m=>x(m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Client":"New Client"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),r.jsx("input",{type:"text",required:!0,value:p.name,onChange:m=>N({...p,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:p.email||"",onChange:m=>N({...p,email:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:p.phone||"",onChange:m=>N({...p,phone:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:p.website||"",onChange:m=>N({...p,website:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:p.address||"",onChange:m=>N({...p,address:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:p.city||"",onChange:m=>N({...p,city:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),r.jsx("input",{type:"text",value:p.postcode||"",onChange:m=>N({...p,postcode:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:p.country||"United Kingdom",onChange:m=>N({...p,country:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:p.notes||"",onChange:m=>N({...p,notes:m.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Client":"Add Client"}),r.jsx("button",{type:"button",onClick:g,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading clients..."}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No clients found. ",!o&&r.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Create one now"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(m=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:m.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:m.email||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:m.phone||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:m.city||"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[r.jsx("button",{onClick:()=>f(m),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>j(m.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},m.id))})]})})})]})}function Oj(){qt();const[e,t]=v.useState([]),[s,n]=v.useState(!1),[a,l]=v.useState(""),[o,i]=v.useState(!1),[c,d]=v.useState(null),[u,x]=v.useState(""),[p,N]=v.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),h=async()=>{var b,S;n(!0),l("");try{const k=await Ws.getAll({search:u});t(k.data.data||[])}catch(k){l(((S=(b=k.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to load contractors")}finally{n(!1)}};v.useEffect(()=>{h()},[u]);const y=async b=>{var S;b.preventDefault(),l("");try{c?await Ws.update(c,p):await Ws.create(p),g(),h()}catch(k){const w=(S=k.response)==null?void 0:S.data;let E="Failed to save contractor";if(w!=null&&w.error&&(E=w.error,w.details&&Array.isArray(w.details))){const R=w.details.map(F=>`${F.field}: ${F.message}`).join(", ");E=`${w.error} - ${R}`}l(E)}},j=async b=>{var S,k;if(confirm("Are you sure you want to delete this contractor?"))try{await Ws.delete(b),h()}catch(w){l(((k=(S=w.response)==null?void 0:S.data)==null?void 0:k.error)||"Failed to delete contractor")}},f=b=>{N({name:b.name,email:b.email||"",phone:b.phone||"",address:b.address||"",city:b.city||"",postcode:b.postcode||"",country:b.country||"United Kingdom",website:b.website||"",specialization:b.specialization||"",notes:b.notes||""}),d(b.id),i(!0)},g=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),d(null),i(!1)},m=({rating:b,size:S="sm"})=>{const k=S==="md"?"w-5 h-5":"w-4 h-4";return r.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(w=>r.jsx("span",{className:`${k} ${w<=b?"text-yellow-400":"text-gray-300"}`,children:""},w))})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Building Contractors"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your contractor network and specializations"})]}),r.jsx("button",{onClick:()=>{g(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Contractor"})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search contractors by name, email, specialty, or city...",value:u,onChange:b=>x(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Contractor":"New Contractor"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Name *"}),r.jsx("input",{type:"text",required:!0,value:p.name,onChange:b=>N({...p,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),r.jsx("input",{type:"text",placeholder:"e.g., Electrical, Plumbing, Carpentry",value:p.specialization||"",onChange:b=>N({...p,specialization:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:p.email||"",onChange:b=>N({...p,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:p.phone||"",onChange:b=>N({...p,phone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:p.website||"",onChange:b=>N({...p,website:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:p.address||"",onChange:b=>N({...p,address:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:p.city||"",onChange:b=>N({...p,city:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),r.jsx("input",{type:"text",value:p.postcode||"",onChange:b=>N({...p,postcode:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:p.country||"United Kingdom",onChange:b=>N({...p,country:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:p.notes||"",onChange:b=>N({...p,notes:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Contractor":"Add Contractor"}),r.jsx("button",{type:"button",onClick:g,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading contractors..."}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No contractors found. ",!o&&r.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Add one now"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Specialization"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Rating"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(b=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:b.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.specialization||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.city||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx(m,{rating:Math.round(b.rating)})}),r.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[r.jsx("button",{onClick:()=>f(b),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>j(b.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},b.id))})]})})})]})}function $j(){const[e,t]=v.useState([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),[s,n]=v.useState(!1),[a,l]=v.useState(null),[o,i]=v.useState(null),c=v.useRef(null),d=(j,f,g)=>{const m=[...e],b={...m[j]};f==="labour"||f==="materials"||f==="plant"||f==="ohp"||f==="rate"?b[f]=typeof g=="number"?g:parseFloat(String(g))||0:b[f]=String(g),m[j]=b,t(m)},u=()=>{t([...e,{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}])},x=j=>{t(e.filter((f,g)=>g!==j))},p=j=>{j.preventDefault();const g=j.clipboardData.getData("text").trim().split(`
`),m=[];for(const b of g){let S=b.split("	");if(S.length<8&&(S=b.split(",")),S.length>=8){const k=S.map(w=>w.trim());m.push({description:k[0]||"",uniqueId:k[1]||"",labour:parseFloat(k[2])||0,materials:parseFloat(k[3])||0,plant:parseFloat(k[4])||0,ohp:parseFloat(k[5])||0,uom:k[6]||"",rate:parseFloat(k[7])||0})}}if(m.length>0){const b=e.filter(k=>!k.description&&!k.uniqueId&&k.rate===0),S=e.filter(k=>k.description||k.uniqueId||k.rate>0);m.length>1&&b.length>0&&S.length===0?t(m):t([...e,...m])}},N=()=>{for(let j=0;j<e.length;j++){const f=e[j];if(!f.description||!f.uniqueId||!f.uom||f.rate<=0)return l(`Row ${j+1} has missing or invalid required fields`),!1}return!0},h=async()=>{if(N())try{n(!0),l(null);const j=e.filter(m=>m.description&&m.uniqueId&&m.uom&&m.rate>0);if(j.length===0){l("No valid rows to import"),n(!1);return}const g=[...JSON.parse(localStorage.getItem("personalCostDatabase")||"[]"),...j];localStorage.setItem("personalCostDatabase",JSON.stringify(g)),i(` Successfully saved ${j.length} cost item${j.length!==1?"s":""} to your personal database`),t([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),n(!1)}catch(j){n(!1),l(j instanceof Error?j.message:"Failed to save items")}},y=e.filter(j=>j.description&&j.uniqueId&&j.uom&&j.rate>0).length;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Personal Cost Database"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Build your custom cost database with labour, materials, plant and overhead costs"})]}),a&&r.jsx($r,{message:a,onDismiss:()=>l(null)}),o&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:o})}),r.jsx(ee,{title:"Cost Items",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-3 bg-gray-50 text-sm text-gray-600",children:[" ",r.jsx("strong",{children:"Tip:"})," Click in the table and paste full rows of data (from Excel/Google Sheets). Table auto-expands to fit all rows!"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{ref:c,onPaste:p,className:"w-full text-sm border-collapse focus:outline-none",tabIndex:0,children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-khc-primary text-white",children:[r.jsx("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:"#"}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Description",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Unique ID",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Labour"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Materials"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Plant"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"OHP"}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["UOM",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:["Rate",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("th",{className:"px-3 py-3 text-center font-semibold border border-gray-200",children:"Action"})]})}),r.jsx("tbody",{children:e.map((j,f)=>r.jsxs("tr",{className:"hover:bg-blue-50",children:[r.jsx("td",{className:"px-3 py-2 border border-gray-200 text-gray-600",children:f+1}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:j.description,onChange:g=>d(f,"description",g.target.value),placeholder:"Item description",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:j.uniqueId,onChange:g=>d(f,"uniqueId",g.target.value),placeholder:"e.g., ID001",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.labour||"",onChange:g=>d(f,"labour",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.materials||"",onChange:g=>d(f,"materials",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.plant||"",onChange:g=>d(f,"plant",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.ohp||"",onChange:g=>d(f,"ohp",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:j.uom,onChange:g=>d(f,"uom",g.target.value),placeholder:"e.g., m2, m3, no",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.rate||"",onChange:g=>d(f,"rate",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200 text-center",children:r.jsx("button",{onClick:()=>x(f),className:"text-red-600 hover:text-red-800 font-semibold text-lg",title:"Delete row",children:""})})]},f))})]})}),r.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600",children:r.jsxs("p",{children:[r.jsx("span",{className:"text-red-400",children:"*"})," Required fields: Description, Unique ID, UOM, Rate"]})}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(we,{variant:"secondary",onClick:u,children:"+ Add Row"}),r.jsx(we,{variant:"primary",onClick:h,loading:s,fullWidth:!0,disabled:y===0,children:s?"Saving...":`Save ${y} Cost Item${y!==1?"s":""}`})]})]})}),r.jsx(ee,{title:"How to Use",children:r.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Fastest Method: Paste Full Database"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-600",children:[r.jsx("li",{children:"Select all data in Excel/Google Sheets (Ctrl+A)"}),r.jsx("li",{children:"Copy (Ctrl+C or Cmd+C)"}),r.jsx("li",{children:r.jsx("strong",{children:"Click anywhere in the table below"})}),r.jsx("li",{children:"Paste (Ctrl+V or Cmd+V)"}),r.jsx("li",{children:" Table auto-expands to match pasted rows!"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Columns must be in order: Description, Unique ID, Labour, Materials, Plant, OHP, UOM, Rate"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Single Row Paste"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Copy one row of data from Excel"}),r.jsx("li",{children:"Click in the table and paste"}),r.jsx("li",{children:"Row is added to table automatically"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Manual Entry"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Click into any field and type the value"}),r.jsx("li",{children:"Tab or click to move to next field"}),r.jsx("li",{children:"Use the  button to delete a row"}),r.jsx("li",{children:'Click "+ Add Row" for additional entries'})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Field Guide"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Description:"})," Clear description of the cost item"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Unique ID:"})," Unique identifier (e.g., ID001, LB01)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Labour:"})," Labour cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Materials:"})," Material cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Plant:"})," Plant/equipment cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"OHP:"})," Overheads and profit ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"UOM:"})," Unit of measure (e.g., m2, m3, no, tonne)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Rate:"})," Total rate per unit (Labour + Materials + Plant + OHP)"]})]})]})]})})]})}const Uj=["Preliminaries","Excavation & Earthworks","Foundations","Structure","Roofing","External Walls","Windows & Doors","Partitions & Screens","Finishings","Mechanical Services","Electrical Services","Plumbing & Drainage","Site Works"];function Mj(){const[e,t]=v.useState([]),[s,n]=v.useState([]),[a,l]=v.useState(null),[o,i]=v.useState(null),[c,d]=v.useState(""),[u,x]=v.useState("all"),[p,N]=v.useState(!1),[h,y]=v.useState(null),[j,f]=v.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),[g,m]=v.useState(""),[b,S]=v.useState(!1);v.useEffect(()=>{k(),w()},[]);const k=()=>{const P=localStorage.getItem("internalRates");P&&t(JSON.parse(P))},w=()=>{const P=localStorage.getItem("rateCategories");if(P)n(JSON.parse(P));else{const _=Uj.map((T,B)=>({id:`cat-${B}`,name:T,isCustom:!1}));n(_),localStorage.setItem("rateCategories",JSON.stringify(_))}},E=P=>{localStorage.setItem("internalRates",JSON.stringify(P)),t(P)},R=()=>{if(!g.trim()){l("Category name is required");return}if(s.some(T=>T.name.toLowerCase()===g.toLowerCase())){l("Category already exists");return}const P={id:`cat-${Date.now()}`,name:g,isCustom:!0},_=[...s,P];n(_),localStorage.setItem("rateCategories",JSON.stringify(_)),m(""),S(!1),i("Category added successfully"),setTimeout(()=>i(null),3e3)},F=()=>{if(!j.description.trim()||!j.category||!j.uom||j.labour+j.materials+j.plant+j.ohp===0){l("Description, Category, UOM, and at least one cost component are required");return}let P;if(h)P=e.map(_=>_.id===h?{...j,id:h,labour:parseFloat(String(j.labour))||0,materials:parseFloat(String(j.materials))||0,plant:parseFloat(String(j.plant))||0,ohp:parseFloat(String(j.ohp))||0,createdAt:_.createdAt}:_),i("Rate updated successfully");else{const _={id:`rate-${Date.now()}`,description:j.description,category:j.category,labour:parseFloat(String(j.labour))||0,materials:parseFloat(String(j.materials))||0,plant:parseFloat(String(j.plant))||0,ohp:parseFloat(String(j.ohp))||0,uom:j.uom,createdAt:new Date().toISOString()};P=[...e,_],i("Rate added successfully")}E(P),U(),setTimeout(()=>i(null),3e3)},O=P=>{window.confirm("Are you sure you want to delete this rate?")&&(E(e.filter(_=>_.id!==P)),i("Rate deleted successfully"),setTimeout(()=>i(null),3e3))},W=P=>{f({description:P.description,category:P.category,labour:P.labour,materials:P.materials,plant:P.plant,ohp:P.ohp,uom:P.uom}),y(P.id),N(!0)},U=()=>{f({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),y(null),N(!1)},D=e.filter(P=>{const _=u==="all"||P.category===u,T=P.description.toLowerCase().includes(c.toLowerCase());return _&&T}),q=D.reduce((P,_)=>(P[_.category]||(P[_.category]=[]),P[_.category].push(_),P),{}),$=P=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(P);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Internal Rates Builder"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage your organization's rate book"})]}),a&&r.jsx($r,{message:a,onDismiss:()=>l(null)}),o&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:o})}),p&&r.jsx(ee,{title:h?"Edit Rate":"Add New Rate",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),r.jsx("input",{type:"text",value:j.description,onChange:P=>f({...j,description:P.target.value}),placeholder:"Rate description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category*"}),r.jsxs("select",{value:j.category,onChange:P=>f({...j,category:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"Select category"}),s.map(P=>r.jsx("option",{value:P.name,children:P.name},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour ()*"}),r.jsx("input",{type:"number",value:j.labour||"",onChange:P=>f({...j,labour:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Materials ()*"}),r.jsx("input",{type:"number",value:j.materials||"",onChange:P=>f({...j,materials:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant ()*"}),r.jsx("input",{type:"number",value:j.plant||"",onChange:P=>f({...j,plant:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OHP ()*"}),r.jsx("input",{type:"number",value:j.ohp||"",onChange:P=>f({...j,ohp:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UOM*"}),r.jsx("input",{type:"text",value:j.uom,onChange:P=>f({...j,uom:P.target.value}),placeholder:"e.g., m2, m3, no",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(we,{variant:"primary",onClick:F,children:h?"Update Rate":"Add Rate"}),r.jsx(we,{variant:"secondary",onClick:U,children:"Cancel"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!p&&r.jsx(we,{variant:"primary",onClick:()=>N(!0),fullWidth:!0,children:"+ Add New Rate"}),!b&&r.jsx(we,{variant:"secondary",onClick:()=>S(!0),fullWidth:!0,children:"+ Add Category"}),b&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:g,onChange:P=>m(P.target.value),placeholder:"New category name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsx("button",{onClick:R,className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary",children:""}),r.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:""})]})]}),r.jsx(ee,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"Search rates by description...",value:c,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("select",{value:u,onChange:P=>x(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"all",children:"All Categories"}),s.map(P=>r.jsx("option",{value:P.name,children:P.name},P.id))]})]})}),D.length===0?r.jsx(ee,{children:r.jsxs("p",{className:"text-center text-gray-500",children:["No rates found. ",!p&&r.jsx("span",{onClick:()=>N(!0),className:"text-khc-primary cursor-pointer hover:underline",children:"Add one now"})]})}):Object.entries(q).map(([P,_])=>r.jsx(ee,{title:P,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Labour"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Materials"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Plant"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"OHP"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"UOM"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Action"})]})}),r.jsx("tbody",{children:_.map(T=>{const B=T.labour+T.materials+T.plant+T.ohp;return r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:T.description}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(T.labour)}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(T.materials)}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(T.plant)}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(T.ohp)}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-khc-primary",children:$(B)}),r.jsx("td",{className:"px-3 py-2 text-center",children:T.uom}),r.jsxs("td",{className:"px-3 py-2 text-center space-x-2",children:[r.jsx("button",{onClick:()=>W(T),className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Edit",children:""}),r.jsx("button",{onClick:()=>O(T.id),className:"text-red-600 hover:text-red-800 font-semibold",title:"Delete",children:""})]})]},T.id)})})]})})},P)),r.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded p-3",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Total Rates:"})," ",e.length]})})]})}function Bj(){const e=He(),{projects:t,isLoading:s,fetchProjects:n}=zt(),[a,l]=v.useState(null),[o,i]=v.useState(null),[c,d]=v.useState([]),[u,x]=v.useState([]),[p,N]=v.useState([]),[h,y]=v.useState([]),[j,f]=v.useState(0),[g,m]=v.useState(!1),[b,S]=v.useState(""),[k,w]=v.useState("all"),[E,R]=v.useState(!1),[F,O]=v.useState(!1),[W,U]=v.useState(null),[D,q]=v.useState(null),[$,P]=v.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0});v.useEffect(()=>{n(),_(),T()},[n]);const _=()=>{const L=JSON.parse(localStorage.getItem("internalRates")||"[]"),X=JSON.parse(localStorage.getItem("personalCostDatabase")||"[]");d(L),x(X)},T=()=>{const L=localStorage.getItem("rateCategories");L&&N(JSON.parse(L))},B=L=>{l(L);const X=t.find(K=>K.id===L);i(X||null),y([]),q(`Project "${X==null?void 0:X.name}" selected`),setTimeout(()=>q(null),2e3)},pe=[...c,...u].filter(L=>{const X=k==="all"||L.category===k,K=L.description.toLowerCase().includes(b.toLowerCase());return X&&K}).reduce((L,X)=>(L[X.category]||(L[X.category]=[]),L[X.category].push(X),L),{}),ne=L=>{if(!o){U("Please select a project first");return}const X={id:`line-${Date.now()}`,description:L.description,source:c.some(K=>K.id===L.id)?"internal":"imported",labour:L.labour,materials:L.materials,plant:L.plant,ohp:L.ohp,uom:L.uom,quantity:1,markupPercentage:0,category:L.category};y([...h,X]),q("Rate added to assembly"),setTimeout(()=>q(null),2e3)},Se=()=>{if(!o){U("Please select a project first");return}if(!$.description||!$.category||!$.uom){U("Description, category, and UOM are required");return}if($.labour+$.materials+$.plant+$.ohp===0){U("At least one cost component is required");return}const L={id:`line-${Date.now()}`,description:$.description,source:"custom",labour:$.labour,materials:$.materials,plant:$.plant,ohp:$.ohp,uom:$.uom,quantity:$.quantity,markupPercentage:$.markupPercentage,category:$.category};y([...h,L]),P({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0}),O(!1),q("Custom line item added"),setTimeout(()=>q(null),2e3)},V=(L,X,K)=>{y(h.map(be=>be.id===L?{...be,[X]:K}:be))},Ee=L=>{y(h.filter(X=>X.id!==L))},wt=L=>{const X=(L.labour+L.materials+L.plant+L.ohp)*L.quantity,K=g?j:L.markupPercentage;return X*(1+K/100)},oe=(()=>{const L={};return h.forEach(X=>{L[X.category]||(L[X.category]=0),L[X.category]+=wt(X)}),L})(),je=Object.values(oe).reduce((L,X)=>L+X,0),ve=L=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(L),xr=()=>{if(!o||h.length===0){U("Select a project and add line items before exporting");return}const L=`
      <html>
        <head>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #003366; }
            .header { margin-bottom: 20px; }
            .section { margin-bottom: 30px; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #003366; color: white; }
            .total { font-weight: bold; background-color: #f0f0f0; }
            .grand-total { font-weight: bold; font-size: 16px; background-color: #e0e0e0; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${o.name}</h1>
            <p><strong>Project ID:</strong> ${o.id}</p>
            <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
          </div>
          ${Object.entries(oe).map(([Le,Rt])=>`
            <div class="section">
              <h2>${Le}</h2>
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th>Qty</th>
                    <th>UOM</th>
                    <th>Labour</th>
                    <th>Materials</th>
                    <th>Plant</th>
                    <th>OHP</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${h.filter(Re=>Re.category===Le).map(Re=>`
                    <tr>
                      <td>${Re.description}</td>
                      <td>${Re.quantity}</td>
                      <td>${Re.uom}</td>
                      <td>${ve(Re.labour*Re.quantity)}</td>
                      <td>${ve(Re.materials*Re.quantity)}</td>
                      <td>${ve(Re.plant*Re.quantity)}</td>
                      <td>${ve(Re.ohp*Re.quantity)}</td>
                      <td>${ve(wt(Re))}</td>
                    </tr>
                  `).join("")}
                  <tr class="total">
                    <td colspan="7">Category Total</td>
                    <td>${ve(Rt)}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          `).join("")}
          <div class="section">
            <table>
              <tr class="grand-total">
                <td colspan="7">GRAND TOTAL</td>
                <td>${ve(je)}</td>
              </tr>
            </table>
          </div>
        </body>
      </html>
    `,X=new Blob([L],{type:"text/html"}),K=window.URL.createObjectURL(X),be=document.createElement("a");be.href=K,be.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(K),q("Estimate exported"),setTimeout(()=>q(null),2e3)},_s=()=>{if(!o||h.length===0){U("Select a project and add line items before exporting");return}let L=`Project Name,Project ID,Date
`;L+=`"${o.name}",${o.id},"${new Date().toLocaleDateString()}"

`,L+=`Category,Description,Qty,UOM,Labour,Materials,Plant,OHP,Total
`,h.forEach(Le=>{const Rt=wt(Le);L+=`"${Le.category}","${Le.description}",${Le.quantity},"${Le.uom}",${Le.labour},${Le.materials},${Le.plant},${Le.ohp},${Rt}
`}),L+=`
Category Totals
`,Object.entries(oe).forEach(([Le,Rt])=>{L+=`"${Le}",,,,,,,,${Rt}
`}),L+=`
GRAND TOTAL,,,,,,,,,${je}
`;const X=new Blob([L],{type:"text/csv"}),K=window.URL.createObjectURL(X),be=document.createElement("a");be.href=K,be.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(K),q("Estimate exported"),setTimeout(()=>q(null),2e3)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Assembly"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Build cost estimates from rates or custom line items"})]}),W&&r.jsx($r,{message:W,onDismiss:()=>U(null)}),D&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:D})}),o?r.jsxs(r.Fragment,{children:[r.jsx(ee,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Selected Project"}),r.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:o.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",o.id]})]}),r.jsx(we,{variant:"secondary",onClick:()=>i(null),children:"Change Project"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(we,{variant:"primary",onClick:()=>R(!E),fullWidth:!0,children:E?" Close Rate Browser":"+ Add Rate"}),r.jsx(we,{variant:"secondary",onClick:()=>O(!F),fullWidth:!0,children:F?" Cancel Custom":"+ Custom Line Item"})]}),E&&r.jsx(ee,{title:"Available Rates",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Search rates...",value:b,onChange:L=>S(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),r.jsxs("select",{value:k,onChange:L=>w(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"all",children:"All Categories"}),p.map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))]}),Object.entries(pe).map(([L,X])=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:L}),r.jsx("div",{className:"space-y-2",children:X.map(K=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded hover:bg-gray-100",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:K.description}),r.jsxs("p",{className:"text-xs text-gray-600",children:[ve(K.labour+K.materials+K.plant+K.ohp)," / ",K.uom]})]}),r.jsx("button",{onClick:()=>ne(K),className:"px-3 py-1 bg-khc-primary text-white rounded text-sm hover:bg-khc-secondary",children:"Add"})]},K.id))})]},L))]})}),F&&r.jsx(ee,{title:"Add Custom Line Item",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description*"}),r.jsx("input",{type:"text",value:$.description,onChange:L=>P({...$,description:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),r.jsxs("select",{value:$.category,onChange:L=>P({...$,category:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"",children:"Select category"}),p.map(L=>r.jsx("option",{value:L.name,children:L.name},L.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),r.jsx("input",{type:"number",value:$.quantity,onChange:L=>P({...$,quantity:parseFloat(L.target.value)||1}),min:"0.01",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"UOM*"}),r.jsx("input",{type:"text",value:$.uom,onChange:L=>P({...$,uom:L.target.value}),placeholder:"m2, m3, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Labour ()"}),r.jsx("input",{type:"number",value:$.labour||"",onChange:L=>P({...$,labour:parseFloat(L.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Materials ()"}),r.jsx("input",{type:"number",value:$.materials||"",onChange:L=>P({...$,materials:parseFloat(L.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plant ()"}),r.jsx("input",{type:"number",value:$.plant||"",onChange:L=>P({...$,plant:parseFloat(L.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"OHP ()"}),r.jsx("input",{type:"number",value:$.ohp||"",onChange:L=>P({...$,ohp:parseFloat(L.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Markup %"}),r.jsx("input",{type:"number",value:$.markupPercentage||"",onChange:L=>P({...$,markupPercentage:parseFloat(L.target.value)||0}),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(we,{variant:"primary",onClick:Se,children:"Add Line Item"}),r.jsx(we,{variant:"secondary",onClick:()=>O(!1),children:"Cancel"})]})]})}),r.jsx(ee,{title:"Markup Settings",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:L=>m(L.target.checked),className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Apply global markup percentage"})]}),g&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Global Markup %"}),r.jsx("input",{type:"number",value:j||"",onChange:L=>f(parseFloat(L.target.value)||0),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),h.length>0&&r.jsxs(r.Fragment,{children:[Object.entries(oe).map(([L,X])=>r.jsx(ee,{title:L,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Labour"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Materials"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Plant"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"OHP"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-center",children:"Action"})]})}),r.jsxs("tbody",{children:[h.filter(K=>K.category===L).map(K=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:K.description}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("input",{type:"number",value:K.quantity,onChange:be=>V(K.id,"quantity",parseFloat(be.target.value)||1),step:"0.01",min:"0.01",className:"w-16 px-2 py-1 border border-gray-300 rounded text-right text-sm"})}),r.jsx("td",{className:"px-3 py-2 text-right",children:ve(K.labour*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:ve(K.materials*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:ve(K.plant*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:ve(K.ohp*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:ve(wt(K))}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("button",{onClick:()=>Ee(K.id),className:"text-red-600 hover:text-red-800",children:""})})]},K.id)),r.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[r.jsx("td",{colSpan:6,className:"px-3 py-2 text-right",children:"Category Total:"}),r.jsx("td",{className:"px-3 py-2 text-right text-khc-primary",children:ve(X)})]})]})]})})},L)),r.jsx(ee,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"GRAND TOTAL"}),r.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:ve(je)})]}),r.jsxs("div",{className:"flex flex-col justify-end gap-2",children:[r.jsx(we,{variant:"primary",onClick:xr,fullWidth:!0,children:" Export as HTML/PDF"}),r.jsx(we,{variant:"secondary",onClick:_s,fullWidth:!0,children:" Export as CSV"})]})]})})]})]}):r.jsx(ee,{title:"Select a Project",children:s?r.jsx("p",{className:"text-center text-gray-500",children:"Loading projects..."}):t.length===0?r.jsxs("p",{className:"text-center text-gray-500",children:["No projects found. ",r.jsx("span",{onClick:()=>e("/projects/new"),className:"text-khc-primary cursor-pointer hover:underline",children:"Create one first"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(L=>r.jsxs("button",{onClick:()=>B(L.id),className:"text-left p-4 border border-gray-300 rounded-lg hover:border-khc-primary hover:bg-blue-50 transition",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:L.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",L.id]}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(L.start_date).toLocaleDateString()})]},L.id))})})]})}function zj(){const{user:e}=mr(),[t,s]=v.useState([]),[n,a]=v.useState(!1),[l,o]=v.useState("bank_transfer"),[i,c]=v.useState({accountName:"",accountNumber:"",sortCode:""});v.useEffect(()=>{const y=localStorage.getItem(`referrals_${e==null?void 0:e.id}`);y&&s(JSON.parse(y))},[e==null?void 0:e.id]);const d=`${window.location.origin}/register?ref=${e==null?void 0:e.username}`,u=()=>{navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)},x=t.filter(y=>y.status==="completed"),p=x.reduce((y,j)=>y+j.amount,0),N=t.filter(y=>y.status==="pending").reduce((y,j)=>y+j.amount,0),h=y=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(y);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ge,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Referral Program"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Earn 20 for each successful referral"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(ee,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Total Earnings"}),r.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:h(p)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[x.length," completed referrals"]})]})}),r.jsx(ee,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Pending Earnings"}),r.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:h(N)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[t.filter(y=>y.status==="pending").length," pending referrals"]})]})}),r.jsx(ee,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Next Payout"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:h(p)}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Monthly on 1st"})]})})]}),r.jsx(ee,{title:"Your Referral Link",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Share this link with your network and earn 20 for each successful sign-up:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 font-mono text-sm text-gray-700 overflow-auto",children:d}),r.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg font-medium transition ${n?"bg-green-500 text-white":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:n?" Copied":"Copy"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:" Tip:"})," Share this link on social media, email, or directly with colleagues. You'll earn 20 each time someone signs up using your link."]})})]})}),r.jsx(ee,{title:"How the Referral Program Works",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"1"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Share Your Link"}),r.jsx("p",{className:"text-gray-600",children:"Copy your unique referral link and share it with QS professionals and SME contractors."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"2"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"They Sign Up"}),r.jsx("p",{className:"text-gray-600",children:"When someone clicks your link and creates an account, they become your referral."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"3"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"You Earn 20"}),r.jsx("p",{className:"text-gray-600",children:"Once they complete their first purchase, you earn 20. No limits on how many you can refer!"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"4"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Get Paid"}),r.jsx("p",{className:"text-gray-600",children:"Payouts are processed monthly on the 1st of each month to your selected bank account."})]})]})]})}),r.jsx(ee,{title:"Referral History",children:t.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"mb-4",children:"No referrals yet. Start sharing your link to earn!"}),r.jsx(we,{variant:"primary",onClick:u,children:"Copy Link"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Earnings"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium",children:y.username}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.email}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})}),r.jsx("td",{className:"px-4 py-3 font-semibold text-khc-primary",children:h(y.amount)}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.earnedAt?new Date(y.earnedAt).toLocaleDateString():"Pending"})]},y.id))})]})})}),r.jsx(ee,{title:"Payout Settings",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payout Method"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"payout",value:"bank_transfer",checked:l==="bank_transfer",onChange:y=>o(y.target.value),className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"UK Bank Transfer"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Direct to your bank account (recommended)"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"payout",value:"paypal",checked:l==="paypal",onChange:y=>o(y.target.value),className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"PayPal"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Sent to your PayPal account"})]})]})]})]}),l==="bank_transfer"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"Bank Account Details"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),r.jsx("input",{type:"text",value:i.accountName,onChange:y=>c({...i,accountName:y.target.value}),placeholder:"As it appears on your bank account",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Code"}),r.jsx("input",{type:"text",value:i.sortCode,onChange:y=>c({...i,sortCode:y.target.value}),placeholder:"XX-XX-XX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),r.jsx("input",{type:"text",value:i.accountNumber,onChange:y=>c({...i,accountNumber:y.target.value}),placeholder:"8 digits",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),r.jsx(we,{variant:"primary",fullWidth:!0,children:"Save Bank Details"})]}),l==="paypal"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"PayPal Account"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PayPal Email"}),r.jsx("input",{type:"email",placeholder:"your@paypal.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsx(we,{variant:"primary",fullWidth:!0,children:"Save PayPal Details"})]})]})}),r.jsx(ee,{title:"Frequently Asked Questions",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How much can I earn?"}),r.jsx("p",{className:"text-gray-700",children:"Unlimited! There are no caps on referrals. Earn 20 for each person who signs up with your link."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"When do I get paid?"}),r.jsx("p",{className:"text-gray-700",children:"Referral earnings are paid out monthly on the 1st of each month to your chosen payout method."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"What counts as a valid referral?"}),r.jsx("p",{className:"text-gray-700",children:"A valid referral is someone who clicks your unique link and completes their first paid subscription."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Can I share my link on social media?"}),r.jsx("p",{className:"text-gray-700",children:"Yes! Share it anywhere - LinkedIn, Twitter, Facebook, email, or directly with colleagues. The more you share, the more you earn."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Is there a minimum payout?"}),r.jsx("p",{className:"text-gray-700",children:"No minimum. Once you have earnings, they'll be paid out monthly on the 1st."})]})]})})]})}const Hj=({groups:e,onSelectWorkSection:t,onSelectElement:s,selectedCode:n})=>{const[a,l]=v.useState(new Set),[o,i]=v.useState(new Set),[c,d]=v.useState(new Set),u=h=>{const y=new Set(a);y.has(h)?y.delete(h):y.add(h),l(y)},x=h=>{const y=new Set(o);y.has(h)?y.delete(h):y.add(h),i(y)},p=h=>{const y=new Set(c);y.has(h)?y.delete(h):y.add(h),d(y)},N=(h,y,j)=>{t&&t(h,y,j)};return r.jsx("div",{className:"nrm2-tree space-y-2",children:e.map(h=>r.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[r.jsxs("button",{onClick:()=>u(h.id),className:"w-full px-4 py-3 flex items-center hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-500",children:a.has(h.id)?"":""}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:[h.code," ",h.title]}),h.description&&r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:h.description})]})]}),a.has(h.id)&&h.elements&&r.jsx("div",{className:"bg-gray-50 border-t",children:h.elements.map(y=>r.jsxs("div",{className:"border-t",children:[r.jsxs("button",{onClick:()=>x(y.id),className:"w-full px-4 py-2 flex items-center hover:bg-gray-100 transition-colors text-left pl-8",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-400",children:o.has(y.id)?"":""}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"font-medium text-gray-800 text-sm",children:[y.code," ",y.title]})})]}),o.has(y.id)&&y.sub_elements&&r.jsx("div",{className:"bg-white",children:y.sub_elements.map(j=>r.jsxs("div",{className:"border-t border-gray-200",children:[r.jsxs("button",{onClick:()=>p(j.id),className:"w-full px-4 py-1.5 flex items-center hover:bg-gray-50 transition-colors text-left pl-12",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-300",children:c.has(j.id)?"":""}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[j.code," ",j.title]})})]}),c.has(j.id)&&j.work_sections&&r.jsx("div",{className:"bg-gray-50",children:j.work_sections.map((f,g)=>r.jsx("button",{onClick:()=>N(f.code,f.title,f.unit),className:`w-full px-4 py-1 flex items-start hover:bg-blue-50 transition-colors text-left pl-16 border-t border-gray-200 text-xs ${n===f.code?"bg-blue-100 border-blue-300":""}`,children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-gray-900 font-mono text-xs",children:f.code}),r.jsx("div",{className:"text-gray-700 text-xs",children:f.title}),f.unit&&r.jsxs("div",{className:"text-gray-500 text-xs",children:["Unit: ",f.unit]})]})},`${j.id}-${g}`))})]},j.id))})]},y.id))})]},h.id))})},Wj=({workSection:e,onUseInEstimate:t})=>{if(!e)return r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Select a work section to view details"})});const s=()=>{t&&t(e.code,e.title,e.unit)};return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4 text-white",children:[r.jsx("div",{className:"font-mono text-sm font-semibold",children:e.code}),r.jsx("div",{className:"text-lg font-bold mt-1",children:e.title})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.description&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e.description})]}),e.unit&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Unit of Measurement"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded px-3 py-2 text-sm font-mono text-blue-900",children:e.unit})]}),e.measurement_rules&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Measurement Rules"}),r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed bg-yellow-50 border border-yellow-200 rounded p-3",children:e.measurement_rules})]}),e.inclusions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Inclusions"}),r.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:e.inclusions.split(",").map((n,a)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2 text-green-600",children:""}),r.jsx("span",{children:n.trim()})]},a))})]}),e.exclusions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Exclusions"}),r.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:e.exclusions.split(",").map((n,a)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2 text-red-600",children:""}),r.jsx("span",{children:n.trim()})]},a))})]})]}),t&&r.jsx("div",{className:"border-t bg-gray-50 px-6 py-4",children:r.jsx("button",{onClick:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:"Use in Estimate"})})]})},qj=()=>{const e=He(),{groups:t,searchResults:s,isLoading:n,isSearching:a,searchKeyword:l,currentWorkSection:o,error:i,fetchTree:c,searchNRM2:d,clearSearch:u,setCurrentWorkSection:x,setPendingWorkSection:p}=rc(),[N,h]=v.useState(null),[y,j]=v.useState(!1),[f,g]=v.useState("");v.useEffect(()=>{t.length===0&&c()},[t.length,c]);const m=w=>{w.preventDefault(),f.trim()&&(j(!0),d(f))},b=async w=>{if(w.type==="work_section")try{const R=await(await fetch(`/api/v1/nrm2/work-sections/${w.id}`)).json();R.success&&(h(R.data),x(R.data))}catch(E){console.error("Failed to fetch work section:",E)}},S=()=>{j(!1),g(""),u()},k=(w,E,R)=>{N&&(p(N),e("/projects"))};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"NRM 2 Reference"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"New Rules of Measurement 2 - Complete hierarchy and search"})]}),r.jsx("button",{onClick:()=>window.location.href="/references/documents",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:" View Full PDF"})]}),i&&r.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsxs("p",{className:"text-red-800",children:["Error loading NRM 2 data: ",i]}),r.jsx("button",{onClick:()=>c(),className:"mt-2 text-red-700 hover:text-red-900 underline text-sm",children:"Try again"})]}),r.jsx("form",{onSubmit:m,children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",value:f,onChange:w=>g(w.target.value),placeholder:"Search NRM 2 codes, titles, or descriptions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 text-lg",children:""})]}),y&&r.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Clear"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Search"})]})})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:y?r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:['Search Results for "',l,'"',s.length>0&&r.jsxs("span",{className:"text-gray-600 text-sm ml-2",children:["(",s.length," results)"]})]}),a?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Searching..."})]}):s.length>0?r.jsx("div",{className:"space-y-2",children:s.map(w=>r.jsx("button",{onClick:()=>b(w),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-sm font-semibold text-gray-900",children:w.code}),r.jsx("div",{className:"text-gray-700",children:w.title}),w.description&&r.jsx("div",{className:"text-gray-600 text-sm mt-1",children:w.description})]}),r.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded",children:w.type})]})},`${w.type}-${w.id}`))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsxs("p",{children:['No results found for "',l,'"']}),r.jsx("p",{className:"text-sm mt-2",children:"Try searching with different keywords"})]})]}):n?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading NRM 2 hierarchy..."})]}):i||t.length===0?r.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200 p-8",children:i?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-red-600 font-medium mb-4",children:"Failed to load NRM 2 data"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:i}),r.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600",children:"No NRM 2 data available"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Please check the server connection and try refreshing the page"})]})}):r.jsx(Hj,{groups:t,onSelectWorkSection:(w,E,R)=>{fetch(`/api/v1/nrm2/work-sections/by-code/${w}`).then(F=>F.json()).then(F=>{F.success&&(h(F.data),x(F.data))}).catch(F=>console.error("Failed to fetch work section:",F))},selectedCode:N==null?void 0:N.code})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"sticky top-24",children:r.jsx(Wj,{workSection:N,onUseInEstimate:k})})})]})})]})},Jl="http://localhost:3000",Vj=()=>{const[e,t]=v.useState([]),[s,n]=v.useState(null),[a,l]=v.useState(!0),[o,i]=v.useState(null),[c,d]=v.useState(!1),[u,x]=v.useState(null),[p,N]=v.useState(""),h=async()=>{var m,b,S;try{l(!0),i(null),console.log("Fetching documents...");const k=await Ql.getAll(p||void 0);console.log("Documents API response:",k);const w=((m=k.data)==null?void 0:m.data)||[];console.log("Documents array:",w),t(Array.isArray(w)?w:[])}catch(k){console.error("Error fetching documents:",k);const w=((S=(b=k==null?void 0:k.response)==null?void 0:b.data)==null?void 0:S.error)||(k==null?void 0:k.message)||"Failed to load documents";i(w)}finally{l(!1)}};v.useEffect(()=>{h()},[p]);const y=async m=>{var k,w,E;const b=(k=m.target.files)==null?void 0:k[0];if(!b)return;const S=new FormData;S.append("file",b),S.append("category","standards"),S.append("description",`NRM 2 Reference Document - ${b.name}`);try{d(!0),x(null),console.log("Starting upload...");const R=await Ql.upload(S);console.log("Upload response:",R),await h(),console.log("Documents refreshed after upload")}catch(R){console.error("Upload error:",R);const F=((E=(w=R==null?void 0:R.response)==null?void 0:w.data)==null?void 0:E.error)||(R==null?void 0:R.message)||"Failed to upload document";x(F)}finally{d(!1)}},j=async m=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Ql.delete(m),t(e.filter(b=>b.id!==m)),(s==null?void 0:s.id)===m&&n(null)}catch(b){console.error("Failed to delete document:",b)}},f=m=>{if(m===0)return"0 Bytes";const b=1024,S=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(m)/Math.log(b));return Math.round(m/Math.pow(b,k)*100)/100+" "+S[k]},g=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return console.log("ReferenceDocumentsPage rendered - state:",{isLoading:a,error:o,documentsCount:e.length}),r.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 flex-shrink-0",children:r.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Documents"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage PDFs, images, and standards documents"})]}),r.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[r.jsx("span",{className:"mr-2",children:""}),r.jsx("span",{children:"Upload Document"}),r.jsx("input",{type:"file",onChange:y,accept:".pdf,image/*",disabled:c,className:"hidden"})]})]}),(u||o)&&r.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:u||o}),c&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded text-blue-700 text-sm",children:"Uploading document..."})]})}),r.jsx("div",{className:"flex-1 overflow-hidden px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[r.jsx("div",{className:"lg:col-span-1 overflow-y-auto h-full",children:a?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading documents..."})]}):o?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-red-200 bg-red-50",children:[r.jsx("div",{className:"text-4xl mx-auto",children:""}),r.jsx("p",{className:"text-red-600 mt-4 font-medium",children:"Failed to load documents"}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:o}),r.jsx("button",{onClick:()=>h(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-6xl text-gray-400 mx-auto",children:""}),r.jsx("p",{className:"text-gray-700 mt-4 font-semibold",children:"No documents uploaded yet"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Upload NRM 2 PDF or reference documents using the button above"}),r.jsx("p",{className:"text-gray-500 text-xs mt-3",children:"Supported formats: PDF, PNG, JPG (max 50MB)"})]}):r.jsx("div",{className:"space-y-3",children:e.map(m=>r.jsx("div",{onClick:()=>n(m),className:`w-full text-left p-4 rounded-lg border transition-colors cursor-pointer ${(s==null?void 0:s.id)===m.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:m.name}),m.description&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:m.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[r.jsx("span",{children:f(m.file_size)}),r.jsx("span",{children:m.file_type}),r.jsx("span",{children:g(m.uploaded_at)})]})]}),m.id===(s==null?void 0:s.id)&&r.jsx("button",{onClick:b=>{b.stopPropagation(),j(m.id)},className:"text-red-600 hover:text-red-700 p-1 text-lg",title:"Delete",children:""})]})},m.id))})}),r.jsx("div",{className:"lg:col-span-3 flex flex-col overflow-hidden h-full",children:s?r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full",children:[r.jsx("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-200",children:r.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:s.name})}),r.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 flex items-center justify-center",children:s.file_type==="application/pdf"?r.jsx("iframe",{src:`${Jl}${s.file_path}`,className:"w-full h-full border-none",title:"PDF Viewer"}):s.file_type.startsWith("image/")?r.jsx("img",{src:`${Jl}${s.file_path}`,alt:s.name,className:"max-w-full max-h-full object-contain"}):r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"File type not supported for preview"}),r.jsx("a",{href:`${Jl}${s.file_path}`,download:!0,className:"text-blue-600 hover:text-blue-700 text-sm mt-2 inline-block",children:"Download file"})]})}),r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200 text-xs text-gray-600",children:[r.jsx("div",{children:f(s.file_size)}),r.jsx("div",{children:g(s.uploaded_at)})]})]}):r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:[r.jsx("div",{className:"text-4xl text-gray-400 mx-auto mb-3",children:""}),r.jsx("p",{className:"text-gray-600 font-medium",children:"Select a document to preview"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Choose a document from the list to view it here"})]})})]})})]})};function Qj({children:e,requiredRoles:t}){const s=mr(a=>a.user);return mr(a=>a.isLoading)?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-khc-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?t&&!t.includes(s.role)?r.jsx(Qo,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Qo,{to:"/login",replace:!0})}function Kj({onMenuClick:e}){const t=He(),{user:s,logout:n}=mr(),a=async()=>{await n(),t("/login",{replace:!0})};return r.jsx("header",{className:"bg-khc-primary shadow-md sticky top-0 z-30",children:r.jsxs("div",{className:"h-16 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"md:hidden text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",title:"Toggle sidebar",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsxs(J,{to:"/dashboard",className:"flex md:hidden items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),r.jsx("span",{className:"text-white font-bold hidden sm:inline",children:"QSCostingPro"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"hidden sm:block relative group",children:[r.jsxs("button",{className:"flex items-center space-x-2 text-khc-light hover:bg-khc-secondary px-3 py-2 rounded-md transition",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:s&&s.username.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:"text-sm font-medium",children:s==null?void 0:s.username}),r.jsx("p",{className:"text-xs text-khc-light",children:s&&s.role.charAt(0).toUpperCase()+s.role.slice(1)})]})]}),r.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx(J,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),r.jsxs("div",{className:"sm:hidden relative group",children:[r.jsx("button",{className:"text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",children:r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:s&&s.username.charAt(0).toUpperCase()})})}),r.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx(J,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]})]})]})})}function We({to:e,icon:t,label:s,requiredRoles:n}){const{hasPermission:a}=qt();return n&&!a(n)?null:r.jsxs(Dg,{to:e,className:({isActive:l})=>`flex items-center gap-3 px-4 py-3 rounded-md transition-all duration-200 ${l?"bg-khc-light border-l-4 border-khc-primary text-khc-primary font-medium scale-[1.02]":"text-gray-700 hover:bg-gray-50 hover:scale-[1.01]"}`,children:[r.jsx("span",{className:"text-lg",children:t}),r.jsx("span",{children:s})]})}function Wr({title:e,icon:t,children:s,defaultOpen:n=!0,searchQuery:a=""}){const[l,o]=v.useState(n),i=!a||e.toLowerCase().includes(a.toLowerCase());return a&&!i?null:r.jsxs("div",{className:"border-t border-gray-200 pt-4 first:border-t-0 first:pt-0",children:[r.jsxs("button",{onClick:()=>o(!l),className:"w-full flex items-center gap-2 px-4 mb-2 text-xs font-semibold uppercase text-gray-500 hover:text-gray-700 transition-colors",children:[r.jsx("span",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:""}),t&&r.jsx("span",{children:t}),e]}),l&&r.jsx("div",{className:"space-y-1 animate-slide-in-top",children:s})]})}function Gj({onSearch:e}){const[t,s]=v.useState("");return r.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("input",{type:"text",placeholder:"Search pages...",value:t,onChange:n=>{s(n.target.value),e(n.target.value)},className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})})}function qd({onClose:e}){const{user:t}=qt(),[s,n]=v.useState(""),a=()=>{e==null||e()};return r.jsxs("div",{className:"w-64 h-screen bg-white border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"QS"}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg text-gray-900",children:"QSCostingPro"}),r.jsx("p",{className:"text-xs text-gray-500",children:"v1.0"})]})]}),r.jsx(Gj,{onSearch:n}),r.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[r.jsx("div",{onClick:a,className:"space-y-1",children:r.jsx(We,{to:"/dashboard",icon:"",label:"Home"})}),r.jsx(Wr,{title:"Projects",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/projects",icon:"",label:"All Projects"}),r.jsx(We,{to:"/projects/new",icon:"",label:"New"}),r.jsx(We,{to:"/projects?status=current",icon:"",label:"Current"}),r.jsx(We,{to:"/projects?status=completed",icon:"",label:"Completed"})]})}),r.jsx(Wr,{title:"Estimate Builder",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/projects",icon:"",label:"Build Estimate",requiredRoles:["admin","estimator"]}),r.jsx(We,{to:"/internal-rates",icon:"",label:"Build Rates",requiredRoles:["admin","estimator"]})]})}),r.jsx(Wr,{title:"Contacts",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/clients",icon:"",label:"Clients"}),r.jsx(We,{to:"/contractors",icon:"",label:"Contractors"})]})}),r.jsx(Wr,{title:"Reference Library",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/nrm2",icon:"",label:"NRM 2 Codes"}),r.jsx(We,{to:"/references/documents",icon:"",label:"Documents"})]})}),r.jsx(Wr,{title:"Admin",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/cost-items",icon:"",label:"Cost Database",requiredRoles:"admin"}),r.jsx(We,{to:"/users",icon:"",label:"User Management",requiredRoles:"admin"}),r.jsx(We,{to:"/personal-database",icon:"",label:"Cost Uploader",requiredRoles:"admin"})]})}),r.jsx(Wr,{title:"Account",icon:"",searchQuery:s,children:r.jsx("div",{onClick:a,className:"space-y-1",children:r.jsx(We,{to:"/referrals",icon:"",label:"Referrals"})})})]}),t&&r.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-khc-primary rounded-full flex items-center justify-center text-white font-medium text-sm",children:t.username.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.username}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:t.role})]})]})})]})}function Jj(){const[e,t]=v.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-khc-light flex",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx(qd,{})}),e&&r.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>t(!1)}),r.jsx("div",{className:"relative h-full w-80 max-w-[80%] bg-white shadow-xl",children:r.jsx(qd,{onClose:()=>t(!1)})})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(Kj,{onMenuClick:()=>t(!0)}),r.jsx("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx(bg,{})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-6 mt-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{children:r.jsx("p",{className:"text-sm",children:" 2026 QSCostingPro. Professional Cost Estimation for Quantity Surveyors."})}),r.jsx("div",{className:"text-sm",children:r.jsx("p",{children:"Version 1.0.0"})})]})})})]}),r.jsx(K0,{})]})}function Yj(){const{hydrate:e,user:t,accessToken:s}=mr();v.useEffect(()=>{e()},[e]);const n=!!t&&!!s;return r.jsx(Tg,{children:r.jsxs(wg,{children:[r.jsx(ae,{path:"/",element:r.jsx(W0,{})}),r.jsx(ae,{path:"/login",element:r.jsx(q0,{})}),r.jsx(ae,{path:"/register",element:r.jsx(V0,{})}),r.jsx(ae,{path:"/password-reset",element:r.jsx(G0,{})}),r.jsx(ae,{path:"/privacy",element:r.jsx(J0,{})}),r.jsx(ae,{path:"/terms",element:r.jsx(Y0,{})}),r.jsxs(ae,{element:r.jsx(Qj,{children:r.jsx(Jj,{})}),children:[r.jsx(ae,{path:"/dashboard",element:r.jsx(lj,{})}),r.jsx(ae,{path:"/projects",element:r.jsx(dj,{})}),r.jsx(ae,{path:"/projects/new",element:r.jsx(zd,{})}),r.jsx(ae,{path:"/projects/:id",element:r.jsx(fj,{})}),r.jsx(ae,{path:"/projects/:id/edit",element:r.jsx(zd,{})}),r.jsx(ae,{path:"/projects/:id/estimates",element:r.jsx(Cj,{})}),r.jsx(ae,{path:"/projects/:id/actuals",element:r.jsx(Aj,{})}),r.jsx(ae,{path:"/projects/:id/report",element:r.jsx(Rj,{})}),r.jsx(ae,{path:"/projects/:id/cost-total",element:r.jsx(Fj,{})}),r.jsx(ae,{path:"/cost-items",element:r.jsx(Ej,{})}),r.jsx(ae,{path:"/cost-analysis",element:r.jsx(Tj,{})}),r.jsx(ae,{path:"/personal-database",element:r.jsx($j,{})}),r.jsx(ae,{path:"/internal-rates",element:r.jsx(Mj,{})}),r.jsx(ae,{path:"/cost-assembly",element:r.jsx(Bj,{})}),r.jsx(ae,{path:"/referrals",element:r.jsx(zj,{})}),r.jsx(ae,{path:"/users",element:r.jsx(Dj,{})}),r.jsx(ae,{path:"/clients",element:r.jsx(Ij,{})}),r.jsx(ae,{path:"/contractors",element:r.jsx(Oj,{})}),r.jsx(ae,{path:"/nrm2",element:r.jsx(qj,{})}),r.jsx(ae,{path:"/references/documents",element:r.jsx(Vj,{})})]}),r.jsx(ae,{path:"*",element:r.jsx(Qo,{to:n?"/dashboard":"/",replace:!0})})]})})}Yl.createRoot(document.getElementById("root")).render(r.jsx(Ba.StrictMode,{children:r.jsx(Yj,{})}));
//# sourceMappingURL=index-1IWR17M8.js.map

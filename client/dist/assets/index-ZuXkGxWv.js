function Zh(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function Wd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qd={exports:{}},Oa={},Vd={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=Symbol.for("react.element"),ep=Symbol.for("react.portal"),tp=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),sp=Symbol.for("react.profiler"),np=Symbol.for("react.provider"),ap=Symbol.for("react.context"),lp=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),ip=Symbol.for("react.memo"),cp=Symbol.for("react.lazy"),rc=Symbol.iterator;function dp(e){return e===null||typeof e!="object"?null:(e=rc&&e[rc]||e["@@iterator"],typeof e=="function"?e:null)}var Qd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kd=Object.assign,Gd={};function gs(e,t,s){this.props=e,this.context=t,this.refs=Gd,this.updater=s||Qd}gs.prototype.isReactComponent={};gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jd(){}Jd.prototype=gs.prototype;function Zo(e,t,s){this.props=e,this.context=t,this.refs=Gd,this.updater=s||Qd}var ei=Zo.prototype=new Jd;ei.constructor=Zo;Kd(ei,gs.prototype);ei.isPureReactComponent=!0;var sc=Array.isArray,Yd=Object.prototype.hasOwnProperty,ti={current:null},Xd={key:!0,ref:!0,__self:!0,__source:!0};function Zd(e,t,s){var n,a={},l=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Yd.call(t,n)&&!Xd.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(i===1)a.children=s;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:yn,type:e,key:l,ref:o,props:a,_owner:ti.current}}function up(e,t){return{$$typeof:yn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ri(e){return typeof e=="object"&&e!==null&&e.$$typeof===yn}function mp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var nc=/\/+/g;function pl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mp(""+e.key):t.toString(36)}function Kn(e,t,s,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yn:case ep:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+pl(o,0):n,sc(a)?(s="",e!=null&&(s=e.replace(nc,"$&/")+"/"),Kn(a,t,s,"",function(d){return d})):a!=null&&(ri(a)&&(a=up(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(nc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",sc(e))for(var i=0;i<e.length;i++){l=e[i];var c=n+pl(l,i);o+=Kn(l,t,s,c,a)}else if(c=dp(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=n+pl(l,i++),o+=Kn(l,t,s,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function _n(e,t,s){if(e==null)return e;var n=[],a=0;return Kn(e,n,"","",function(l){return t.call(s,l,a++)}),n}function hp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},Gn={transition:null},pp={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Gn,ReactCurrentOwner:ti};function eu(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:_n,forEach:function(e,t,s){_n(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return _n(e,function(){t++}),t},toArray:function(e){return _n(e,function(t){return t})||[]},only:function(e){if(!ri(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=gs;se.Fragment=tp;se.Profiler=sp;se.PureComponent=Zo;se.StrictMode=rp;se.Suspense=op;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pp;se.act=eu;se.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Kd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=ti.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Yd.call(t,c)&&!Xd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:yn,type:e.type,key:a,ref:l,props:n,_owner:o}};se.createContext=function(e){return e={$$typeof:ap,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:np,_context:e},e.Consumer=e};se.createElement=Zd;se.createFactory=function(e){var t=Zd.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:lp,render:e}};se.isValidElement=ri;se.lazy=function(e){return{$$typeof:cp,_payload:{_status:-1,_result:e},_init:hp}};se.memo=function(e,t){return{$$typeof:ip,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Gn.transition;Gn.transition={};try{e()}finally{Gn.transition=t}};se.unstable_act=eu;se.useCallback=function(e,t){return Ve.current.useCallback(e,t)};se.useContext=function(e){return Ve.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};se.useEffect=function(e,t){return Ve.current.useEffect(e,t)};se.useId=function(){return Ve.current.useId()};se.useImperativeHandle=function(e,t,s){return Ve.current.useImperativeHandle(e,t,s)};se.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return Ve.current.useMemo(e,t)};se.useReducer=function(e,t,s){return Ve.current.useReducer(e,t,s)};se.useRef=function(e){return Ve.current.useRef(e)};se.useState=function(e){return Ve.current.useState(e)};se.useSyncExternalStore=function(e,t,s){return Ve.current.useSyncExternalStore(e,t,s)};se.useTransition=function(){return Ve.current.useTransition()};se.version="18.3.1";Vd.exports=se;var v=Vd.exports;const $a=Wd(v),fp=Zh({__proto__:null,default:$a},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=v,gp=Symbol.for("react.element"),yp=Symbol.for("react.fragment"),jp=Object.prototype.hasOwnProperty,vp=xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bp={key:!0,ref:!0,__self:!0,__source:!0};function tu(e,t,s){var n,a={},l=null,o=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)jp.call(t,n)&&!bp.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:gp,type:e,key:l,ref:o,props:a,_owner:vp.current}}Oa.Fragment=yp;Oa.jsx=tu;Oa.jsxs=tu;qd.exports=Oa;var r=qd.exports,Gl={},ru={exports:{}},ot={},su={exports:{}},nu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,A){var B=_.length;_.push(A);e:for(;0<B;){var Q=B-1>>>1,X=_[Q];if(0<a(X,A))_[Q]=A,_[B]=X,B=Q;else break e}}function s(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var A=_[0],B=_.pop();if(B!==A){_[0]=B;e:for(var Q=0,X=_.length,je=X>>>1;Q<je;){var ee=2*(Q+1)-1,Se=_[ee],ne=ee+1,ie=_[ne];if(0>a(Se,B))ne<X&&0>a(ie,Se)?(_[Q]=ie,_[ne]=B,Q=ne):(_[Q]=Se,_[ee]=B,Q=ee);else if(ne<X&&0>a(ie,B))_[Q]=ie,_[ne]=B,Q=ne;else break e}}return A}function a(_,A){var B=_.sortIndex-A.sortIndex;return B!==0?B:_.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,p=null,f=3,N=!1,m=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(_){for(var A=s(d);A!==null;){if(A.callback===null)n(d);else if(A.startTime<=_)n(d),A.sortIndex=A.expirationTime,t(c,A);else break;A=s(d)}}function b(_){if(y=!1,h(_),!m)if(s(c)!==null)m=!0,$(S);else{var A=s(d);A!==null&&P(b,A.startTime-_)}}function S(_,A){m=!1,y&&(y=!1,x(E),E=-1),N=!0;var B=f;try{for(h(A),p=s(c);p!==null&&(!(p.expirationTime>A)||_&&!I());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,f=p.priorityLevel;var X=Q(p.expirationTime<=A);A=e.unstable_now(),typeof X=="function"?p.callback=X:p===s(c)&&n(c),h(A)}else n(c);p=s(c)}if(p!==null)var je=!0;else{var ee=s(d);ee!==null&&P(b,ee.startTime-A),je=!1}return je}finally{p=null,f=B,N=!1}}var k=!1,w=null,E=-1,L=5,D=-1;function I(){return!(e.unstable_now()-D<L)}function W(){if(w!==null){var _=e.unstable_now();D=_;var A=!0;try{A=w(!0,_)}finally{A?M():(k=!1,w=null)}}else k=!1}var M;if(typeof g=="function")M=function(){g(W)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,q=F.port2;F.port1.onmessage=W,M=function(){q.postMessage(null)}}else M=function(){j(W,0)};function $(_){w=_,k||(k=!0,M())}function P(_,A){E=j(function(){_(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){m||N||(m=!0,$(S))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(_){switch(f){case 1:case 2:case 3:var A=3;break;default:A=f}var B=f;f=A;try{return _()}finally{f=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,A){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var B=f;f=_;try{return A()}finally{f=B}},e.unstable_scheduleCallback=function(_,A,B){var Q=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Q+B:Q):B=Q,_){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,_={id:u++,callback:A,priorityLevel:_,startTime:B,expirationTime:X,sortIndex:-1},B>Q?(_.sortIndex=B,t(d,_),s(c)===null&&_===s(d)&&(y?(x(E),E=-1):y=!0,P(b,B-Q))):(_.sortIndex=X,t(c,_),m||N||(m=!0,$(S))),_},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(_){var A=f;return function(){var B=f;f=A;try{return _.apply(this,arguments)}finally{f=B}}}})(nu);su.exports=nu;var Np=su.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=v,lt=Np;function O(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var au=new Set,Xs={};function Rr(e,t){os(e,t),os(e+"Capture",t)}function os(e,t){for(Xs[e]=t,e=0;e<t.length;e++)au.add(t[e])}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,Sp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ac={},lc={};function kp(e){return Jl.call(lc,e)?!0:Jl.call(ac,e)?!1:Sp.test(e)?lc[e]=!0:(ac[e]=!0,!1)}function Cp(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ep(e,t,s,n){if(t===null||typeof t>"u"||Cp(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,s,n,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var si=/[\-:]([a-z])/g;function ni(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(si,ni);Fe[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(si,ni);Fe[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(si,ni);Fe[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function ai(e,t,s,n){var a=Fe.hasOwnProperty(t)?Fe[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ep(t,s,a,n)&&(s=null),n||a===null?kp(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Bt=wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pn=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),li=Symbol.for("react.strict_mode"),Yl=Symbol.for("react.profiler"),lu=Symbol.for("react.provider"),ou=Symbol.for("react.context"),oi=Symbol.for("react.forward_ref"),Xl=Symbol.for("react.suspense"),Zl=Symbol.for("react.suspense_list"),ii=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),iu=Symbol.for("react.offscreen"),oc=Symbol.iterator;function Es(e){return e===null||typeof e!="object"?null:(e=oc&&e[oc]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,fl;function Os(e){if(fl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);fl=t&&t[1]||""}return`
`+fl+e}var xl=!1;function gl(e,t){if(!e||xl)return"";xl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{xl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Os(e):""}function _p(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=gl(e.type,!1),e;case 11:return e=gl(e.type.render,!1),e;case 1:return e=gl(e.type,!0),e;default:return""}}function eo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wr:return"Fragment";case Hr:return"Portal";case Yl:return"Profiler";case li:return"StrictMode";case Xl:return"Suspense";case Zl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ou:return(e.displayName||"Context")+".Consumer";case lu:return(e._context.displayName||"Context")+".Provider";case oi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ii:return t=e.displayName||null,t!==null?t:eo(e.type)||"Memo";case Vt:t=e._payload,e=e._init;try{return eo(e(t))}catch{}}return null}function Pp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eo(t);case 8:return t===li?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ir(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lp(e){var t=cu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ln(e){e._valueTracker||(e._valueTracker=Lp(e))}function du(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=cu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function da(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function to(e,t){var s=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function ic(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=ir(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uu(e,t){t=t.checked,t!=null&&ai(e,"checked",t,!1)}function ro(e,t){uu(e,t);var s=ir(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?so(e,t.type,s):t.hasOwnProperty("defaultValue")&&so(e,t.type,ir(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function so(e,t,s){(t!=="number"||da(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var $s=Array.isArray;function ts(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+ir(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function no(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(O(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(O(92));if($s(s)){if(1<s.length)throw Error(O(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:ir(s)}}function mu(e,t){var s=ir(t.value),n=ir(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function uc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ao(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rn,pu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rn=Rn||document.createElement("div"),Rn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rp=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(e){Rp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hs[t]=Hs[e]})});function fu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Hs.hasOwnProperty(e)&&Hs[e]?(""+t).trim():t+"px"}function xu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=fu(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var Tp=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lo(e,t){if(t){if(Tp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(O(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(O(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(O(61))}if(t.style!=null&&typeof t.style!="object")throw Error(O(62))}}function oo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var io=null;function ci(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var co=null,rs=null,ss=null;function mc(e){if(e=bn(e)){if(typeof co!="function")throw Error(O(280));var t=e.stateNode;t&&(t=Ha(t),co(e.stateNode,e.type,t))}}function gu(e){rs?ss?ss.push(e):ss=[e]:rs=e}function yu(){if(rs){var e=rs,t=ss;if(ss=rs=null,mc(e),t)for(e=0;e<t.length;e++)mc(t[e])}}function ju(e,t){return e(t)}function vu(){}var yl=!1;function bu(e,t,s){if(yl)return e(t,s);yl=!0;try{return ju(e,t,s)}finally{yl=!1,(rs!==null||ss!==null)&&(vu(),yu())}}function en(e,t){var s=e.stateNode;if(s===null)return null;var n=Ha(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(O(231,t,typeof s));return s}var uo=!1;if(It)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){uo=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{uo=!1}function Ap(e,t,s,n,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Ws=!1,ua=null,ma=!1,mo=null,Fp={onError:function(e){Ws=!0,ua=e}};function Dp(e,t,s,n,a,l,o,i,c){Ws=!1,ua=null,Ap.apply(Fp,arguments)}function Ip(e,t,s,n,a,l,o,i,c){if(Dp.apply(this,arguments),Ws){if(Ws){var d=ua;Ws=!1,ua=null}else throw Error(O(198));ma||(ma=!0,mo=d)}}function Tr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Nu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hc(e){if(Tr(e)!==e)throw Error(O(188))}function Op(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(O(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===s)return hc(a),e;if(l===n)return hc(a),t;l=l.sibling}throw Error(O(188))}if(s.return!==n.return)s=a,n=l;else{for(var o=!1,i=a.child;i;){if(i===s){o=!0,s=a,n=l;break}if(i===n){o=!0,n=a,s=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===s){o=!0,s=l,n=a;break}if(i===n){o=!0,n=l,s=a;break}i=i.sibling}if(!o)throw Error(O(189))}}if(s.alternate!==n)throw Error(O(190))}if(s.tag!==3)throw Error(O(188));return s.stateNode.current===s?e:t}function wu(e){return e=Op(e),e!==null?Su(e):null}function Su(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Su(e);if(t!==null)return t;e=e.sibling}return null}var ku=lt.unstable_scheduleCallback,pc=lt.unstable_cancelCallback,$p=lt.unstable_shouldYield,Mp=lt.unstable_requestPaint,we=lt.unstable_now,Up=lt.unstable_getCurrentPriorityLevel,di=lt.unstable_ImmediatePriority,Cu=lt.unstable_UserBlockingPriority,ha=lt.unstable_NormalPriority,Bp=lt.unstable_LowPriority,Eu=lt.unstable_IdlePriority,Ma=null,Et=null;function zp(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Ma,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:qp,Hp=Math.log,Wp=Math.LN2;function qp(e){return e>>>=0,e===0?32:31-(Hp(e)/Wp|0)|0}var Tn=64,An=4194304;function Ms(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pa(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,o=s&268435455;if(o!==0){var i=o&~a;i!==0?n=Ms(i):(l&=o,l!==0&&(n=Ms(l)))}else o=s&~a,o!==0?n=Ms(o):l!==0&&(n=Ms(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-jt(t),a=1<<s,n|=e[s],t&=~a;return n}function Vp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qp(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-jt(l),i=1<<o,c=a[o];c===-1?(!(i&s)||i&n)&&(a[o]=Vp(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ho(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _u(){var e=Tn;return Tn<<=1,!(Tn&4194240)&&(Tn=64),e}function jl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function jn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=s}function Kp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-jt(s),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~l}}function ui(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-jt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var oe=0;function Pu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lu,mi,Ru,Tu,Au,po=!1,Fn=[],Zt=null,er=null,tr=null,tn=new Map,rn=new Map,Kt=[],Gp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":tn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rn.delete(t.pointerId)}}function Ps(e,t,s,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=bn(t),t!==null&&mi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Jp(e,t,s,n,a){switch(t){case"focusin":return Zt=Ps(Zt,e,t,s,n,a),!0;case"dragenter":return er=Ps(er,e,t,s,n,a),!0;case"mouseover":return tr=Ps(tr,e,t,s,n,a),!0;case"pointerover":var l=a.pointerId;return tn.set(l,Ps(tn.get(l)||null,e,t,s,n,a)),!0;case"gotpointercapture":return l=a.pointerId,rn.set(l,Ps(rn.get(l)||null,e,t,s,n,a)),!0}return!1}function Fu(e){var t=gr(e.target);if(t!==null){var s=Tr(t);if(s!==null){if(t=s.tag,t===13){if(t=Nu(s),t!==null){e.blockedOn=t,Au(e.priority,function(){Ru(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);io=n,s.target.dispatchEvent(n),io=null}else return t=bn(s),t!==null&&mi(t),e.blockedOn=s,!1;t.shift()}return!0}function xc(e,t,s){Jn(e)&&s.delete(t)}function Yp(){po=!1,Zt!==null&&Jn(Zt)&&(Zt=null),er!==null&&Jn(er)&&(er=null),tr!==null&&Jn(tr)&&(tr=null),tn.forEach(xc),rn.forEach(xc)}function Ls(e,t){e.blockedOn===t&&(e.blockedOn=null,po||(po=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,Yp)))}function sn(e){function t(a){return Ls(a,e)}if(0<Fn.length){Ls(Fn[0],e);for(var s=1;s<Fn.length;s++){var n=Fn[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Zt!==null&&Ls(Zt,e),er!==null&&Ls(er,e),tr!==null&&Ls(tr,e),tn.forEach(t),rn.forEach(t),s=0;s<Kt.length;s++)n=Kt[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Kt.length&&(s=Kt[0],s.blockedOn===null);)Fu(s),s.blockedOn===null&&Kt.shift()}var ns=Bt.ReactCurrentBatchConfig,fa=!0;function Xp(e,t,s,n){var a=oe,l=ns.transition;ns.transition=null;try{oe=1,hi(e,t,s,n)}finally{oe=a,ns.transition=l}}function Zp(e,t,s,n){var a=oe,l=ns.transition;ns.transition=null;try{oe=4,hi(e,t,s,n)}finally{oe=a,ns.transition=l}}function hi(e,t,s,n){if(fa){var a=fo(e,t,s,n);if(a===null)Pl(e,t,n,xa,s),fc(e,n);else if(Jp(a,e,t,s,n))n.stopPropagation();else if(fc(e,n),t&4&&-1<Gp.indexOf(e)){for(;a!==null;){var l=bn(a);if(l!==null&&Lu(l),l=fo(e,t,s,n),l===null&&Pl(e,t,n,xa,s),l===a)break;a=l}a!==null&&n.stopPropagation()}else Pl(e,t,n,null,s)}}var xa=null;function fo(e,t,s,n){if(xa=null,e=ci(n),e=gr(e),e!==null)if(t=Tr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Nu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xa=e,null}function Du(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Up()){case di:return 1;case Cu:return 4;case ha:case Bp:return 16;case Eu:return 536870912;default:return 16}default:return 16}}var Jt=null,pi=null,Yn=null;function Iu(){if(Yn)return Yn;var e,t=pi,s=t.length,n,a="value"in Jt?Jt.value:Jt.textContent,l=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[l-n];n++);return Yn=a.slice(e,1<n?1-n:void 0)}function Xn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dn(){return!0}function gc(){return!1}function it(e){function t(s,n,a,l,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s?s(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Dn:gc,this.isPropagationStopped=gc,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Dn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Dn)},persist:function(){},isPersistent:Dn}),t}var ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=it(ys),vn=ye({},ys,{view:0,detail:0}),ef=it(vn),vl,bl,Rs,Ua=ye({},vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rs&&(Rs&&e.type==="mousemove"?(vl=e.screenX-Rs.screenX,bl=e.screenY-Rs.screenY):bl=vl=0,Rs=e),vl)},movementY:function(e){return"movementY"in e?e.movementY:bl}}),yc=it(Ua),tf=ye({},Ua,{dataTransfer:0}),rf=it(tf),sf=ye({},vn,{relatedTarget:0}),Nl=it(sf),nf=ye({},ys,{animationName:0,elapsedTime:0,pseudoElement:0}),af=it(nf),lf=ye({},ys,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),of=it(lf),cf=ye({},ys,{data:0}),jc=it(cf),df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mf[e])?!!t[e]:!1}function xi(){return hf}var pf=ye({},vn,{key:function(e){if(e.key){var t=df[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xi,charCode:function(e){return e.type==="keypress"?Xn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ff=it(pf),xf=ye({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vc=it(xf),gf=ye({},vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xi}),yf=it(gf),jf=ye({},ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),vf=it(jf),bf=ye({},Ua,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nf=it(bf),wf=[9,13,27,32],gi=It&&"CompositionEvent"in window,qs=null;It&&"documentMode"in document&&(qs=document.documentMode);var Sf=It&&"TextEvent"in window&&!qs,Ou=It&&(!gi||qs&&8<qs&&11>=qs),bc=" ",Nc=!1;function $u(e,t){switch(e){case"keyup":return wf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qr=!1;function kf(e,t){switch(e){case"compositionend":return Mu(t);case"keypress":return t.which!==32?null:(Nc=!0,bc);case"textInput":return e=t.data,e===bc&&Nc?null:e;default:return null}}function Cf(e,t){if(qr)return e==="compositionend"||!gi&&$u(e,t)?(e=Iu(),Yn=pi=Jt=null,qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ou&&t.locale!=="ko"?null:t.data;default:return null}}var Ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ef[e.type]:t==="textarea"}function Uu(e,t,s,n){gu(n),t=ga(t,"onChange"),0<t.length&&(s=new fi("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Vs=null,nn=null;function _f(e){Yu(e,0)}function Ba(e){var t=Kr(e);if(du(t))return e}function Pf(e,t){if(e==="change")return t}var Bu=!1;if(It){var wl;if(It){var Sl="oninput"in document;if(!Sl){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),Sl=typeof Sc.oninput=="function"}wl=Sl}else wl=!1;Bu=wl&&(!document.documentMode||9<document.documentMode)}function kc(){Vs&&(Vs.detachEvent("onpropertychange",zu),nn=Vs=null)}function zu(e){if(e.propertyName==="value"&&Ba(nn)){var t=[];Uu(t,nn,e,ci(e)),bu(_f,t)}}function Lf(e,t,s){e==="focusin"?(kc(),Vs=t,nn=s,Vs.attachEvent("onpropertychange",zu)):e==="focusout"&&kc()}function Rf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ba(nn)}function Tf(e,t){if(e==="click")return Ba(t)}function Af(e,t){if(e==="input"||e==="change")return Ba(t)}function Ff(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:Ff;function an(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Jl.call(t,a)||!bt(e[a],t[a]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ec(e,t){var s=Cc(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Cc(s)}}function Hu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Hu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wu(){for(var e=window,t=da();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=da(e.document)}return t}function yi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Df(e){var t=Wu(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Hu(s.ownerDocument.documentElement,s)){if(n!==null&&yi(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Ec(s,l);var o=Ec(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var If=It&&"documentMode"in document&&11>=document.documentMode,Vr=null,xo=null,Qs=null,go=!1;function _c(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;go||Vr==null||Vr!==da(n)||(n=Vr,"selectionStart"in n&&yi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Qs&&an(Qs,n)||(Qs=n,n=ga(xo,"onSelect"),0<n.length&&(t=new fi("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Vr)))}function In(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Qr={animationend:In("Animation","AnimationEnd"),animationiteration:In("Animation","AnimationIteration"),animationstart:In("Animation","AnimationStart"),transitionend:In("Transition","TransitionEnd")},kl={},qu={};It&&(qu=document.createElement("div").style,"AnimationEvent"in window||(delete Qr.animationend.animation,delete Qr.animationiteration.animation,delete Qr.animationstart.animation),"TransitionEvent"in window||delete Qr.transitionend.transition);function za(e){if(kl[e])return kl[e];if(!Qr[e])return e;var t=Qr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in qu)return kl[e]=t[s];return e}var Vu=za("animationend"),Qu=za("animationiteration"),Ku=za("animationstart"),Gu=za("transitionend"),Ju=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(e,t){Ju.set(e,t),Rr(t,[e])}for(var Cl=0;Cl<Pc.length;Cl++){var El=Pc[Cl],Of=El.toLowerCase(),$f=El[0].toUpperCase()+El.slice(1);ur(Of,"on"+$f)}ur(Vu,"onAnimationEnd");ur(Qu,"onAnimationIteration");ur(Ku,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(Gu,"onTransitionEnd");os("onMouseEnter",["mouseout","mouseover"]);os("onMouseLeave",["mouseout","mouseover"]);os("onPointerEnter",["pointerout","pointerover"]);os("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function Lc(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Ip(n,t,void 0,e),e.currentTarget=null}function Yu(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;Lc(a,i,d),l=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;Lc(a,i,d),l=c}}}if(ma)throw e=mo,ma=!1,mo=null,e}function ue(e,t){var s=t[No];s===void 0&&(s=t[No]=new Set);var n=e+"__bubble";s.has(n)||(Xu(t,e,2,!1),s.add(n))}function _l(e,t,s){var n=0;t&&(n|=4),Xu(s,e,n,t)}var On="_reactListening"+Math.random().toString(36).slice(2);function ln(e){if(!e[On]){e[On]=!0,au.forEach(function(s){s!=="selectionchange"&&(Mf.has(s)||_l(s,!1,e),_l(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[On]||(t[On]=!0,_l("selectionchange",!1,t))}}function Xu(e,t,s,n){switch(Du(t)){case 1:var a=Xp;break;case 4:a=Zp;break;default:a=hi}s=a.bind(null,t,s,e),a=void 0,!uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Pl(e,t,s,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=gr(i),o===null)return;if(c=o.tag,c===5||c===6){n=l=o;continue e}i=i.parentNode}}n=n.return}bu(function(){var d=l,u=ci(s),p=[];e:{var f=Ju.get(e);if(f!==void 0){var N=fi,m=e;switch(e){case"keypress":if(Xn(s)===0)break e;case"keydown":case"keyup":N=ff;break;case"focusin":m="focus",N=Nl;break;case"focusout":m="blur",N=Nl;break;case"beforeblur":case"afterblur":N=Nl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=yf;break;case Vu:case Qu:case Ku:N=af;break;case Gu:N=vf;break;case"scroll":N=ef;break;case"wheel":N=Nf;break;case"copy":case"cut":case"paste":N=of;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=vc}var y=(t&4)!==0,j=!y&&e==="scroll",x=y?f!==null?f+"Capture":null:f;y=[];for(var g=d,h;g!==null;){h=g;var b=h.stateNode;if(h.tag===5&&b!==null&&(h=b,x!==null&&(b=en(g,x),b!=null&&y.push(on(g,b,h)))),j)break;g=g.return}0<y.length&&(f=new N(f,m,null,s,u),p.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",f&&s!==io&&(m=s.relatedTarget||s.fromElement)&&(gr(m)||m[Ot]))break e;if((N||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,N?(m=s.relatedTarget||s.toElement,N=d,m=m?gr(m):null,m!==null&&(j=Tr(m),m!==j||m.tag!==5&&m.tag!==6)&&(m=null)):(N=null,m=d),N!==m)){if(y=yc,b="onMouseLeave",x="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=vc,b="onPointerLeave",x="onPointerEnter",g="pointer"),j=N==null?f:Kr(N),h=m==null?f:Kr(m),f=new y(b,g+"leave",N,s,u),f.target=j,f.relatedTarget=h,b=null,gr(u)===d&&(y=new y(x,g+"enter",m,s,u),y.target=h,y.relatedTarget=j,b=y),j=b,N&&m)t:{for(y=N,x=m,g=0,h=y;h;h=$r(h))g++;for(h=0,b=x;b;b=$r(b))h++;for(;0<g-h;)y=$r(y),g--;for(;0<h-g;)x=$r(x),h--;for(;g--;){if(y===x||x!==null&&y===x.alternate)break t;y=$r(y),x=$r(x)}y=null}else y=null;N!==null&&Rc(p,f,N,y,!1),m!==null&&j!==null&&Rc(p,j,m,y,!0)}}e:{if(f=d?Kr(d):window,N=f.nodeName&&f.nodeName.toLowerCase(),N==="select"||N==="input"&&f.type==="file")var S=Pf;else if(wc(f))if(Bu)S=Af;else{S=Rf;var k=Lf}else(N=f.nodeName)&&N.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=Tf);if(S&&(S=S(e,d))){Uu(p,S,s,u);break e}k&&k(e,f,d),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&so(f,"number",f.value)}switch(k=d?Kr(d):window,e){case"focusin":(wc(k)||k.contentEditable==="true")&&(Vr=k,xo=d,Qs=null);break;case"focusout":Qs=xo=Vr=null;break;case"mousedown":go=!0;break;case"contextmenu":case"mouseup":case"dragend":go=!1,_c(p,s,u);break;case"selectionchange":if(If)break;case"keydown":case"keyup":_c(p,s,u)}var w;if(gi)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else qr?$u(e,s)&&(E="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(E="onCompositionStart");E&&(Ou&&s.locale!=="ko"&&(qr||E!=="onCompositionStart"?E==="onCompositionEnd"&&qr&&(w=Iu()):(Jt=u,pi="value"in Jt?Jt.value:Jt.textContent,qr=!0)),k=ga(d,E),0<k.length&&(E=new jc(E,e,null,s,u),p.push({event:E,listeners:k}),w?E.data=w:(w=Mu(s),w!==null&&(E.data=w)))),(w=Sf?kf(e,s):Cf(e,s))&&(d=ga(d,"onBeforeInput"),0<d.length&&(u=new jc("onBeforeInput","beforeinput",null,s,u),p.push({event:u,listeners:d}),u.data=w))}Yu(p,t)})}function on(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ga(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=en(e,s),l!=null&&n.unshift(on(e,l,a)),l=en(e,t),l!=null&&n.push(on(e,l,a))),e=e.return}return n}function $r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rc(e,t,s,n,a){for(var l=t._reactName,o=[];s!==null&&s!==n;){var i=s,c=i.alternate,d=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&d!==null&&(i=d,a?(c=en(s,l),c!=null&&o.unshift(on(s,c,i))):a||(c=en(s,l),c!=null&&o.push(on(s,c,i)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Uf=/\r\n?/g,Bf=/\u0000|\uFFFD/g;function Tc(e){return(typeof e=="string"?e:""+e).replace(Uf,`
`).replace(Bf,"")}function $n(e,t,s){if(t=Tc(t),Tc(e)!==t&&s)throw Error(O(425))}function ya(){}var yo=null,jo=null;function vo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bo=typeof setTimeout=="function"?setTimeout:void 0,zf=typeof clearTimeout=="function"?clearTimeout:void 0,Ac=typeof Promise=="function"?Promise:void 0,Hf=typeof queueMicrotask=="function"?queueMicrotask:typeof Ac<"u"?function(e){return Ac.resolve(null).then(e).catch(Wf)}:bo;function Wf(e){setTimeout(function(){throw e})}function Ll(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),sn(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);sn(t)}function rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var js=Math.random().toString(36).slice(2),Ct="__reactFiber$"+js,cn="__reactProps$"+js,Ot="__reactContainer$"+js,No="__reactEvents$"+js,qf="__reactListeners$"+js,Vf="__reactHandles$"+js;function gr(e){var t=e[Ct];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ot]||s[Ct]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Fc(e);e!==null;){if(s=e[Ct])return s;e=Fc(e)}return t}e=s,s=e.parentNode}return null}function bn(e){return e=e[Ct]||e[Ot],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(O(33))}function Ha(e){return e[cn]||null}var wo=[],Gr=-1;function mr(e){return{current:e}}function me(e){0>Gr||(e.current=wo[Gr],wo[Gr]=null,Gr--)}function ce(e,t){Gr++,wo[Gr]=e.current,e.current=t}var cr={},Be=mr(cr),Xe=mr(!1),kr=cr;function is(e,t){var s=e.type.contextTypes;if(!s)return cr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in s)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ze(e){return e=e.childContextTypes,e!=null}function ja(){me(Xe),me(Be)}function Dc(e,t,s){if(Be.current!==cr)throw Error(O(168));ce(Be,t),ce(Xe,s)}function Zu(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(O(108,Pp(e)||"Unknown",a));return ye({},s,n)}function va(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cr,kr=Be.current,ce(Be,e),ce(Xe,Xe.current),!0}function Ic(e,t,s){var n=e.stateNode;if(!n)throw Error(O(169));s?(e=Zu(e,t,kr),n.__reactInternalMemoizedMergedChildContext=e,me(Xe),me(Be),ce(Be,e)):me(Xe),ce(Xe,s)}var Tt=null,Wa=!1,Rl=!1;function em(e){Tt===null?Tt=[e]:Tt.push(e)}function Qf(e){Wa=!0,em(e)}function hr(){if(!Rl&&Tt!==null){Rl=!0;var e=0,t=oe;try{var s=Tt;for(oe=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}Tt=null,Wa=!1}catch(a){throw Tt!==null&&(Tt=Tt.slice(e+1)),ku(di,hr),a}finally{oe=t,Rl=!1}}return null}var Jr=[],Yr=0,ba=null,Na=0,ct=[],dt=0,Cr=null,At=1,Ft="";function pr(e,t){Jr[Yr++]=Na,Jr[Yr++]=ba,ba=e,Na=t}function tm(e,t,s){ct[dt++]=At,ct[dt++]=Ft,ct[dt++]=Cr,Cr=e;var n=At;e=Ft;var a=32-jt(n)-1;n&=~(1<<a),s+=1;var l=32-jt(t)+a;if(30<l){var o=a-a%5;l=(n&(1<<o)-1).toString(32),n>>=o,a-=o,At=1<<32-jt(t)+a|s<<a|n,Ft=l+e}else At=1<<l|s<<a|n,Ft=e}function ji(e){e.return!==null&&(pr(e,1),tm(e,1,0))}function vi(e){for(;e===ba;)ba=Jr[--Yr],Jr[Yr]=null,Na=Jr[--Yr],Jr[Yr]=null;for(;e===Cr;)Cr=ct[--dt],ct[dt]=null,Ft=ct[--dt],ct[dt]=null,At=ct[--dt],ct[dt]=null}var at=null,nt=null,pe=!1,yt=null;function rm(e,t){var s=ut(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Oc(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,nt=rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Cr!==null?{id:At,overflow:Ft}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ut(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,at=e,nt=null,!0):!1;default:return!1}}function So(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ko(e){if(pe){var t=nt;if(t){var s=t;if(!Oc(e,t)){if(So(e))throw Error(O(418));t=rr(s.nextSibling);var n=at;t&&Oc(e,t)?rm(n,s):(e.flags=e.flags&-4097|2,pe=!1,at=e)}}else{if(So(e))throw Error(O(418));e.flags=e.flags&-4097|2,pe=!1,at=e}}}function $c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function Mn(e){if(e!==at)return!1;if(!pe)return $c(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vo(e.type,e.memoizedProps)),t&&(t=nt)){if(So(e))throw sm(),Error(O(418));for(;t;)rm(e,t),t=rr(t.nextSibling)}if($c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(O(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){nt=rr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=at?rr(e.stateNode.nextSibling):null;return!0}function sm(){for(var e=nt;e;)e=rr(e.nextSibling)}function cs(){nt=at=null,pe=!1}function bi(e){yt===null?yt=[e]:yt.push(e)}var Kf=Bt.ReactCurrentBatchConfig;function Ts(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(O(309));var n=s.stateNode}if(!n)throw Error(O(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(O(284));if(!s._owner)throw Error(O(290,e))}return e}function Un(e,t){throw e=Object.prototype.toString.call(t),Error(O(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mc(e){var t=e._init;return t(e._payload)}function nm(e){function t(x,g){if(e){var h=x.deletions;h===null?(x.deletions=[g],x.flags|=16):h.push(g)}}function s(x,g){if(!e)return null;for(;g!==null;)t(x,g),g=g.sibling;return null}function n(x,g){for(x=new Map;g!==null;)g.key!==null?x.set(g.key,g):x.set(g.index,g),g=g.sibling;return x}function a(x,g){return x=lr(x,g),x.index=0,x.sibling=null,x}function l(x,g,h){return x.index=h,e?(h=x.alternate,h!==null?(h=h.index,h<g?(x.flags|=2,g):h):(x.flags|=2,g)):(x.flags|=1048576,g)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,g,h,b){return g===null||g.tag!==6?(g=$l(h,x.mode,b),g.return=x,g):(g=a(g,h),g.return=x,g)}function c(x,g,h,b){var S=h.type;return S===Wr?u(x,g,h.props.children,b,h.key):g!==null&&(g.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Vt&&Mc(S)===g.type)?(b=a(g,h.props),b.ref=Ts(x,g,h),b.return=x,b):(b=aa(h.type,h.key,h.props,null,x.mode,b),b.ref=Ts(x,g,h),b.return=x,b)}function d(x,g,h,b){return g===null||g.tag!==4||g.stateNode.containerInfo!==h.containerInfo||g.stateNode.implementation!==h.implementation?(g=Ml(h,x.mode,b),g.return=x,g):(g=a(g,h.children||[]),g.return=x,g)}function u(x,g,h,b,S){return g===null||g.tag!==7?(g=Nr(h,x.mode,b,S),g.return=x,g):(g=a(g,h),g.return=x,g)}function p(x,g,h){if(typeof g=="string"&&g!==""||typeof g=="number")return g=$l(""+g,x.mode,h),g.return=x,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Pn:return h=aa(g.type,g.key,g.props,null,x.mode,h),h.ref=Ts(x,null,g),h.return=x,h;case Hr:return g=Ml(g,x.mode,h),g.return=x,g;case Vt:var b=g._init;return p(x,b(g._payload),h)}if($s(g)||Es(g))return g=Nr(g,x.mode,h,null),g.return=x,g;Un(x,g)}return null}function f(x,g,h,b){var S=g!==null?g.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return S!==null?null:i(x,g,""+h,b);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Pn:return h.key===S?c(x,g,h,b):null;case Hr:return h.key===S?d(x,g,h,b):null;case Vt:return S=h._init,f(x,g,S(h._payload),b)}if($s(h)||Es(h))return S!==null?null:u(x,g,h,b,null);Un(x,h)}return null}function N(x,g,h,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(h)||null,i(g,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pn:return x=x.get(b.key===null?h:b.key)||null,c(g,x,b,S);case Hr:return x=x.get(b.key===null?h:b.key)||null,d(g,x,b,S);case Vt:var k=b._init;return N(x,g,h,k(b._payload),S)}if($s(b)||Es(b))return x=x.get(h)||null,u(g,x,b,S,null);Un(g,b)}return null}function m(x,g,h,b){for(var S=null,k=null,w=g,E=g=0,L=null;w!==null&&E<h.length;E++){w.index>E?(L=w,w=null):L=w.sibling;var D=f(x,w,h[E],b);if(D===null){w===null&&(w=L);break}e&&w&&D.alternate===null&&t(x,w),g=l(D,g,E),k===null?S=D:k.sibling=D,k=D,w=L}if(E===h.length)return s(x,w),pe&&pr(x,E),S;if(w===null){for(;E<h.length;E++)w=p(x,h[E],b),w!==null&&(g=l(w,g,E),k===null?S=w:k.sibling=w,k=w);return pe&&pr(x,E),S}for(w=n(x,w);E<h.length;E++)L=N(w,x,E,h[E],b),L!==null&&(e&&L.alternate!==null&&w.delete(L.key===null?E:L.key),g=l(L,g,E),k===null?S=L:k.sibling=L,k=L);return e&&w.forEach(function(I){return t(x,I)}),pe&&pr(x,E),S}function y(x,g,h,b){var S=Es(h);if(typeof S!="function")throw Error(O(150));if(h=S.call(h),h==null)throw Error(O(151));for(var k=S=null,w=g,E=g=0,L=null,D=h.next();w!==null&&!D.done;E++,D=h.next()){w.index>E?(L=w,w=null):L=w.sibling;var I=f(x,w,D.value,b);if(I===null){w===null&&(w=L);break}e&&w&&I.alternate===null&&t(x,w),g=l(I,g,E),k===null?S=I:k.sibling=I,k=I,w=L}if(D.done)return s(x,w),pe&&pr(x,E),S;if(w===null){for(;!D.done;E++,D=h.next())D=p(x,D.value,b),D!==null&&(g=l(D,g,E),k===null?S=D:k.sibling=D,k=D);return pe&&pr(x,E),S}for(w=n(x,w);!D.done;E++,D=h.next())D=N(w,x,E,D.value,b),D!==null&&(e&&D.alternate!==null&&w.delete(D.key===null?E:D.key),g=l(D,g,E),k===null?S=D:k.sibling=D,k=D);return e&&w.forEach(function(W){return t(x,W)}),pe&&pr(x,E),S}function j(x,g,h,b){if(typeof h=="object"&&h!==null&&h.type===Wr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Pn:e:{for(var S=h.key,k=g;k!==null;){if(k.key===S){if(S=h.type,S===Wr){if(k.tag===7){s(x,k.sibling),g=a(k,h.props.children),g.return=x,x=g;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Vt&&Mc(S)===k.type){s(x,k.sibling),g=a(k,h.props),g.ref=Ts(x,k,h),g.return=x,x=g;break e}s(x,k);break}else t(x,k);k=k.sibling}h.type===Wr?(g=Nr(h.props.children,x.mode,b,h.key),g.return=x,x=g):(b=aa(h.type,h.key,h.props,null,x.mode,b),b.ref=Ts(x,g,h),b.return=x,x=b)}return o(x);case Hr:e:{for(k=h.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===h.containerInfo&&g.stateNode.implementation===h.implementation){s(x,g.sibling),g=a(g,h.children||[]),g.return=x,x=g;break e}else{s(x,g);break}else t(x,g);g=g.sibling}g=Ml(h,x.mode,b),g.return=x,x=g}return o(x);case Vt:return k=h._init,j(x,g,k(h._payload),b)}if($s(h))return m(x,g,h,b);if(Es(h))return y(x,g,h,b);Un(x,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,g!==null&&g.tag===6?(s(x,g.sibling),g=a(g,h),g.return=x,x=g):(s(x,g),g=$l(h,x.mode,b),g.return=x,x=g),o(x)):s(x,g)}return j}var ds=nm(!0),am=nm(!1),wa=mr(null),Sa=null,Xr=null,Ni=null;function wi(){Ni=Xr=Sa=null}function Si(e){var t=wa.current;me(wa),e._currentValue=t}function Co(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function as(e,t){Sa=e,Ni=Xr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ye=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},Xr===null){if(Sa===null)throw Error(O(308));Xr=e,Sa.dependencies={lanes:0,firstContext:e}}else Xr=Xr.next=e;return t}var yr=null;function ki(e){yr===null?yr=[e]:yr.push(e)}function lm(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,ki(t)):(s.next=a.next,a.next=s),t.interleaved=s,$t(e,n)}function $t(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Qt=!1;function Ci(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sr(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,$t(e,s)}return a=n.interleaved,a===null?(t.next=t,ki(n)):(t.next=a.next,a.next=t),n.interleaved=t,$t(e,s)}function Zn(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,ui(e,s)}}function Uc(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?a=l=o:l=l.next=o,s=s.next}while(s!==null);l===null?a=l=t:l=l.next=t}else a=l=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function ka(e,t,s,n){var a=e.updateQueue;Qt=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==o&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(l!==null){var p=a.baseState;o=0,u=d=c=null,i=l;do{var f=i.lane,N=i.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:N,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var m=e,y=i;switch(f=t,N=s,y.tag){case 1:if(m=y.payload,typeof m=="function"){p=m.call(N,p,f);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(N,p,f):m,f==null)break e;p=ye({},p,f);break e;case 2:Qt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[i]:f.push(i))}else N={eventTime:N,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=N,c=p):u=u.next=N,o|=f;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;f=i,i=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(c=p),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);_r|=o,e.lanes=o,e.memoizedState=p}}function Bc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(O(191,a));a.call(n)}}}var Nn={},_t=mr(Nn),dn=mr(Nn),un=mr(Nn);function jr(e){if(e===Nn)throw Error(O(174));return e}function Ei(e,t){switch(ce(un,t),ce(dn,e),ce(_t,Nn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ao(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ao(t,e)}me(_t),ce(_t,t)}function us(){me(_t),me(dn),me(un)}function im(e){jr(un.current);var t=jr(_t.current),s=ao(t,e.type);t!==s&&(ce(dn,e),ce(_t,s))}function _i(e){dn.current===e&&(me(_t),me(dn))}var fe=mr(0);function Ca(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Tl=[];function Pi(){for(var e=0;e<Tl.length;e++)Tl[e]._workInProgressVersionPrimary=null;Tl.length=0}var ea=Bt.ReactCurrentDispatcher,Al=Bt.ReactCurrentBatchConfig,Er=0,xe=null,Ee=null,Le=null,Ea=!1,Ks=!1,mn=0,Gf=0;function Ie(){throw Error(O(321))}function Li(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!bt(e[s],t[s]))return!1;return!0}function Ri(e,t,s,n,a,l){if(Er=l,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ea.current=e===null||e.memoizedState===null?Zf:ex,e=s(n,a),Ks){l=0;do{if(Ks=!1,mn=0,25<=l)throw Error(O(301));l+=1,Le=Ee=null,t.updateQueue=null,ea.current=tx,e=s(n,a)}while(Ks)}if(ea.current=_a,t=Ee!==null&&Ee.next!==null,Er=0,Le=Ee=xe=null,Ea=!1,t)throw Error(O(300));return e}function Ti(){var e=mn!==0;return mn=0,e}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?xe.memoizedState=Le=e:Le=Le.next=e,Le}function pt(){if(Ee===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Le===null?xe.memoizedState:Le.next;if(t!==null)Le=t,Ee=e;else{if(e===null)throw Error(O(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Le===null?xe.memoizedState=Le=e:Le=Le.next=e}return Le}function hn(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=pt(),s=t.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=e;var n=Ee,a=n.baseQueue,l=s.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}n.baseQueue=a=l,s.pending=null}if(a!==null){l=a.next,n=n.baseState;var i=o=null,c=null,d=l;do{var u=d.lane;if((Er&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var p={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=p,o=n):c=c.next=p,xe.lanes|=u,_r|=u}d=d.next}while(d!==null&&d!==l);c===null?o=n:c.next=i,bt(n,t.memoizedState)||(Ye=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do l=a.lane,xe.lanes|=l,_r|=l,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Dl(e){var t=pt(),s=t.queue;if(s===null)throw Error(O(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,l=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);bt(l,t.memoizedState)||(Ye=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,n]}function cm(){}function dm(e,t){var s=xe,n=pt(),a=t(),l=!bt(n.memoizedState,a);if(l&&(n.memoizedState=a,Ye=!0),n=n.queue,Ai(hm.bind(null,s,n,e),[e]),n.getSnapshot!==t||l||Le!==null&&Le.memoizedState.tag&1){if(s.flags|=2048,pn(9,mm.bind(null,s,n,a,t),void 0,null),Re===null)throw Error(O(349));Er&30||um(s,t,a)}return a}function um(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function mm(e,t,s,n){t.value=s,t.getSnapshot=n,pm(t)&&fm(e)}function hm(e,t,s){return s(function(){pm(t)&&fm(e)})}function pm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!bt(e,s)}catch{return!0}}function fm(e){var t=$t(e,1);t!==null&&vt(t,e,1,-1)}function zc(e){var t=kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:e},t.queue=e,e=e.dispatch=Xf.bind(null,xe,e),[t.memoizedState,e]}function pn(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function xm(){return pt().memoizedState}function ta(e,t,s,n){var a=kt();xe.flags|=e,a.memoizedState=pn(1|t,s,void 0,n===void 0?null:n)}function qa(e,t,s,n){var a=pt();n=n===void 0?null:n;var l=void 0;if(Ee!==null){var o=Ee.memoizedState;if(l=o.destroy,n!==null&&Li(n,o.deps)){a.memoizedState=pn(t,s,l,n);return}}xe.flags|=e,a.memoizedState=pn(1|t,s,l,n)}function Hc(e,t){return ta(8390656,8,e,t)}function Ai(e,t){return qa(2048,8,e,t)}function gm(e,t){return qa(4,2,e,t)}function ym(e,t){return qa(4,4,e,t)}function jm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vm(e,t,s){return s=s!=null?s.concat([e]):null,qa(4,4,jm.bind(null,t,e),s)}function Fi(){}function bm(e,t){var s=pt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Li(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Nm(e,t){var s=pt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Li(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function wm(e,t,s){return Er&21?(bt(s,t)||(s=_u(),xe.lanes|=s,_r|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ye=!0),e.memoizedState=s)}function Jf(e,t){var s=oe;oe=s!==0&&4>s?s:4,e(!0);var n=Al.transition;Al.transition={};try{e(!1),t()}finally{oe=s,Al.transition=n}}function Sm(){return pt().memoizedState}function Yf(e,t,s){var n=ar(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},km(e))Cm(t,s);else if(s=lm(e,t,s,n),s!==null){var a=qe();vt(s,e,n,a),Em(s,t,n)}}function Xf(e,t,s){var n=ar(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(km(e))Cm(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,s);if(a.hasEagerState=!0,a.eagerState=i,bt(i,o)){var c=t.interleaved;c===null?(a.next=a,ki(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=lm(e,t,a,n),s!==null&&(a=qe(),vt(s,e,n,a),Em(s,t,n))}}function km(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Cm(e,t){Ks=Ea=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Em(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,ui(e,s)}}var _a={readContext:ht,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Zf={readContext:ht,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:Hc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ta(4194308,4,jm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ta(4194308,4,e,t)},useInsertionEffect:function(e,t){return ta(4,2,e,t)},useMemo:function(e,t){var s=kt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=kt();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Yf.bind(null,xe,e),[n.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:zc,useDebugValue:Fi,useDeferredValue:function(e){return kt().memoizedState=e},useTransition:function(){var e=zc(!1),t=e[0];return e=Jf.bind(null,e[1]),kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=xe,a=kt();if(pe){if(s===void 0)throw Error(O(407));s=s()}else{if(s=t(),Re===null)throw Error(O(349));Er&30||um(n,t,s)}a.memoizedState=s;var l={value:s,getSnapshot:t};return a.queue=l,Hc(hm.bind(null,n,l,e),[e]),n.flags|=2048,pn(9,mm.bind(null,n,l,s,t),void 0,null),s},useId:function(){var e=kt(),t=Re.identifierPrefix;if(pe){var s=Ft,n=At;s=(n&~(1<<32-jt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=mn++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Gf++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ex={readContext:ht,useCallback:bm,useContext:ht,useEffect:Ai,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Nm,useReducer:Fl,useRef:xm,useState:function(){return Fl(hn)},useDebugValue:Fi,useDeferredValue:function(e){var t=pt();return wm(t,Ee.memoizedState,e)},useTransition:function(){var e=Fl(hn)[0],t=pt().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:dm,useId:Sm,unstable_isNewReconciler:!1},tx={readContext:ht,useCallback:bm,useContext:ht,useEffect:Ai,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Nm,useReducer:Dl,useRef:xm,useState:function(){return Dl(hn)},useDebugValue:Fi,useDeferredValue:function(e){var t=pt();return Ee===null?t.memoizedState=e:wm(t,Ee.memoizedState,e)},useTransition:function(){var e=Dl(hn)[0],t=pt().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:dm,useId:Sm,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Eo(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:ye({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Va={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=qe(),a=ar(e),l=Dt(n,a);l.payload=t,s!=null&&(l.callback=s),t=sr(e,l,a),t!==null&&(vt(t,e,a,n),Zn(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=qe(),a=ar(e),l=Dt(n,a);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=sr(e,l,a),t!==null&&(vt(t,e,a,n),Zn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=qe(),n=ar(e),a=Dt(s,n);a.tag=2,t!=null&&(a.callback=t),t=sr(e,a,n),t!==null&&(vt(t,e,n,s),Zn(t,e,n))}};function Wc(e,t,s,n,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,o):t.prototype&&t.prototype.isPureReactComponent?!an(s,n)||!an(a,l):!0}function _m(e,t,s){var n=!1,a=cr,l=t.contextType;return typeof l=="object"&&l!==null?l=ht(l):(a=Ze(t)?kr:Be.current,n=t.contextTypes,l=(n=n!=null)?is(e,a):cr),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function qc(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function _o(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Ci(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=ht(l):(l=Ze(t)?kr:Be.current,a.context=is(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Eo(e,t,l,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Va.enqueueReplaceState(a,a.state,null),ka(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ms(e,t){try{var s="",n=t;do s+=_p(n),n=n.return;while(n);var a=s}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Il(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Po(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var rx=typeof WeakMap=="function"?WeakMap:Map;function Pm(e,t,s){s=Dt(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){La||(La=!0,Mo=n),Po(e,t)},s}function Lm(e,t,s){s=Dt(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Po(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Po(e,t),typeof n!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Vc(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new rx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=xx.bind(null,e,t,s),t.then(e,e))}function Qc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kc(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Dt(-1,1),t.tag=2,sr(s,t,1))),s.lanes|=1),e)}var sx=Bt.ReactCurrentOwner,Ye=!1;function We(e,t,s,n){t.child=e===null?am(t,null,s,n):ds(t,e.child,s,n)}function Gc(e,t,s,n,a){s=s.render;var l=t.ref;return as(t,a),n=Ri(e,t,s,n,l,a),s=Ti(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mt(e,t,a)):(pe&&s&&ji(t),t.flags|=1,We(e,t,n,a),t.child)}function Jc(e,t,s,n,a){if(e===null){var l=s.type;return typeof l=="function"&&!zi(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,Rm(e,t,l,n,a)):(e=aa(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(s=s.compare,s=s!==null?s:an,s(o,n)&&e.ref===t.ref)return Mt(e,t,a)}return t.flags|=1,e=lr(l,n),e.ref=t.ref,e.return=t,t.child=e}function Rm(e,t,s,n,a){if(e!==null){var l=e.memoizedProps;if(an(l,n)&&e.ref===t.ref)if(Ye=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Ye=!0);else return t.lanes=e.lanes,Mt(e,t,a)}return Lo(e,t,s,n,a)}function Tm(e,t,s){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(es,st),st|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ce(es,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:s,ce(es,st),st|=n}else l!==null?(n=l.baseLanes|s,t.memoizedState=null):n=s,ce(es,st),st|=n;return We(e,t,a,s),t.child}function Am(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Lo(e,t,s,n,a){var l=Ze(s)?kr:Be.current;return l=is(t,l),as(t,a),s=Ri(e,t,s,n,l,a),n=Ti(),e!==null&&!Ye?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Mt(e,t,a)):(pe&&n&&ji(t),t.flags|=1,We(e,t,s,a),t.child)}function Yc(e,t,s,n,a){if(Ze(s)){var l=!0;va(t)}else l=!1;if(as(t,a),t.stateNode===null)ra(e,t),_m(t,s,n),_o(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=ht(d):(d=Ze(s)?kr:Be.current,d=is(t,d));var u=s.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==d)&&qc(t,o,n,d),Qt=!1;var f=t.memoizedState;o.state=f,ka(t,n,o,a),c=t.memoizedState,i!==n||f!==c||Xe.current||Qt?(typeof u=="function"&&(Eo(t,s,u,n),c=t.memoizedState),(i=Qt||Wc(t,s,i,n,f,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,om(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:xt(t.type,i),o.props=d,p=t.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=Ze(s)?kr:Be.current,c=is(t,c));var N=s.getDerivedStateFromProps;(u=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==p||f!==c)&&qc(t,o,n,c),Qt=!1,f=t.memoizedState,o.state=f,ka(t,n,o,a);var m=t.memoizedState;i!==p||f!==m||Xe.current||Qt?(typeof N=="function"&&(Eo(t,s,N,n),m=t.memoizedState),(d=Qt||Wc(t,s,d,n,f,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Ro(e,t,s,n,l,a)}function Ro(e,t,s,n,a,l){Am(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Ic(t,s,!1),Mt(e,t,l);n=t.stateNode,sx.current=t;var i=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ds(t,e.child,null,l),t.child=ds(t,null,i,l)):We(e,t,i,l),t.memoizedState=n.state,a&&Ic(t,s,!0),t.child}function Fm(e){var t=e.stateNode;t.pendingContext?Dc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dc(e,t.context,!1),Ei(e,t.containerInfo)}function Xc(e,t,s,n,a){return cs(),bi(a),t.flags|=256,We(e,t,s,n),t.child}var To={dehydrated:null,treeContext:null,retryLane:0};function Ao(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dm(e,t,s){var n=t.pendingProps,a=fe.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ce(fe,a&1),e===null)return ko(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Ga(o,n,0,null),e=Nr(e,n,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ao(s),t.memoizedState=To,e):Di(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return nx(e,t,o,n,i,a,s);if(l){l=n.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=lr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=lr(i,l):(l=Nr(l,o,s,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=e.child.memoizedState,o=o===null?Ao(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=To,n}return l=e.child,e=l.sibling,n=lr(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Di(e,t){return t=Ga({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bn(e,t,s,n){return n!==null&&bi(n),ds(t,e.child,null,s),e=Di(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nx(e,t,s,n,a,l,o){if(s)return t.flags&256?(t.flags&=-257,n=Il(Error(O(422))),Bn(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Ga({mode:"visible",children:n.children},a,0,null),l=Nr(l,a,o,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&ds(t,e.child,null,o),t.child.memoizedState=Ao(o),t.memoizedState=To,l);if(!(t.mode&1))return Bn(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(O(419)),n=Il(l,n,void 0),Bn(e,t,o,n)}if(i=(o&e.childLanes)!==0,Ye||i){if(n=Re,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,$t(e,a),vt(n,e,a,-1))}return Bi(),n=Il(Error(O(421))),Bn(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=gx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,nt=rr(a.nextSibling),at=t,pe=!0,yt=null,e!==null&&(ct[dt++]=At,ct[dt++]=Ft,ct[dt++]=Cr,At=e.id,Ft=e.overflow,Cr=t),t=Di(t,n.children),t.flags|=4096,t)}function Zc(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Co(e.return,t,s)}function Ol(e,t,s,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=s,l.tailMode=a)}function Im(e,t,s){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(We(e,t,n.children,s),n=fe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zc(e,s,t);else if(e.tag===19)Zc(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ce(fe,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Ca(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Ol(t,!1,a,s,l);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ca(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Ol(t,!0,s,null,l);break;case"together":Ol(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ra(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),_r|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(O(153));if(t.child!==null){for(e=t.child,s=lr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=lr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ax(e,t,s){switch(t.tag){case 3:Fm(t),cs();break;case 5:im(t);break;case 1:Ze(t.type)&&va(t);break;case 4:Ei(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ce(wa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ce(fe,fe.current&1),t.flags|=128,null):s&t.child.childLanes?Dm(e,t,s):(ce(fe,fe.current&1),e=Mt(e,t,s),e!==null?e.sibling:null);ce(fe,fe.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Im(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ce(fe,fe.current),n)break;return null;case 22:case 23:return t.lanes=0,Tm(e,t,s)}return Mt(e,t,s)}var Om,Fo,$m,Mm;Om=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Fo=function(){};$m=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,jr(_t.current);var l=null;switch(s){case"input":a=to(e,a),n=to(e,n),l=[];break;case"select":a=ye({},a,{value:void 0}),n=ye({},n,{value:void 0}),l=[];break;case"textarea":a=no(e,a),n=no(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ya)}lo(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xs.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(i=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(l||(l=[]),l.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ue("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}s&&(l=l||[]).push("style",s);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Mm=function(e,t,s,n){s!==n&&(t.flags|=4)};function As(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function lx(e,t,s){var n=t.pendingProps;switch(vi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Ze(t.type)&&ja(),Oe(t),null;case 3:return n=t.stateNode,us(),me(Xe),me(Be),Pi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Mn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(zo(yt),yt=null))),Fo(e,t),Oe(t),null;case 5:_i(t);var a=jr(un.current);if(s=t.type,e!==null&&t.stateNode!=null)$m(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(O(166));return Oe(t),null}if(e=jr(_t.current),Mn(t)){n=t.stateNode,s=t.type;var l=t.memoizedProps;switch(n[Ct]=t,n[cn]=l,e=(t.mode&1)!==0,s){case"dialog":ue("cancel",n),ue("close",n);break;case"iframe":case"object":case"embed":ue("load",n);break;case"video":case"audio":for(a=0;a<Us.length;a++)ue(Us[a],n);break;case"source":ue("error",n);break;case"img":case"image":case"link":ue("error",n),ue("load",n);break;case"details":ue("toggle",n);break;case"input":ic(n,l),ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ue("invalid",n);break;case"textarea":dc(n,l),ue("invalid",n)}lo(s,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&$n(n.textContent,i,e),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&$n(n.textContent,i,e),a=["children",""+i]):Xs.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&ue("scroll",n)}switch(s){case"input":Ln(n),cc(n,l,!0);break;case"textarea":Ln(n),uc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ya)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Ct]=t,e[cn]=n,Om(e,t,!1,!1),t.stateNode=e;e:{switch(o=oo(s,n),s){case"dialog":ue("cancel",e),ue("close",e),a=n;break;case"iframe":case"object":case"embed":ue("load",e),a=n;break;case"video":case"audio":for(a=0;a<Us.length;a++)ue(Us[a],e);a=n;break;case"source":ue("error",e),a=n;break;case"img":case"image":case"link":ue("error",e),ue("load",e),a=n;break;case"details":ue("toggle",e),a=n;break;case"input":ic(e,n),a=to(e,n),ue("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ye({},n,{value:void 0}),ue("invalid",e);break;case"textarea":dc(e,n),a=no(e,n),ue("invalid",e);break;default:a=n}lo(s,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?xu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pu(e,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Zs(e,c):typeof c=="number"&&Zs(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Xs.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ue("scroll",e):c!=null&&ai(e,l,c,o))}switch(s){case"input":Ln(e),cc(e,n,!1);break;case"textarea":Ln(e),uc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ir(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?ts(e,!!n.multiple,l,!1):n.defaultValue!=null&&ts(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ya)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)Mm(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(O(166));if(s=jr(un.current),jr(_t.current),Mn(t)){if(n=t.stateNode,s=t.memoizedProps,n[Ct]=t,(l=n.nodeValue!==s)&&(e=at,e!==null))switch(e.tag){case 3:$n(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$n(n.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ct]=t,t.stateNode=n}return Oe(t),null;case 13:if(me(fe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&nt!==null&&t.mode&1&&!(t.flags&128))sm(),cs(),t.flags|=98560,l=!1;else if(l=Mn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(O(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(O(317));l[Ct]=t}else cs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),l=!1}else yt!==null&&(zo(yt),yt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||fe.current&1?_e===0&&(_e=3):Bi())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return us(),Fo(e,t),e===null&&ln(t.stateNode.containerInfo),Oe(t),null;case 10:return Si(t.type._context),Oe(t),null;case 17:return Ze(t.type)&&ja(),Oe(t),null;case 19:if(me(fe),l=t.memoizedState,l===null)return Oe(t),null;if(n=(t.flags&128)!==0,o=l.rendering,o===null)if(n)As(l,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ca(e),o!==null){for(t.flags|=128,As(l,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)l=s,e=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ce(fe,fe.current&1|2),t.child}e=e.sibling}l.tail!==null&&we()>hs&&(t.flags|=128,n=!0,As(l,!1),t.lanes=4194304)}else{if(!n)if(e=Ca(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),As(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!pe)return Oe(t),null}else 2*we()-l.renderingStartTime>hs&&s!==1073741824&&(t.flags|=128,n=!0,As(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=we(),t.sibling=null,s=fe.current,ce(fe,n?s&1|2:s&1),t):(Oe(t),null);case 22:case 23:return Ui(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?st&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(O(156,t.tag))}function ox(e,t){switch(vi(t),t.tag){case 1:return Ze(t.type)&&ja(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return us(),me(Xe),me(Be),Pi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _i(t),null;case 13:if(me(fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(O(340));cs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(fe),null;case 4:return us(),null;case 10:return Si(t.type._context),null;case 22:case 23:return Ui(),null;case 24:return null;default:return null}}var zn=!1,Me=!1,ix=typeof WeakSet=="function"?WeakSet:Set,H=null;function Zr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){ve(e,t,n)}else s.current=null}function Do(e,t,s){try{s()}catch(n){ve(e,t,n)}}var ed=!1;function cx(e,t){if(yo=fa,e=Wu(),yi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var o=0,i=-1,c=-1,d=0,u=0,p=e,f=null;t:for(;;){for(var N;p!==s||a!==0&&p.nodeType!==3||(i=o+a),p!==l||n!==0&&p.nodeType!==3||(c=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(N=p.firstChild)!==null;)f=p,p=N;for(;;){if(p===e)break t;if(f===s&&++d===a&&(i=o),f===l&&++u===n&&(c=o),(N=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=N}s=i===-1||c===-1?null:{start:i,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(jo={focusedElem:e,selectionRange:s},fa=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,j=m.memoizedState,x=t.stateNode,g=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:xt(t.type,y),j);x.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(b){ve(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return m=ed,ed=!1,m}function Gs(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Do(t,s,l)}a=a.next}while(a!==n)}}function Qa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Io(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[cn],delete t[No],delete t[qf],delete t[Vf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bm(e){return e.tag===5||e.tag===3||e.tag===4}function td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Oo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ya));else if(n!==4&&(e=e.child,e!==null))for(Oo(e,t,s),e=e.sibling;e!==null;)Oo(e,t,s),e=e.sibling}function $o(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for($o(e,t,s),e=e.sibling;e!==null;)$o(e,t,s),e=e.sibling}var Te=null,gt=!1;function qt(e,t,s){for(s=s.child;s!==null;)zm(e,t,s),s=s.sibling}function zm(e,t,s){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Ma,s)}catch{}switch(s.tag){case 5:Me||Zr(s,t);case 6:var n=Te,a=gt;Te=null,qt(e,t,s),Te=n,gt=a,Te!==null&&(gt?(e=Te,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Te.removeChild(s.stateNode));break;case 18:Te!==null&&(gt?(e=Te,s=s.stateNode,e.nodeType===8?Ll(e.parentNode,s):e.nodeType===1&&Ll(e,s),sn(e)):Ll(Te,s.stateNode));break;case 4:n=Te,a=gt,Te=s.stateNode.containerInfo,gt=!0,qt(e,t,s),Te=n,gt=a;break;case 0:case 11:case 14:case 15:if(!Me&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Do(s,t,o),a=a.next}while(a!==n)}qt(e,t,s);break;case 1:if(!Me&&(Zr(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(i){ve(s,t,i)}qt(e,t,s);break;case 21:qt(e,t,s);break;case 22:s.mode&1?(Me=(n=Me)||s.memoizedState!==null,qt(e,t,s),Me=n):qt(e,t,s);break;default:qt(e,t,s)}}function rd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new ix),t.forEach(function(n){var a=yx.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function ft(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:Te=i.stateNode,gt=!1;break e;case 3:Te=i.stateNode.containerInfo,gt=!0;break e;case 4:Te=i.stateNode.containerInfo,gt=!0;break e}i=i.return}if(Te===null)throw Error(O(160));zm(l,o,a),Te=null,gt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ve(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Hm(t,e),t=t.sibling}function Hm(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),wt(e),n&4){try{Gs(3,e,e.return),Qa(3,e)}catch(y){ve(e,e.return,y)}try{Gs(5,e,e.return)}catch(y){ve(e,e.return,y)}}break;case 1:ft(t,e),wt(e),n&512&&s!==null&&Zr(s,s.return);break;case 5:if(ft(t,e),wt(e),n&512&&s!==null&&Zr(s,s.return),e.flags&32){var a=e.stateNode;try{Zs(a,"")}catch(y){ve(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=s!==null?s.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&uu(a,l),oo(i,o);var d=oo(i,l);for(o=0;o<c.length;o+=2){var u=c[o],p=c[o+1];u==="style"?xu(a,p):u==="dangerouslySetInnerHTML"?pu(a,p):u==="children"?Zs(a,p):ai(a,u,p,d)}switch(i){case"input":ro(a,l);break;case"textarea":mu(a,l);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?ts(a,!!l.multiple,N,!1):f!==!!l.multiple&&(l.defaultValue!=null?ts(a,!!l.multiple,l.defaultValue,!0):ts(a,!!l.multiple,l.multiple?[]:"",!1))}a[cn]=l}catch(y){ve(e,e.return,y)}}break;case 6:if(ft(t,e),wt(e),n&4){if(e.stateNode===null)throw Error(O(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){ve(e,e.return,y)}}break;case 3:if(ft(t,e),wt(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{sn(t.containerInfo)}catch(y){ve(e,e.return,y)}break;case 4:ft(t,e),wt(e);break;case 13:ft(t,e),wt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||($i=we())),n&4&&rd(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Me=(d=Me)||u,ft(t,e),Me=d):ft(t,e),wt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(H=e,u=e.child;u!==null;){for(p=H=u;H!==null;){switch(f=H,N=f.child,f.tag){case 0:case 11:case 14:case 15:Gs(4,f,f.return);break;case 1:Zr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,s=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){ve(n,s,y)}}break;case 5:Zr(f,f.return);break;case 22:if(f.memoizedState!==null){nd(p);continue}}N!==null?(N.return=f,H=N):nd(p)}u=u.sibling}e:for(u=null,p=e;;){if(p.tag===5){if(u===null){u=p;try{a=p.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=fu("display",o))}catch(y){ve(e,e.return,y)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(y){ve(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ft(t,e),wt(e),n&4&&rd(e);break;case 21:break;default:ft(t,e),wt(e)}}function wt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Bm(s)){var n=s;break e}s=s.return}throw Error(O(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Zs(a,""),n.flags&=-33);var l=td(e);$o(e,l,a);break;case 3:case 4:var o=n.stateNode.containerInfo,i=td(e);Oo(e,i,o);break;default:throw Error(O(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dx(e,t,s){H=e,Wm(e)}function Wm(e,t,s){for(var n=(e.mode&1)!==0;H!==null;){var a=H,l=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||zn;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||Me;i=zn;var d=Me;if(zn=o,(Me=c)&&!d)for(H=a;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?ad(a):c!==null?(c.return=o,H=c):ad(a);for(;l!==null;)H=l,Wm(l),l=l.sibling;H=a,zn=i,Me=d}sd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,H=l):sd(e)}}function sd(e){for(;H!==null;){var t=H;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Me||Qa(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Me)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:xt(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Bc(t,l,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Bc(t,o,s)}break;case 5:var i=t.stateNode;if(s===null&&t.flags&4){s=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&sn(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Me||t.flags&512&&Io(t)}catch(f){ve(t,t.return,f)}}if(t===e){H=null;break}if(s=t.sibling,s!==null){s.return=t.return,H=s;break}H=t.return}}function nd(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var s=t.sibling;if(s!==null){s.return=t.return,H=s;break}H=t.return}}function ad(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Qa(4,t)}catch(c){ve(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ve(t,a,c)}}var l=t.return;try{Io(t)}catch(c){ve(t,l,c)}break;case 5:var o=t.return;try{Io(t)}catch(c){ve(t,o,c)}}}catch(c){ve(t,t.return,c)}if(t===e){H=null;break}var i=t.sibling;if(i!==null){i.return=t.return,H=i;break}H=t.return}}var ux=Math.ceil,Pa=Bt.ReactCurrentDispatcher,Ii=Bt.ReactCurrentOwner,mt=Bt.ReactCurrentBatchConfig,ae=0,Re=null,ke=null,Ae=0,st=0,es=mr(0),_e=0,fn=null,_r=0,Ka=0,Oi=0,Js=null,Je=null,$i=0,hs=1/0,Rt=null,La=!1,Mo=null,nr=null,Hn=!1,Yt=null,Ra=0,Ys=0,Uo=null,sa=-1,na=0;function qe(){return ae&6?we():sa!==-1?sa:sa=we()}function ar(e){return e.mode&1?ae&2&&Ae!==0?Ae&-Ae:Kf.transition!==null?(na===0&&(na=_u()),na):(e=oe,e!==0||(e=window.event,e=e===void 0?16:Du(e.type)),e):1}function vt(e,t,s,n){if(50<Ys)throw Ys=0,Uo=null,Error(O(185));jn(e,s,n),(!(ae&2)||e!==Re)&&(e===Re&&(!(ae&2)&&(Ka|=s),_e===4&&Gt(e,Ae)),et(e,n),s===1&&ae===0&&!(t.mode&1)&&(hs=we()+500,Wa&&hr()))}function et(e,t){var s=e.callbackNode;Qp(e,t);var n=pa(e,e===Re?Ae:0);if(n===0)s!==null&&pc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&pc(s),t===1)e.tag===0?Qf(ld.bind(null,e)):em(ld.bind(null,e)),Hf(function(){!(ae&6)&&hr()}),s=null;else{switch(Pu(n)){case 1:s=di;break;case 4:s=Cu;break;case 16:s=ha;break;case 536870912:s=Eu;break;default:s=ha}s=Xm(s,qm.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function qm(e,t){if(sa=-1,na=0,ae&6)throw Error(O(327));var s=e.callbackNode;if(ls()&&e.callbackNode!==s)return null;var n=pa(e,e===Re?Ae:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ta(e,n);else{t=n;var a=ae;ae|=2;var l=Qm();(Re!==e||Ae!==t)&&(Rt=null,hs=we()+500,br(e,t));do try{px();break}catch(i){Vm(e,i)}while(!0);wi(),Pa.current=l,ae=a,ke!==null?t=0:(Re=null,Ae=0,t=_e)}if(t!==0){if(t===2&&(a=ho(e),a!==0&&(n=a,t=Bo(e,a))),t===1)throw s=fn,br(e,0),Gt(e,n),et(e,we()),s;if(t===6)Gt(e,n);else{if(a=e.current.alternate,!(n&30)&&!mx(a)&&(t=Ta(e,n),t===2&&(l=ho(e),l!==0&&(n=l,t=Bo(e,l))),t===1))throw s=fn,br(e,0),Gt(e,n),et(e,we()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(O(345));case 2:fr(e,Je,Rt);break;case 3:if(Gt(e,n),(n&130023424)===n&&(t=$i+500-we(),10<t)){if(pa(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){qe(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=bo(fr.bind(null,e,Je,Rt),t);break}fr(e,Je,Rt);break;case 4:if(Gt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-jt(n);l=1<<o,o=t[o],o>a&&(a=o),n&=~l}if(n=a,n=we()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ux(n/1960))-n,10<n){e.timeoutHandle=bo(fr.bind(null,e,Je,Rt),n);break}fr(e,Je,Rt);break;case 5:fr(e,Je,Rt);break;default:throw Error(O(329))}}}return et(e,we()),e.callbackNode===s?qm.bind(null,e):null}function Bo(e,t){var s=Js;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=Ta(e,t),e!==2&&(t=Je,Je=s,t!==null&&zo(t)),e}function zo(e){Je===null?Je=e:Je.push.apply(Je,e)}function mx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],l=a.getSnapshot;a=a.value;try{if(!bt(l(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gt(e,t){for(t&=~Oi,t&=~Ka,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-jt(t),n=1<<s;e[s]=-1,t&=~n}}function ld(e){if(ae&6)throw Error(O(327));ls();var t=pa(e,0);if(!(t&1))return et(e,we()),null;var s=Ta(e,t);if(e.tag!==0&&s===2){var n=ho(e);n!==0&&(t=n,s=Bo(e,n))}if(s===1)throw s=fn,br(e,0),Gt(e,t),et(e,we()),s;if(s===6)throw Error(O(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fr(e,Je,Rt),et(e,we()),null}function Mi(e,t){var s=ae;ae|=1;try{return e(t)}finally{ae=s,ae===0&&(hs=we()+500,Wa&&hr())}}function Pr(e){Yt!==null&&Yt.tag===0&&!(ae&6)&&ls();var t=ae;ae|=1;var s=mt.transition,n=oe;try{if(mt.transition=null,oe=1,e)return e()}finally{oe=n,mt.transition=s,ae=t,!(ae&6)&&hr()}}function Ui(){st=es.current,me(es)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,zf(s)),ke!==null)for(s=ke.return;s!==null;){var n=s;switch(vi(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ja();break;case 3:us(),me(Xe),me(Be),Pi();break;case 5:_i(n);break;case 4:us();break;case 13:me(fe);break;case 19:me(fe);break;case 10:Si(n.type._context);break;case 22:case 23:Ui()}s=s.return}if(Re=e,ke=e=lr(e.current,null),Ae=st=t,_e=0,fn=null,Oi=Ka=_r=0,Je=Js=null,yr!==null){for(t=0;t<yr.length;t++)if(s=yr[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,l=s.pending;if(l!==null){var o=l.next;l.next=a,n.next=o}s.pending=n}yr=null}return e}function Vm(e,t){do{var s=ke;try{if(wi(),ea.current=_a,Ea){for(var n=xe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ea=!1}if(Er=0,Le=Ee=xe=null,Ks=!1,mn=0,Ii.current=null,s===null||s.return===null){_e=1,fn=t,ke=null;break}e:{var l=e,o=s.return,i=s,c=t;if(t=Ae,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var N=Qc(o);if(N!==null){N.flags&=-257,Kc(N,o,i,l,t),N.mode&1&&Vc(l,d,t),t=N,c=d;var m=t.updateQueue;if(m===null){var y=new Set;y.add(c),t.updateQueue=y}else m.add(c);break e}else{if(!(t&1)){Vc(l,d,t),Bi();break e}c=Error(O(426))}}else if(pe&&i.mode&1){var j=Qc(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Kc(j,o,i,l,t),bi(ms(c,i));break e}}l=c=ms(c,i),_e!==4&&(_e=2),Js===null?Js=[l]:Js.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=Pm(l,c,t);Uc(l,x);break e;case 1:i=c;var g=l.type,h=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(nr===null||!nr.has(h)))){l.flags|=65536,t&=-t,l.lanes|=t;var b=Lm(l,i,t);Uc(l,b);break e}}l=l.return}while(l!==null)}Gm(s)}catch(S){t=S,ke===s&&s!==null&&(ke=s=s.return);continue}break}while(!0)}function Qm(){var e=Pa.current;return Pa.current=_a,e===null?_a:e}function Bi(){(_e===0||_e===3||_e===2)&&(_e=4),Re===null||!(_r&268435455)&&!(Ka&268435455)||Gt(Re,Ae)}function Ta(e,t){var s=ae;ae|=2;var n=Qm();(Re!==e||Ae!==t)&&(Rt=null,br(e,t));do try{hx();break}catch(a){Vm(e,a)}while(!0);if(wi(),ae=s,Pa.current=n,ke!==null)throw Error(O(261));return Re=null,Ae=0,_e}function hx(){for(;ke!==null;)Km(ke)}function px(){for(;ke!==null&&!$p();)Km(ke)}function Km(e){var t=Ym(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Gm(e):ke=t,Ii.current=null}function Gm(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=ox(s,t),s!==null){s.flags&=32767,ke=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,ke=null;return}}else if(s=lx(s,t,st),s!==null){ke=s;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);_e===0&&(_e=5)}function fr(e,t,s){var n=oe,a=mt.transition;try{mt.transition=null,oe=1,fx(e,t,s,n)}finally{mt.transition=a,oe=n}return null}function fx(e,t,s,n){do ls();while(Yt!==null);if(ae&6)throw Error(O(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(O(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(Kp(e,l),e===Re&&(ke=Re=null,Ae=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Hn||(Hn=!0,Xm(ha,function(){return ls(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=mt.transition,mt.transition=null;var o=oe;oe=1;var i=ae;ae|=4,Ii.current=null,cx(e,s),Hm(s,e),Df(jo),fa=!!yo,jo=yo=null,e.current=s,dx(s),Mp(),ae=i,oe=o,mt.transition=l}else e.current=s;if(Hn&&(Hn=!1,Yt=e,Ra=a),l=e.pendingLanes,l===0&&(nr=null),zp(s.stateNode),et(e,we()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(La)throw La=!1,e=Mo,Mo=null,e;return Ra&1&&e.tag!==0&&ls(),l=e.pendingLanes,l&1?e===Uo?Ys++:(Ys=0,Uo=e):Ys=0,hr(),null}function ls(){if(Yt!==null){var e=Pu(Ra),t=mt.transition,s=oe;try{if(mt.transition=null,oe=16>e?16:e,Yt===null)var n=!1;else{if(e=Yt,Yt=null,Ra=0,ae&6)throw Error(O(331));var a=ae;for(ae|=4,H=e.current;H!==null;){var l=H,o=l.child;if(H.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(H=d;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:Gs(8,u,l)}var p=u.child;if(p!==null)p.return=u,H=p;else for(;H!==null;){u=H;var f=u.sibling,N=u.return;if(Um(u),u===d){H=null;break}if(f!==null){f.return=N,H=f;break}H=N}}}var m=l.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}H=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,H=o;else e:for(;H!==null;){if(l=H,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Gs(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,H=x;break e}H=l.return}}var g=e.current;for(H=g;H!==null;){o=H;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,H=h;else e:for(o=g;H!==null;){if(i=H,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Qa(9,i)}}catch(S){ve(i,i.return,S)}if(i===o){H=null;break e}var b=i.sibling;if(b!==null){b.return=i.return,H=b;break e}H=i.return}}if(ae=a,hr(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Ma,e)}catch{}n=!0}return n}finally{oe=s,mt.transition=t}}return!1}function od(e,t,s){t=ms(s,t),t=Pm(e,t,1),e=sr(e,t,1),t=qe(),e!==null&&(jn(e,1,t),et(e,t))}function ve(e,t,s){if(e.tag===3)od(e,e,s);else for(;t!==null;){if(t.tag===3){od(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(nr===null||!nr.has(n))){e=ms(s,e),e=Lm(t,e,1),t=sr(t,e,1),e=qe(),t!==null&&(jn(t,1,e),et(t,e));break}}t=t.return}}function xx(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&s,Re===e&&(Ae&s)===s&&(_e===4||_e===3&&(Ae&130023424)===Ae&&500>we()-$i?br(e,0):Oi|=s),et(e,t)}function Jm(e,t){t===0&&(e.mode&1?(t=An,An<<=1,!(An&130023424)&&(An=4194304)):t=1);var s=qe();e=$t(e,t),e!==null&&(jn(e,t,s),et(e,s))}function gx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Jm(e,s)}function yx(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(O(314))}n!==null&&n.delete(t),Jm(e,s)}var Ym;Ym=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Ye=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ye=!1,ax(e,t,s);Ye=!!(e.flags&131072)}else Ye=!1,pe&&t.flags&1048576&&tm(t,Na,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ra(e,t),e=t.pendingProps;var a=is(t,Be.current);as(t,s),a=Ri(null,t,n,e,a,s);var l=Ti();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(n)?(l=!0,va(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ci(t),a.updater=Va,t.stateNode=a,a._reactInternals=t,_o(t,n,e,s),t=Ro(null,t,n,!0,l,s)):(t.tag=0,pe&&l&&ji(t),We(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(ra(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=vx(n),e=xt(n,e),a){case 0:t=Lo(null,t,n,e,s);break e;case 1:t=Yc(null,t,n,e,s);break e;case 11:t=Gc(null,t,n,e,s);break e;case 14:t=Jc(null,t,n,xt(n.type,e),s);break e}throw Error(O(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),Lo(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),Yc(e,t,n,a,s);case 3:e:{if(Fm(t),e===null)throw Error(O(387));n=t.pendingProps,l=t.memoizedState,a=l.element,om(e,t),ka(t,n,null,s);var o=t.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=ms(Error(O(423)),t),t=Xc(e,t,n,s,a);break e}else if(n!==a){a=ms(Error(O(424)),t),t=Xc(e,t,n,s,a);break e}else for(nt=rr(t.stateNode.containerInfo.firstChild),at=t,pe=!0,yt=null,s=am(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(cs(),n===a){t=Mt(e,t,s);break e}We(e,t,n,s)}t=t.child}return t;case 5:return im(t),e===null&&ko(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,vo(n,a)?o=null:l!==null&&vo(n,l)&&(t.flags|=32),Am(e,t),We(e,t,o,s),t.child;case 6:return e===null&&ko(t),null;case 13:return Dm(e,t,s);case 4:return Ei(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ds(t,null,n,s):We(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),Gc(e,t,n,a,s);case 7:return We(e,t,t.pendingProps,s),t.child;case 8:return We(e,t,t.pendingProps.children,s),t.child;case 12:return We(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,ce(wa,n._currentValue),n._currentValue=o,l!==null)if(bt(l.value,o)){if(l.children===a.children&&!Xe.current){t=Mt(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Dt(-1,s&-s),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Co(l.return,s,t),i.lanes|=s;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(O(341));o.lanes|=s,i=o.alternate,i!==null&&(i.lanes|=s),Co(o,s,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}We(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,as(t,s),a=ht(a),n=n(a),t.flags|=1,We(e,t,n,s),t.child;case 14:return n=t.type,a=xt(n,t.pendingProps),a=xt(n.type,a),Jc(e,t,n,a,s);case 15:return Rm(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:xt(n,a),ra(e,t),t.tag=1,Ze(n)?(e=!0,va(t)):e=!1,as(t,s),_m(t,n,a),_o(t,n,a,s),Ro(null,t,n,!0,e,s);case 19:return Im(e,t,s);case 22:return Tm(e,t,s)}throw Error(O(156,t.tag))};function Xm(e,t){return ku(e,t)}function jx(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,s,n){return new jx(e,t,s,n)}function zi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vx(e){if(typeof e=="function")return zi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oi)return 11;if(e===ii)return 14}return 2}function lr(e,t){var s=e.alternate;return s===null?(s=ut(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function aa(e,t,s,n,a,l){var o=2;if(n=e,typeof e=="function")zi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Wr:return Nr(s.children,a,l,t);case li:o=8,a|=8;break;case Yl:return e=ut(12,s,t,a|2),e.elementType=Yl,e.lanes=l,e;case Xl:return e=ut(13,s,t,a),e.elementType=Xl,e.lanes=l,e;case Zl:return e=ut(19,s,t,a),e.elementType=Zl,e.lanes=l,e;case iu:return Ga(s,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lu:o=10;break e;case ou:o=9;break e;case oi:o=11;break e;case ii:o=14;break e;case Vt:o=16,n=null;break e}throw Error(O(130,e==null?e:typeof e,""))}return t=ut(o,s,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Nr(e,t,s,n){return e=ut(7,e,n,t),e.lanes=s,e}function Ga(e,t,s,n){return e=ut(22,e,n,t),e.elementType=iu,e.lanes=s,e.stateNode={isHidden:!1},e}function $l(e,t,s){return e=ut(6,e,null,t),e.lanes=s,e}function Ml(e,t,s){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bx(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jl(0),this.expirationTimes=jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Hi(e,t,s,n,a,l,o,i,c){return e=new bx(e,t,s,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=ut(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ci(l),e}function Nx(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Zm(e){if(!e)return cr;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(O(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(O(171))}if(e.tag===1){var s=e.type;if(Ze(s))return Zu(e,s,t)}return t}function eh(e,t,s,n,a,l,o,i,c){return e=Hi(s,n,!0,e,a,l,o,i,c),e.context=Zm(null),s=e.current,n=qe(),a=ar(s),l=Dt(n,a),l.callback=t??null,sr(s,l,a),e.current.lanes=a,jn(e,a,n),et(e,n),e}function Ja(e,t,s,n){var a=t.current,l=qe(),o=ar(a);return s=Zm(s),t.context===null?t.context=s:t.pendingContext=s,t=Dt(l,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=sr(a,t,o),e!==null&&(vt(e,a,o,l),Zn(e,a,o)),o}function Aa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function id(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Wi(e,t){id(e,t),(e=e.alternate)&&id(e,t)}function wx(){return null}var th=typeof reportError=="function"?reportError:function(e){console.error(e)};function qi(e){this._internalRoot=e}Ya.prototype.render=qi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(O(409));Ja(e,t,null,null)};Ya.prototype.unmount=qi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pr(function(){Ja(null,e,null,null)}),t[Ot]=null}};function Ya(e){this._internalRoot=e}Ya.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Kt.length&&t!==0&&t<Kt[s].priority;s++);Kt.splice(s,0,e),s===0&&Fu(e)}};function Vi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cd(){}function Sx(e,t,s,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=Aa(o);l.call(d)}}var o=eh(t,n,e,0,null,!1,!1,"",cd);return e._reactRootContainer=o,e[Ot]=o.current,ln(e.nodeType===8?e.parentNode:e),Pr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var d=Aa(c);i.call(d)}}var c=Hi(e,0,!1,null,null,!1,!1,"",cd);return e._reactRootContainer=c,e[Ot]=c.current,ln(e.nodeType===8?e.parentNode:e),Pr(function(){Ja(t,c,s,n)}),c}function Za(e,t,s,n,a){var l=s._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=Aa(o);i.call(c)}}Ja(t,o,e,a)}else o=Sx(s,t,e,a,n);return Aa(o)}Lu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ms(t.pendingLanes);s!==0&&(ui(t,s|1),et(t,we()),!(ae&6)&&(hs=we()+500,hr()))}break;case 13:Pr(function(){var n=$t(e,1);if(n!==null){var a=qe();vt(n,e,1,a)}}),Wi(e,1)}};mi=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var s=qe();vt(t,e,134217728,s)}Wi(e,134217728)}};Ru=function(e){if(e.tag===13){var t=ar(e),s=$t(e,t);if(s!==null){var n=qe();vt(s,e,t,n)}Wi(e,t)}};Tu=function(){return oe};Au=function(e,t){var s=oe;try{return oe=e,t()}finally{oe=s}};co=function(e,t,s){switch(t){case"input":if(ro(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Ha(n);if(!a)throw Error(O(90));du(n),ro(n,a)}}}break;case"textarea":mu(e,s);break;case"select":t=s.value,t!=null&&ts(e,!!s.multiple,t,!1)}};ju=Mi;vu=Pr;var kx={usingClientEntryPoint:!1,Events:[bn,Kr,Ha,gu,yu,Mi]},Fs={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cx={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wu(e),e===null?null:e.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wn.isDisabled&&Wn.supportsFiber)try{Ma=Wn.inject(Cx),Et=Wn}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kx;ot.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vi(t))throw Error(O(200));return Nx(e,t,null,s)};ot.createRoot=function(e,t){if(!Vi(e))throw Error(O(299));var s=!1,n="",a=th;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Hi(e,1,!1,null,null,s,!1,n,a),e[Ot]=t.current,ln(e.nodeType===8?e.parentNode:e),new qi(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(O(188)):(e=Object.keys(e).join(","),Error(O(268,e)));return e=wu(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Pr(e)};ot.hydrate=function(e,t,s){if(!Xa(t))throw Error(O(200));return Za(null,e,t,!0,s)};ot.hydrateRoot=function(e,t,s){if(!Vi(e))throw Error(O(405));var n=s!=null&&s.hydratedSources||null,a=!1,l="",o=th;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=eh(t,null,e,1,s??null,a,!1,l,o),e[Ot]=t.current,ln(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Ya(t)};ot.render=function(e,t,s){if(!Xa(t))throw Error(O(200));return Za(null,e,t,!1,s)};ot.unmountComponentAtNode=function(e){if(!Xa(e))throw Error(O(40));return e._reactRootContainer?(Pr(function(){Za(null,null,e,!1,function(){e._reactRootContainer=null,e[Ot]=null})}),!0):!1};ot.unstable_batchedUpdates=Mi;ot.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Xa(s))throw Error(O(200));if(e==null||e._reactInternals===void 0)throw Error(O(38));return Za(e,t,s,!1,n)};ot.version="18.3.1-next-f1338f8080-20240426";function rh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rh)}catch(e){console.error(e)}}rh(),ru.exports=ot;var Ex=ru.exports,dd=Ex;Gl.createRoot=dd.createRoot,Gl.hydrateRoot=dd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},xn.apply(this,arguments)}var Xt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xt||(Xt={}));const ud="popstate";function _x(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:o,hash:i}=n.location;return Ho("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Fa(a)}return Lx(t,s,null,e)}function ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Px(){return Math.random().toString(36).substr(2,8)}function md(e,t){return{usr:e.state,key:e.key,idx:t}}function Ho(e,t,s,n){return s===void 0&&(s=null),xn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vs(t):t,{state:s,key:t&&t.key||n||Px()})}function Fa(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vs(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Lx(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,i=Xt.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(xn({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function p(){i=Xt.Pop;let j=u(),x=j==null?null:j-d;d=j,c&&c({action:i,location:y.location,delta:x})}function f(j,x){i=Xt.Push;let g=Ho(y.location,j,x);d=u()+1;let h=md(g,d),b=y.createHref(g);try{o.pushState(h,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(b)}l&&c&&c({action:i,location:y.location,delta:1})}function N(j,x){i=Xt.Replace;let g=Ho(y.location,j,x);d=u();let h=md(g,d),b=y.createHref(g);o.replaceState(h,"",b),l&&c&&c({action:i,location:y.location,delta:0})}function m(j){let x=a.location.origin!=="null"?a.location.origin:a.location.href,g=typeof j=="string"?j:Fa(j);return g=g.replace(/ $/,"%20"),ge(x,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,x)}let y={get action(){return i},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(ud,p),c=j,()=>{a.removeEventListener(ud,p),c=null}},createHref(j){return t(a,j)},createURL:m,encodeLocation(j){let x=m(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:N,go(j){return o.go(j)}};return y}var hd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hd||(hd={}));function Rx(e,t,s){return s===void 0&&(s="/"),Tx(e,t,s)}function Tx(e,t,s,n){let a=typeof t=="string"?vs(t):t,l=ps(a.pathname||"/",s);if(l==null)return null;let o=sh(e);Ax(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=Wx(l);i=zx(o[c],d)}return i}function sh(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(ge(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=or([n,c.relativePath]),u=s.concat(c);l.children&&l.children.length>0&&(ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),sh(l.children,t,u,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Ux(d,l.index),routesMeta:u})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of nh(l.path))a(l,o,c)}),t}function nh(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=nh(n.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ax(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Bx(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Fx=/^:[\w-]+$/,Dx=3,Ix=2,Ox=1,$x=10,Mx=-2,pd=e=>e==="*";function Ux(e,t){let s=e.split("/"),n=s.length;return s.some(pd)&&(n+=Mx),t&&(n+=Ix),s.filter(a=>!pd(a)).reduce((a,l)=>a+(Fx.test(l)?Dx:l===""?Ox:$x),n)}function Bx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function zx(e,t,s){let{routesMeta:n}=e,a={},l="/",o=[];for(let i=0;i<n.length;++i){let c=n[i],d=i===n.length-1,u=l==="/"?t:t.slice(l.length)||"/",p=Wo({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:or([l,p.pathname]),pathnameBase:Gx(or([l,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(l=or([l,p.pathnameBase]))}return o}function Wo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Hx(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((d,u,p)=>{let{paramName:f,isOptional:N}=u;if(f==="*"){let y=i[p]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const m=i[p];return N&&!m?d[f]=void 0:d[f]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Hx(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Qi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Wx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qi(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ps(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const qx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=e=>qx.test(e);function Qx(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?vs(e):e,l;if(s)if(Vx(s))l=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Qi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?l=fd(s.substring(1),"/"):l=fd(s,t)}else l=t;return{pathname:l,search:Jx(n),hash:Yx(a)}}function fd(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Ul(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kx(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Ki(e,t){let s=Kx(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Gi(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=vs(e):(a=xn({},e),ge(!a.pathname||!a.pathname.includes("?"),Ul("?","pathname","search",a)),ge(!a.pathname||!a.pathname.includes("#"),Ul("#","pathname","hash",a)),ge(!a.search||!a.search.includes("#"),Ul("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=s;else{let p=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),p-=1;a.pathname=f.join("/")}i=p>=0?t[p]:"/"}let c=Qx(a,i),d=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const or=e=>e.join("/").replace(/\/\/+/g,"/"),Gx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Yx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Xx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ah=["post","put","patch","delete"];new Set(ah);const Zx=["get",...ah];new Set(Zx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gn(){return gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},gn.apply(this,arguments)}const el=v.createContext(null),lh=v.createContext(null),zt=v.createContext(null),tl=v.createContext(null),Pt=v.createContext({outlet:null,matches:[],isDataRoute:!1}),oh=v.createContext(null);function eg(e,t){let{relative:s}=t===void 0?{}:t;bs()||ge(!1);let{basename:n,navigator:a}=v.useContext(zt),{hash:l,pathname:o,search:i}=rl(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:or([n,o])),a.createHref({pathname:c,search:i,hash:l})}function bs(){return v.useContext(tl)!=null}function Ar(){return bs()||ge(!1),v.useContext(tl).location}function ih(e){v.useContext(zt).static||v.useLayoutEffect(e)}function ze(){let{isDataRoute:e}=v.useContext(Pt);return e?fg():tg()}function tg(){bs()||ge(!1);let e=v.useContext(el),{basename:t,future:s,navigator:n}=v.useContext(zt),{matches:a}=v.useContext(Pt),{pathname:l}=Ar(),o=JSON.stringify(Ki(a,s.v7_relativeSplatPath)),i=v.useRef(!1);return ih(()=>{i.current=!0}),v.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){n.go(d);return}let p=Gi(d,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:or([t,p.pathname])),(u.replace?n.replace:n.push)(p,u.state,u)},[t,n,o,l,e])}const rg=v.createContext(null);function sg(e){let t=v.useContext(Pt).outlet;return t&&v.createElement(rg.Provider,{value:e},t)}function Ns(){let{matches:e}=v.useContext(Pt),t=e[e.length-1];return t?t.params:{}}function rl(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=v.useContext(zt),{matches:a}=v.useContext(Pt),{pathname:l}=Ar(),o=JSON.stringify(Ki(a,n.v7_relativeSplatPath));return v.useMemo(()=>Gi(e,JSON.parse(o),l,s==="path"),[e,o,l,s])}function ng(e,t){return ag(e,t)}function ag(e,t,s,n){bs()||ge(!1);let{navigator:a}=v.useContext(zt),{matches:l}=v.useContext(Pt),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ar(),u;if(t){var p;let j=typeof t=="string"?vs(t):t;c==="/"||(p=j.pathname)!=null&&p.startsWith(c)||ge(!1),u=j}else u=d;let f=u.pathname||"/",N=f;if(c!=="/"){let j=c.replace(/^\//,"").split("/");N="/"+f.replace(/^\//,"").split("/").slice(j.length).join("/")}let m=Rx(e,{pathname:N}),y=dg(m&&m.map(j=>Object.assign({},j,{params:Object.assign({},i,j.params),pathname:or([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:or([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,s,n);return t&&y?v.createElement(tl.Provider,{value:{location:gn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xt.Pop}},y):y}function lg(){let e=pg(),t=Xx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),s?v.createElement("pre",{style:a},s):null,null)}const og=v.createElement(lg,null);class ig extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?v.createElement(Pt.Provider,{value:this.props.routeContext},v.createElement(oh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cg(e){let{routeContext:t,match:s,children:n}=e,a=v.useContext(el);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),v.createElement(Pt.Provider,{value:t},n)}function dg(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,i=(a=s)==null?void 0:a.errors;if(i!=null){let u=o.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);u>=0||ge(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let p=o[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=u),p.route.id){let{loaderData:f,errors:N}=s,m=p.route.loader&&f[p.route.id]===void 0&&(!N||N[p.route.id]===void 0);if(p.route.lazy||m){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,p,f)=>{let N,m=!1,y=null,j=null;s&&(N=i&&p.route.id?i[p.route.id]:void 0,y=p.route.errorElement||og,c&&(d<0&&f===0?(xg("route-fallback"),m=!0,j=null):d===f&&(m=!0,j=p.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,f+1)),g=()=>{let h;return N?h=y:m?h=j:p.route.Component?h=v.createElement(p.route.Component,null):p.route.element?h=p.route.element:h=u,v.createElement(cg,{match:p,routeContext:{outlet:u,matches:x,isDataRoute:s!=null},children:h})};return s&&(p.route.ErrorBoundary||p.route.errorElement||f===0)?v.createElement(ig,{location:s.location,revalidation:s.revalidation,component:y,error:N,children:g(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):g()},null)}var ch=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ch||{}),dh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dh||{});function ug(e){let t=v.useContext(el);return t||ge(!1),t}function mg(e){let t=v.useContext(lh);return t||ge(!1),t}function hg(e){let t=v.useContext(Pt);return t||ge(!1),t}function uh(e){let t=hg(),s=t.matches[t.matches.length-1];return s.route.id||ge(!1),s.route.id}function pg(){var e;let t=v.useContext(oh),s=mg(),n=uh();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function fg(){let{router:e}=ug(ch.UseNavigateStable),t=uh(dh.UseNavigateStable),s=v.useRef(!1);return ih(()=>{s.current=!0}),v.useCallback(function(a,l){l===void 0&&(l={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,gn({fromRouteId:t},l)))},[e,t])}const xd={};function xg(e,t,s){xd[e]||(xd[e]=!0)}function gg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qo(e){let{to:t,replace:s,state:n,relative:a}=e;bs()||ge(!1);let{future:l,static:o}=v.useContext(zt),{matches:i}=v.useContext(Pt),{pathname:c}=Ar(),d=ze(),u=Gi(t,Ki(i,l.v7_relativeSplatPath),c,a==="path"),p=JSON.stringify(u);return v.useEffect(()=>d(JSON.parse(p),{replace:s,state:n,relative:a}),[d,p,a,s,n]),null}function yg(e){return sg(e.context)}function le(e){ge(!1)}function jg(e){let{basename:t="/",children:s=null,location:n,navigationType:a=Xt.Pop,navigator:l,static:o=!1,future:i}=e;bs()&&ge(!1);let c=t.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:l,static:o,future:gn({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof n=="string"&&(n=vs(n));let{pathname:u="/",search:p="",hash:f="",state:N=null,key:m="default"}=n,y=v.useMemo(()=>{let j=ps(u,c);return j==null?null:{location:{pathname:j,search:p,hash:f,state:N,key:m},navigationType:a}},[c,u,p,f,N,m,a]);return y==null?null:v.createElement(zt.Provider,{value:d},v.createElement(tl.Provider,{children:s,value:y}))}function vg(e){let{children:t,location:s}=e;return ng(Vo(t),s)}new Promise(()=>{});function Vo(e,t){t===void 0&&(t=[]);let s=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let l=[...t,a];if(n.type===v.Fragment){s.push.apply(s,Vo(n.props.children,l));return}n.type!==le&&ge(!1),!n.props.index||!n.props.children||ge(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Vo(n.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Da.apply(this,arguments)}function mh(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function bg(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ng(e,t){return e.button===0&&(!t||t==="_self")&&!bg(e)}function Qo(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function wg(e,t){let s=Qo(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(l=>{s.append(a,l)})}),s}const Sg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Cg="6";try{window.__reactRouterVersion=Cg}catch{}const Eg=v.createContext({isTransitioning:!1}),_g="startTransition",gd=fp[_g];function Pg(e){let{basename:t,children:s,future:n,window:a}=e,l=v.useRef();l.current==null&&(l.current=_x({window:a,v5Compat:!0}));let o=l.current,[i,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=v.useCallback(p=>{d&&gd?gd(()=>c(p)):c(p)},[c,d]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>gg(n),[n]),v.createElement(jg,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:o,future:n})}const Lg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G=v.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:u,viewTransition:p}=t,f=mh(t,Sg),{basename:N}=v.useContext(zt),m,y=!1;if(typeof d=="string"&&Rg.test(d)&&(m=d,Lg))try{let h=new URL(window.location.href),b=d.startsWith("//")?new URL(h.protocol+d):new URL(d),S=ps(b.pathname,N);b.origin===h.origin&&S!=null?d=S+b.search+b.hash:y=!0}catch{}let j=eg(d,{relative:a}),x=Fg(d,{replace:o,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:p});function g(h){n&&n(h),h.defaultPrevented||x(h)}return v.createElement("a",Da({},f,{href:m||j,onClick:y||l?n:g,ref:s,target:c}))}),Tg=v.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:c,viewTransition:d,children:u}=t,p=mh(t,kg),f=rl(c,{relative:p.relative}),N=Ar(),m=v.useContext(lh),{navigator:y,basename:j}=v.useContext(zt),x=m!=null&&Ig(f)&&d===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,h=N.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;a||(h=h.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&j&&(b=ps(b,j)||b);const S=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let k=h===g||!o&&h.startsWith(g)&&h.charAt(S)==="/",w=b!=null&&(b===g||!o&&b.startsWith(g)&&b.charAt(g.length)==="/"),E={isActive:k,isPending:w,isTransitioning:x},L=k?n:void 0,D;typeof l=="function"?D=l(E):D=[l,k?"active":null,w?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(E):i;return v.createElement(G,Da({},p,{"aria-current":L,className:D,ref:s,style:I,to:c,viewTransition:d}),typeof u=="function"?u(E):u)});var Ko;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ko||(Ko={}));var yd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yd||(yd={}));function Ag(e){let t=v.useContext(el);return t||ge(!1),t}function Fg(e,t){let{target:s,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=ze(),d=Ar(),u=rl(e,{relative:o});return v.useCallback(p=>{if(Ng(p,s)){p.preventDefault();let f=n!==void 0?n:Fa(d)===Fa(u);c(e,{replace:f,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,u,n,a,s,e,l,o,i])}function Dg(e){let t=v.useRef(Qo(e)),s=v.useRef(!1),n=Ar(),a=v.useMemo(()=>wg(n.search,s.current?null:t.current),[n.search]),l=ze(),o=v.useCallback((i,c)=>{const d=Qo(typeof i=="function"?i(a):i);s.current=!0,l("?"+d,c)},[l,a]);return[a,o]}function Ig(e,t){t===void 0&&(t={});let s=v.useContext(Eg);s==null&&ge(!1);let{basename:n}=Ag(Ko.useViewTransitionState),a=rl(e,{relative:t.relative});if(!s.isTransitioning)return!1;let l=ps(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=ps(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Wo(a.pathname,o)!=null||Wo(a.pathname,l)!=null}const Og={},jd=e=>{let t;const s=new Set,n=(u,p)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const N=t;t=p??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(m=>m(t,N))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(s.add(u),()=>s.delete(u)),destroy:()=>{(Og?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=t=e(n,a,c);return c},$g=e=>e?jd(e):jd;var hh={exports:{}},ph={},fh={exports:{}},xh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=v;function Mg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ug=typeof Object.is=="function"?Object.is:Mg,Bg=fs.useState,zg=fs.useEffect,Hg=fs.useLayoutEffect,Wg=fs.useDebugValue;function qg(e,t){var s=t(),n=Bg({inst:{value:s,getSnapshot:t}}),a=n[0].inst,l=n[1];return Hg(function(){a.value=s,a.getSnapshot=t,Bl(a)&&l({inst:a})},[e,s,t]),zg(function(){return Bl(a)&&l({inst:a}),e(function(){Bl(a)&&l({inst:a})})},[e]),Wg(s),s}function Bl(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ug(e,s)}catch{return!0}}function Vg(e,t){return t()}var Qg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vg:qg;xh.useSyncExternalStore=fs.useSyncExternalStore!==void 0?fs.useSyncExternalStore:Qg;fh.exports=xh;var Kg=fh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=v,Gg=Kg;function Jg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yg=typeof Object.is=="function"?Object.is:Jg,Xg=Gg.useSyncExternalStore,Zg=sl.useRef,ey=sl.useEffect,ty=sl.useMemo,ry=sl.useDebugValue;ph.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var l=Zg(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=ty(function(){function c(N){if(!d){if(d=!0,u=N,N=n(N),a!==void 0&&o.hasValue){var m=o.value;if(a(m,N))return p=m}return p=N}if(m=p,Yg(u,N))return m;var y=n(N);return a!==void 0&&a(m,y)?(u=N,m):(u=N,p=y)}var d=!1,u,p,f=s===void 0?null:s;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,s,n,a]);var i=Xg(e,l[0],l[1]);return ey(function(){o.hasValue=!0,o.value=i},[i]),ry(i),i};hh.exports=ph;var sy=hh.exports;const ny=Wd(sy),gh={},{useDebugValue:ay}=$a,{useSyncExternalStoreWithSelector:ly}=ny;let vd=!1;const oy=e=>e;function iy(e,t=oy,s){(gh?"production":void 0)!=="production"&&s&&!vd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vd=!0);const n=ly(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return ay(n),n}const bd=e=>{(gh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?$g(e):e,s=(n,a)=>iy(t,n,a);return Object.assign(s,t),s},Fr=e=>e?bd(e):bd;function yh(e,t){return function(){return e.apply(t,arguments)}}const{toString:cy}=Object.prototype,{getPrototypeOf:Ji}=Object,{iterator:nl,toStringTag:jh}=Symbol,al=(e=>t=>{const s=cy.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Nt=e=>(e=e.toLowerCase(),t=>al(t)===e),ll=e=>t=>typeof t===e,{isArray:ws}=Array,xs=ll("undefined");function wn(e){return e!==null&&!xs(e)&&e.constructor!==null&&!xs(e.constructor)&&tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vh=Nt("ArrayBuffer");function dy(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&vh(e.buffer),t}const uy=ll("string"),tt=ll("function"),bh=ll("number"),Sn=e=>e!==null&&typeof e=="object",my=e=>e===!0||e===!1,la=e=>{if(al(e)!=="object")return!1;const t=Ji(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(jh in e)&&!(nl in e)},hy=e=>{if(!Sn(e)||wn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},py=Nt("Date"),fy=Nt("File"),xy=Nt("Blob"),gy=Nt("FileList"),yy=e=>Sn(e)&&tt(e.pipe),jy=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||tt(e.append)&&((t=al(e))==="formdata"||t==="object"&&tt(e.toString)&&e.toString()==="[object FormData]"))},vy=Nt("URLSearchParams"),[by,Ny,wy,Sy]=["ReadableStream","Request","Response","Headers"].map(Nt),ky=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kn(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),ws(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(wn(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(n=0;n<o;n++)i=l[n],t.call(null,e[i],i,e)}}function Nh(e,t){if(wn(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const vr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wh=e=>!xs(e)&&e!==vr;function Go(){const{caseless:e,skipUndefined:t}=wh(this)&&this||{},s={},n=(a,l)=>{const o=e&&Nh(s,l)||l;la(s[o])&&la(a)?s[o]=Go(s[o],a):la(a)?s[o]=Go({},a):ws(a)?s[o]=a.slice():(!t||!xs(a))&&(s[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&kn(arguments[a],n);return s}const Cy=(e,t,s,{allOwnKeys:n}={})=>(kn(t,(a,l)=>{s&&tt(a)?Object.defineProperty(e,l,{value:yh(a,s),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),Ey=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_y=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Py=(e,t,s,n)=>{let a,l,o;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!n||n(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=s!==!1&&Ji(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Ly=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},Ry=e=>{if(!e)return null;if(ws(e))return e;let t=e.length;if(!bh(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Ty=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ji(Uint8Array)),Ay=(e,t)=>{const n=(e&&e[nl]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},Fy=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},Dy=Nt("HTMLFormElement"),Iy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),Nd=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Oy=Nt("RegExp"),Sh=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};kn(s,(a,l)=>{let o;(o=t(a,l,e))!==!1&&(n[l]=o||a)}),Object.defineProperties(e,n)},$y=e=>{Sh(e,(t,s)=>{if(tt(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(tt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},My=(e,t)=>{const s={},n=a=>{a.forEach(l=>{s[l]=!0})};return ws(e)?n(e):n(String(e).split(t)),s},Uy=()=>{},By=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function zy(e){return!!(e&&tt(e.append)&&e[jh]==="FormData"&&e[nl])}const Hy=e=>{const t=new Array(10),s=(n,a)=>{if(Sn(n)){if(t.indexOf(n)>=0)return;if(wn(n))return n;if(!("toJSON"in n)){t[a]=n;const l=ws(n)?[]:{};return kn(n,(o,i)=>{const c=s(o,a+1);!xs(c)&&(l[i]=c)}),t[a]=void 0,l}}return n};return s(e,0)},Wy=Nt("AsyncFunction"),qy=e=>e&&(Sn(e)||tt(e))&&tt(e.then)&&tt(e.catch),kh=((e,t)=>e?setImmediate:t?((s,n)=>(vr.addEventListener("message",({source:a,data:l})=>{a===vr&&l===s&&n.length&&n.shift()()},!1),a=>{n.push(a),vr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",tt(vr.postMessage)),Vy=typeof queueMicrotask<"u"?queueMicrotask.bind(vr):typeof process<"u"&&process.nextTick||kh,Qy=e=>e!=null&&tt(e[nl]),C={isArray:ws,isArrayBuffer:vh,isBuffer:wn,isFormData:jy,isArrayBufferView:dy,isString:uy,isNumber:bh,isBoolean:my,isObject:Sn,isPlainObject:la,isEmptyObject:hy,isReadableStream:by,isRequest:Ny,isResponse:wy,isHeaders:Sy,isUndefined:xs,isDate:py,isFile:fy,isBlob:xy,isRegExp:Oy,isFunction:tt,isStream:yy,isURLSearchParams:vy,isTypedArray:Ty,isFileList:gy,forEach:kn,merge:Go,extend:Cy,trim:ky,stripBOM:Ey,inherits:_y,toFlatObject:Py,kindOf:al,kindOfTest:Nt,endsWith:Ly,toArray:Ry,forEachEntry:Ay,matchAll:Fy,isHTMLForm:Dy,hasOwnProperty:Nd,hasOwnProp:Nd,reduceDescriptors:Sh,freezeMethods:$y,toObjectSet:My,toCamelCase:Iy,noop:Uy,toFiniteNumber:By,findKey:Nh,global:vr,isContextDefined:wh,isSpecCompliantForm:zy,toJSONObject:Hy,isAsyncFn:Wy,isThenable:qy,setImmediate:kh,asap:Vy,isIterable:Qy};let V=class Ch extends Error{static from(t,s,n,a,l,o){const i=new Ch(t.message,s||t.code,n,a,l);return i.cause=t,i.name=t.name,o&&Object.assign(i,o),i}constructor(t,s,n,a,l){super(t),this.name="AxiosError",this.isAxiosError=!0,s&&(this.code=s),n&&(this.config=n),a&&(this.request=a),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}};V.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";V.ERR_BAD_OPTION="ERR_BAD_OPTION";V.ECONNABORTED="ECONNABORTED";V.ETIMEDOUT="ETIMEDOUT";V.ERR_NETWORK="ERR_NETWORK";V.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";V.ERR_DEPRECATED="ERR_DEPRECATED";V.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";V.ERR_BAD_REQUEST="ERR_BAD_REQUEST";V.ERR_CANCELED="ERR_CANCELED";V.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";V.ERR_INVALID_URL="ERR_INVALID_URL";const Ky=null;function Jo(e){return C.isPlainObject(e)||C.isArray(e)}function Eh(e){return C.endsWith(e,"[]")?e.slice(0,-2):e}function wd(e,t,s){return e?e.concat(t).map(function(a,l){return a=Eh(a),!s&&l?"["+a+"]":a}).join(s?".":""):t}function Gy(e){return C.isArray(e)&&!e.some(Jo)}const Jy=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function ol(e,t,s){if(!C.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=C.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,j){return!C.isUndefined(j[y])});const n=s.metaTokens,a=s.visitor||u,l=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(a))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(C.isDate(m))return m.toISOString();if(C.isBoolean(m))return m.toString();if(!c&&C.isBlob(m))throw new V("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(m)||C.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,y,j){let x=m;if(m&&!j&&typeof m=="object"){if(C.endsWith(y,"{}"))y=n?y:y.slice(0,-2),m=JSON.stringify(m);else if(C.isArray(m)&&Gy(m)||(C.isFileList(m)||C.endsWith(y,"[]"))&&(x=C.toArray(m)))return y=Eh(y),x.forEach(function(h,b){!(C.isUndefined(h)||h===null)&&t.append(o===!0?wd([y],b,l):o===null?y:y+"[]",d(h))}),!1}return Jo(m)?!0:(t.append(wd(j,y,l),d(m)),!1)}const p=[],f=Object.assign(Jy,{defaultVisitor:u,convertValue:d,isVisitable:Jo});function N(m,y){if(!C.isUndefined(m)){if(p.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(m),C.forEach(m,function(x,g){(!(C.isUndefined(x)||x===null)&&a.call(t,x,C.isString(g)?g.trim():g,y,f))===!0&&N(x,y?y.concat(g):[g])}),p.pop()}}if(!C.isObject(e))throw new TypeError("data must be an object");return N(e),t}function Sd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Yi(e,t){this._pairs=[],e&&ol(e,this,t)}const _h=Yi.prototype;_h.append=function(t,s){this._pairs.push([t,s])};_h.toString=function(t){const s=t?function(n){return t.call(this,n,Sd)}:Sd;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function Yy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ph(e,t,s){if(!t)return e;const n=s&&s.encode||Yy,a=C.isFunction(s)?{serialize:s}:s,l=a&&a.serialize;let o;if(l?o=l(t,a):o=C.isURLSearchParams(t)?t.toString():new Yi(t,a).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class kd{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Lh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xy=typeof URLSearchParams<"u"?URLSearchParams:Yi,Zy=typeof FormData<"u"?FormData:null,e0=typeof Blob<"u"?Blob:null,t0={isBrowser:!0,classes:{URLSearchParams:Xy,FormData:Zy,Blob:e0},protocols:["http","https","file","blob","url","data"]},Xi=typeof window<"u"&&typeof document<"u",Yo=typeof navigator=="object"&&navigator||void 0,r0=Xi&&(!Yo||["ReactNative","NativeScript","NS"].indexOf(Yo.product)<0),s0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",n0=Xi&&window.location.href||"http://localhost",a0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xi,hasStandardBrowserEnv:r0,hasStandardBrowserWebWorkerEnv:s0,navigator:Yo,origin:n0},Symbol.toStringTag,{value:"Module"})),Ue={...a0,...t0};function l0(e,t){return ol(e,new Ue.classes.URLSearchParams,{visitor:function(s,n,a,l){return Ue.isNode&&C.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function o0(e){return C.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function i0(e){const t={},s=Object.keys(e);let n;const a=s.length;let l;for(n=0;n<a;n++)l=s[n],t[l]=e[l];return t}function Rh(e){function t(s,n,a,l){let o=s[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=s.length;return o=!o&&C.isArray(a)?a.length:o,c?(C.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!i):((!a[o]||!C.isObject(a[o]))&&(a[o]=[]),t(s,n,a[o],l)&&C.isArray(a[o])&&(a[o]=i0(a[o])),!i)}if(C.isFormData(e)&&C.isFunction(e.entries)){const s={};return C.forEachEntry(e,(n,a)=>{t(o0(n),a,s,0)}),s}return null}function c0(e,t,s){if(C.isString(e))try{return(t||JSON.parse)(e),C.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Cn={transitional:Lh,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,l=C.isObject(t);if(l&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return a?JSON.stringify(Rh(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t)||C.isReadableStream(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return l0(t,this.formSerializer).toString();if((i=C.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ol(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),c0(t)):t}],transformResponse:[function(t){const s=this.transitional||Cn.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(C.isResponse(t)||C.isReadableStream(t))return t;if(t&&C.isString(t)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?V.from(i,V.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ue.classes.FormData,Blob:Ue.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],e=>{Cn.headers[e]={}});const d0=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),u0=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||t[s]&&d0[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},Cd=Symbol("internals");function Ds(e){return e&&String(e).trim().toLowerCase()}function oa(e){return e===!1||e==null?e:C.isArray(e)?e.map(oa):String(e)}function m0(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const h0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function zl(e,t,s,n,a){if(C.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!C.isString(t)){if(C.isString(n))return t.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(t)}}function p0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function f0(e,t){const s=C.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,l,o){return this[n].call(this,t,a,l,o)},configurable:!0})})}let rt=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function l(i,c,d){const u=Ds(c);if(!u)throw new Error("header name must be a non-empty string");const p=C.findKey(a,u);(!p||a[p]===void 0||d===!0||d===void 0&&a[p]!==!1)&&(a[p||c]=oa(i))}const o=(i,c)=>C.forEach(i,(d,u)=>l(d,u,c));if(C.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(C.isString(t)&&(t=t.trim())&&!h0(t))o(u0(t),s);else if(C.isObject(t)&&C.isIterable(t)){let i={},c,d;for(const u of t){if(!C.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?C.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(i,s)}else t!=null&&l(s,t,n);return this}get(t,s){if(t=Ds(t),t){const n=C.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return m0(a);if(C.isFunction(s))return s.call(this,a,n);if(C.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Ds(t),t){const n=C.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||zl(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function l(o){if(o=Ds(o),o){const i=C.findKey(n,o);i&&(!s||zl(n,n[i],i,s))&&(delete n[i],a=!0)}}return C.isArray(t)?t.forEach(l):l(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const l=s[n];(!t||zl(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const s=this,n={};return C.forEach(this,(a,l)=>{const o=C.findKey(n,l);if(o){s[o]=oa(a),delete s[l];return}const i=t?p0(l):String(l).trim();i!==l&&delete s[l],s[i]=oa(a),n[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return C.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&C.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Cd]=this[Cd]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=Ds(o);n[i]||(f0(a,o),n[i]=!0)}return C.isArray(t)?t.forEach(l):l(t),this}};rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(rt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});C.freezeMethods(rt);function Hl(e,t){const s=this||Cn,n=t||s,a=rt.from(n.headers);let l=n.data;return C.forEach(e,function(i){l=i.call(s,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Th(e){return!!(e&&e.__CANCEL__)}let En=class extends V{constructor(t,s,n){super(t??"canceled",V.ERR_CANCELED,s,n),this.name="CanceledError",this.__CANCEL__=!0}};function Ah(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new V("Request failed with status code "+s.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function x0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function g0(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,l=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[l];o||(o=d),s[a]=c,n[a]=d;let p=l,f=0;for(;p!==a;)f+=s[p++],p=p%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-o<t)return;const N=u&&d-u;return N?Math.round(f*1e3/N):void 0}}function y0(e,t){let s=0,n=1e3/t,a,l;const o=(d,u=Date.now())=>{s=u,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const u=Date.now(),p=u-s;p>=n?o(d,u):(a=d,l||(l=setTimeout(()=>{l=null,o(a)},n-p)))},()=>a&&o(a)]}const Ia=(e,t,s=3)=>{let n=0;const a=g0(50,250);return y0(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-n,d=a(c),u=o<=i;n=o;const p={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-o)/d:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(p)},s)},Ed=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},_d=e=>(...t)=>C.asap(()=>e(...t)),j0=Ue.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Ue.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Ue.origin),Ue.navigator&&/(msie|trident)/i.test(Ue.navigator.userAgent)):()=>!0,v0=Ue.hasStandardBrowserEnv?{write(e,t,s,n,a,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];C.isNumber(s)&&i.push(`expires=${new Date(s).toUTCString()}`),C.isString(n)&&i.push(`path=${n}`),C.isString(a)&&i.push(`domain=${a}`),l===!0&&i.push("secure"),C.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function b0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function N0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Fh(e,t,s){let n=!b0(t);return e&&(n||s==!1)?N0(e,t):t}const Pd=e=>e instanceof rt?{...e}:e;function Lr(e,t){t=t||{};const s={};function n(d,u,p,f){return C.isPlainObject(d)&&C.isPlainObject(u)?C.merge.call({caseless:f},d,u):C.isPlainObject(u)?C.merge({},u):C.isArray(u)?u.slice():u}function a(d,u,p,f){if(C.isUndefined(u)){if(!C.isUndefined(d))return n(void 0,d,p,f)}else return n(d,u,p,f)}function l(d,u){if(!C.isUndefined(u))return n(void 0,u)}function o(d,u){if(C.isUndefined(u)){if(!C.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function i(d,u,p){if(p in t)return n(d,u);if(p in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(d,u,p)=>a(Pd(d),Pd(u),p,!0)};return C.forEach(Object.keys({...e,...t}),function(u){const p=c[u]||a,f=p(e[u],t[u],u);C.isUndefined(f)&&p!==i||(s[u]=f)}),s}const Dh=e=>{const t=Lr({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=t;if(t.headers=o=rt.from(o),t.url=Ph(Fh(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),C.isFormData(s)){if(Ue.hasStandardBrowserEnv||Ue.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(C.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,p])=>{d.includes(u.toLowerCase())&&o.set(u,p)})}}if(Ue.hasStandardBrowserEnv&&(n&&C.isFunction(n)&&(n=n(t)),n||n!==!1&&j0(t.url))){const c=a&&l&&v0.read(l);c&&o.set(a,c)}return t},w0=typeof XMLHttpRequest<"u",S0=w0&&function(e){return new Promise(function(s,n){const a=Dh(e);let l=a.data;const o=rt.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=a,u,p,f,N,m;function y(){N&&N(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function x(){if(!j)return;const h=rt.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),S={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:h,config:e,request:j};Ah(function(w){s(w),y()},function(w){n(w),y()},S),j=null}"onloadend"in j?j.onloadend=x:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(x)},j.onabort=function(){j&&(n(new V("Request aborted",V.ECONNABORTED,e,j)),j=null)},j.onerror=function(b){const S=b&&b.message?b.message:"Network Error",k=new V(S,V.ERR_NETWORK,e,j);k.event=b||null,n(k),j=null},j.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||Lh;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new V(b,S.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,e,j)),j=null},l===void 0&&o.setContentType(null),"setRequestHeader"in j&&C.forEach(o.toJSON(),function(b,S){j.setRequestHeader(S,b)}),C.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),i&&i!=="json"&&(j.responseType=a.responseType),d&&([f,m]=Ia(d,!0),j.addEventListener("progress",f)),c&&j.upload&&([p,N]=Ia(c),j.upload.addEventListener("progress",p),j.upload.addEventListener("loadend",N)),(a.cancelToken||a.signal)&&(u=h=>{j&&(n(!h||h.type?new En(null,e,j):h),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const g=x0(a.url);if(g&&Ue.protocols.indexOf(g)===-1){n(new V("Unsupported protocol "+g+":",V.ERR_BAD_REQUEST,e));return}j.send(l||null)})},k0=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const l=function(d){if(!a){a=!0,i();const u=d instanceof Error?d:this.reason;n.abort(u instanceof V?u:new En(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,l(new V(`timeout of ${t}ms exceeded`,V.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>C.asap(i),c}},C0=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},E0=async function*(e,t){for await(const s of _0(e))yield*C0(s,t)},_0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},Ld=(e,t,s,n)=>{const a=E0(e,t);let l=0,o,i=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){i(),c.close();return}let p=u.byteLength;if(s){let f=l+=p;s(f)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},Rd=64*1024,{isFunction:qn}=C,P0=(({Request:e,Response:t})=>({Request:e,Response:t}))(C.global),{ReadableStream:Td,TextEncoder:Ad}=C.global,Fd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},L0=e=>{e=C.merge.call({skipUndefined:!0},P0,e);const{fetch:t,Request:s,Response:n}=e,a=t?qn(t):typeof fetch=="function",l=qn(s),o=qn(n);if(!a)return!1;const i=a&&qn(Td),c=a&&(typeof Ad=="function"?(m=>y=>m.encode(y))(new Ad):async m=>new Uint8Array(await new s(m).arrayBuffer())),d=l&&i&&Fd(()=>{let m=!1;const y=new s(Ue.origin,{body:new Td,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!y}),u=o&&i&&Fd(()=>C.isReadableStream(new n("").body)),p={stream:u&&(m=>m.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!p[m]&&(p[m]=(y,j)=>{let x=y&&y[m];if(x)return x.call(y);throw new V(`Response type '${m}' is not supported`,V.ERR_NOT_SUPPORT,j)})});const f=async m=>{if(m==null)return 0;if(C.isBlob(m))return m.size;if(C.isSpecCompliantForm(m))return(await new s(Ue.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(C.isArrayBufferView(m)||C.isArrayBuffer(m))return m.byteLength;if(C.isURLSearchParams(m)&&(m=m+""),C.isString(m))return(await c(m)).byteLength},N=async(m,y)=>{const j=C.toFiniteNumber(m.getContentLength());return j??f(y)};return async m=>{let{url:y,method:j,data:x,signal:g,cancelToken:h,timeout:b,onDownloadProgress:S,onUploadProgress:k,responseType:w,headers:E,withCredentials:L="same-origin",fetchOptions:D}=Dh(m),I=t||fetch;w=w?(w+"").toLowerCase():"text";let W=k0([g,h&&h.toAbortSignal()],b),M=null;const F=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let q;try{if(k&&d&&j!=="get"&&j!=="head"&&(q=await N(E,x))!==0){let Q=new s(y,{method:"POST",body:x,duplex:"half"}),X;if(C.isFormData(x)&&(X=Q.headers.get("content-type"))&&E.setContentType(X),Q.body){const[je,ee]=Ed(q,Ia(_d(k)));x=Ld(Q.body,Rd,je,ee)}}C.isString(L)||(L=L?"include":"omit");const $=l&&"credentials"in s.prototype,P={...D,signal:W,method:j.toUpperCase(),headers:E.normalize().toJSON(),body:x,duplex:"half",credentials:$?L:void 0};M=l&&new s(y,P);let _=await(l?I(M,D):I(y,P));const A=u&&(w==="stream"||w==="response");if(u&&(S||A&&F)){const Q={};["status","statusText","headers"].forEach(Se=>{Q[Se]=_[Se]});const X=C.toFiniteNumber(_.headers.get("content-length")),[je,ee]=S&&Ed(X,Ia(_d(S),!0))||[];_=new n(Ld(_.body,Rd,je,()=>{ee&&ee(),F&&F()}),Q)}w=w||"text";let B=await p[C.findKey(p,w)||"text"](_,m);return!A&&F&&F(),await new Promise((Q,X)=>{Ah(Q,X,{data:B,headers:rt.from(_.headers),status:_.status,statusText:_.statusText,config:m,request:M})})}catch($){throw F&&F(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new V("Network Error",V.ERR_NETWORK,m,M),{cause:$.cause||$}):V.from($,$&&$.code,m,M)}}},R0=new Map,Ih=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:a}=t,l=[n,a,s];let o=l.length,i=o,c,d,u=R0;for(;i--;)c=l[i],d=u.get(c),d===void 0&&u.set(c,d=i?new Map:L0(t)),u=d;return d};Ih();const Zi={http:Ky,xhr:S0,fetch:{get:Ih}};C.forEach(Zi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Dd=e=>`- ${e}`,T0=e=>C.isFunction(e)||e===null||e===!1;function A0(e,t){e=C.isArray(e)?e:[e];const{length:s}=e;let n,a;const l={};for(let o=0;o<s;o++){n=e[o];let i;if(a=n,!T0(n)&&(a=Zi[(i=String(n)).toLowerCase()],a===void 0))throw new V(`Unknown adapter '${i}'`);if(a&&(C.isFunction(a)||(a=a.get(t))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=s?o.length>1?`since :
`+o.map(Dd).join(`
`):" "+Dd(o[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a}const Oh={getAdapter:A0,adapters:Zi};function Wl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new En(null,e)}function Id(e){return Wl(e),e.headers=rt.from(e.headers),e.data=Hl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Oh.getAdapter(e.adapter||Cn.adapter,e)(e).then(function(n){return Wl(e),n.data=Hl.call(e,e.transformResponse,n),n.headers=rt.from(n.headers),n},function(n){return Th(n)||(Wl(e),n&&n.response&&(n.response.data=Hl.call(e,e.transformResponse,n.response),n.response.headers=rt.from(n.response.headers))),Promise.reject(n)})}const $h="1.13.4",il={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{il[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Od={};il.transitional=function(t,s,n){function a(l,o){return"[Axios v"+$h+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,i)=>{if(t===!1)throw new V(a(o," has been removed"+(s?" in "+s:"")),V.ERR_DEPRECATED);return s&&!Od[o]&&(Od[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(l,o,i):!0}};il.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function F0(e,t,s){if(typeof e!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],o=t[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new V("option "+l+" must be "+c,V.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new V("Unknown option "+l,V.ERR_BAD_OPTION)}}const ia={assertOptions:F0,validators:il},St=ia.validators;let wr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kd,response:new kd}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Lr(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:l}=s;n!==void 0&&ia.assertOptions(n,{silentJSONParsing:St.transitional(St.boolean),forcedJSONParsing:St.transitional(St.boolean),clarifyTimeoutError:St.transitional(St.boolean)},!1),a!=null&&(C.isFunction(a)?s.paramsSerializer={serialize:a}:ia.assertOptions(a,{encode:St.function,serialize:St.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ia.assertOptions(s,{baseUrl:St.spelling("baseURL"),withXsrfToken:St.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=l&&C.merge(l.common,l[s.method]);l&&C.forEach(["delete","get","head","post","put","patch","common"],m=>{delete l[m]}),s.headers=rt.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,p=0,f;if(!c){const m=[Id.bind(this),void 0];for(m.unshift(...i),m.push(...d),f=m.length,u=Promise.resolve(s);p<f;)u=u.then(m[p++],m[p++]);return u}f=i.length;let N=s;for(;p<f;){const m=i[p++],y=i[p++];try{N=m(N)}catch(j){y.call(this,j);break}}try{u=Id.call(this,N)}catch(m){return Promise.reject(m)}for(p=0,f=d.length;p<f;)u=u.then(d[p++],d[p++]);return u}getUri(t){t=Lr(this.defaults,t);const s=Fh(t.baseURL,t.url,t.allowAbsoluteUrls);return Ph(s,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){wr.prototype[t]=function(s,n){return this.request(Lr(n||{},{method:t,url:s,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(t){function s(n){return function(l,o,i){return this.request(Lr(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}wr.prototype[t]=s(),wr.prototype[t+"Form"]=s(!0)});let D0=class Mh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{n.subscribe(i),l=i}).then(a);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,i){n.reason||(n.reason=new En(l,o,i),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Mh(function(a){t=a}),cancel:t}}};function I0(e){return function(s){return e.apply(null,s)}}function O0(e){return C.isObject(e)&&e.isAxiosError===!0}const Xo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xo).forEach(([e,t])=>{Xo[t]=e});function Uh(e){const t=new wr(e),s=yh(wr.prototype.request,t);return C.extend(s,wr.prototype,t,{allOwnKeys:!0}),C.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return Uh(Lr(e,a))},s}const he=Uh(Cn);he.Axios=wr;he.CanceledError=En;he.CancelToken=D0;he.isCancel=Th;he.VERSION=$h;he.toFormData=ol;he.AxiosError=V;he.Cancel=he.CanceledError;he.all=function(t){return Promise.all(t)};he.spread=I0;he.isAxiosError=O0;he.mergeConfig=Lr;he.AxiosHeaders=rt;he.formToJSON=e=>Rh(C.isHTMLForm(e)?new FormData(e):e);he.getAdapter=Oh.getAdapter;he.HttpStatusCode=Xo;he.default=he;const{Axios:Xj,AxiosError:$0,CanceledError:Zj,isCancel:ev,CancelToken:tv,VERSION:rv,all:sv,Cancel:nv,isAxiosError:av,spread:lv,toFormData:ov,AxiosHeaders:iv,HttpStatusCode:cv,formToJSON:dv,getAdapter:uv,mergeConfig:mv}=he,M0="http://localhost:3000/api/v1",U=he.create({baseURL:M0,headers:{"Content-Type":"application/json"}});U.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));U.interceptors.response.use(e=>e,async e=>{var s;const t=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const n=localStorage.getItem("refreshToken");if(!n)return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e);const a=await U.post("/auth/refresh",{refreshToken:n}),{accessToken:l,refreshToken:o}=a.data;return localStorage.setItem("accessToken",l),localStorage.setItem("refreshToken",o),t.headers.Authorization=`Bearer ${l}`,U(t)}catch(n){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(n)}}return Promise.reject(e)});const xr={register:(e,t,s)=>U.post("/auth/register",{username:e,email:t,password:s}),login:(e,t)=>U.post("/auth/login",{username:e,password:t}),refresh:e=>U.post("/auth/refresh",{refreshToken:e}),logout:()=>U.post("/auth/logout"),getMe:()=>U.get("/auth/me"),getAllUsers:()=>U.get("/auth/users"),updateUser:(e,t)=>U.put(`/auth/users/${e}`,t)},U0={getAll:()=>U.get("/units")},$e={getAll:()=>U.get("/cost-items"),getCostItems:e=>U.get("/cost-items",{params:e}),getById:e=>U.get(`/cost-items/${e}`),create:e=>U.post("/cost-items",e),update:(e,t)=>U.put(`/cost-items/${e}`,t),delete:e=>U.delete(`/cost-items/${e}`),getCategories:()=>U.get("/cost-categories"),createCategory:e=>U.post("/cost-categories",e),updateCategory:(e,t)=>U.put(`/cost-categories/${e}`,t),deleteCategory:e=>U.delete(`/cost-categories/${e}`),getSubElements:()=>U.get("/cost-sub-elements"),getSubElementsByCategory:e=>U.get("/cost-sub-elements",{params:{category_id:e}}),createSubElement:e=>U.post("/cost-sub-elements",e),updateSubElement:(e,t)=>U.put(`/cost-sub-elements/${e}`,t),deleteSubElement:e=>U.delete(`/cost-sub-elements/${e}`),getUnits:()=>U.get("/units"),createCostItem:e=>U.post("/cost-items",e),updateCostItem:(e,t)=>U.put(`/cost-items/${e}`,t),deleteCostItem:e=>U.delete(`/cost-items/${e}`)},Lt={getAll:()=>U.get("/projects"),getById:e=>U.get(`/projects/${e}`),create:e=>U.post("/projects",e),update:(e,t)=>U.put(`/projects/${e}`,t),delete:e=>U.delete(`/projects/${e}`),submitEstimate:e=>U.post(`/projects/${e}/submit-estimate`),approveEstimate:(e,t)=>U.post(`/projects/${e}/approve-estimate`,{notes:t}),rejectEstimate:(e,t)=>U.post(`/projects/${e}/reject-estimate`,{reason:t}),duplicate:(e,t)=>U.post(`/projects/${e}/duplicate`,t)},Is={getAll:e=>U.get(`/projects/${e}/estimates`),getById:(e,t)=>U.get(`/projects/${e}/estimates/${t}`),create:(e,t)=>U.post(`/projects/${e}/estimates`,t),update:(e,t,s)=>U.put(`/projects/${e}/estimates/${t}`,s),delete:(e,t)=>U.delete(`/projects/${e}/estimates/${t}`),getSummary:e=>U.get(`/projects/${e}/estimate-summary`)},Bs={getAll:e=>U.get("/clients",{params:e}),getById:e=>U.get(`/clients/${e}`),create:e=>U.post("/clients",e),update:(e,t)=>U.put(`/clients/${e}`,t),delete:e=>U.delete(`/clients/${e}`)},zs={getAll:e=>U.get("/contractors",{params:e}),getById:e=>U.get(`/contractors/${e}`),create:e=>U.post("/contractors",e),update:(e,t)=>U.put(`/contractors/${e}`,t),delete:e=>U.delete(`/contractors/${e}`)},Mr={getAll:(e=!0)=>U.get("/estimate-templates",{params:{shared:e}}),getById:e=>U.get(`/estimate-templates/${e}`),create:e=>U.post("/estimate-templates",e),update:(e,t)=>U.put(`/estimate-templates/${e}`,t),delete:e=>U.delete(`/estimate-templates/${e}`),applyToProject:(e,t)=>U.post(`/estimate-templates/apply/${e}/to/${t}`)},$d={getGroups:()=>U.get("/nrm2/groups"),getGroupById:e=>U.get(`/nrm2/groups/${e}`),getElementById:e=>U.get(`/nrm2/elements/${e}`),getSubElementById:e=>U.get(`/nrm2/sub-elements/${e}`),getWorkSectionById:e=>U.get(`/nrm2/work-sections/${e}`),getWorkSectionByCode:e=>U.get(`/nrm2/work-sections/by-code/${e}`),search:(e,t)=>U.get("/nrm2/search",{params:{q:e,limit:t}}),getTree:e=>U.get("/nrm2/tree",{params:{groupId:e}}),getStatistics:()=>U.get("/nrm2/stats")},ql={getAll:e=>U.get("/references",{params:{category:e}}),getById:e=>U.get(`/references/${e}`),getByCategory:e=>U.get("/references",{params:{category:e}}),upload:e=>U.post("/references/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>U.patch(`/references/${e}`,t),delete:e=>U.delete(`/references/${e}`),search:e=>U.get("/references/search",{params:{q:e}}),getCategoryStats:()=>U.get("/references/categories/stats"),getDownloadUrl:e=>U.get(`/references/${e}/download`)},dr=Fr((e,t)=>({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null,register:async(s,n,a)=>{var l,o;try{e({isLoading:!0,error:null});const i=await xr.register(s,n,a);e({isLoading:!1}),await t().login(s,a)}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Registration failed";throw e({error:c,isLoading:!1}),i}},login:async(s,n)=>{var a,l;try{e({isLoading:!0,error:null});const o=await xr.login(s,n),{user:i,accessToken:c,refreshToken:d}=o.data;localStorage.setItem("accessToken",c),localStorage.setItem("refreshToken",d),localStorage.setItem("user",JSON.stringify(i)),e({user:i,accessToken:c,refreshToken:d,isLoading:!1})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Login failed";throw e({error:i,isLoading:!1}),o}},logout:async()=>{try{e({isLoading:!0}),t().accessToken&&await xr.logout()}catch(s){console.error("Logout error:",s)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),e({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null})}},refreshAccessToken:async()=>{try{const s=t().refreshToken;if(!s)throw new Error("No refresh token available");const n=await xr.refresh(s),{accessToken:a,refreshToken:l}=n.data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",l),e({accessToken:a,refreshToken:l})}catch(s){throw await t().logout(),s}},checkAuth:async()=>{try{e({isLoading:!0});const s=await xr.getMe(),{user:n}=s.data;e({user:n,isLoading:!1})}catch{e({user:null,accessToken:null,refreshToken:null,isLoading:!1})}},clearError:()=>{e({error:null})},hydrate:()=>{const s=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken"),a=localStorage.getItem("user");if(s&&n&&a)try{const l=JSON.parse(a);e({user:l,accessToken:s,refreshToken:n})}catch(l){console.error("Failed to hydrate auth state:",l)}}}));function B0(){const[e,t]=v.useState("monthly"),s=[{name:"Starter",description:"Perfect for freelancers starting out",price:e==="monthly"?19:190,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Up to 10 projects","Custom cost database access","Basic cost estimation","Up to 5 clients","PDF report generation","Email support"],highlighted:!1},{name:"Professional",description:"For established quantity surveyors",price:e==="monthly"?49:490,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Unlimited projects","Full cost database + regional pricing","Advanced cost estimation","Unlimited clients & contractors","Project templates","PDF & Word export","Multi-currency support","Priority support","Cost analysis & benchmarking"],highlighted:!0},{name:"Enterprise",description:"For consulting firms & teams",price:"Custom",period:"",savings:"",features:["Everything in Professional","Team collaboration (unlimited users)","Advanced analytics & reporting","Custom integrations","API access","Dedicated account manager","Custom database modules","On-premise option available"],highlighted:!1}],n=[{name:"Emma Richardson",role:"Freelance Quantity Surveyor",image:"",quote:"QSCostingPro has cut my estimation time in half. The comprehensive cost database and PDF export feature impresses my clients every time.",location:"London, UK"},{name:"David Chen",role:"Senior Cost Consultant",image:"",quote:"Finally a tool built by QS professionals for QS professionals. The regional pricing data and project templates save me hours on every project.",location:"Manchester, UK"},{name:"Sarah McCann",role:"Independent QS",image:"",quote:"The contractor management and client portal features make me look like I have a full team behind me. Absolutely transformed my business.",location:"Edinburgh, UK"},{name:"Michael Patel",role:"Construction Cost Manager",image:"",quote:"Multi-currency support and the ability to work with international projects has opened up new opportunities for my practice.",location:"Birmingham, UK"}],a=[{icon:"",title:"NRM 2 Database",description:"Standard measurement rules to simplify and normalise cost assembly"},{icon:"",title:"Client & Contractor Management",description:"Organize all your clients and contractors in one place. Track contact info, specializations, ratings, and project history."},{icon:"",title:"Professional Estimates",description:"Create detailed, branded cost estimates in PDF and Word formats. Impress clients with polished reports and detailed breakdowns."},{icon:"",title:"Cost Analysis & Benchmarking",description:"Analyze historical project data by region, building type, and specification. Make data-driven decisions on future projects."},{icon:"",title:"Multi-Currency & Regional Support",description:"Work with clients worldwide. Support for multiple currencies, regions, and localized cost databases."},{icon:"",title:"Project Templates",description:"Build reusable templates for common project types. Speed up estimation and ensure consistency across all projects."},{icon:"",title:"Easy Data Management",description:"Import/export data easily. Integrate with your existing workflows. APIs available for custom integrations."},{icon:"",title:"Enterprise Security",description:"Bank-level encryption, regular backups, and GDPR compliant. Your client data and estimates are always secure and private."}];return r.jsxs("div",{className:"bg-blue-200",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(G,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"QS"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"QSCostingPro"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(G,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(G,{to:"/register",className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg font-medium transition",children:"Sign Up Free"})]})]})})}),r.jsx("section",{className:"py-32 bg-cover bg-center bg-no-repeat relative flex items-center justify-center bg-gray-700",style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1581092162384-8987c1d64718?w=1200&h=600&fit=crop')"},children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Construction Costing Made Easy"}),r.jsx("p",{className:"text-lg text-khc-light mb-8 max-w-3xl mx-auto",children:"All-in-one cost-estimate and management platform from just 19/month"}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx(G,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Free Trial"}),r.jsx("button",{className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Watch Demo"})]})]})})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need to Succeed"}),r.jsx("p",{className:"text-xl text-gray-600",children:"From cost estimation to client management, QSCostingPro has the tools QS professionals rely on."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((l,o)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition",children:[r.jsx("div",{className:"text-4xl mb-4",children:l.icon}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:l.title}),r.jsx("p",{className:"text-gray-600",children:l.description})]},o))})]})}),r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Choose the plan that fits your practice"}),r.jsxs("div",{className:"flex justify-center gap-4 mb-12",children:[r.jsx("button",{onClick:()=>t("monthly"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="monthly"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),r.jsx("button",{onClick:()=>t("annual"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="annual"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annual (Save 17%)"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((l,o)=>r.jsxs("div",{className:`rounded-lg shadow overflow-hidden transition ${l.highlighted?"ring-2 ring-khc-primary scale-105":""}`,children:[r.jsxs("div",{className:`p-8 ${l.highlighted?"bg-khc-primary":"bg-gray-50"}`,children:[r.jsx("h3",{className:`text-2xl font-bold mb-2 ${l.highlighted?"text-white":"text-gray-900"}`,children:l.name}),r.jsx("p",{className:`mb-6 ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.description}),r.jsxs("div",{className:`mb-6 ${l.highlighted?"text-white":"text-gray-900"}`,children:[r.jsxs("span",{className:"text-4xl font-bold",children:[typeof l.price=="number"?"":"",l.price]}),r.jsx("span",{className:`text-lg ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.period}),l.savings&&r.jsx("p",{className:`text-sm font-semibold mt-2 ${l.highlighted?"text-khc-light":"text-khc-primary"}`,children:l.savings})]}),r.jsx(G,{to:"/register",className:`block text-center py-3 rounded-lg font-bold transition mb-8 ${l.highlighted?"bg-white text-khc-primary hover:bg-gray-100":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:"Get Started"})]}),r.jsx("div",{className:"p-8",children:r.jsx("ul",{className:"space-y-4",children:l.features.map((i,c)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-khc-primary font-bold mt-1",children:""}),r.jsx("span",{className:"text-gray-700",children:i})]},c))})})]},o))})]})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Loved by QS Professionals"}),r.jsx("p",{className:"text-xl text-gray-600",children:"See how QSCostingPro has transformed practices worldwide"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((l,o)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("span",{className:"text-5xl",children:l.image}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900",children:l.name}),r.jsx("p",{className:"text-sm text-gray-600",children:l.role}),r.jsx("p",{className:"text-xs text-gray-500",children:l.location})]})]}),r.jsxs("p",{className:"text-gray-700 italic",children:['"',l.quote,'"']})]},o))})]})}),r.jsx("section",{className:"py-20 bg-khc-primary text-white",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Work Smarter?"}),r.jsx("p",{className:"text-xl text-khc-light mb-8",children:"Join hundreds of quantity surveyors who are using QSCostingPro to save time and impress clients."}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx(G,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Your Free Trial"}),r.jsx(G,{to:"/login",className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Sign In"})]}),r.jsx("p",{className:"text-khc-light text-sm mt-6",children:"No credit card required. 14-day free trial on all plans."})]})}),r.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),r.jsx("span",{className:"font-bold text-white",children:"QSCostingPro"})]}),r.jsx("p",{className:"text-sm",children:"Professional cost estimation for quantity surveyors worldwide."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Product"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Features"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Pricing"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Security"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx(G,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(G,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Connect"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Support"})})]})]})]}),r.jsx("div",{className:"border-t border-gray-800 pt-8",children:r.jsx("p",{className:"text-sm text-center",children:" 2026 QSCostingPro. All rights reserved."})})]})})]})}function z0(){const e=ze(),{login:t,error:s,clearError:n,isLoading:a}=dr(),[l,o]=v.useState(""),[i,c]=v.useState(""),[d,u]=v.useState({}),p=()=>{const m={};return l.trim()||(m.username="Username is required"),i||(m.password="Password is required"),u(m),Object.keys(m).length===0},f=async m=>{if(m.preventDefault(),!!p())try{await t(l,i),e("/dashboard",{replace:!0})}catch{}},N=()=>{s&&n()};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),r.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Login"}),r.jsx(G,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),s&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:s}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),r.jsx("input",{id:"username",type:"text",value:l,onChange:m=>{o(m.target.value),N()},placeholder:"Enter your username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.username?"border-red-500":"border-gray-300"}`,disabled:a}),d.username&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.username})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:m=>{c(m.target.value),N()},placeholder:"Enter your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.password?"border-red-500":"border-gray-300"}`,disabled:a}),d.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.password})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Signing in...":"Sign In"})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Don't have an account?"," ",r.jsx(G,{to:"/register",className:"text-khc-primary hover:underline font-medium",children:"Register here"})]}),r.jsx("div",{className:"mt-3 text-center text-sm text-khc-neutral",children:r.jsx(G,{to:"/password-reset",className:"text-khc-primary hover:underline font-medium",children:"Forgot password?"})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Demo Credentials:"}),r.jsx("p",{className:"text-xs",children:"Admin: username: admin | password: admin123456"}),r.jsx("p",{className:"text-xs",children:"Try creating a new account to get started!"})]})]})})}function H0(){const e=ze(),{register:t,error:s,clearError:n,isLoading:a}=dr(),[l,o]=v.useState({username:"",email:"",password:"",confirmPassword:""}),[i,c]=v.useState({}),d=()=>{const f={};return l.username.trim()?l.username.length<3&&(f.username="Username must be at least 3 characters"):f.username="Username is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(f.email="Invalid email format"):f.email="Email is required",l.password?l.password.length<8&&(f.password="Password must be at least 8 characters"):f.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(f.confirmPassword="Passwords do not match"):f.confirmPassword="Please confirm your password",c(f),Object.keys(f).length===0},u=async f=>{if(f.preventDefault(),!!d())try{await t(l.username,l.email,l.password),e("/dashboard",{replace:!0})}catch{}},p=f=>{const{name:N,value:m,type:y,checked:j}=f.target;o(x=>({...x,[N]:y==="checkbox"?j:m})),s&&n()};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4 py-8",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),r.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Create Account"}),r.jsx(G,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),s&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:s}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),r.jsx("input",{id:"username",type:"text",name:"username",value:l.username,onChange:p,placeholder:"Choose a username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.username?"border-red-500":"border-gray-300"}`,disabled:a}),i.username&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.username})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Email"}),r.jsx("input",{id:"email",type:"email",name:"email",value:l.email,onChange:p,placeholder:"Enter your email",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.email?"border-red-500":"border-gray-300"}`,disabled:a}),i.email&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:l.password,onChange:p,placeholder:"Create a password (min 8 characters)",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.password?"border-red-500":"border-gray-300"}`,disabled:a}),i.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:p,placeholder:"Confirm your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.confirmPassword?"border-red-500":"border-gray-300"}`,disabled:a}),i.confirmPassword&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.confirmPassword})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Creating Account...":"Create Account"})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Already have an account?"," ",r.jsx(G,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Sign in here"})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:r.jsxs("p",{className:"text-xs",children:[r.jsx("strong",{children:"Note:"})," After registration, you can add clients and contractors from your dashboard."]})})]})})}function W0({id:e,type:t,message:s,duration:n=4e3,onClose:a}){v.useEffect(()=>{const i=setTimeout(()=>a(e),n);return()=>clearTimeout(i)},[e,n,a]);const l={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[t],o={success:"",error:"",warning:"",info:""}[t];return r.jsxs("div",{className:`${l} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-in fade-in slide-in-from-right-2 duration-300`,role:"alert",children:[r.jsx("span",{className:"font-bold text-lg",children:o}),r.jsx("span",{className:"text-sm",children:s})]})}let ca=null;const Ss=()=>{const e=ca;return{success:(t,s)=>{e&&e.addToast("success",t,s)},error:(t,s)=>{e&&e.addToast("error",t,s)},warning:(t,s)=>{e&&e.addToast("warning",t,s)},info:(t,s)=>{e&&e.addToast("info",t,s)}}};function q0({maxToasts:e=3}){const[t,s]=v.useState([]),n=v.useRef(null),a=v.useCallback((o,i,c)=>{const u={id:`toast-${Date.now()}-${Math.random()}`,type:o,message:i,duration:c};s(p=>{const f=[...p,u];return f.length>e?f.slice(-e):f})},[e]),l=v.useCallback(o=>{s(i=>i.filter(c=>c.id!==o))},[]);return v.useEffect(()=>(n.current={addToast:a,removeToast:l},ca=n.current,()=>{ca===n.current&&(ca=null)}),[a,l]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:t.map(o=>r.jsx(W0,{id:o.id,type:o.type,message:o.message,duration:o.duration,onClose:l},o.id))})}function V0(){const[e]=Dg(),t=Ss(),s=e.get("token"),[n,a]=v.useState({request:!s,reset:!!s}),[l,o]=v.useState(""),[i,c]=v.useState(""),[d,u]=v.useState(""),[p,f]=v.useState(!1),[N,m]=v.useState(!1),y=async x=>{var g,h;if(x.preventDefault(),!l.trim()){t.error("Please enter your email address");return}f(!0);try{(await he.post("http://localhost:3000/api/v1/password-reset/request",{email:l})).data.success&&(t.success("Reset link sent! Check your email (and spam folder)"),o(""))}catch(b){t.error(((h=(g=b.response)==null?void 0:g.data)==null?void 0:h.error)||"Failed to request password reset")}finally{f(!1)}},j=async x=>{var g,h;if(x.preventDefault(),!i||!d){t.error("Please fill in all fields");return}if(i.length<8){t.error("Password must be at least 8 characters");return}if(i!==d){t.error("Passwords do not match");return}f(!0);try{(await he.post("http://localhost:3000/api/v1/password-reset/reset",{token:s,newPassword:i})).data.success&&(t.success("Password has been reset successfully!"),m(!0),c(""),u(""))}catch(b){t.error(((h=(g=b.response)==null?void 0:g.data)==null?void 0:h.error)||"Failed to reset password")}finally{f(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary mb-2 text-center",children:"Password Reset"}),r.jsx("p",{className:"text-gray-600 text-center mb-8",children:n.request?"Request a password reset link":"Set your new password"}),n.request&&!N&&r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",value:l,onChange:x=>o(x.target.value),placeholder:"admin@qscosting.local",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:p})]}),r.jsx("button",{type:"submit",disabled:p,className:"w-full py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary disabled:bg-gray-400 transition-colors font-medium",children:p?"Sending...":"Send Reset Link"}),r.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Remember your password?"," ",r.jsx(G,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Back to Login"})]})]}),n.reset&&!N&&s&&r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),r.jsx("input",{type:"password",id:"password",value:i,onChange:x=>c(x.target.value),placeholder:"At least 8 characters",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:p})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),r.jsx("input",{type:"password",id:"confirmPassword",value:d,onChange:x=>u(x.target.value),placeholder:"Re-enter your password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:p})]}),r.jsx("button",{type:"submit",disabled:p,className:"w-full py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary disabled:bg-gray-400 transition-colors font-medium",children:p?"Resetting...":"Reset Password"})]}),N&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Password Reset!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset."}),r.jsx(G,{to:"/login",className:"inline-block px-6 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition-colors font-medium",children:"Back to Login"})]}),n.request&&N&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-khc-primary mb-2",children:"Check Your Email!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"A password reset link has been sent to your email address."}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Note: In production, you would receive an email. For testing, the reset link is:"}),s&&r.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-6 text-left",children:r.jsx("p",{className:"text-xs text-gray-600 break-all",children:s})}),r.jsx(G,{to:"/login",className:"inline-block px-6 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition-colors font-medium",children:"Back to Login"})]})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsxs("p",{className:"text-white text-sm",children:["Need help?"," ",r.jsx("a",{href:"mailto:support@qscosting.local",className:"underline hover:text-gray-200",children:"Contact Support"})]})})]})})}function Q0(){return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(G,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(G,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(G,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),r.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),r.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Introduction"}),r.jsx("p",{children:'KHConstruct ("we," "us," "our," or "Company") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our application.'}),r.jsx("p",{children:"Please read this Privacy Policy carefully. If you do not agree with our policies and practices, please do not use our services."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Information We Collect"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.1 Information You Provide"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Account registration information (username, email, password)"}),r.jsx("li",{children:"Project data and cost estimates"}),r.jsx("li",{children:"Cost item data including dates, codes, descriptions, and amounts"}),r.jsx("li",{children:"Any communications with our support team"})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.2 Automatically Collected Information"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Device information (browser type, IP address, operating system)"}),r.jsx("li",{children:"Usage analytics (pages visited, features used, time spent)"}),r.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. How We Use Your Information"}),r.jsx("p",{children:"We use the information we collect to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Provide, maintain, and improve our services"}),r.jsx("li",{children:"Process transactions and send related information"}),r.jsx("li",{children:"Send informational and promotional communications"}),r.jsx("li",{children:"Respond to your inquiries and customer support requests"}),r.jsx("li",{children:"Monitor and analyze trends and usage of our services"}),r.jsx("li",{children:"Detect and prevent fraudulent transactions and other illegal activities"}),r.jsx("li",{children:"Comply with legal obligations"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Data Security"}),r.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. These measures include:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"SSL/TLS encryption for data in transit"}),r.jsx("li",{children:"Hashed password storage"}),r.jsx("li",{children:"Regular security audits and updates"}),r.jsx("li",{children:"Limited access to personal information on a need-to-know basis"})]}),r.jsx("p",{className:"mt-4",children:"However, no method of transmission over the Internet or electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Data Retention"}),r.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this Privacy Policy. You can request deletion of your account and associated data at any time by contacting our support team."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Sharing Your Information"}),r.jsx("p",{children:"We do not sell, trade, or rent your personal information to third parties. We may share information:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"With your explicit consent"}),r.jsx("li",{children:"To comply with legal obligations"}),r.jsx("li",{children:"With service providers who assist in operating our website and services"}),r.jsx("li",{children:"In connection with a merger, acquisition, or sale of assets"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Your Rights and Choices"}),r.jsx("p",{children:"Depending on your jurisdiction, you may have the right to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Access your personal information"}),r.jsx("li",{children:"Correct inaccurate information"}),r.jsx("li",{children:"Request deletion of your information"}),r.jsx("li",{children:"Opt-out of marketing communications"}),r.jsx("li",{children:"Data portability"})]}),r.jsx("p",{className:"mt-4",children:"To exercise these rights, please contact us using the information provided at the end of this policy."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Cookies"}),r.jsx("p",{children:"We use cookies to enhance your experience on our website. You can control cookies through your browser settings. However, disabling cookies may affect the functionality of our services."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Children's Privacy"}),r.jsx("p",{children:"Our services are not intended for children under 13 years old. We do not knowingly collect personal information from children. If we become aware that a child has provided us with personal information, we will delete such information and terminate the child's account."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. Changes to This Privacy Policy"}),r.jsx("p",{children:'We may update this Privacy Policy from time to time to reflect changes in our practices or for other operational, legal, or regulatory reasons. We will notify you of any material changes by posting the new Privacy Policy on our website and updating the "Last updated" date.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Contact Us"}),r.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us at:"}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),r.jsx("p",{children:"Email: privacy@khconstruct.com"}),r.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[r.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),r.jsxs("div",{className:"mt-4 space-x-4",children:[r.jsx(G,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx("span",{children:"|"}),r.jsx(G,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function K0(){return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(G,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(G,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(G,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),r.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Terms of Service"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),r.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Agreement to Terms"}),r.jsx("p",{children:"By accessing and using the KHConstruct application and website, you accept and agree to be bound by and comply with these Terms of Service. If you do not agree to abide by the above, please do not use this service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Use License"}),r.jsx("p",{children:"Permission is granted to temporarily download one copy of the materials (information or software) from KHConstruct for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Modifying or copying the materials"}),r.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),r.jsx("li",{children:"Attempting to decompile, disassemble, or reverse engineer any software contained on KHConstruct"}),r.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),r.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),r.jsx("li",{children:"Using the materials for illegal purposes or in violation of any laws or regulations"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. Disclaimer"}),r.jsx("p",{children:"The materials on KHConstruct are provided on an 'as is' basis. KHConstruct makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."}),r.jsx("p",{className:"mt-4",children:"Further, KHConstruct does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its Internet web site or otherwise relating to such materials or on any sites linked to this site."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Limitations"}),r.jsx("p",{children:"In no event shall KHConstruct or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption,) arising out of the use or inability to use the materials on KHConstruct, even if KHConstruct or a KHConstruct authorized representative has been notified orally or in writing of the possibility of such damage."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Accuracy of Materials"}),r.jsx("p",{children:"The materials appearing on KHConstruct could include technical, typographical, or photographic errors. KHConstruct does not warrant that any of the materials on its website are accurate, complete, or current. KHConstruct may make changes to the materials contained on its website at any time without notice."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Materials and Content"}),r.jsx("p",{children:"The materials and content on KHConstruct are protected by copyright and may be owned by or licensed to KHConstruct by others. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said content, whether in whole or in part, for commercial purposes or for personal gain without express advance written permission from KHConstruct."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Links"}),r.jsx("p",{children:"KHConstruct has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by KHConstruct of the site. Use of any such linked website is at the user's own risk."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Modifications"}),r.jsx("p",{children:"KHConstruct may revise these terms of service for its website at any time without notice. By using this website, you are agreeing to be bound by the then current version of these terms of service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Governing Law"}),r.jsx("p",{children:"These terms and conditions are governed by and construed in accordance with the laws of the United Kingdom, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. User Accounts"}),r.jsx("p",{children:"When you create an account on KHConstruct, you are responsible for maintaining the confidentiality of your account information and password. You agree to accept responsibility for all activities that occur under your account. You must notify us immediately of any unauthorized use of your account."}),r.jsx("p",{className:"mt-4",children:"You represent and warrant that the information you provide upon registration and at all other times is accurate, complete, and truthful."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Prohibited Activities"}),r.jsx("p",{children:"You agree that you will not engage in any activity that:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Violates any laws, regulations, or third-party rights"}),r.jsx("li",{children:"Infringes intellectual property rights"}),r.jsx("li",{children:"Contains viruses, malware, or other harmful code"}),r.jsx("li",{children:"Is defamatory, obscene, or offensive"}),r.jsx("li",{children:"Harasses or threatens others"}),r.jsx("li",{children:"Disrupts the normal flow of dialogue within our services"}),r.jsx("li",{children:"Attempts to gain unauthorized access to our systems"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"12. Intellectual Property Rights"}),r.jsx("p",{children:"Unless otherwise stated, KHConstruct and/or its licensors own the intellectual property rights for all material on KHConstruct. All intellectual property rights are reserved. You may access this from KHConstruct for your own personal use subject to restrictions set in these terms and conditions."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"13. Payment Terms"}),r.jsx("p",{children:"If you subscribe to a paid plan, you agree to pay the subscription fees as advertised. Billing occurs monthly or annually depending on your selected plan. You authorize us to charge your payment method for the subscription fees and any applicable taxes."}),r.jsx("p",{className:"mt-4",children:"You may cancel your subscription at any time. Refunds are subject to our refund policy, which is provided separately."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"14. Termination of Service"}),r.jsx("p",{children:"We reserve the right to suspend or terminate your account and access to our services at any time, for any reason, including but not limited to violation of these Terms of Service or for any unlawful purpose."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"15. Contact Information"}),r.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),r.jsx("p",{children:"Email: support@khconstruct.com"}),r.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[r.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),r.jsxs("div",{className:"mt-4 space-x-4",children:[r.jsx(G,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx("span",{children:"|"}),r.jsx(G,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function Ht(){const{user:e,accessToken:t,isLoading:s,error:n,login:a,register:l,logout:o,refreshToken:i,clearError:c}=dr();return{user:e,accessToken:t,isLoading:s,error:n,isAuthenticated:!!e,login:a,register:l,logout:o,refreshToken:i,clearError:c,isAdmin:(e==null?void 0:e.role)==="admin",isEstimator:(e==null?void 0:e.role)==="estimator",isViewer:(e==null?void 0:e.role)==="viewer",hasPermission:d=>e?Array.isArray(d)?d.includes(e.role):e.role===d:!1}}const Ut=Fr((e,t)=>({projects:[],currentProject:null,isLoading:!1,error:null,filters:{},fetchProjects:async()=>{var s,n;e({isLoading:!0,error:null});try{const a=await Lt.getAll();e({projects:a.data.data,isLoading:!1})}catch(a){const l=((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch projects";throw e({error:l,isLoading:!1}),a}},fetchProjectById:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Lt.getById(s);e({currentProject:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch project";throw e({error:o,isLoading:!1,currentProject:null}),l}},createProject:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Lt.create(s)).data.data;return e(i=>({projects:[o,...i.projects],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to create project";throw e({error:o,isLoading:!1}),l}},updateProject:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Lt.update(s,n)).data.data;return e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update project";throw e({error:i,isLoading:!1}),o}},deleteProject:async s=>{var n,a;e({isLoading:!0,error:null});try{await Lt.delete(s),e(l=>{var o;return{projects:l.projects.filter(i=>i.id!==s),currentProject:((o=l.currentProject)==null?void 0:o.id)===s?null:l.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete project";throw e({error:o,isLoading:!1}),l}},duplicateProject:async(s,n,a,l)=>{var o,i;e({isLoading:!0,error:null});try{const d=(await Lt.duplicate(s,{name:n,include_estimates:a,copy_status:l})).data.data;return e(u=>({projects:[d,...u.projects],isLoading:!1})),d}catch(c){const d=((i=(o=c.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to duplicate project";throw e({error:d,isLoading:!1}),c}},submitEstimate:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Lt.submitEstimate(s)).data.data;e(i=>{var c;return{projects:i.projects.map(d=>d.id===s?o:d),currentProject:((c=i.currentProject)==null?void 0:c.id)===s?o:i.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to submit estimate";throw e({error:o,isLoading:!1}),l}},approveEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Lt.approveEstimate(s,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to approve estimate";throw e({error:i,isLoading:!1}),o}},rejectEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Lt.rejectEstimate(s,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to reject estimate";throw e({error:i,isLoading:!1}),o}},setFilters:s=>{e(n=>({filters:{...n.filters,...s}}))},clearError:()=>{e({error:null})},setCurrentProject:s=>{e({currentProject:s})}}));function J(e,t="GBP",s="en-GB"){return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function G0(e,t=0,s="en-GB"){return new Intl.NumberFormat(s,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function Bh(e,t="en-GB",s){const n=typeof e=="string"?new Date(e):e,a={year:"numeric",month:"long",day:"numeric",...s};return new Intl.DateTimeFormat(t,a).format(n)}function cl(e,t=1,s="en-GB"){return`${G0(e,t,s)}%`}function J0(e){return e.filter(t=>t.status!=="completed").reduce((t,s)=>{var a;const n=((a=s.estimate_totals)==null?void 0:a.grand_total)||s.budget_cost||0;return t+n},0)}function Y0(e){const t=e.filter(n=>{var a,l;return((a=n.estimate_totals)==null?void 0:a.floor_area_m2)&&n.estimate_totals.floor_area_m2>0&&((l=n.estimate_totals)==null?void 0:l.grand_total)});if(t.length===0)return null;const s=t.reduce((n,a)=>{const l=a.estimate_totals.grand_total/a.estimate_totals.floor_area_m2;return n+l},0);return Math.round(s/t.length*100)/100}function X0(e){const t=e.filter(c=>{var d;return c.budget_cost&&((d=c.estimate_totals)==null?void 0:d.grand_total)}),s=t.reduce((c,d)=>c+(d.budget_cost||0),0),n=t.reduce((c,d)=>{var u;return c+(((u=d.estimate_totals)==null?void 0:u.grand_total)||0)},0),a=n-s,l=s>0?Math.round(a/s*1e3)/10:0,o=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)>(c.budget_cost||0)}).length,i=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)<(c.budget_cost||0)}).length;return{totalBudget:s,totalEstimate:n,variance:a,variancePercentage:l,projectsOverBudget:o,projectsUnderBudget:i}}function zh(e){const t={};let s=0;return e.forEach(a=>{var o;(((o=a.estimate_totals)==null?void 0:o.categories)||[]).forEach(i=>{t[i.category_name]||(t[i.category_name]={total_cost:0,project_count:0}),t[i.category_name].total_cost+=i.subtotal||0,t[i.category_name].project_count+=1,s+=i.total||0})}),Object.entries(t).map(([a,l])=>({category_name:a,total_cost:l.total_cost,project_count:l.project_count,percentage:s>0?Math.round(l.total_cost/s*1e3)/10:0,avg_cost_per_project:Math.round(l.total_cost/l.project_count*100)/100})).sort((a,l)=>l.total_cost-a.total_cost)}function Hh(e,t=5){return e.filter(n=>{var a;return n.budget_cost&&((a=n.estimate_totals)==null?void 0:a.grand_total)}).map(n=>{var a,l,o,i;return{project_id:n.id,project_name:n.name||`Project ${n.id}`,budget:n.budget_cost||0,estimate:((a=n.estimate_totals)==null?void 0:a.grand_total)||0,variance:(((l=n.estimate_totals)==null?void 0:l.grand_total)||0)-(n.budget_cost||0),variancePercentage:(n.budget_cost||0)>0?Math.round(((((o=n.estimate_totals)==null?void 0:o.grand_total)||0)-(n.budget_cost||0))/(n.budget_cost||0)*1e3)/10:0,isOverBudget:(((i=n.estimate_totals)==null?void 0:i.grand_total)||0)>(n.budget_cost||0)}}).sort((n,a)=>a.estimate-n.estimate).slice(0,t)}function Z0({projects:e,isLoading:t=!1}){const s=X0(e),n=s.variance>0,a=n?"border-khc-accent":"border-green-500",l=n?"text-khc-accent":"text-green-600",o=n?"bg-orange-50":"bg-green-50";if(t)return r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a}`,children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})});const i=s.projectsOverBudget,c=s.projectsUnderBudget;return r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a} transition-all hover:shadow-lg`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Budget Variance"}),r.jsxs("p",{className:`text-3xl font-bold mt-2 ${l}`,children:[n?"+":"",J(s.variance)]}),r.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[r.jsxs("span",{className:`inline-flex items-center ${n?"text-khc-accent":"text-green-600"} text-sm font-medium`,children:[n?r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12 15a1 1 0 01-.707-.293l-2.828-2.829a1 1 0 011.414-1.414L11 11.414V5a1 1 0 112 0v5.414l1.121-1.121a1 1 0 111.414 1.414l-2.828 2.829A1 1 0 0112 15z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12 5a1 1 0 01.707.293l2.828 2.829a1 1 0 11-1.414 1.414L13 8.586V15a1 1 0 11-2 0V8.586l-1.121 1.121a1 1 0 11-1.414-1.414l2.828-2.829A1 1 0 0112 5z",clipRule:"evenodd"})}),cl(Math.abs(s.variancePercentage),1)]}),r.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",n?"over":"under"," budget)"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i>0&&`${i} project${i!==1?"s":""} over budget  `,c>0&&`${c} under budget`,i===0&&c===0&&"No budget data available"]})]}),r.jsx("div",{className:`${o} rounded-lg w-16 h-16 flex items-center justify-center flex-shrink-0 text-2xl`,children:n?"":""})]})})}function ej({projects:e,isLoading:t=!1}){const s=Hh(e,5);if(t)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>r.jsxs("div",{children:[r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-8 bg-gray-100 rounded"})]},a))})]});if(s.length===0)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),r.jsx("p",{className:"text-center text-gray-600 py-8",children:"Set budgets to compare estimates"})]});const n=Math.max(...s.flatMap(a=>[a.budget,a.estimate]));return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),r.jsx("div",{className:"space-y-5",children:s.map(a=>{const l=a.budget/n*100,o=a.estimate/n*100,i=a.isOverBudget?"text-khc-accent":"text-green-600";return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate flex-1",children:a.project_name}),r.jsxs("span",{className:`text-xs font-semibold ${i}`,children:[a.isOverBudget?"+":"",cl(a.variancePercentage,1)]})]}),r.jsxs("div",{className:"relative h-5 bg-gray-100 rounded overflow-hidden",children:[r.jsx("div",{className:"absolute h-full bg-khc-primary rounded",style:{width:`${l}%`}}),r.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:l>20&&J(a.budget)})]}),r.jsxs("div",{className:"relative h-5 rounded overflow-hidden",style:{backgroundColor:"#f3f4f6"},children:[r.jsx("div",{className:`absolute h-full rounded ${a.isOverBudget?"bg-khc-accent":"bg-green-500"}`,style:{width:`${o}%`}}),r.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:o>20&&J(a.estimate)})]}),r.jsx("div",{className:"flex justify-between text-xs text-gray-600 px-1",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Budget:"})," ",J(a.budget)]}),r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Estimate:"})," ",J(a.estimate)]})]})})]},a.project_id)})}),r.jsxs("div",{className:"mt-6 pt-4 border-t flex gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-khc-primary"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Budget"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-khc-accent"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Over)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Under)"})]})]})]})}const Md=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function tj({projects:e,isLoading:t=!1}){const s=zh(e);if(t)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded"})]});if(s.length===0)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),r.jsx("p",{className:"text-center text-gray-600 py-12",children:"No category data available"})]});const n=s.reduce((i,c)=>i+c.total_cost,0),a=70;let l=-90;const o=s.map((i,c)=>{const d=i.total_cost/n*100,u=l*(Math.PI/180),p=(l+d/100*360)*(Math.PI/180),f=100+a*Math.cos(u),N=100+a*Math.sin(u),m=100+a*Math.cos(p),y=100+a*Math.sin(p),j=d>50?1:0,x=`M ${f} ${N} A ${a} ${a} 0 ${j} 1 ${m} ${y} L ${100+(a-25)*Math.cos(p)} ${100+(a-25)*Math.sin(p)} A ${a-25} ${a-25} 0 ${j} 0 ${100+(a-25)*Math.cos(u)} ${100+(a-25)*Math.sin(u)} Z`;return l+=d/100*360,{path:x,color:Md[c%Md.length],...i}});return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-8",children:[r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"relative w-64 h-64",children:[r.jsx("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:o.map((i,c)=>r.jsx("g",{children:r.jsx("path",{d:i.path,fill:i.color,opacity:"0.9",className:"hover:opacity-100 transition-opacity cursor-pointer"})},c))}),r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-khc-primary",children:J(n)}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total Cost"})]})})]})}),r.jsx("div",{className:"flex-1 space-y-3",children:o.map((i,c)=>r.jsxs("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-gray-50 transition",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:i.color}}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.category_name}),r.jsxs("div",{className:"flex items-center justify-between gap-2 mt-0.5",children:[r.jsx("p",{className:"text-xs text-gray-600",children:J(i.total_cost)}),r.jsx("p",{className:"text-xs font-semibold text-gray-700",children:cl(i.percentage,1)})]})]})]},c))})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Categories"}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.length})]}),r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Avg per Category"}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:J(n/s.length)})]})]})]})}const Vn=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function rj({projects:e,isLoading:t=!1}){const s=zh(e),n=s.reduce((a,l)=>a+l.total_cost,0);return t?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>r.jsx("div",{className:"h-12 bg-gray-100 rounded"},a))})]}):s.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Cost by Category"}),r.jsx("p",{className:"text-center text-gray-600 py-8",children:"No category data available"})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-khc-primary to-khc-secondary",children:[r.jsx("h3",{className:"font-semibold text-white",children:" Cost by Category"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-1",children:[s.length," categories across projects"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Total Cost"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"%"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Projects"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-700",children:"Avg/Project"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map((a,l)=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:Vn[l%Vn.length]}}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.category_name})]})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:J(a.total_cost)})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${a.percentage}%`,backgroundColor:Vn[l%Vn.length]}})}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 w-10 text-right",children:cl(a.percentage,1)})]})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("span",{className:"text-sm font-medium text-gray-600",children:a.project_count})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:J(a.avg_cost_per_project)})})]},l))})]})}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Project Total"}),r.jsx("span",{className:"text-lg font-bold text-khc-primary",children:J(n)})]})})]})}function sj(){const{user:e}=Ht(),{projects:t,isLoading:s,fetchProjects:n}=Ut();v.useEffect(()=>{n()},[n]);const a=J0(t),l=Y0(t),o=t.filter(d=>d.status!=="completed").length,i=Hh(t).length,c=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="estimator";return r.jsxs("div",{className:"space-y-6",children:[c&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"md:col-span-2 lg:col-span-6 lg:row-span-2",children:r.jsx("div",{className:"bg-gradient-to-br from-khc-primary to-khc-secondary rounded-lg shadow-md p-8 text-white h-full flex flex-col justify-between overflow-hidden relative",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/3 mb-4"}),r.jsx("div",{className:"h-12 bg-white bg-opacity-20 rounded w-1/2"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white text-opacity-80 mb-2",children:"Total Project Value"}),r.jsx("h2",{className:"text-4xl font-bold mb-1",children:J(a)}),r.jsxs("p",{className:"text-xs text-white text-opacity-70",children:[t.length," active projects"]})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-white border-opacity-20",children:[r.jsxs("svg",{className:"w-full h-16",viewBox:"0 0 200 60",children:[r.jsx("polyline",{points:"0,40 25,35 50,30 75,25 100,20 125,25 150,30 175,35 200,40",fill:"none",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2"}),r.jsx("polyline",{points:"0,45 25,40 50,35 75,30 100,25 125,30 150,35 175,40 200,45",fill:"rgba(255,255,255,0.1)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"})]}),r.jsx("p",{className:"text-xs text-white text-opacity-70 mt-2",children:"Cumulative estimate trend"})]})]})})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3 lg:row-span-2",children:r.jsx(Z0,{projects:t,isLoading:s})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Active Projects"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-green-50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"In Progress"}),r.jsx("p",{className:"font-bold text-green-700",children:t.filter(d=>d.status==="in_progress").length})]}),r.jsxs("div",{className:"bg-blue-50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"Draft"}),r.jsx("p",{className:"font-bold text-blue-700",children:t.filter(d=>d.status==="draft").length})]})]})]})})}),l&&r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Avg Cost per m"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:J(l)})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsx("p",{children:"Per square meter"}),r.jsx("p",{className:"text-purple-600 font-semibold",children:"Industry metric"})]})})]})})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx(G,{to:"/projects",className:"block bg-gradient-to-br from-khc-accent to-orange-600 rounded-lg shadow-md p-6 text-white h-full hover:shadow-lg transition-shadow cursor-pointer",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-white bg-opacity-20 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white text-opacity-90 mb-2",children:"Projects at Risk"}),r.jsx("p",{className:"text-4xl font-bold",children:i}),r.jsx("p",{className:"text-xs text-white text-opacity-80 mt-1",children:"Over budget"})]}),r.jsx("div",{className:"text-4xl",children:""})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-white border-opacity-20",children:r.jsx("p",{className:"text-xs text-white text-opacity-70",children:"View details "})})]})})}),r.jsx("div",{className:"md:col-span-2 lg:col-span-7",children:r.jsx(ej,{projects:t,isLoading:s})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-5",children:r.jsx(tj,{projects:t,isLoading:s})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(rj,{projects:t,isLoading:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(G,{to:"/projects/new",className:"group block bg-khc-primary hover:bg-khc-neutral text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"Create Project"}),r.jsx("p",{className:"text-xs text-gray-200 mt-2",children:"Start a new project"})]}),r.jsxs(G,{to:"/projects",className:"group block bg-khc-secondary hover:bg-khc-primary text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"All Projects"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:["View ",t.length," projects"]})]}),r.jsxs(G,{to:"/projects",className:"group block bg-gradient-to-br from-emerald-500 to-green-600 text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"Completed"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:[t.filter(d=>d.status==="completed").length," finished"]})]})]})]})]}),!c&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Financial metrics are available to administrators and estimators."})]})]})}const nj=e=>{const[t,s]=v.useState(new Set),n=v.useCallback(u=>{s(p=>{const f=new Set(p);return f.has(u)?f.delete(u):f.add(u),f})},[]),a=v.useCallback(()=>{const u=new Set(e.map(p=>p.id));s(u)},[e]),l=v.useCallback(()=>{s(new Set)},[]),o=v.useCallback(()=>{t.size===e.length?l():a()},[t.size,e.length,a,l]),i=v.useCallback(u=>t.has(u),[t]),c=v.useCallback(()=>e.filter(u=>t.has(u.id)),[e,t]),d=v.useCallback(()=>{s(new Set)},[]);return{selectedIds:t,selectedCount:t.size,isAllSelected:t.size===e.length&&e.length>0,isPartiallySelected:t.size>0&&t.size<e.length,toggleSelection:n,selectAll:a,deselectAll:l,toggleAll:o,isSelected:i,getSelectedItems:c,clearSelection:d}};function aj({selectedCount:e,totalCount:t,isAllSelected:s,isPartiallySelected:n,onSelectAll:a,onDeselectAll:l,onBulkDelete:o,onBulkStatusChange:i,isLoading:c=!1}){return r.jsx("div",{className:"bg-khc-light border-b-2 border-khc-primary sticky top-16 z-30 transition-all duration-300",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",children:[r.jsx("input",{type:"checkbox",checked:s,ref:d=>{d&&(d.indeterminate=n)},onChange:s?l:a,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:s?"Deselect All":"Select All"})]}),r.jsx("div",{className:"h-6 w-px bg-gray-300"}),r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e," of ",t," selected"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("button",{disabled:e===0||c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Change status for selected projects",children:" Change Status"}),r.jsxs("div",{className:"absolute right-0 mt-0 w-48 bg-white rounded-lg shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx("button",{onClick:()=>i("draft"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Draft"}),r.jsx("button",{onClick:()=>i("in_progress"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" In Progress"}),r.jsx("button",{onClick:()=>i("completed"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Completed"})]})]}),r.jsxs("button",{onClick:o,disabled:e===0||c,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Delete selected projects",children:[" Delete (",e,")"]}),r.jsx("button",{onClick:l,disabled:e===0,className:"px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg text-sm font-medium disabled:opacity-50 transition-colors",children:" Clear"})]})]})})})}function ks({isOpen:e,onClose:t,title:s,children:n,footer:a,size:l="md"}){if(!e)return null;const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center modal-overlay",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),r.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl ${o[l]} w-full mx-4 modal-content`,children:[s&&r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"px-6 py-4",children:n}),a&&r.jsx("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200",children:a})]})]})}function lj({isOpen:e,onClose:t,onDuplicate:s,projectName:n,isLoading:a=!1}){const[l,o]=v.useState(`${n} - Copy`),[i,c]=v.useState(!1),[d,u]=v.useState(!1),[p,f]=v.useState({}),N=async()=>{const m={};if(l.trim()||(m.name="Project name is required"),l.length>255&&(m.name="Project name must be less than 255 characters"),Object.keys(m).length>0){f(m);return}try{await s({name:l.trim(),includeEstimates:i,copyStatus:d}),o(`${n} - Copy`),c(!1),u(!1),f({}),t()}catch{}};return r.jsx(ks,{isOpen:e,onClose:t,title:"Duplicate Project",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Project Name *"}),r.jsx("input",{type:"text",value:l,onChange:m=>{o(m.target.value),p.name&&f({...p,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Project Name - Copy",maxLength:255}),p.name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.name})]}),r.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Copy Options"}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i,onChange:m=>c(m.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Include Estimates"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Copy all line items and estimates from the original project"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:m=>u(m.target.checked),disabled:!i,className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer disabled:opacity-50"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${d?"text-gray-900":"text-gray-600"}`,children:"Copy Status (if estimates included)"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Copy estimate status (approved, rejected, etc.)"})]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900",children:" The new project will be created as a draft. You can edit it after creation."})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,disabled:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:N,disabled:a,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:a?"Duplicating...":"Duplicate Project"})]})]})})}function Sr(e){var t,s,n,a,l,o,i;if(he.isAxiosError(e)){const c=e;if((s=(t=c.response)==null?void 0:t.data)!=null&&s.error)return c.response.data.error;if((a=(n=c.response)==null?void 0:n.data)!=null&&a.message)return c.response.data.message;if((o=(l=c.response)==null?void 0:l.data)!=null&&o.errors){const d=c.response.data.errors;if(Array.isArray(d))return d.map(u=>u.message).join(", ")}if((i=c.response)!=null&&i.status)switch(c.response.status){case 400:return"Invalid request. Please check your input.";case 401:return"Authentication failed. Please login again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 409:return"This resource already exists.";case 422:return"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Please try again later.";case 503:return"Service unavailable. Please try again later.";default:return`Error: ${c.response.status} ${c.response.statusText}`}return c.message==="Network Error"?"Network error. Please check your internet connection.":c.message||"An error occurred"}return e instanceof Error?e.message:"An unknown error occurred"}function oj(){ze();const e=Ss(),{user:t,isEstimator:s,isAdmin:n}=Ht(),{projects:a,isLoading:l,error:o,fetchProjects:i,deleteProject:c,updateProject:d,duplicateProject:u}=Ut(),[p,f]=v.useState({status:"",estimateStatus:"",progress:"",search:""}),[N,m]=v.useState(!1),[y,j]=v.useState(!1),[x,g]=v.useState(!1),[h,b]=v.useState(null),[S,k]=v.useState(""),w=nj(a);v.useEffect(()=>{i()},[i]);const E=a.filter(F=>!(p.status&&F.status!==p.status||p.estimateStatus&&F.estimate_status!==p.estimateStatus||p.progress&&F.progress!==p.progress||p.search&&!F.name.toLowerCase().includes(p.search.toLowerCase()))),L=async F=>{if(window.confirm("Are you sure you want to delete this project?"))try{await c(F)}catch{}},D=async()=>{const F=w.getSelectedItems(),q=`Delete ${F.length} project${F.length!==1?"s":""}? This cannot be undone.`;if(window.confirm(q))try{m(!0);let $=0,P=0;for(const _ of F)try{await c(_.id),$++}catch(A){P++,`${_.id}`}w.clearSelection(),e.success(`Deleted ${$} project${$!==1?"s":""}`),P>0&&e.error(`Failed to delete ${P} project${P!==1?"s":""}`)}finally{m(!1)}},I=async F=>{const q=w.getSelectedItems();try{m(!0);let $=0;for(const P of q)try{await d(P.id,{status:F}),$++}catch(_){`${P.id}`}w.clearSelection(),await i(),e.success(`Updated ${$} project${$!==1?"s":""}`)}finally{m(!1)}},W=(F,q)=>{b(F),k(q),g(!0)},M=async F=>{if(h)try{j(!0),await u(h,F.name,F.includeEstimates,F.copyStatus),await i(),e.success("Project duplicated successfully"),g(!1)}catch{e.error("Failed to duplicate project")}finally{j(!1)}};return r.jsxs("div",{className:"space-y-6",children:[w.selectedCount>0&&r.jsx(aj,{selectedCount:w.selectedCount,totalCount:a.length,isAllSelected:w.isAllSelected,isPartiallySelected:w.isPartiallySelected,onSelectAll:w.selectAll,onDeselectAll:w.deselectAll,onBulkDelete:D,onBulkStatusChange:I,isLoading:N}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Projects"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your estimation projects"})]}),(n||s)&&r.jsx(G,{to:"/projects/new",className:"bg-khc-primary hover:bg-khc-secondary text-white font-medium py-2 px-4 rounded-lg transition",children:"+ New Project"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Search by name...",value:p.search,onChange:F=>f({...p,search:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:p.status,onChange:F=>f({...p,status:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimate Status"}),r.jsxs("select",{value:p.estimateStatus,onChange:F=>f({...p,estimateStatus:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Estimates"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress"}),r.jsxs("select",{value:p.progress,onChange:F=>f({...p,progress:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Progress"}),r.jsx("option",{value:"Not Started",children:"Not Started"}),r.jsx("option",{value:"Progressing",children:"Progressing"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]})]})}),o&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:o}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading projects..."}):E.length===0?r.jsx("div",{className:"p-6 text-center text-gray-600",children:a.length===0?"No projects yet.":"No projects match your filters."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700 w-12",children:r.jsx("input",{type:"checkbox",checked:w.isAllSelected,ref:F=>{F&&(F.indeterminate=w.isPartiallySelected)},onChange:w.toggleAll,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Location"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Estimate"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:E.map(F=>r.jsxs("tr",{className:`hover:bg-gray-50 transition ${w.isSelected(F.id)?"bg-khc-light":""}`,children:[r.jsx("td",{className:"px-6 py-4 w-12",children:r.jsx("input",{type:"checkbox",checked:w.isSelected(F.id),onChange:()=>w.toggleSelection(F.id),className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(G,{to:`/projects/${F.id}`,className:"text-khc-primary hover:underline font-medium",children:F.name})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:F.project_address||F.description||"N/A"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${F.progress==="Completed"?"bg-green-100 text-green-700":F.progress==="Progressing"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:F.progress||"Not Started"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium",children:F.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${F.estimate_status==="approved"?"bg-green-100 text-green-700":F.estimate_status==="submitted"?"bg-blue-100 text-blue-700":F.estimate_status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:F.estimate_status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(F.created_at).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 space-x-2 flex",children:[r.jsx(G,{to:`/projects/${F.id}`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"View"}),(n||(t==null?void 0:t.id)===F.created_by&&s)&&r.jsxs(r.Fragment,{children:[r.jsx(G,{to:`/projects/${F.id}/edit`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>W(F.id,F.name),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Duplicate"}),n&&r.jsx("button",{onClick:()=>L(F.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]},F.id))})]})})}),r.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",E.length," of ",a.length," projects"]}),r.jsx(lj,{isOpen:x,onClose:()=>g(!1),onDuplicate:M,projectName:S,isLoading:y})]})}function Ke({label:e="Back",className:t=""}){const s=ze();return r.jsxs("button",{onClick:()=>s(-1),className:`
        inline-flex items-center gap-2 px-4 py-2
        bg-gray-200 hover:bg-gray-300
        text-gray-700
        rounded-lg font-medium
        transition duration-200
        ${t}
      `,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e]})}function Ud(){const{id:e}=Ns(),t=ze(),{currentProject:s,isLoading:n,error:a,fetchProjectById:l,createProject:o,updateProject:i}=Ut(),c=!!e,[d,u]=v.useState({name:"",client_id:"",contractor_id:"",budget_cost:"",start_date:"",project_address:"",description:"",notes:"",progress:"Not Started"}),[p,f]=v.useState([]),[N,m]=v.useState([]),[y,j]=v.useState(!0),[x,g]=v.useState(!0),[h,b]=v.useState({});v.useEffect(()=>{(async()=>{try{const[D,I]=await Promise.all([Bs.getAll(),zs.getAll()]);f(D.data.data||[]),m(I.data.data||[])}catch{console.error("Failed to load clients/contractors")}finally{j(!1),g(!1)}})()},[]),v.useEffect(()=>{c&&e&&l(Number(e)).then(()=>{var L,D,I;s&&u({name:s.name||"",client_id:((L=s.client_id)==null?void 0:L.toString())||"",contractor_id:((D=s.contractor_id)==null?void 0:D.toString())||"",budget_cost:((I=s.budget_cost)==null?void 0:I.toString())||"",start_date:s.start_date||"",project_address:s.project_address||"",description:s.description||"",notes:s.notes||"",progress:s.progress||"Not Started"})})},[e,c,l,s==null?void 0:s.id]);const S=()=>{const L={};return d.name.trim()||(L.name="Project name is required"),d.client_id.trim()||(L.client_id="Client is required"),d.start_date||(L.start_date="Start date is required"),d.budget_cost&&isNaN(Number(d.budget_cost))&&(L.budget_cost="Must be a valid number"),b(L),Object.keys(L).length===0},k=async L=>{if(L.preventDefault(),!!S())try{const D={name:d.name,client_id:Number(d.client_id),contractor_id:d.contractor_id?Number(d.contractor_id):void 0,budget_cost:d.budget_cost?Number(d.budget_cost):void 0,start_date:d.start_date,project_address:d.project_address||void 0,description:d.description||void 0,notes:d.notes||void 0};if(c&&e)await i(Number(e),D),t(`/projects/${e}`);else{const I=await o(D);t(`/projects/${I.id}`)}}catch{}},w=L=>{const{name:D,value:I}=L.target;u(W=>({...W,[D]:I}))},E=async()=>{if(!(!c||!e)&&window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{const L=JSON.parse(localStorage.getItem("deletedProjects")||"[]");L.push(Number(e)),localStorage.setItem("deletedProjects",JSON.stringify(L));const I=JSON.parse(localStorage.getItem("projects")||"[]").filter(W=>W.id!==Number(e));localStorage.setItem("projects",JSON.stringify(I)),t("/projects")}catch(L){console.error("Error deleting project:",L)}};return r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsx(Ke,{}),r.jsx("div",{className:"mb-6",children:r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:c?"Edit Project":"Create New Project"})}),a&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:a}),r.jsxs("form",{onSubmit:k,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[c&&s&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Project ID:"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",s.id]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),r.jsx("input",{type:"text",name:"name",value:d.name,onChange:w,placeholder:"E.g., Kitchen Renovation, Office Expansion",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.name?"border-red-500":"border-gray-300"}`,disabled:n}),h.name&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.name})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name *"}),r.jsxs("select",{name:"client_id",value:d.client_id,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.client_id?"border-red-500":"border-gray-300"}`,disabled:n||y,children:[r.jsx("option",{value:"",children:"Select a client..."}),p.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]}),h.client_id&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.client_id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contractor Name"}),r.jsxs("select",{name:"contractor_id",value:d.contractor_id,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n||x,children:[r.jsx("option",{value:"",children:"Select a contractor (optional)..."}),N.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",name:"start_date",value:d.start_date,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.start_date?"border-red-500":"border-gray-300"}`,disabled:n}),h.start_date&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.start_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Cost ()"}),r.jsx("input",{type:"number",name:"budget_cost",value:d.budget_cost,onChange:w,placeholder:"0.00",step:"0.01",min:"0",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.budget_cost?"border-red-500":"border-gray-300"}`,disabled:n}),h.budget_cost&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.budget_cost})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Progress"}),r.jsxs("select",{name:"progress",value:d.progress,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n,children:[r.jsx("option",{value:"Not Started",children:"Not Started"}),r.jsx("option",{value:"Progressing",children:"Progressing"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Address"}),r.jsx("input",{type:"text",name:"project_address",value:d.project_address,onChange:w,placeholder:"E.g., 123 Main Street, London, SW1A 1AA",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:d.description,onChange:w,placeholder:"Project scope, objectives, and key details...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{name:"notes",value:d.notes,onChange:w,placeholder:"Additional notes, constraints, special requirements...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),r.jsxs("div",{className:"flex gap-4 justify-between pt-6 border-t",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",disabled:n,children:"Cancel"}),c&&r.jsx("button",{type:"button",onClick:E,className:"px-6 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition font-medium",disabled:n,children:"Delete Project"})]}),r.jsx("button",{type:"submit",disabled:n,className:`px-6 py-2 rounded-lg text-white font-medium transition ${n?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:n?"Saving...":c?"Update Project":"Create Project"})]})]})]})}const Wh=Fr((e,t)=>({estimates:[],estimateTotals:null,isLoading:!1,error:null,currentProjectId:null,fetchEstimates:async s=>{var n,a;e({isLoading:!0,error:null,currentProjectId:s});try{const l=await Is.getAll(s);e({estimates:l.data.data.estimates,estimateTotals:l.data.data.totals,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimates";throw e({error:o,isLoading:!1,estimates:[],estimateTotals:null}),l}},fetchEstimateSummary:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Is.getSummary(s);e({estimateTotals:l.data.data.estimate,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimate summary";throw e({error:o,isLoading:!1,estimateTotals:null}),l}},addEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Is.create(s,n)).data.data;return await t().fetchEstimates(s),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to add estimate";throw e({error:i,isLoading:!1}),o}},updateEstimate:async(s,n,a)=>{var l,o;e({isLoading:!0,error:null});try{const c=(await Is.update(s,n,a)).data.data;return await t().fetchEstimates(s),c}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Failed to update estimate";throw e({error:c,isLoading:!1}),i}},deleteEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{await Is.delete(s,n),await t().fetchEstimates(s)}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to delete estimate";throw e({error:i,isLoading:!1}),o}},clearError:()=>{e({error:null})},clearEstimates:()=>{e({estimates:[],estimateTotals:null,currentProjectId:null})}})),Vl="qscostingpro_recent_projects",ij=5,cj=()=>{const e=()=>{try{const n=localStorage.getItem(Vl);return n?JSON.parse(n):[]}catch{return[]}};return{getRecent:e,addRecent:(n,a)=>{try{const o=e().filter(d=>d.id!==n),c=[{id:Number(n),name:String(a||"Unknown"),viewed_at:Date.now()},...o].slice(0,ij);localStorage.setItem(Vl,JSON.stringify(c))}catch(l){console.error("Failed to add recent project:",l)}},clearRecent:()=>{try{localStorage.removeItem(Vl)}catch{}}}};function qh({projectId:e,projectName:t,isDisabled:s=!1}){const[n,a]=v.useState(!1),[l,o]=v.useState(null),[i,c]=v.useState("nrm2"),[d,u]=v.useState(!1),p=async()=>{var f,N;a(!0),o(null);try{const m=localStorage.getItem("accessToken");if(!m)throw new Error("No authentication token found");const y=await he.get(`http://localhost:3000/api/v1/projects/${e}/estimates/export-pdf?groupBy=${i}`,{headers:{Authorization:`Bearer ${m}`},responseType:"blob"}),j=new Blob([y.data],{type:"application/pdf"}),x=window.URL.createObjectURL(j),g=document.createElement("a");g.href=x;const h=new Date().toISOString().split("T")[0],b=`BOQ_${t.replace(/[^a-z0-9]/gi,"_")}_${h}.pdf`;g.setAttribute("download",b),document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(x)}catch(m){console.error("PDF export failed:",m),o(((N=(f=m.response)==null?void 0:f.data)==null?void 0:N.error)||"Failed to export PDF. Please ensure there are line items to export.")}finally{a(!1)}};return r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2 items-center relative",children:[r.jsx("button",{onClick:p,disabled:s||n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 flex items-center gap-2 justify-center",children:n?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):r.jsx(r.Fragment,{children:" Export PDF"})}),r.jsx("button",{onClick:()=>u(!d),disabled:s||n,className:"px-2 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg disabled:bg-gray-200 text-xs",title:"PDF export options",children:""}),d&&r.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-max",children:r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Group By:"}),r.jsxs("label",{className:"flex items-center gap-2 text-sm mb-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[r.jsx("input",{type:"radio",name:"groupBy",value:"nrm2",checked:i==="nrm2",onChange:f=>c(f.target.value),className:"cursor-pointer"}),r.jsx("span",{children:"NRM 2 Structure (recommended)"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-gray-50 p-1 rounded",children:[r.jsx("input",{type:"radio",name:"groupBy",value:"category",checked:i==="category",onChange:f=>c(f.target.value),className:"cursor-pointer"}),r.jsx("span",{children:"By Category"})]})]})})]}),l&&r.jsx("p",{className:"text-red-600 text-sm",children:l})]})}function dj({budgetCost:e,actualCost:t,contingencyAmount:s=0}){if(!e)return r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[" No budget set for this project. ",r.jsx("strong",{children:"Set a budget"})," to track costs against estimates."]})});const n=t+s,a=e-n,l=n/e*100,o=a<0;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Budget"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:["",e.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Actual Cost"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["",n.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),r.jsxs("div",{className:`rounded-lg p-4 ${o?"bg-red-50":"bg-emerald-50"}`,children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Remaining"}),r.jsxs("p",{className:`text-2xl font-bold mt-1 ${o?"text-red-600":"text-emerald-600"}`,children:["",Math.abs(a).toLocaleString("en-GB",{maximumFractionDigits:0})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Budget Usage"}),r.jsxs("p",{className:"text-sm font-bold text-gray-600",children:[l.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${l>100?"bg-red-500":l>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(l,100)}%`}})})]}),r.jsx("div",{className:`rounded-lg p-3 ${o?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:r.jsx("p",{className:`text-sm font-medium ${o?"text-red-800":"text-green-800"}`,children:o?r.jsxs(r.Fragment,{children:[" ",r.jsx("strong",{children:"Over Budget:"})," ",Math.abs(a).toLocaleString("en-GB",{maximumFractionDigits:2})," ","over budget"]}):r.jsxs(r.Fragment,{children:[" ",r.jsx("strong",{children:"Within Budget:"})," ",a.toLocaleString("en-GB",{maximumFractionDigits:2})," ","remaining"]})})}),s>0&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-700",children:"Estimate Total:"}),r.jsxs("span",{className:"font-semibold",children:["",t.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",(s/t*100).toFixed(1),"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",s.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})}function uj({projectId:e,notes:t,onAddNote:s,onDeleteNote:n,isLoading:a=!1}){const[l,o]=v.useState(""),[i,c]=v.useState(!1),d=async u=>{if(u.preventDefault(),!!l.trim())try{c(!0),await s(l),o("")}finally{c(!1)}};return r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Project Notes"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add comments and notes about this project"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("form",{onSubmit:d,className:"mb-6",children:[r.jsx("textarea",{value:l,onChange:u=>o(u.target.value),placeholder:"Add a note...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,disabled:i||a}),r.jsx("button",{type:"submit",disabled:!l.trim()||i||a,className:"mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors font-medium",children:i?"Adding...":"Add Note"})]}),r.jsx("div",{className:"space-y-3",children:t.length===0?r.jsx("div",{className:"py-8 text-center text-gray-500",children:r.jsx("p",{className:"text-sm",children:"No notes yet. Add one to get started!"})}):t.map(u=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:u.author}),r.jsx("p",{className:"text-xs text-gray-600",children:new Date(u.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n&&r.jsx("button",{onClick:()=>n(u.id),className:"text-red-600 hover:text-red-700 text-xs font-medium",title:"Delete note",children:""})]}),r.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:u.content})]},u.id))})]})]})}function mj(){var Se;const{id:e}=Ns();ze();const{user:t,isAdmin:s}=Ht(),n=Ss(),{addRecent:a}=cj(),l=Number(e),{currentProject:o,isLoading:i,error:c,fetchProjectById:d}=Ut(),{estimateTotals:u,isLoading:p,error:f,fetchEstimateSummary:N,clearEstimates:m}=Wh(),[y,j]=v.useState(""),[x,g]=v.useState(""),[h,b]=v.useState(!1),[S,k]=v.useState(!1),[w,E]=v.useState(!1),[L,D]=v.useState([]);v.useEffect(()=>(l&&(d(l),N(l)),()=>{m()}),[l,d,N,m]),v.useEffect(()=>{o!=null&&o.name&&a(l,o.name)},[l,o==null?void 0:o.name,a]);const{submitEstimate:I,approveEstimate:W,rejectEstimate:M}=Ut(),F=async()=>{if(l)try{E(!0),await I(l),await d(l),await N(l),n.success("Estimate submitted for approval"),E(!1)}catch(ne){n.error(Sr(ne)),E(!1)}},q=async()=>{if(l)try{E(!0),await W(l,y),await d(l),await N(l),n.success("Estimate approved successfully"),b(!1),j(""),E(!1)}catch(ne){n.error(Sr(ne)),E(!1)}},$=async()=>{if(l)try{E(!0),await M(l,x),await d(l),await N(l),n.success("Estimate rejected"),k(!1),g(""),E(!1)}catch(ne){n.error(Sr(ne)),E(!1)}},P=async ne=>{const ie={id:Date.now().toString(),author:(t==null?void 0:t.username)||"Unknown",content:ne,createdAt:new Date().toISOString()};D([ie,...L]),n.success("Note added successfully")},_=async ne=>{D(L.filter(ie=>ie.id!==ne)),n.success("Note deleted successfully")},A=i||p,B=c||f,Q=!i&&o&&(s||(t==null?void 0:t.id)===o.created_by),X=s&&(o==null?void 0:o.estimate_status)==="submitted",je=s&&(o==null?void 0:o.estimate_status)==="submitted",ee=!i&&o&&((t==null?void 0:t.id)===o.created_by||s)&&o.estimate_status==="draft";return A?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading project..."}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:o.name}),r.jsx("p",{className:"text-gray-600 mt-2",children:o.project_address||o.description||"No address provided"})]}),r.jsxs("div",{className:"flex gap-2",children:[u&&u.grand_total>0&&r.jsx(qh,{projectId:l,projectName:o.name}),Q&&r.jsx(G,{to:`/projects/${l}/edit`,className:"px-4 py-2 border border-khc-primary text-khc-primary hover:bg-khc-light rounded-lg transition",children:"Edit"})]})]}),B&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:B}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:o.status})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Estimate Status"}),r.jsx("p",{className:`text-lg font-semibold mt-1 ${o.estimate_status==="approved"?"text-green-600":o.estimate_status==="submitted"?"text-blue-600":o.estimate_status==="rejected"?"text-red-600":"text-gray-600"}`,children:o.estimate_status})]}),o.budget_cost&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Budget Cost"}),r.jsxs("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:["",o.budget_cost.toLocaleString()]})]}),o.start_date&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Start Date"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:new Date(o.start_date).toLocaleDateString()})]})]}),o.budget_cost&&u&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Budget Overview"}),r.jsx(dj,{budgetCost:o.budget_cost,actualCost:u.grand_total,contingencyAmount:u.contingency_amount})]}),o.description&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700",children:o.description})]}),u&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:"Estimate Summary"}),r.jsx(G,{to:`/projects/${l}/estimates`,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:"Manage Estimates"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Cost Breakdown by Category"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Items"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Subtotal"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Contractor"})]})}),r.jsx("tbody",{className:"divide-y",children:u.categories.map(ne=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:ne.category_name}),r.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:ne.line_count}),r.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-khc-primary",children:["",ne.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["",ne.contractor_items_subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]},ne.category_id))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsxs("span",{className:"font-semibold",children:["",u.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",u.contingency_percentage,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",u.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-lg border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),r.jsxs("span",{className:"font-bold text-khc-primary text-xl",children:["",u.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[u.floor_area_m2&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Cost per m:"}),r.jsxs("span",{className:"font-semibold",children:["",(Se=u.cost_per_m2)==null?void 0:Se.toLocaleString("en-GB",{maximumFractionDigits:2})," / m"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Volunteer Cost:"}),r.jsxs("span",{className:"font-semibold",children:["",u.volunteer_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contractor Cost:"}),r.jsxs("span",{className:"font-semibold",children:["",u.contractor_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})]}),(ee||X||je)&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Actions"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[ee&&r.jsx("button",{onClick:F,disabled:w,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:bg-gray-400",children:w?"Submitting...":"Submit Estimate for Approval"}),X&&r.jsx("button",{onClick:()=>b(!0),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:"Approve Estimate"}),je&&r.jsx("button",{onClick:()=>k(!0),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition",children:"Reject Estimate"})]})]}),r.jsx(uj,{projectId:l,notes:L,onAddNote:P,onDeleteNote:_}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Approve Estimate"}),r.jsx("textarea",{value:y,onChange:ne=>j(ne.target.value),placeholder:"Add approval notes (optional)",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{b(!1),j("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:q,disabled:w,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Approving...":"Approve"})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reject Estimate"}),r.jsx("textarea",{value:x,onChange:ne=>g(ne.target.value),placeholder:"Reason for rejection",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{k(!1),g("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:$,disabled:w,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Rejecting...":"Reject"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Project not found"}),r.jsx(G,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to projects"})]})}const Vh=Fr((e,t)=>({templates:[],currentTemplate:null,isLoading:!1,error:null,fetchTemplates:async(s=!0)=>{var n,a;e({isLoading:!0,error:null});try{const l=await Mr.getAll(s);e({templates:l.data.data||[],isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch templates";throw e({error:o,isLoading:!1}),l}},fetchTemplateById:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Mr.getById(s);e({currentTemplate:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch template";throw e({error:o,isLoading:!1,currentTemplate:null}),l}},saveTemplate:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Mr.create(s)).data.data;return e(i=>({templates:[o,...i.templates],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to save template";throw e({error:o,isLoading:!1}),l}},updateTemplate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Mr.update(s,n)).data.data;return e(c=>{var d;return{templates:c.templates.map(u=>u.id===s?i:u),currentTemplate:((d=c.currentTemplate)==null?void 0:d.id)===s?i:c.currentTemplate,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update template";throw e({error:i,isLoading:!1}),o}},deleteTemplate:async s=>{var n,a;e({isLoading:!0,error:null});try{await Mr.delete(s),e(l=>{var o;return{templates:l.templates.filter(i=>i.id!==s),currentTemplate:((o=l.currentTemplate)==null?void 0:o.id)===s?null:l.currentTemplate,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete template";throw e({error:o,isLoading:!1}),l}},applyTemplate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Mr.applyToProject(s,n)).data.data;return e({currentTemplate:i,isLoading:!1}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to apply template";throw e({error:i,isLoading:!1}),o}},setCurrentTemplate:s=>{e({currentTemplate:s})},clearError:()=>{e({error:null})}})),ec=Fr(e=>({groups:[],currentGroup:null,currentElement:null,currentSubElement:null,currentWorkSection:null,pendingWorkSection:null,searchResults:[],statistics:null,isLoading:!1,isSearching:!1,error:null,searchKeyword:"",fetchGroups:async()=>{e({isLoading:!0,error:null});try{const s=await(await fetch("/api/v1/nrm2/groups")).json();if(!s.success)throw new Error(s.error||"Failed to fetch groups");e({groups:s.data,isLoading:!1})}catch(t){const s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1})}},fetchTree:async()=>{e({isLoading:!0,error:null});try{const s=await(await fetch("/api/v1/nrm2/tree")).json();if(!s.success)throw new Error(s.error||"Failed to fetch NRM 2 hierarchy");e({groups:s.data,isLoading:!1})}catch(t){const s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1}),console.error("Failed to fetch NRM 2 tree:",t)}},fetchGroupDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/groups/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch group details");e({currentGroup:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},fetchElementDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/elements/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch element details");e({currentElement:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},fetchSubElementDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/sub-elements/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch sub-element details");e({currentSubElement:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},searchNRM2:async t=>{if(!t.trim()){e({searchResults:[],searchKeyword:""});return}e({isSearching:!0,error:null,searchKeyword:t});try{const n=await(await fetch(`/api/v1/nrm2/search?q=${encodeURIComponent(t)}`)).json();if(!n.success)throw new Error(n.error||"Search failed");e({searchResults:n.data,isSearching:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isSearching:!1})}},clearSearch:()=>{e({searchResults:[],searchKeyword:"",error:null})},clearError:()=>{e({error:null})},setCurrentGroup:t=>{e({currentGroup:t})},setCurrentElement:t=>{e({currentElement:t})},setCurrentSubElement:t=>{e({currentSubElement:t})},setCurrentWorkSection:t=>{e({currentWorkSection:t})},setPendingWorkSection:t=>{e({pendingWorkSection:t})},fetchStatistics:async()=>{try{const s=await(await fetch("/api/v1/nrm2/stats")).json();if(!s.success)throw new Error(s.error||"Failed to fetch statistics");e({statistics:s.data})}catch(t){console.error("Failed to fetch NRM 2 statistics:",t)}}}));function hj({tabs:e,activeTab:t,onChange:s}){return r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("div",{className:"flex space-x-8",children:e.map(n=>r.jsxs("button",{onClick:()=>s(n.id),className:`px-1 py-4 border-b-2 font-medium text-sm transition-colors ${t===n.id?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[n.icon&&r.jsx("span",{className:"mr-2",children:n.icon}),n.label]},n.id))})})}function pj({items:e,isLoading:t,onSelectItem:s,selectedItemId:n}){const[a,l]=v.useState(""),o=e.filter(i=>i.description.toLowerCase().includes(a.toLowerCase())||i.code.toLowerCase().includes(a.toLowerCase()));return r.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[r.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:a,onChange:i=>l(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm mb-4"}),r.jsx("div",{className:"max-h-64 overflow-y-auto divide-y border rounded",children:t?r.jsx("div",{className:"p-4 text-center text-gray-600",children:"Loading items..."}):o.length===0?r.jsx("div",{className:"p-4 text-center text-gray-600",children:"No items found"}):o.slice(0,20).map(i=>{var c;return r.jsxs("div",{onClick:()=>s(i.id),className:`p-4 cursor-pointer transition ${n===i.id?"bg-khc-light border-l-4 border-khc-primary":"hover:bg-gray-100"}`,children:[r.jsx("p",{className:"font-semibold text-sm text-gray-900",children:i.description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",i.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})," ","/ ",((c=i.unit)==null?void 0:c.code)||"unit"]})]},i.id)})})]})}const Qn="qscostingpro_estimate_presets",fj=10,Qh=()=>{const e=v.useCallback(()=>{try{const l=localStorage.getItem(Qn);return l?JSON.parse(l):[]}catch{return[]}},[]),t=v.useCallback((l,o)=>{try{const i=e(),c={id:`preset-${Date.now()}`,name:String(l||""),description:String(o.description||""),custom_description:String(o.custom_description||""),quantity:Number(o.quantity||1),custom_unit:String(o.custom_unit||""),custom_unit_rate:Number(o.custom_unit_rate||0),category_id:Number(o.category_id||0),created_at:Date.now(),usage_count:0},d=[c,...i].slice(0,fj);return localStorage.setItem(Qn,JSON.stringify(d)),c}catch(i){return console.error("Failed to save preset:",i),null}},[e]),s=v.useCallback(l=>{try{const i=e().filter(c=>c.id!==l);localStorage.setItem(Qn,JSON.stringify(i))}catch{}},[e]),n=v.useCallback(l=>{try{const i=e().map(c=>({...c,usage_count:c.id===l?c.usage_count+1:c.usage_count}));localStorage.setItem(Qn,JSON.stringify(i))}catch(o){console.error("Failed to increment usage count:",o)}},[e]),a=v.useCallback((l=5)=>e().sort((o,i)=>i.usage_count-o.usage_count).slice(0,l),[e]);return{getPresets:e,savePreset:t,deletePreset:s,incrementUsageCount:n,getTopPresets:a}};function xj({onSelectPreset:e,onSaveAsPreset:t,showSaveOption:s=!1}){const{getTopPresets:n,deletePreset:a}=Qh(),l=n(5);return l.length===0?r.jsxs("div",{className:"p-4 text-center text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No presets saved yet"}),s&&r.jsx("p",{className:"text-xs mt-2",children:"Save frequently used items as presets to reuse them"})]}):r.jsx("div",{className:"space-y-2",children:l.map(o=>r.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 hover:border-khc-primary hover:bg-khc-light transition-all",children:r.jsxs("div",{className:"flex justify-between items-start gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:o.custom_description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[o.quantity,"  ",o.custom_unit_rate," ",o.custom_unit]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used ",o.usage_count," times"]})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[r.jsx("button",{onClick:()=>e(o),className:"px-2 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-xs rounded transition-colors",children:"Use"}),r.jsx("button",{onClick:()=>a(o.id),className:"px-2 py-1 bg-red-100 hover:bg-red-200 text-red-600 text-xs rounded transition-colors",title:"Delete preset",children:""})]})]})},o.id))})}const gj=({value:e,onChange:t,onSelect:s,placeholder:n="Search NRM 2 codes..."})=>{const[a,l]=v.useState(!1),[o,i]=v.useState(""),[c,d]=v.useState([]),[u,p]=v.useState(!1),[f,N]=v.useState(e||null),[m,y]=v.useState(""),[j,x]=v.useState(),g=async S=>{if(i(S),!S.trim()){d([]);return}try{p(!0);const k=await $d.search(S,20);d(k.data)}catch(k){console.error("Search failed:",k),d([])}finally{p(!1)}},h=async S=>{if(S.type==="work_section")try{const w=(await $d.getWorkSectionById(S.id)).data;N(w.code),y(w.title),x(w.unit),l(!1),i(""),d([]),t&&t(w),s&&s(w.code,w.title,w.unit)}catch(k){console.error("Failed to fetch work section:",k)}else N(S.code),y(S.title),l(!1),i(""),d([]),s&&s(S.code,S.title)},b=()=>{N(null),y(""),x(void 0),t&&t(null)};return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"relative",children:r.jsx("button",{onClick:()=>l(!a),type:"button",className:"w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:f?r.jsxs("div",{children:[r.jsx("div",{className:"font-mono font-semibold text-gray-900 text-sm",children:f}),r.jsx("div",{className:"text-gray-600 text-xs",children:m}),j&&r.jsxs("div",{className:"text-gray-500 text-xs",children:["Unit: ",j]})]}):r.jsx("div",{className:"text-gray-500 text-sm",children:n})}),f&&r.jsx("button",{onClick:S=>{S.stopPropagation(),b()},className:"text-gray-400 hover:text-gray-600 text-lg",children:""})]})})}),a&&r.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:[r.jsx("div",{className:"p-3 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:S=>g(S.target.value),placeholder:n,autoFocus:!0,className:"w-full px-3 py-2 border border-gray-300 rounded pl-8 focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"absolute left-2 top-2.5 text-gray-400",children:""})]})}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:u?r.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2",children:"Searching..."})]}):o.trim()===""?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:r.jsx("p",{children:"Type to search NRM 2 codes"})}):c.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:r.jsx("p",{children:"No results found"})}):r.jsx("ul",{className:"space-y-0",children:c.map(S=>r.jsx("li",{children:r.jsx("button",{onClick:()=>h(S),type:"button",className:"w-full text-left px-4 py-2 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-mono font-semibold text-gray-900 text-sm",children:S.code}),r.jsx("div",{className:"text-gray-700 text-sm",children:S.title}),S.description&&r.jsx("div",{className:"text-gray-600 text-xs mt-1",children:S.description})]}),r.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:S.type})]})})},`${S.type}-${S.id}`))})})]}),a&&r.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>l(!1)})]})};function yj({isOpen:e,onClose:t,onAddFromLibrary:s,onAddCustom:n,costItems:a,categories:l,units:o,isSubmitting:i,costItemsLoading:c=!1,initialNRM2Code:d,initialNRM2WorkSectionId:u}){const p=Ss(),{incrementUsageCount:f,savePreset:N}=Qh(),[m,y]=v.useState("library"),[j,x]=v.useState(null),[g,h]=v.useState("1"),[b,S]=v.useState(""),[k,w]=v.useState(""),[E,L]=v.useState(""),[D,I]=v.useState("1"),[W,M]=v.useState(""),[F,q]=v.useState(""),[$,P]=v.useState(""),[_,A]=v.useState(""),[B,Q]=v.useState(""),[X,je]=v.useState(null),[ee,Se]=v.useState({}),[ne,ie]=v.useState(!1),[Ge,T]=v.useState(""),de=a.find(z=>z.id===j);v.useEffect(()=>{if((d||u)&&e){x(null),h("1"),S(""),w(""),I("1"),M(""),q(""),P(""),A(""),Q(""),je(null),Se({});let z="";u?z=`/api/v1/nrm2/work-sections/${u}`:d&&(z=`/api/v1/nrm2/work-sections/by-code/${d}`),z&&fetch(z).then(te=>te.json()).then(te=>{te.success&&te.data&&(je(te.data),Q(te.data.code),I("1"),te.data.unit&&M(te.data.unit),te.data.title&&L(te.data.title))}).catch(te=>{console.error("Failed to fetch work section:",te),I("1")}),y("custom")}},[d,u,e]);const De=()=>{x(null),h("1"),S(""),w(""),L(""),I("1"),M(""),q(""),P(""),A(""),Q(""),je(null),Se({})},Ce=z=>{je(z),Q(z.code),z.unit&&M(z.unit),z.title&&!E&&L(z.title)},Cs=z=>{L(z.custom_description),I(String(z.quantity)),M(z.custom_unit),q(String(z.custom_unit_rate)),P(z.category_id),y("custom"),f(z.id)},Ir=()=>{De(),t()},R=()=>{const z={};return j||(z.item="Please select an item"),(g===""||isNaN(parseFloat(g))||parseFloat(g)<=0)&&(z.quantity="Quantity must be a valid number greater than 0"),b&&isNaN(parseFloat(b))&&(z.costOverride="Cost override must be a valid number"),Se(z),Object.keys(z).length===0},Y=()=>{const z={};return E.trim()||(z.description="Description is required"),(D===""||isNaN(parseFloat(D))||parseFloat(D)<=0)&&(z.quantity="Quantity must be a valid number greater than 0"),W.trim()||(z.unit="Unit is required"),(F===""||isNaN(parseFloat(F))||parseFloat(F)<0)&&(z.unitRate="Unit rate must be a valid number 0 or greater"),$||(z.category="Category is required"),Se(z),Object.keys(z).length===0},K=async()=>{if(R())try{await s({cost_item_id:j,quantity:parseFloat(g),unit_cost_override:b?parseFloat(b):void 0,notes:k||void 0}),p.success("Line item added successfully"),De()}catch(z){const te=Sr(z);p.error(te)}},Ne=async()=>{if(Y())try{const z=parseFloat(D);if(isNaN(z)||z===null){p.error("Quantity must be a valid number");return}const te=parseFloat(F);if(isNaN(te)||te===null){p.error("Unit Rate must be a valid number");return}const ml={custom_description:E,quantity:z,custom_unit:W,custom_unit_rate:te,category_id:Number($),notes:_||void 0,nrm2_work_section_id:X==null?void 0:X.id,nrm2_code:B||void 0};console.log("Submitting custom item:",ml),await n(ml),p.success("Custom item added successfully"),De()}catch(z){const te=Sr(z);p.error(te)}},Pe=()=>{if(!Y())return;if(!Ge.trim()){p.error("Please enter a preset name");return}N(Ge,{name:Ge,description:`${E} - ${D}  ${F}`,custom_description:E,quantity:parseFloat(D),custom_unit:W,custom_unit_rate:parseFloat(F),category_id:Number($)})?(p.success(`Preset "${Ge}" saved successfully`),ie(!1),T("")):p.error("Failed to save preset")};return r.jsx(ks,{isOpen:e,onClose:Ir,title:"Add Line Item",size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(hj,{tabs:[{id:"library",label:"From Library",icon:""},{id:"presets",label:"Quick Add",icon:""},{id:"custom",label:"Custom Item",icon:""}],activeTab:m,onChange:y}),m==="presets"&&r.jsx("div",{className:"space-y-4",children:r.jsx(xj,{onSelectPreset:Cs})}),m==="library"&&r.jsxs("div",{className:"space-y-4",children:[ee.item&&r.jsx("div",{className:"text-sm text-red-600",children:ee.item}),r.jsx(pj,{items:a,isLoading:c,onSelectItem:x,selectedItemId:j}),de&&r.jsxs("div",{className:"bg-khc-light rounded-lg p-4 border border-khc-primary space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:de.description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Material: ",de.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",value:g,onChange:z=>h(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),ee.quantity&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Override ()"}),r.jsx("input",{type:"number",value:b,onChange:z=>S(z.target.value),placeholder:"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),ee.costOverride&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.costOverride})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:k,onChange:z=>w(z.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]})]}),m==="custom"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NRM 2 Code (Optional)"}),r.jsx(gj,{value:B,onChange:Ce}),X&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",X.code," - ",X.title]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:E,onChange:z=>L(z.target.value),placeholder:"Enter item description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),ee.description&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",value:D,onChange:z=>I(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),ee.quantity&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),r.jsx("input",{type:"text",value:W,onChange:z=>M(z.target.value),placeholder:"e.g., m2, sqm, item",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),ee.unit&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.unit})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Rate () *"}),r.jsx("input",{type:"number",value:F,onChange:z=>q(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),ee.unitRate&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.unitRate})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:$,onChange:z=>P(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",children:[r.jsx("option",{value:"",children:"Select category..."}),l.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]}),ee.category&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:ee.category})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:_,onChange:z=>A(z.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]}),ne&&m==="custom"&&r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Save as Preset"}),r.jsx("input",{type:"text",value:Ge,onChange:z=>T(z.target.value),placeholder:"Preset name (e.g., 'Standard Labor Cost')",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",autoFocus:!0}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{ie(!1),T("")},className:"flex-1 px-3 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Cancel"}),r.jsx("button",{onClick:Pe,className:"flex-1 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Preset"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-between",children:[m==="custom"&&!ne&&r.jsx("button",{onClick:()=>ie(!0),className:"px-4 py-2 border border-blue-300 text-blue-600 hover:bg-blue-50 rounded-lg text-sm transition-colors",children:" Save as Preset"}),r.jsxs("div",{className:"flex gap-2 ml-auto",children:[r.jsx("button",{onClick:Ir,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 text-sm",children:"Cancel"}),m!=="presets"&&r.jsx("button",{onClick:m==="library"?K:Ne,disabled:i||m==="library"&&!de,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 text-sm",children:i?"Adding...":"Add Item"})]})]})]})})}function jj({categories:e,onUpdateQuantity:t,onDeleteItem:s,isLoading:n,isEmpty:a}){const[l,o]=v.useState(null),[i,c]=v.useState(""),[d,u]=v.useState(!1),p=async N=>{const m=parseFloat(i);if(isNaN(m)||m<=0){alert("Please enter a valid quantity");return}try{u(!0),await t(N,m),o(null),c("")}finally{u(!1)}},f=async N=>{if(window.confirm("Remove this item from the estimate?"))try{u(!0),await s(N)}finally{u(!1)}};return n?r.jsx("div",{className:"bg-white rounded-lg shadow",children:r.jsx("div",{className:"p-8 text-center text-gray-600",children:"Loading estimates..."})}):a?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"text-gray-500",children:[r.jsx("p",{className:"text-lg font-semibold mb-2",children:" Build Your Estimate"}),r.jsx("p",{className:"text-sm",children:'No line items yet. Click "Quick Add Item" to start building your estimate.'})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"#"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"NRM 2 Code"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700",children:"Qty"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700",children:"Unit"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700",children:"Total"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(N=>r.jsxs($a.Fragment,{children:[r.jsx("tr",{className:"bg-khc-light border-b hover:bg-opacity-75",children:r.jsx("td",{colSpan:7,className:"px-6 py-3",children:r.jsx("p",{className:"font-semibold text-khc-primary text-sm",children:N.category_name})})}),N.line_items.map((m,y)=>r.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 w-8",children:y+1}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("p",{className:"font-medium text-gray-900",children:m.description})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:m.nrm2_code?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-semibold bg-blue-100 text-blue-800",children:m.nrm2_code}):r.jsx("span",{className:"text-gray-400 text-xs",children:""})}),r.jsx("td",{className:"px-6 py-4 text-sm text-right",children:l===m.estimate_id?r.jsx("input",{type:"number",step:"0.01",min:"0",value:i,onChange:j=>c(j.target.value),autoFocus:!0,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right"}):r.jsx("span",{className:"font-medium",children:m.quantity})}),r.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-600",children:m.unit_code}),r.jsx("td",{className:"px-6 py-4 text-sm text-right",children:r.jsxs("span",{className:"font-bold text-khc-primary",children:["",m.line_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("div",{className:"flex gap-2 justify-center",children:l===m.estimate_id?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>p(m.estimate_id),disabled:d,className:"px-3 py-1 bg-khc-primary text-white text-xs rounded hover:bg-khc-secondary disabled:bg-gray-400",children:"Save"}),r.jsx("button",{onClick:()=>o(null),className:"px-3 py-1 border border-gray-300 text-xs rounded hover:bg-gray-100",children:"Cancel"})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{o(m.estimate_id),c(m.quantity.toString())},className:"text-khc-primary hover:text-khc-secondary text-xs hover:underline",children:"Edit"}),r.jsx("button",{onClick:()=>f(m.estimate_id),disabled:d,className:"text-red-600 hover:text-red-700 text-xs hover:underline disabled:text-gray-400",children:"Delete"})]})})})]},m.estimate_id)),r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsxs("td",{colSpan:5,className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:[N.category_name," Subtotal:"]}),r.jsxs("td",{className:"px-6 py-3 text-right text-sm font-bold text-khc-primary",children:["",N.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsx("td",{})]})]},N.category_id))})]})})})}function vj({isOpen:e,onClose:t,onSave:s,isLoading:n=!1}){const[a,l]=v.useState(""),[o,i]=v.useState(""),[c,d]=v.useState("standard"),[u,p]=v.useState(!1),[f,N]=v.useState({}),m=async()=>{const y={};if(a.trim()||(y.name="Template name is required"),a.length>255&&(y.name="Template name must be less than 255 characters"),Object.keys(y).length>0){N(y);return}try{await s(a,o,c,u),l(""),i(""),d("standard"),p(!1),N({}),t()}catch{}};return r.jsx(ks,{isOpen:e,onClose:t,title:"Save as Template",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),r.jsx("input",{type:"text",value:a,onChange:y=>{l(y.target.value),f.name&&N({...f,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Residential Interior",maxLength:255}),f.name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:o,onChange:y=>i(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary resize-none",placeholder:"Describe what this template is for...",rows:3,maxLength:500}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.length,"/500"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Type"}),r.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"quick",children:"Quick (5-10 items)"}),r.jsx("option",{value:"standard",children:"Standard (10-50 items)"}),r.jsx("option",{value:"complex",children:"Complex (50+ items)"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"isPublic",checked:u,onChange:y=>p(y.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),r.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Share template with team"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900",children:" Save this estimate as a template to quickly create similar estimates in the future."})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,disabled:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:m,disabled:n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:n?"Saving...":"Save Template"})]})]})})}function bj({isOpen:e,onClose:t,onSelectTemplate:s,showShared:n=!0}){const{templates:a,isLoading:l,fetchTemplates:o}=Vh(),[i,c]=v.useState(""),[d,u]=v.useState("all");v.useEffect(()=>{e&&o(n)},[e,o,n]);const p=a.filter(f=>!(d!=="all"&&f.template_type!==d||i&&!f.name.toLowerCase().includes(i.toLowerCase())));return r.jsx(ks,{isOpen:e,onClose:t,title:"Template Library",size:"lg",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:f=>c(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("select",{value:d,onChange:f=>u(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"quick",children:"Quick"}),r.jsx("option",{value:"standard",children:"Standard"}),r.jsx("option",{value:"complex",children:"Complex"})]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:l?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading templates..."}):p.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:a.length===0?"No templates available":"No templates match your search"}):r.jsx("div",{className:"divide-y",children:p.map(f=>r.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:f.name}),f.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:f.description}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${f.template_type==="quick"?"bg-blue-100 text-blue-700":f.template_type==="standard"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:f.template_type}),f.is_public&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Shared"})]})]}),r.jsx("button",{onClick:()=>{s(f),t()},className:"ml-4 px-3 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded text-sm font-medium transition-colors",children:"Use"})]})},f.id))})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Close"})})]})})}function Nj({isOpen:e,onClose:t,onSelectItem:s}){var m,y;const n=Ss(),{groups:a,isLoading:l,fetchGroups:o}=ec(),[i,c]=v.useState(""),[d,u]=v.useState(null);v.useEffect(()=>{e&&a.length===0&&o()},[e,a.length,o]);const p=v.useMemo(()=>{if(!a||a.length===0||i.trim()==="")return[];const j=i.toLowerCase(),x=[];return a.forEach(g=>{var h;(h=g.elements)==null||h.forEach(b=>{var S;(S=b.sub_elements)==null||S.forEach(k=>{var w;(w=k.work_sections)==null||w.forEach(E=>{var L;(E.code.toLowerCase().includes(j)||E.title.toLowerCase().includes(j)||(L=E.description)!=null&&L.toLowerCase().includes(j))&&x.push({id:E.id,code:E.code,title:E.title,description:E.description,unit:E.unit,sub_element_id:k.id})})})})}),x},[a,i]),f=j=>{u(j.id)},N=()=>{if(!d){n.error("Please select an item to import");return}const j=p.find(x=>x.id===d);if(!j){n.error("Selected item not found");return}s(j),c(""),u(null),t(),n.success(`Imported: ${j.code} - ${j.title}`)};return r.jsx(ks,{isOpen:e,onClose:t,title:"Import from BOQ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search BOQ Items"}),r.jsx("input",{type:"text",placeholder:"Search by code, description, or keyword...",value:i,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),l?r.jsx("div",{className:"py-8 text-center text-gray-500",children:"Loading BOQ data..."}):i.trim()===""?r.jsxs("div",{className:"py-8 text-center text-gray-500",children:[r.jsx("p",{children:"Enter a search term to browse BOQ items"}),r.jsx("p",{className:"text-sm mt-2",children:'Try searching for "preliminary", "excavation", or "topsoil"'})]}):p.length===0?r.jsx("div",{className:"py-8 text-center text-gray-500",children:r.jsxs("p",{children:['No items found matching "',i,'"']})}):r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:p.map(j=>r.jsx("div",{onClick:()=>f(j),className:`p-3 border-b cursor-pointer hover:bg-blue-50 transition-colors ${d===j.id?"bg-blue-100 border-l-4 border-l-blue-500":""}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("input",{type:"radio",name:"boq-item",value:j.id,checked:d===j.id,onChange:()=>f(j),className:"mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-sm text-gray-900",children:j.code}),r.jsx("div",{className:"text-sm text-gray-700 mt-0.5",children:j.title}),j.description&&r.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:j.description}),j.unit&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Unit: ",j.unit]})]})]})},j.id))}),d&&p.length>0&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-blue-900",children:["Selected:"," ",r.jsx("strong",{children:(m=p.find(j=>j.id===d))==null?void 0:m.code})," ","-"," ",(y=p.find(j=>j.id===d))==null?void 0:y.title]})}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:N,disabled:!d||l,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors",children:"Import Selected Item"})]})]})})}function wj(){const{id:e}=Ns();ze();const t=Ss(),s=Number(e),{currentProject:n,fetchProjectById:a,isLoading:l}=Ut(),{estimates:o,estimateTotals:i,isLoading:c,error:d,fetchEstimates:u,addEstimate:p,updateEstimate:f,deleteEstimate:N}=Wh(),{saveTemplate:m,applyTemplate:y}=Vh(),{pendingWorkSection:j,setPendingWorkSection:x}=ec(),[g,h]=v.useState(!1),[b,S]=v.useState(null),[k,w]=v.useState(null),[E,L]=v.useState(!1),[D,I]=v.useState(!1),[W,M]=v.useState(!1),[F,q]=v.useState([]),[$,P]=v.useState([]),[_,A]=v.useState([]),[B,Q]=v.useState(!1),[X,je]=v.useState(null),[ee,Se]=v.useState(""),[ne,ie]=v.useState(!1),[Ge,T]=v.useState(!1),[de,De]=v.useState(!1);v.useEffect(()=>{s&&(a(s),u(s),Ce(),Cs(),Ir())},[s,a,u]),v.useEffect(()=>{j&&!g&&(S(j.code),h(!0),x(null))},[j,g,x]);const Ce=async()=>{Q(!0);try{const re=await $e.getAll();q(re.data.data||[])}catch(re){console.error("Failed to fetch cost items:",re)}finally{Q(!1)}},Cs=async()=>{try{const re=await U0.getAll();P(re.data.data||[])}catch(re){console.error("Failed to fetch units:",re)}},Ir=async()=>{try{const re=await $e.getCategories();A(re.data.data||[])}catch(re){console.error("Failed to fetch categories:",re)}},R=async re=>{try{ie(!0),await p(s,{cost_item_id:re.cost_item_id,quantity:re.quantity,unit_cost_override:re.unit_cost_override,notes:re.notes}),h(!1)}finally{ie(!1)}},Y=async re=>{try{ie(!0),await p(s,{custom_description:re.custom_description,quantity:re.quantity,custom_unit:re.custom_unit,custom_unit_rate:re.custom_unit_rate,category_id:re.category_id,notes:re.notes,nrm2_work_section_id:re.nrm2_work_section_id,nrm2_code:re.nrm2_code}),h(!1)}finally{ie(!1)}},K=re=>{S(re.code),w(re.id),L(!1),h(!0)},Ne=async(re,Or)=>{try{ie(!0),await f(s,re,{quantity:Or}),t.success("Quantity updated successfully"),je(null),Se(""),ie(!1)}catch(hl){t.error(Sr(hl)),ie(!1)}},Pe=async re=>{if(window.confirm("Remove this item from the estimate?"))try{ie(!0),await N(s,re),t.success("Item removed successfully"),ie(!1)}catch(Or){t.error(Sr(Or)),ie(!1)}},z=async(re,Or,hl,Xh)=>{try{De(!0);const tc=o.map(Wt=>({cost_item_id:Wt.cost_item_id||void 0,custom_description:Wt.custom_description||void 0,custom_unit_rate:Wt.custom_unit_rate||void 0,custom_unit:Wt.custom_unit||void 0,category_id:Wt.category_id||void 0,quantity:Wt.quantity,unit_cost_override:Wt.unit_cost_override||void 0,notes:Wt.notes||void 0}));await m({name:re,description:Or,template_type:hl,is_public:Xh,line_items:tc}),t.success("Template saved successfully"),I(!1)}catch{t.error("Failed to save template")}finally{De(!1)}},te=async re=>{try{De(!0),await y(re.id,s),t.success(`Template "${re.name}" loaded. Add quantities to create estimates.`)}catch{t.error("Failed to load template")}finally{De(!1)}};if((l||c||B)&&!n)return r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."});if(!n)return r.jsx("div",{className:"text-center py-12",children:"Project not found"});const Yh=(i==null?void 0:i.categories)||[];return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Build Estimate"}),r.jsx("p",{className:"text-gray-600 mt-2",children:n.name})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[r.jsx("button",{onClick:()=>M(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Load a saved estimate template",children:" Load Template"}),r.jsx("button",{onClick:()=>L(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 text-sm",title:"Import items from NRM 2 BOQ",children:" Import from BOQ"}),r.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg flex items-center gap-2",children:" Add Line Item"}),o.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Save current estimate as template",children:" Save Template"}),r.jsx(qh,{projectId:s,projectName:n.name,isDisabled:o.length===0})]})]})]}),d&&!Ge&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[r.jsx("span",{children:d}),r.jsx("button",{onClick:()=>T(!0),className:"text-red-600 hover:text-red-800 font-bold",children:""})]}),r.jsx(Nj,{isOpen:E,onClose:()=>L(!1),onSelectItem:K}),r.jsx(yj,{isOpen:g,onClose:()=>{h(!1),S(null),w(null)},onAddFromLibrary:R,onAddCustom:Y,costItems:F,categories:_,units:$,isSubmitting:ne,costItemsLoading:B,initialNRM2Code:b,initialNRM2WorkSectionId:k}),r.jsx(vj,{isOpen:D,onClose:()=>I(!1),onSave:z,isLoading:de}),r.jsx(bj,{isOpen:W,onClose:()=>M(!1),onSelectTemplate:te,showShared:!0}),r.jsx(jj,{categories:Yh,onUpdateQuantity:Ne,onDeleteItem:Pe,isLoading:c,isEmpty:o.length===0}),i&&r.jsxs("div",{className:"bg-khc-light rounded-lg p-6 border border-khc-primary",children:[r.jsx("h3",{className:"font-bold text-lg text-khc-primary mb-4",children:"Estimate Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{className:"font-semibold",children:["",i.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsxs("span",{children:["Contingency (",i.contingency_percentage,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",i.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between border-t border-khc-primary pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),r.jsxs("span",{className:"font-bold text-khc-primary text-lg",children:["",i.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),i.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 text-right pt-2",children:["",i.cost_per_m2.toLocaleString("en-GB",{maximumFractionDigits:2})," per m"]})]})]})]})}const Kh=Fr((e,t)=>({categories:[],subElements:[],costItems:[],units:[],isLoading:!1,error:null,selectedCategoryId:null,searchTerm:"",fetchCategories:async()=>{e({isLoading:!0,error:null});try{const s=await $e.getCategories();e({categories:s.data.data||s.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to fetch categories";e({error:n,isLoading:!1})}},fetchSubElements:async s=>{e({isLoading:!0,error:null});try{const n=s?await $e.getSubElementsByCategory(s):await $e.getSubElements();e({subElements:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch sub-elements";e({error:a,isLoading:!1})}},fetchCostItems:async s=>{e({isLoading:!0,error:null});try{const n=await $e.getCostItems(s);e({costItems:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch cost items";e({error:a,isLoading:!1})}},fetchUnits:async()=>{e({isLoading:!0,error:null});try{const s=await $e.getUnits();e({units:s.data.data||s.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to fetch units";e({error:n,isLoading:!1})}},createCategory:async s=>{try{const n=await $e.createCategory(s);return e(a=>({categories:[...a.categories,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create category";throw e({error:a}),n}},updateCategory:async(s,n)=>{try{const a=await $e.updateCategory(s,n);return e(l=>({categories:l.categories.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update category";throw e({error:l}),a}},deleteCategory:async s=>{try{await $e.deleteCategory(s),e(n=>({categories:n.categories.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete category";throw e({error:a}),n}},createSubElement:async s=>{try{const n=await $e.createSubElement(s);return e(a=>({subElements:[...a.subElements,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create sub-element";throw e({error:a}),n}},updateSubElement:async(s,n)=>{try{const a=await $e.updateSubElement(s,n);return e(l=>({subElements:l.subElements.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update sub-element";throw e({error:l}),a}},deleteSubElement:async s=>{try{await $e.deleteSubElement(s),e(n=>({subElements:n.subElements.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete sub-element";throw e({error:a}),n}},createCostItem:async s=>{try{const n=await $e.createCostItem(s);return e(a=>({costItems:[...a.costItems,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create cost item";throw e({error:a}),n}},updateCostItem:async(s,n)=>{try{const a=await $e.updateCostItem(s,n);return e(l=>({costItems:l.costItems.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update cost item";throw e({error:l}),a}},deleteCostItem:async s=>{try{await $e.deleteCostItem(s),e(n=>({costItems:n.costItems.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete cost item";throw e({error:a}),n}},setSelectedCategory:s=>{e({selectedCategoryId:s})},setSearchTerm:s=>{e({searchTerm:s})},clearError:()=>{e({error:null})},getSubElementsByCategory:s=>t().subElements.filter(n=>n.category_id===s),getCostItemsBySubElement:s=>t().costItems.filter(n=>n.sub_element_id===s),searchCostItems:s=>{const n=s.toLowerCase();return t().costItems.filter(a=>a.description.toLowerCase().includes(n)||a.code.toLowerCase().includes(n))}}));function Sj(){const{isAdmin:e}=Ht(),{categories:t,subElements:s,costItems:n,units:a,isLoading:l,error:o,selectedCategoryId:i,searchTerm:c,fetchCategories:d,fetchSubElements:u,fetchCostItems:p,fetchUnits:f,setSelectedCategory:N,setSearchTerm:m,clearError:y,createCategory:j,updateCategory:x,deleteCategory:g,createSubElement:h,updateSubElement:b,deleteSubElement:S,createCostItem:k,updateCostItem:w,deleteCostItem:E}=Kh(),[L,D]=v.useState("costItems"),[I,W]=v.useState(!1),[M,F]=v.useState(null),[q,$]=v.useState({code:"",name:"",description:"",sort_order:0}),[P,_]=v.useState({category_id:0,code:"",name:"",description:"",sort_order:0}),[A,B]=v.useState({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05});v.useEffect(()=>{d(),u(),p(),f()},[d,u,p,f]);const Q=async()=>{try{M?(await x(M,q),F(null)):await j(q),$({code:"",name:"",description:"",sort_order:0}),W(!1)}catch(T){console.error("Failed to save category:",T)}},X=async T=>{if(window.confirm("Delete this category? This will affect all sub-elements."))try{await g(T)}catch(de){console.error("Failed to delete category:",de)}},je=async()=>{try{M?(await b(M,P),F(null)):await h(P),_({category_id:0,code:"",name:"",description:"",sort_order:0}),W(!1)}catch(T){console.error("Failed to save sub-element:",T)}},ee=async T=>{if(window.confirm("Delete this sub-element? This will affect all cost items."))try{await S(T)}catch(de){console.error("Failed to delete sub-element:",de)}},Se=async()=>{try{M?(await w(M,A),F(null)):await k(A),B({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05}),W(!1)}catch(T){console.error("Failed to save cost item:",T)}},ne=async T=>{if(window.confirm("Delete this cost item?"))try{await E(T)}catch(de){console.error("Failed to delete cost item:",de)}},ie=i?s.filter(T=>T.category_id===i):s,Ge=n.filter(T=>T.description.toLowerCase().includes(c.toLowerCase())||T.code.toLowerCase().includes(c.toLowerCase()));return e?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Cost Database Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage categories, sub-elements, and cost items"})]}),o&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[r.jsx("span",{children:o}),r.jsx("button",{onClick:y,className:"text-red-600 hover:text-red-800",children:""})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("div",{className:"flex gap-8",children:[r.jsx("button",{onClick:()=>D("categories"),className:`py-4 px-2 border-b-2 font-medium transition ${L==="categories"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Categories"}),r.jsx("button",{onClick:()=>D("subElements"),className:`py-4 px-2 border-b-2 font-medium transition ${L==="subElements"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Sub-Elements"}),r.jsx("button",{onClick:()=>D("costItems"),className:`py-4 px-2 border-b-2 font-medium transition ${L==="costItems"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Cost Items"})]})}),r.jsxs("div",{className:"space-y-4",children:[L==="categories"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Categories"}),r.jsx("button",{onClick:()=>{W(!I),F(null),$({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:I?"Cancel":"+ Add Category"})]}),I&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:q.code,onChange:T=>$({...q,code:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., CAT-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:q.name,onChange:T=>$({...q,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Category name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:q.description||"",onChange:T=>$({...q,description:T.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{W(!1),F(null),$({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Q,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:M?"Update":"Create"})]})]}),l&&!t.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading categories..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(T=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:T.code}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:T.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:T.description||"-"}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{$(T),F(T.id),W(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>X(T.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},T.id))})]})})]}),L==="subElements"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Sub-Elements"}),r.jsx("button",{onClick:()=>{W(!I),F(null),_({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:I?"Cancel":"+ Add Sub-Element"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>N(null),className:`px-3 py-2 rounded-lg text-sm transition ${i===null?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All Categories"}),t.map(T=>r.jsx("button",{onClick:()=>N(T.id),className:`px-3 py-2 rounded-lg text-sm transition ${i===T.id?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:T.name},T.id))]}),I&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:P.category_id,onChange:T=>_({...P,category_id:Number(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select a category"}),t.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:P.code,onChange:T=>_({...P,code:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., SUB-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:P.name,onChange:T=>_({...P,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Sub-element name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:P.description||"",onChange:T=>_({...P,description:T.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{W(!1),F(null),_({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:je,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:M?"Update":"Create"})]})]}),l&&!s.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading sub-elements..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:ie.map(T=>{const de=t.find(De=>De.id===T.category_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(de==null?void 0:de.name)||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:T.code}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:T.name}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{_(T),F(T.id),W(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>ee(T.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},T.id)})})]})})]}),L==="costItems"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Items"}),r.jsx("button",{onClick:()=>{W(!I),F(null),B({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:I?"Cancel":"+ Add Cost Item"})]}),r.jsx("div",{children:r.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:c,onChange:T=>m(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})}),I&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Element *"}),r.jsxs("select",{value:A.sub_element_id,onChange:T=>B({...A,sub_element_id:Number(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select a sub-element"}),s.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:A.code,onChange:T=>B({...A,code:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., ITM-001"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:A.description,onChange:T=>B({...A,description:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Item description"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),r.jsxs("select",{value:A.unit_id,onChange:T=>B({...A,unit_id:Number(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select unit"}),a.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste Factor"}),r.jsx("input",{type:"number",step:"0.01",value:A.waste_factor,onChange:T=>B({...A,waste_factor:parseFloat(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"1.05"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Required"}),r.jsx("input",{type:"checkbox",checked:A.is_contractor_required,onChange:T=>B({...A,is_contractor_required:T.target.checked}),className:"w-4 h-4 mt-2"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Cost *"}),r.jsx("input",{type:"number",step:"0.01",value:A.material_cost,onChange:T=>B({...A,material_cost:parseFloat(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Cost"}),r.jsx("input",{type:"number",step:"0.01",value:A.management_cost,onChange:T=>B({...A,management_cost:parseFloat(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Cost"}),r.jsx("input",{type:"number",step:"0.01",value:A.contractor_cost,onChange:T=>B({...A,contractor_cost:parseFloat(T.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{W(!1),F(null),B({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Se,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:M?"Update":"Create"})]})]}),l&&!n.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading cost items..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Sub-Element"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Material Cost"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Mgmt Cost"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Contractor Cost"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:Ge.map(T=>{const de=s.find(De=>De.id===T.sub_element_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:T.code}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:T.description}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(de==null?void 0:de.name)||"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",T.material_cost.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",T.management_cost.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",T.contractor_cost.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{B(T),F(T.id),W(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>ne(T.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},T.id)})})]})})]})]})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access cost management"})})}const Ur=e=>{var t;if(e instanceof $0){const s=(t=e.response)==null?void 0:t.data;return(s==null?void 0:s.message)||e.message||"Unknown error"}return"Unknown error"},Br={getReportData:async e=>{try{return(await U.get(`/projects/${e}/report`)).data.data}catch(t){throw new Error(`Failed to fetch report data: ${Ur(t)}`)}},getHistoricAnalysis:async e=>{try{return[]}catch(t){throw new Error(`Failed to fetch historic analysis: ${Ur(t)}`)}},getProjectActuals:async e=>{try{return(await U.get(`/projects/${e}/actuals`)).data.data}catch(t){throw new Error(`Failed to fetch project actuals: ${Ur(t)}`)}},createProjectActual:async(e,t)=>{try{return(await U.post(`/projects/${e}/actuals`,t)).data.data}catch(s){throw new Error(`Failed to create project actual: ${Ur(s)}`)}},updateProjectActual:async(e,t,s)=>{try{return(await U.put(`/projects/${e}/actuals/${t}`,s)).data.data}catch(n){throw new Error(`Failed to update project actual: ${Ur(n)}`)}},deleteProjectActual:async(e,t)=>{try{await U.delete(`/projects/${e}/actuals/${t}`)}catch(s){throw new Error(`Failed to delete project actual: ${Ur(s)}`)}}},dl=Fr((e,t)=>({reportData:null,historicAnalysis:[],projectActuals:[],isLoading:!1,error:null,fetchReportData:async s=>{e({isLoading:!0,error:null});try{const n=await Br.getReportData(s);e({reportData:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch report";e({error:a,isLoading:!1})}},fetchHistoricAnalysis:async s=>{e({isLoading:!0,error:null});try{const n=await Br.getHistoricAnalysis(s);e({historicAnalysis:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch historic analysis";e({error:a,isLoading:!1})}},fetchProjectActuals:async s=>{e({isLoading:!0,error:null});try{const n=await Br.getProjectActuals(s);e({projectActuals:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch project actuals";e({error:a,isLoading:!1})}},addProjectActual:async(s,n)=>{try{const a=await Br.createProjectActual(s,n);return e(l=>({projectActuals:[...l.projectActuals,a]})),a}catch(a){const l=a instanceof Error?a.message:"Failed to add project actual";throw e({error:l}),a}},updateProjectActual:async(s,n,a)=>{try{const l=await Br.updateProjectActual(s,n,a);return e(o=>({projectActuals:o.projectActuals.map(i=>i.id===n?l:i)})),l}catch(l){const o=l instanceof Error?l.message:"Failed to update project actual";throw e({error:o}),l}},deleteProjectActual:async(s,n)=>{try{await Br.deleteProjectActual(s,n),e(a=>({projectActuals:a.projectActuals.filter(l=>l.id!==n)}))}catch(a){const l=a instanceof Error?a.message:"Failed to delete project actual";throw e({error:l}),a}},clearError:()=>{e({error:null})},clearReportData:()=>{e({reportData:null})}}));function be({variant:e="primary",size:t="md",loading:s=!1,fullWidth:n=!1,disabled:a,className:l="",children:o,...i}){const c={primary:"bg-khc-primary hover:bg-khc-secondary text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",outline:"border border-khc-primary text-khc-primary hover:bg-khc-light"},d={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return r.jsx("button",{...i,disabled:a||s,className:`
        rounded-lg font-medium transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${c[e]}
        ${d[t]}
        ${n?"w-full":""}
        ${l}
      `,children:s?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),o]}):o})}function Ql({label:e,error:t,helperText:s,className:n="",id:a,...l}){const o=a||`input-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:"space-y-1",children:[e&&r.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[e,l.required&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),r.jsx("input",{...l,id:o,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${l.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${n}
        `}),t&&r.jsx("p",{className:"text-sm text-red-600",children:t}),s&&!t&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}function Bd({label:e,error:t,helperText:s,options:n,placeholder:a,className:l="",id:o,...i}){const c=o||`select-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:"space-y-1",children:[e&&r.jsxs("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:[e,i.required&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),r.jsxs("select",{...i,id:c,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${i.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${l}
        `,children:[a&&r.jsx("option",{value:"",disabled:!0,selected:!0,children:a}),n.map(d=>r.jsx("option",{value:d.value,children:d.label},d.value))]}),t&&r.jsx("p",{className:"text-sm text-red-600",children:t}),s&&!t&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}function Z({children:e,title:t,subtitle:s,className:n="",hover:a=!1}){return r.jsxs("div",{className:`
        bg-white rounded-lg shadow-md p-6
        ${a?"hover:shadow-lg transition-shadow duration-200 cursor-pointer":""}
        ${n}
      `,children:[t&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),s&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]}),e]})}function zd({children:e,variant:t="default",size:s="md"}){const n={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"},a={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"};return r.jsx("span",{className:`
        inline-block rounded-full font-medium
        ${n[t]}
        ${a[s]}
      `,children:e})}function ul({size:e="md",text:t="Loading..."}){const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},n={sm:"text-sm",md:"text-base",lg:"text-lg"};return r.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:`
          border-4 border-gray-200 border-t-khc-primary rounded-full animate-spin
          ${s[e]}
        `}),t&&r.jsx("p",{className:`text-gray-600 ${n[e]}`,children:t})]})}function Dr({message:e,onDismiss:t,autoClose:s=!1,autoCloseDuration:n=5e3}){const[a,l]=v.useState(!0);if(v.useEffect(()=>{if(s&&a){const i=setTimeout(()=>{l(!1),t==null||t()},n);return()=>clearTimeout(i)}},[s,n,a,t]),!a)return null;const o=()=>{l(!1),t==null||t()};return r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 pt-0.5",children:r.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-red-800",children:e})}),t&&r.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-800 transition",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function kj(e,t="report.csv"){const s=[];if(s.push(["KHConstruct Report"]),s.push([""]),s.push(["Project Name",e.project_name]),s.push(["Project ID",e.project_id.toString()]),e.completion_date&&s.push(["Completion Date",e.completion_date]),s.push([""]),s.push(["Cost Summary"]),s.push(["","Estimated",e.estimated_costs.grand_total.toString()]),e.actual_costs){s.push(["","Actual",e.actual_costs.grand_total.toString()]);const a=e.actual_costs.grand_total-e.estimated_costs.grand_total;s.push(["","Variance",a.toString()])}s.push([""]),s.push(["Cost Breakdown"]),s.push(["Subtotal",e.estimated_costs.subtotal.toString()]),s.push(["Contingency",e.estimated_costs.contingency.toString()]),s.push(["Grand Total",e.estimated_costs.grand_total.toString()]),e.estimated_costs.cost_per_m2&&s.push(["Cost per m",e.estimated_costs.cost_per_m2.toString()]),s.push([""]),s.push(["Line Items"]),s.push(["Description","Category","Estimated","Actual","Variance"]),e.line_items.forEach(a=>{var l,o;s.push([a.description,a.category,a.estimated.toString(),((l=a.actual)==null?void 0:l.toString())||"",((o=a.variance)==null?void 0:o.toString())||""])}),e.notes&&(s.push([""]),s.push(["Notes",e.notes]));const n=s.map(a=>a.map(l=>`"${l}"`).join(",")).join(`
`);Gh(n,t,"text/csv")}function Cj(e,t="report.json"){const s=JSON.stringify(e,null,2);Gh(s,t,"application/json")}function Gh(e,t,s){const n=new Blob([e],{type:s}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}function Jh(e){return`
    <!DOCTYPE html>
    <html>
      <head>
        <title>KHConstruct Report - ${e.project_name}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { background-color: #2C5F8D; color: white; padding: 20px; margin-bottom: 20px; }
          .section { margin-bottom: 30px; }
          .section-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #2C5F8D; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background-color: #f2f2f2; font-weight: bold; }
          tr:hover { background-color: #f5f5f5; }
          .summary { display: flex; gap: 40px; }
          .summary-item { flex: 1; }
          .summary-item label { font-weight: bold; display: block; margin-bottom: 5px; }
          .summary-item value { font-size: 16px; color: #2C5F8D; }
          .variance-under { color: green; }
          .variance-over { color: red; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>KHConstruct Project Report</h1>
          <p>Project: ${e.project_name}</p>
          ${e.completion_date?`<p>Completion Date: ${new Date(e.completion_date).toLocaleDateString()}</p>`:""}
        </div>

        <div class="section">
          <div class="section-title">Cost Summary</div>
          <div class="summary">
            <div class="summary-item">
              <label>Estimated Total:</label>
              <div>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
            </div>
            ${e.actual_costs?`
              <div class="summary-item">
                <label>Actual Total:</label>
                <div>${e.actual_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
              </div>
              <div class="summary-item">
                <label>Variance:</label>
                <div class="${e.actual_costs.grand_total>e.estimated_costs.grand_total?"variance-over":"variance-under"}">
                  ${(e.actual_costs.grand_total-e.estimated_costs.grand_total).toLocaleString("en-GB",{maximumFractionDigits:2})}
                </div>
              </div>
            `:""}
          </div>
        </div>

        <div class="section">
          <div class="section-title">Cost Breakdown</div>
          <table>
            <tr>
              <th>Item</th>
              <th>Amount</th>
            </tr>
            <tr>
              <td>Subtotal</td>
              <td>${e.estimated_costs.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr>
              <td>Contingency</td>
              <td>${e.estimated_costs.contingency.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr style="font-weight: bold;">
              <td>Grand Total</td>
              <td>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
          </table>
        </div>

        <div class="section">
          <div class="section-title">Line Items</div>
          <table>
            <tr>
              <th>Description</th>
              <th>Category</th>
              <th>Estimated</th>
              ${e.actual_costs?"<th>Actual</th><th>Variance</th>":""}
            </tr>
            ${e.line_items.map(t=>`
              <tr>
                <td>${t.description}</td>
                <td>${t.category}</td>
                <td>${t.estimated.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                ${e.actual_costs&&t.actual?`
                  <td>${t.actual.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                  <td class="${t.variance&&t.variance>0?"variance-over":"variance-under"}">
                    ${t.variance?""+t.variance.toLocaleString("en-GB",{maximumFractionDigits:2}):"-"}
                  </td>
                `:""}
              </tr>
            `).join("")}
          </table>
        </div>

        ${e.notes?`
          <div class="section">
            <div class="section-title">Notes</div>
            <p>${e.notes}</p>
          </div>
        `:""}

        <div style="margin-top: 40px; text-align: center; color: #999; font-size: 12px;">
          <p>Generated by KHConstruct on ${new Date().toLocaleDateString()}</p>
        </div>
      </body>
    </html>
  `}function Ej(e){const t=Jh(e),s=window.open("","","height=800,width=1000");s&&(s.document.write(t),s.document.close(),s.print())}function _j(){const{id:e}=Ns();ze();const t=Number(e),{reportData:s,isLoading:n,error:a,fetchReportData:l,clearReportData:o,clearError:i}=dl(),[c,d]=v.useState("csv"),[u,p]=v.useState(!1);v.useEffect(()=>(t&&l(t),()=>{o()}),[t,l,o]);const f=async()=>{if(s)try{p(!0);const m=new Date().toISOString().split("T")[0],y=`report-${s.project_name}-${m}`;switch(c){case"csv":kj(s,`${y}.csv`);break;case"json":Cj(s,`${y}.json`);break;case"html":const j=Jh(s),x=new Blob([j],{type:"text/html"}),g=URL.createObjectURL(x),h=document.createElement("a");h.href=g,h.download=`${y}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(g);break}p(!1)}catch(m){console.error("Export failed:",m),p(!1)}},N=()=>{s&&Ej(s)};return n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(ul,{size:"lg",text:"Loading report..."})}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:s.project_name}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Project Report"})]}),a&&r.jsx(Dr,{message:a,onDismiss:i}),r.jsx(Z,{title:"Export Report",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"csv",checked:c==="csv",onChange:m=>d(m.target.value)}),r.jsx("span",{children:"Export as CSV"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"json",checked:c==="json",onChange:m=>d(m.target.value)}),r.jsx("span",{children:"Export as JSON"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"html",checked:c==="html",onChange:m=>d(m.target.value)}),r.jsx("span",{children:"Export as HTML"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{variant:"primary",onClick:f,loading:u,children:" Download Report"}),r.jsx(be,{variant:"secondary",onClick:N,children:" Print to PDF"})]})]})}),r.jsx(Z,{title:"Cost Summary",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:J(s.estimated_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contingency:"}),r.jsx("span",{className:"font-semibold",children:J(s.estimated_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:J(s.estimated_costs.grand_total)})]}),s.estimated_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",J(s.estimated_costs.cost_per_m2)]})]}),s.actual_costs&&r.jsxs("div",{className:"space-y-3 border-l pl-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:J(s.actual_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contingency:"}),r.jsx("span",{className:"font-semibold",children:J(s.actual_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:J(s.actual_costs.grand_total)})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),r.jsx("span",{className:`font-bold text-lg ${s.actual_costs.grand_total>s.estimated_costs.grand_total?"text-red-600":"text-green-600"}`,children:J(s.actual_costs.grand_total-s.estimated_costs.grand_total)})]})}),s.actual_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",J(s.actual_costs.cost_per_m2)]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Project ID"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:s.project_id})]}),s.completion_date&&r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Completion Date"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:Bh(s.completion_date)})]})]}),r.jsx(Z,{title:"Line Items Breakdown",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Estimated"}),s.actual_costs&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Variance"})]})]})}),r.jsx("tbody",{className:"divide-y",children:s.line_items.map((m,y)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:m.description}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:m.category}),r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:J(m.estimated)}),s.actual_costs&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:m.actual?J(m.actual):"-"}),r.jsx("td",{className:`px-4 py-3 text-right font-mono ${m.variance&&m.variance>0?"text-red-600":"text-green-600"}`,children:m.variance?J(m.variance):"-"})]})]},y))})]})})}),s.notes&&r.jsx(Z,{title:"Notes",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.notes})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Report data not available"}),r.jsx(G,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to Projects"})]})}function Pj(){const{historicAnalysis:e,isLoading:t,error:s,fetchHistoricAnalysis:n,clearError:a}=dl(),{categories:l,fetchCategories:o}=Kh(),[i,c]=v.useState(""),[d,u]=v.useState("all");v.useEffect(()=>{o(),n()},[o,n]);const p=y=>{c(y),y?n(Number(y)):n()},f=e.filter(y=>!(d!=="all"&&y.region!==d)),N=["all",...new Set(e.map(y=>y.region).filter(y=>!!y))],m=f.reduce((y,j)=>{const x=j.building_age_range;return y[x]||(y[x]=[]),y[x].push(j),y},{});return t?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(ul,{size:"lg",text:"Loading cost analysis..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Historic Cost Analysis"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View cost benchmarks based on completed projects in your region"})]}),s&&r.jsx(Dr,{message:s,onDismiss:a}),r.jsx(Z,{title:"Filters",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Bd,{label:"Category",value:i,onChange:y=>p(y.target.value),options:[{value:"",label:"All Categories"},...l.map(y=>({value:y.id.toString(),label:y.name}))]}),r.jsx(Bd,{label:"Region",value:d,onChange:y=>u(y.target.value),options:N.map(y=>({value:y,label:y==="all"?"All Regions":y}))})]})}),f.length===0?r.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("p",{className:"text-blue-800 font-semibold mb-2",children:"No Historic Cost Analysis Data"}),r.jsx("p",{className:"text-blue-700 text-sm",children:"Historic cost analysis will be available once completed projects with actual costs are recorded in the system."})]}):r.jsx("div",{className:"space-y-6",children:Object.entries(m).sort(([y],[j])=>{const x={"0-10":0,"10-20":1,"20-30":2,"30+":3};return(x[y]??999)-(x[j]??999)}).map(([y,j])=>r.jsx(Z,{title:`Building Age: ${y} years`,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Condition Rating"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Cost per m"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Std Deviation"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Sample Size"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Confidence"})]})}),r.jsx("tbody",{className:"divide-y",children:j.map(x=>{const g=x.sample_size>=3?"High":"Low";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:x.condition_rating_range}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:J(x.cost_per_m2)}),r.jsxs("td",{className:"px-4 py-3 text-right font-mono text-gray-600",children:["",J(x.std_deviation)]}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsxs(zd,{variant:x.sample_size>=3?"success":"warning",children:[x.sample_size," projects"]})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx(zd,{variant:g==="High"?"success":"warning",children:g})})]},x.id)})})]})})},y))}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:r.jsx("strong",{children:"How to interpret this data:"})}),r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Cost per m:"})," Average cost for this category based on similar projects"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Std Deviation:"})," Expected variance from the average cost"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Sample Size:"})," Number of completed projects this benchmark is based on"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Confidence:"})," Higher confidence indicates more reliable data (3+ projects)"]})]})]})})]})}function Lj(){const{id:e}=Ns();ze();const t=Number(e),{projectActuals:s,isLoading:n,error:a,fetchProjectActuals:l,updateProjectActual:o,deleteProjectActual:i,clearError:c}=dl(),{currentProject:d,fetchProjectById:u}=Ut(),[p,f]=v.useState(!1),[N,m]=v.useState(null),[y,j]=v.useState({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]}),[x,g]=v.useState(!1);v.useEffect(()=>{t&&(u(t),l(t))},[t,u,l]);const h=w=>{if(w){const E=s.find(L=>L.id===w);E&&(m(w),j({actual_quantity:E.actual_quantity,actual_cost:E.actual_cost,variance_reason:E.variance_reason||"",completed_date:E.completed_date}))}else m(null),j({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]});f(!0)},b=()=>{f(!1),m(null),j({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]})},S=async()=>{if(!(y.actual_quantity<=0||y.actual_cost<0))try{g(!0),N?await o(t,N,{actual_quantity:y.actual_quantity,actual_cost:y.actual_cost,variance_reason:y.variance_reason||void 0,completed_date:y.completed_date}):console.warn("Adding new actual cost requires cost item selection"),g(!1),b()}catch(w){g(!1),console.error("Failed to save actual cost:",w)}},k=async w=>{if(confirm("Are you sure you want to delete this actual cost record?"))try{await i(t,w)}catch(E){console.error("Failed to delete actual cost:",E)}};return n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(ul,{size:"lg",text:"Loading project actuals..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Actuals"}),r.jsx("p",{className:"text-gray-600 mt-2",children:d==null?void 0:d.name})]}),a&&r.jsx(Dr,{message:a,onDismiss:c}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:r.jsx("strong",{children:"Record Actual Costs:"})}),r.jsx("p",{children:"Enter actual quantities and costs for completed work items. The system will calculate variances between estimated and actual costs to help track project performance."})]})}),s.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[r.jsx("p",{className:"text-gray-600",children:"No actual cost records yet"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Complete project work items and record actual costs here"})]}):r.jsx(Z,{title:"Recorded Actuals",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Completed Date"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Quantity"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Cost"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Variance Reason"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:Bh(w.completed_date)}),r.jsx("td",{className:"px-4 py-3 text-right",children:w.actual_quantity}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:J(w.actual_cost)}),r.jsx("td",{className:"px-4 py-3 text-gray-600 text-xs",children:w.variance_reason||r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsxs("td",{className:"px-4 py-3 text-center space-x-2 flex justify-center",children:[r.jsx("button",{onClick:()=>h(w.id),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition",children:"Edit"}),r.jsx("button",{onClick:()=>k(w.id),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition",children:"Delete"})]})]},w.id))})]})})}),r.jsx(ks,{isOpen:p,onClose:b,title:"Edit Actual Cost",children:r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsx(Ql,{label:"Actual Quantity",type:"number",min:"0",step:"0.01",value:y.actual_quantity,onChange:w=>j({...y,actual_quantity:parseFloat(w.target.value)||0}),required:!0}),r.jsx(Ql,{label:"Actual Cost ()",type:"number",min:"0",step:"0.01",value:y.actual_cost,onChange:w=>j({...y,actual_cost:parseFloat(w.target.value)||0}),required:!0}),r.jsx(Ql,{label:"Completed Date",type:"date",value:y.completed_date,onChange:w=>j({...y,completed_date:w.target.value}),required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variance Reason"}),r.jsx("textarea",{value:y.variance_reason,onChange:w=>j({...y,variance_reason:w.target.value}),placeholder:"Explain any significant variance from estimate",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(be,{variant:"secondary",onClick:b,disabled:x,children:"Cancel"}),r.jsx(be,{variant:"primary",onClick:S,loading:x,children:"Save Changes"})]})]})})]})}function Rj(){var E,L,D;const{id:e}=Ns(),t=ze(),s=Number(e),{reportData:n,isLoading:a,error:l,fetchReportData:o,clearError:i}=dl(),{currentProject:c,fetchProjectById:d}=Ut(),[u,p]=v.useState("none"),[f,N]=v.useState("csv"),[m,y]=v.useState({});v.useEffect(()=>{s&&(d(s),o(s))},[s,d,o]),v.useEffect(()=>{if(n&&n.line_items){const I={};u==="none"?y({}):(n.line_items.forEach(W=>{let M="";u==="pdCode"?M=W.category||"Uncategorized":u==="areaCode"?M="Area: "+W.category||"Uncategorized":u==="projectNumber"?M=String(s)||"Unknown":u==="itemDescription"&&(M=W.description||"Uncategorized"),M&&(I[M]=(I[M]||0)+(W.estimated||0))}),y(I))}},[n,u,s]);const j=()=>{if(!n)return;const I=new Date().toISOString().split("T")[0],W=`project-cost-total-${(c==null?void 0:c.name)||"project"}-${I}`,M={projectName:n.project_name,projectId:n.project_id,contingencyPercentage:10,estimatedCosts:n.estimated_costs,actualCosts:n.actual_costs,lineItems:n.line_items,breakdown:m,exportedAt:new Date().toISOString()};f==="csv"?x(M,`${W}.csv`):g(M,`${W}.json`)},x=(I,W)=>{var q,$,P,_,A;const M=[];M.push(["PROJECT COST TOTAL REPORT"]),M.push([]),M.push(["Project Name",I.projectName]),M.push(["Project ID",String(I.projectId)]),M.push(["Contingency %",String(I.contingencyPercentage)+"%"]),M.push([]),M.push(["COST SUMMARY"]),M.push(["Estimated Subtotal",String((q=I.estimatedCosts)==null?void 0:q.subtotal)]),M.push(["Contingency Amount",String(($=I.estimatedCosts)==null?void 0:$.contingency)]),M.push(["Estimated Total",String((P=I.estimatedCosts)==null?void 0:P.grand_total)]),(_=I.estimatedCosts)!=null&&_.cost_per_m2&&M.push(["Cost per m",String(I.estimatedCosts.cost_per_m2)]),I.actualCosts&&(M.push([]),M.push(["Actual Subtotal",String(I.actualCosts.subtotal)]),M.push(["Actual Contingency",String(I.actualCosts.contingency)]),M.push(["Actual Total",String(I.actualCosts.grand_total)]),I.actualCosts.cost_per_m2&&M.push(["Actual Cost per m",String(I.actualCosts.cost_per_m2)])),M.push([]),M.push(["LINE ITEMS"]),M.push(["Description","Category","Estimated","Actual","Variance"]),(A=I.lineItems)==null||A.forEach(B=>{M.push([B.description||"",B.category||"",String(B.estimated||0),String(B.actual||""),String(B.variance||"")])});const F=M.map(B=>B.map(Q=>`"${Q}"`).join(",")).join(`
`);h(F,W,"text/csv")},g=(I,W)=>{const M=JSON.stringify(I,null,2);h(M,W,"application/json")},h=(I,W,M)=>{const F=new Blob([I],{type:M}),q=URL.createObjectURL(F),$=document.createElement("a");$.href=q,$.download=W,document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(q)};if(a)return r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(ul,{size:"lg",text:"Loading project costs..."})});if(!n)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Cost data not available"}),r.jsx(be,{variant:"secondary",onClick:()=>t(`/projects/${s}`),children:"Back to Project"})]});const b=((E=n.estimated_costs)==null?void 0:E.grand_total)||0,S=(L=n.actual_costs)==null?void 0:L.grand_total,k=10,w=(D=n.estimated_costs)==null?void 0:D.cost_per_m2;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Total"}),r.jsx("p",{className:"text-gray-600 mt-2",children:n.project_name})]}),l&&r.jsx(Dr,{message:l,onDismiss:i}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Contingency %"}),r.jsxs("p",{className:"text-4xl font-bold text-khc-primary mt-2",children:[k,"%"]})]}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Project Total"}),r.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:J(b)}),S&&r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Actual: ",J(S)]})]}),r.jsxs(Z,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Cost per m"}),r.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:w?J(w):"N/A"})]})]}),r.jsx(Z,{title:"Cost Breakdown",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group By"}),r.jsxs("select",{value:u,onChange:I=>p(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[r.jsx("option",{value:"none",children:"No Grouping (Total Only)"}),r.jsx("option",{value:"pdCode",children:"PD Code / Category"}),r.jsx("option",{value:"areaCode",children:"Area Code"}),r.jsx("option",{value:"projectNumber",children:"Project Number"}),r.jsx("option",{value:"itemDescription",children:"Item Description"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),r.jsxs("select",{value:f,onChange:I=>N(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[r.jsx("option",{value:"csv",children:"CSV (Excel)"}),r.jsx("option",{value:"json",children:"JSON (Data)"})]})]})]}),r.jsx(be,{variant:"primary",onClick:j,fullWidth:!0,children:" Export Cost Total"})]})}),u!=="none"&&Object.keys(m).length>0&&r.jsx(Z,{title:"Cost Breakdown by Category",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"% of Total"})]})}),r.jsx("tbody",{className:"divide-y",children:Object.entries(m).sort(([,I],[,W])=>W-I).map(([I,W])=>{const M=(W/b*100).toFixed(1);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:I}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:J(W)}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:[M,"%"]})]},I)})}),r.jsx("tfoot",{className:"bg-gray-50 border-t-2",children:r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-bold text-gray-900",children:"Total"}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-khc-primary text-lg",children:J(b)}),r.jsx("td",{className:"px-4 py-3 text-right font-bold text-gray-600",children:"100%"})]})})]})})}),r.jsx(Z,{title:"Summary",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:J(n.estimated_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",k,"%):"]}),r.jsx("span",{className:"font-semibold",children:J(n.estimated_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:J(b)})]}),n.estimated_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",J(n.estimated_costs.cost_per_m2)]})]}),S&&n.actual_costs&&r.jsxs("div",{className:"space-y-3 border-l pl-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Actual Subtotal:"}),r.jsx("span",{className:"font-semibold",children:J(n.actual_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Actual Contingency:"}),r.jsx("span",{className:"font-semibold",children:J(n.actual_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:J(S)})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),r.jsx("span",{className:`font-bold text-lg ${S>b?"text-red-600":"text-green-600"}`,children:J(S-b)})]})}),n.actual_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Actual cost per m: ",J(n.actual_costs.cost_per_m2)]})]})]})})]})}function Tj(){const{user:e}=Ht(),[t,s]=v.useState([]),[n,a]=v.useState(!0),[l,o]=v.useState(null),[i,c]=v.useState(null),[d,u]=v.useState(null),[p,f]=v.useState(!1);if((e==null?void 0:e.role)!=="admin")return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-red-700",children:"Only administrators can access user management."})]})});v.useEffect(()=>{N()},[]);const N=async()=>{var x,g;try{a(!0),o(null);const h=await xr.getAllUsers();s(h.data.users)}catch(h){o(((g=(x=h.response)==null?void 0:x.data)==null?void 0:g.error)||"Failed to load users")}finally{a(!1)}},m=x=>{c(x.id),u({id:x.id,username:x.username,email:x.email,role:x.role,is_active:x.is_active})},y=()=>{c(null),u(null)},j=async()=>{var x,g;if(d)try{f(!0);const h={},b=t.find(S=>S.id===d.id);if(!b)return;if(d.username!==b.username&&(h.username=d.username),d.email!==b.email&&(h.email=d.email),d.role!==b.role&&(h.role=d.role),d.is_active!==b.is_active&&(h.is_active=d.is_active),Object.keys(h).length===0){y();return}await xr.updateUser(d.id,h),s(t.map(S=>S.id===d.id?{...S,username:d.username,email:d.email,role:d.role,is_active:d.is_active}:S)),y()}catch(h){o(((g=(x=h.response)==null?void 0:x.data)==null?void 0:g.error)||"Failed to update user")}finally{f(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"User Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all users in the system"})]}),l&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:l}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading users..."}):t.length===0?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"No users found"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Username"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(x=>r.jsx("tr",{className:"hover:bg-gray-50",children:i===x.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"text",value:(d==null?void 0:d.username)||"",onChange:g=>u({...d,username:g.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"email",value:(d==null?void 0:d.email)||"",onChange:g=>u({...d,email:g.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("select",{value:(d==null?void 0:d.role)||"",onChange:g=>u({...d,role:g.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"estimator",children:"Estimator"}),r.jsx("option",{value:"viewer",children:"Viewer"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:(d==null?void 0:d.is_active)||!1,onChange:g=>u({...d,is_active:g.target.checked}),className:"h-4 w-4 text-khc-primary"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d!=null&&d.is_active?"Active":"Inactive"})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:j,disabled:p,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:bg-gray-400",children:p?"Saving...":"Save"}),r.jsx("button",{onClick:y,disabled:p,className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded disabled:bg-gray-300",children:"Cancel"})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:x.username}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.email}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:x.role})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>m(x),className:"px-3 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-sm rounded",children:"Edit"})})]})},x.id))})]})})})]})}function Aj(){Ht();const[e,t]=v.useState([]),[s,n]=v.useState(!1),[a,l]=v.useState(""),[o,i]=v.useState(!1),[c,d]=v.useState(null),[u,p]=v.useState(""),[f,N]=v.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),m=async()=>{var h,b;n(!0),l("");try{const S=await Bs.getAll({search:u});t(S.data.data||[])}catch(S){l(((b=(h=S.response)==null?void 0:h.data)==null?void 0:b.error)||"Failed to load clients")}finally{n(!1)}};v.useEffect(()=>{m()},[u]);const y=async h=>{var b;h.preventDefault(),l("");try{c?await Bs.update(c,f):await Bs.create(f),g(),m()}catch(S){const k=(b=S.response)==null?void 0:b.data;let w="Failed to save client";if(k!=null&&k.error&&(w=k.error,k.details&&Array.isArray(k.details))){const E=k.details.map(L=>`${L.field}: ${L.message}`).join(", ");w=`${k.error} - ${E}`}l(w)}},j=async h=>{var b,S;if(confirm("Are you sure you want to delete this client?"))try{await Bs.delete(h),m()}catch(k){l(((S=(b=k.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to delete client")}},x=h=>{N({name:h.name,email:h.email||"",phone:h.phone||"",address:h.address||"",city:h.city||"",postcode:h.postcode||"",country:h.country||"United Kingdom",website:h.website||"",notes:h.notes||""}),d(h.id),i(!0)},g=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),d(null),i(!1)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Clients"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your client contacts"})]}),r.jsx("button",{onClick:()=>{g(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Client"})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search clients by name, email, or city...",value:u,onChange:h=>p(h.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Client":"New Client"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),r.jsx("input",{type:"text",required:!0,value:f.name,onChange:h=>N({...f,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:f.email||"",onChange:h=>N({...f,email:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:f.phone||"",onChange:h=>N({...f,phone:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:f.website||"",onChange:h=>N({...f,website:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:f.address||"",onChange:h=>N({...f,address:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:f.city||"",onChange:h=>N({...f,city:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),r.jsx("input",{type:"text",value:f.postcode||"",onChange:h=>N({...f,postcode:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:f.country||"United Kingdom",onChange:h=>N({...f,country:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:f.notes||"",onChange:h=>N({...f,notes:h.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Client":"Add Client"}),r.jsx("button",{type:"button",onClick:g,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading clients..."}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No clients found. ",!o&&r.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Create one now"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(h=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:h.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.email||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.phone||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.city||"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[r.jsx("button",{onClick:()=>x(h),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>j(h.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},h.id))})]})})})]})}function Fj(){Ht();const[e,t]=v.useState([]),[s,n]=v.useState(!1),[a,l]=v.useState(""),[o,i]=v.useState(!1),[c,d]=v.useState(null),[u,p]=v.useState(""),[f,N]=v.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),m=async()=>{var b,S;n(!0),l("");try{const k=await zs.getAll({search:u});t(k.data.data||[])}catch(k){l(((S=(b=k.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to load contractors")}finally{n(!1)}};v.useEffect(()=>{m()},[u]);const y=async b=>{var S;b.preventDefault(),l("");try{c?await zs.update(c,f):await zs.create(f),g(),m()}catch(k){const w=(S=k.response)==null?void 0:S.data;let E="Failed to save contractor";if(w!=null&&w.error&&(E=w.error,w.details&&Array.isArray(w.details))){const L=w.details.map(D=>`${D.field}: ${D.message}`).join(", ");E=`${w.error} - ${L}`}l(E)}},j=async b=>{var S,k;if(confirm("Are you sure you want to delete this contractor?"))try{await zs.delete(b),m()}catch(w){l(((k=(S=w.response)==null?void 0:S.data)==null?void 0:k.error)||"Failed to delete contractor")}},x=b=>{N({name:b.name,email:b.email||"",phone:b.phone||"",address:b.address||"",city:b.city||"",postcode:b.postcode||"",country:b.country||"United Kingdom",website:b.website||"",specialization:b.specialization||"",notes:b.notes||""}),d(b.id),i(!0)},g=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),d(null),i(!1)},h=({rating:b,size:S="sm"})=>{const k=S==="md"?"w-5 h-5":"w-4 h-4";return r.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(w=>r.jsx("span",{className:`${k} ${w<=b?"text-yellow-400":"text-gray-300"}`,children:""},w))})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Building Contractors"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your contractor network and specializations"})]}),r.jsx("button",{onClick:()=>{g(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Contractor"})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search contractors by name, email, specialty, or city...",value:u,onChange:b=>p(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Contractor":"New Contractor"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Name *"}),r.jsx("input",{type:"text",required:!0,value:f.name,onChange:b=>N({...f,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),r.jsx("input",{type:"text",placeholder:"e.g., Electrical, Plumbing, Carpentry",value:f.specialization||"",onChange:b=>N({...f,specialization:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:f.email||"",onChange:b=>N({...f,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:f.phone||"",onChange:b=>N({...f,phone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:f.website||"",onChange:b=>N({...f,website:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:f.address||"",onChange:b=>N({...f,address:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:f.city||"",onChange:b=>N({...f,city:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),r.jsx("input",{type:"text",value:f.postcode||"",onChange:b=>N({...f,postcode:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:f.country||"United Kingdom",onChange:b=>N({...f,country:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:f.notes||"",onChange:b=>N({...f,notes:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Contractor":"Add Contractor"}),r.jsx("button",{type:"button",onClick:g,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading contractors..."}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No contractors found. ",!o&&r.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Add one now"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Specialization"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Rating"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(b=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:b.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.specialization||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.city||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx(h,{rating:Math.round(b.rating)})}),r.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[r.jsx("button",{onClick:()=>x(b),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>j(b.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},b.id))})]})})})]})}function Dj(){const[e,t]=v.useState([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),[s,n]=v.useState(!1),[a,l]=v.useState(null),[o,i]=v.useState(null),c=v.useRef(null),d=(j,x,g)=>{const h=[...e],b={...h[j]};x==="labour"||x==="materials"||x==="plant"||x==="ohp"||x==="rate"?b[x]=typeof g=="number"?g:parseFloat(String(g))||0:b[x]=String(g),h[j]=b,t(h)},u=()=>{t([...e,{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}])},p=j=>{t(e.filter((x,g)=>g!==j))},f=j=>{j.preventDefault();const g=j.clipboardData.getData("text").trim().split(`
`),h=[];for(const b of g){let S=b.split("	");if(S.length<8&&(S=b.split(",")),S.length>=8){const k=S.map(w=>w.trim());h.push({description:k[0]||"",uniqueId:k[1]||"",labour:parseFloat(k[2])||0,materials:parseFloat(k[3])||0,plant:parseFloat(k[4])||0,ohp:parseFloat(k[5])||0,uom:k[6]||"",rate:parseFloat(k[7])||0})}}if(h.length>0){const b=e.filter(k=>!k.description&&!k.uniqueId&&k.rate===0),S=e.filter(k=>k.description||k.uniqueId||k.rate>0);h.length>1&&b.length>0&&S.length===0?t(h):t([...e,...h])}},N=()=>{for(let j=0;j<e.length;j++){const x=e[j];if(!x.description||!x.uniqueId||!x.uom||x.rate<=0)return l(`Row ${j+1} has missing or invalid required fields`),!1}return!0},m=async()=>{if(N())try{n(!0),l(null);const j=e.filter(h=>h.description&&h.uniqueId&&h.uom&&h.rate>0);if(j.length===0){l("No valid rows to import"),n(!1);return}const g=[...JSON.parse(localStorage.getItem("personalCostDatabase")||"[]"),...j];localStorage.setItem("personalCostDatabase",JSON.stringify(g)),i(` Successfully saved ${j.length} cost item${j.length!==1?"s":""} to your personal database`),t([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),n(!1)}catch(j){n(!1),l(j instanceof Error?j.message:"Failed to save items")}},y=e.filter(j=>j.description&&j.uniqueId&&j.uom&&j.rate>0).length;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Personal Cost Database"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Build your custom cost database with labour, materials, plant and overhead costs"})]}),a&&r.jsx(Dr,{message:a,onDismiss:()=>l(null)}),o&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:o})}),r.jsx(Z,{title:"Cost Items",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-3 bg-gray-50 text-sm text-gray-600",children:[" ",r.jsx("strong",{children:"Tip:"})," Click in the table and paste full rows of data (from Excel/Google Sheets). Table auto-expands to fit all rows!"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{ref:c,onPaste:f,className:"w-full text-sm border-collapse focus:outline-none",tabIndex:0,children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-khc-primary text-white",children:[r.jsx("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:"#"}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Description",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Unique ID",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Labour"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Materials"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Plant"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"OHP"}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["UOM",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:["Rate",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("th",{className:"px-3 py-3 text-center font-semibold border border-gray-200",children:"Action"})]})}),r.jsx("tbody",{children:e.map((j,x)=>r.jsxs("tr",{className:"hover:bg-blue-50",children:[r.jsx("td",{className:"px-3 py-2 border border-gray-200 text-gray-600",children:x+1}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:j.description,onChange:g=>d(x,"description",g.target.value),placeholder:"Item description",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:j.uniqueId,onChange:g=>d(x,"uniqueId",g.target.value),placeholder:"e.g., ID001",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.labour||"",onChange:g=>d(x,"labour",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.materials||"",onChange:g=>d(x,"materials",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.plant||"",onChange:g=>d(x,"plant",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.ohp||"",onChange:g=>d(x,"ohp",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:j.uom,onChange:g=>d(x,"uom",g.target.value),placeholder:"e.g., m2, m3, no",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:j.rate||"",onChange:g=>d(x,"rate",g.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200 text-center",children:r.jsx("button",{onClick:()=>p(x),className:"text-red-600 hover:text-red-800 font-semibold text-lg",title:"Delete row",children:""})})]},x))})]})}),r.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600",children:r.jsxs("p",{children:[r.jsx("span",{className:"text-red-400",children:"*"})," Required fields: Description, Unique ID, UOM, Rate"]})}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(be,{variant:"secondary",onClick:u,children:"+ Add Row"}),r.jsx(be,{variant:"primary",onClick:m,loading:s,fullWidth:!0,disabled:y===0,children:s?"Saving...":`Save ${y} Cost Item${y!==1?"s":""}`})]})]})}),r.jsx(Z,{title:"How to Use",children:r.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Fastest Method: Paste Full Database"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-600",children:[r.jsx("li",{children:"Select all data in Excel/Google Sheets (Ctrl+A)"}),r.jsx("li",{children:"Copy (Ctrl+C or Cmd+C)"}),r.jsx("li",{children:r.jsx("strong",{children:"Click anywhere in the table below"})}),r.jsx("li",{children:"Paste (Ctrl+V or Cmd+V)"}),r.jsx("li",{children:" Table auto-expands to match pasted rows!"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Columns must be in order: Description, Unique ID, Labour, Materials, Plant, OHP, UOM, Rate"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Single Row Paste"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Copy one row of data from Excel"}),r.jsx("li",{children:"Click in the table and paste"}),r.jsx("li",{children:"Row is added to table automatically"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Manual Entry"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Click into any field and type the value"}),r.jsx("li",{children:"Tab or click to move to next field"}),r.jsx("li",{children:"Use the  button to delete a row"}),r.jsx("li",{children:'Click "+ Add Row" for additional entries'})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Field Guide"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Description:"})," Clear description of the cost item"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Unique ID:"})," Unique identifier (e.g., ID001, LB01)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Labour:"})," Labour cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Materials:"})," Material cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Plant:"})," Plant/equipment cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"OHP:"})," Overheads and profit ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"UOM:"})," Unit of measure (e.g., m2, m3, no, tonne)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Rate:"})," Total rate per unit (Labour + Materials + Plant + OHP)"]})]})]})]})})]})}const Ij=["Preliminaries","Excavation & Earthworks","Foundations","Structure","Roofing","External Walls","Windows & Doors","Partitions & Screens","Finishings","Mechanical Services","Electrical Services","Plumbing & Drainage","Site Works"];function Oj(){const[e,t]=v.useState([]),[s,n]=v.useState([]),[a,l]=v.useState(null),[o,i]=v.useState(null),[c,d]=v.useState(""),[u,p]=v.useState("all"),[f,N]=v.useState(!1),[m,y]=v.useState(null),[j,x]=v.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),[g,h]=v.useState(""),[b,S]=v.useState(!1);v.useEffect(()=>{k(),w()},[]);const k=()=>{const P=localStorage.getItem("internalRates");P&&t(JSON.parse(P))},w=()=>{const P=localStorage.getItem("rateCategories");if(P)n(JSON.parse(P));else{const _=Ij.map((A,B)=>({id:`cat-${B}`,name:A,isCustom:!1}));n(_),localStorage.setItem("rateCategories",JSON.stringify(_))}},E=P=>{localStorage.setItem("internalRates",JSON.stringify(P)),t(P)},L=()=>{if(!g.trim()){l("Category name is required");return}if(s.some(A=>A.name.toLowerCase()===g.toLowerCase())){l("Category already exists");return}const P={id:`cat-${Date.now()}`,name:g,isCustom:!0},_=[...s,P];n(_),localStorage.setItem("rateCategories",JSON.stringify(_)),h(""),S(!1),i("Category added successfully"),setTimeout(()=>i(null),3e3)},D=()=>{if(!j.description.trim()||!j.category||!j.uom||j.labour+j.materials+j.plant+j.ohp===0){l("Description, Category, UOM, and at least one cost component are required");return}let P;if(m)P=e.map(_=>_.id===m?{...j,id:m,labour:parseFloat(String(j.labour))||0,materials:parseFloat(String(j.materials))||0,plant:parseFloat(String(j.plant))||0,ohp:parseFloat(String(j.ohp))||0,createdAt:_.createdAt}:_),i("Rate updated successfully");else{const _={id:`rate-${Date.now()}`,description:j.description,category:j.category,labour:parseFloat(String(j.labour))||0,materials:parseFloat(String(j.materials))||0,plant:parseFloat(String(j.plant))||0,ohp:parseFloat(String(j.ohp))||0,uom:j.uom,createdAt:new Date().toISOString()};P=[...e,_],i("Rate added successfully")}E(P),M(),setTimeout(()=>i(null),3e3)},I=P=>{window.confirm("Are you sure you want to delete this rate?")&&(E(e.filter(_=>_.id!==P)),i("Rate deleted successfully"),setTimeout(()=>i(null),3e3))},W=P=>{x({description:P.description,category:P.category,labour:P.labour,materials:P.materials,plant:P.plant,ohp:P.ohp,uom:P.uom}),y(P.id),N(!0)},M=()=>{x({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),y(null),N(!1)},F=e.filter(P=>{const _=u==="all"||P.category===u,A=P.description.toLowerCase().includes(c.toLowerCase());return _&&A}),q=F.reduce((P,_)=>(P[_.category]||(P[_.category]=[]),P[_.category].push(_),P),{}),$=P=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(P);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Internal Rates Builder"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage your organization's rate book"})]}),a&&r.jsx(Dr,{message:a,onDismiss:()=>l(null)}),o&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:o})}),f&&r.jsx(Z,{title:m?"Edit Rate":"Add New Rate",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),r.jsx("input",{type:"text",value:j.description,onChange:P=>x({...j,description:P.target.value}),placeholder:"Rate description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category*"}),r.jsxs("select",{value:j.category,onChange:P=>x({...j,category:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"Select category"}),s.map(P=>r.jsx("option",{value:P.name,children:P.name},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour ()*"}),r.jsx("input",{type:"number",value:j.labour||"",onChange:P=>x({...j,labour:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Materials ()*"}),r.jsx("input",{type:"number",value:j.materials||"",onChange:P=>x({...j,materials:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant ()*"}),r.jsx("input",{type:"number",value:j.plant||"",onChange:P=>x({...j,plant:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OHP ()*"}),r.jsx("input",{type:"number",value:j.ohp||"",onChange:P=>x({...j,ohp:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UOM*"}),r.jsx("input",{type:"text",value:j.uom,onChange:P=>x({...j,uom:P.target.value}),placeholder:"e.g., m2, m3, no",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(be,{variant:"primary",onClick:D,children:m?"Update Rate":"Add Rate"}),r.jsx(be,{variant:"secondary",onClick:M,children:"Cancel"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!f&&r.jsx(be,{variant:"primary",onClick:()=>N(!0),fullWidth:!0,children:"+ Add New Rate"}),!b&&r.jsx(be,{variant:"secondary",onClick:()=>S(!0),fullWidth:!0,children:"+ Add Category"}),b&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:g,onChange:P=>h(P.target.value),placeholder:"New category name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsx("button",{onClick:L,className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary",children:""}),r.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:""})]})]}),r.jsx(Z,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"Search rates by description...",value:c,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("select",{value:u,onChange:P=>p(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"all",children:"All Categories"}),s.map(P=>r.jsx("option",{value:P.name,children:P.name},P.id))]})]})}),F.length===0?r.jsx(Z,{children:r.jsxs("p",{className:"text-center text-gray-500",children:["No rates found. ",!f&&r.jsx("span",{onClick:()=>N(!0),className:"text-khc-primary cursor-pointer hover:underline",children:"Add one now"})]})}):Object.entries(q).map(([P,_])=>r.jsx(Z,{title:P,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Labour"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Materials"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Plant"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"OHP"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"UOM"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Action"})]})}),r.jsx("tbody",{children:_.map(A=>{const B=A.labour+A.materials+A.plant+A.ohp;return r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:A.description}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(A.labour)}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(A.materials)}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(A.plant)}),r.jsx("td",{className:"px-3 py-2 text-right",children:$(A.ohp)}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-khc-primary",children:$(B)}),r.jsx("td",{className:"px-3 py-2 text-center",children:A.uom}),r.jsxs("td",{className:"px-3 py-2 text-center space-x-2",children:[r.jsx("button",{onClick:()=>W(A),className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Edit",children:""}),r.jsx("button",{onClick:()=>I(A.id),className:"text-red-600 hover:text-red-800 font-semibold",title:"Delete",children:""})]})]},A.id)})})]})})},P)),r.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded p-3",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Total Rates:"})," ",e.length]})})]})}function $j(){const e=ze(),{projects:t,isLoading:s,fetchProjects:n}=Ut(),[a,l]=v.useState(null),[o,i]=v.useState(null),[c,d]=v.useState([]),[u,p]=v.useState([]),[f,N]=v.useState([]),[m,y]=v.useState([]),[j,x]=v.useState(0),[g,h]=v.useState(!1),[b,S]=v.useState(""),[k,w]=v.useState("all"),[E,L]=v.useState(!1),[D,I]=v.useState(!1),[W,M]=v.useState(null),[F,q]=v.useState(null),[$,P]=v.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0});v.useEffect(()=>{n(),_(),A()},[n]);const _=()=>{const R=JSON.parse(localStorage.getItem("internalRates")||"[]"),Y=JSON.parse(localStorage.getItem("personalCostDatabase")||"[]");d(R),p(Y)},A=()=>{const R=localStorage.getItem("rateCategories");R&&N(JSON.parse(R))},B=R=>{l(R);const Y=t.find(K=>K.id===R);i(Y||null),y([]),q(`Project "${Y==null?void 0:Y.name}" selected`),setTimeout(()=>q(null),2e3)},je=[...c,...u].filter(R=>{const Y=k==="all"||R.category===k,K=R.description.toLowerCase().includes(b.toLowerCase());return Y&&K}).reduce((R,Y)=>(R[Y.category]||(R[Y.category]=[]),R[Y.category].push(Y),R),{}),ee=R=>{if(!o){M("Please select a project first");return}const Y={id:`line-${Date.now()}`,description:R.description,source:c.some(K=>K.id===R.id)?"internal":"imported",labour:R.labour,materials:R.materials,plant:R.plant,ohp:R.ohp,uom:R.uom,quantity:1,markupPercentage:0,category:R.category};y([...m,Y]),q("Rate added to assembly"),setTimeout(()=>q(null),2e3)},Se=()=>{if(!o){M("Please select a project first");return}if(!$.description||!$.category||!$.uom){M("Description, category, and UOM are required");return}if($.labour+$.materials+$.plant+$.ohp===0){M("At least one cost component is required");return}const R={id:`line-${Date.now()}`,description:$.description,source:"custom",labour:$.labour,materials:$.materials,plant:$.plant,ohp:$.ohp,uom:$.uom,quantity:$.quantity,markupPercentage:$.markupPercentage,category:$.category};y([...m,R]),P({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0}),I(!1),q("Custom line item added"),setTimeout(()=>q(null),2e3)},ne=(R,Y,K)=>{y(m.map(Ne=>Ne.id===R?{...Ne,[Y]:K}:Ne))},ie=R=>{y(m.filter(Y=>Y.id!==R))},Ge=R=>{const Y=(R.labour+R.materials+R.plant+R.ohp)*R.quantity,K=g?j:R.markupPercentage;return Y*(1+K/100)},de=(()=>{const R={};return m.forEach(Y=>{R[Y.category]||(R[Y.category]=0),R[Y.category]+=Ge(Y)}),R})(),De=Object.values(de).reduce((R,Y)=>R+Y,0),Ce=R=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(R),Cs=()=>{if(!o||m.length===0){M("Select a project and add line items before exporting");return}const R=`
      <html>
        <head>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #003366; }
            .header { margin-bottom: 20px; }
            .section { margin-bottom: 30px; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #003366; color: white; }
            .total { font-weight: bold; background-color: #f0f0f0; }
            .grand-total { font-weight: bold; font-size: 16px; background-color: #e0e0e0; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${o.name}</h1>
            <p><strong>Project ID:</strong> ${o.id}</p>
            <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
          </div>
          ${Object.entries(de).map(([Pe,z])=>`
            <div class="section">
              <h2>${Pe}</h2>
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th>Qty</th>
                    <th>UOM</th>
                    <th>Labour</th>
                    <th>Materials</th>
                    <th>Plant</th>
                    <th>OHP</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${m.filter(te=>te.category===Pe).map(te=>`
                    <tr>
                      <td>${te.description}</td>
                      <td>${te.quantity}</td>
                      <td>${te.uom}</td>
                      <td>${Ce(te.labour*te.quantity)}</td>
                      <td>${Ce(te.materials*te.quantity)}</td>
                      <td>${Ce(te.plant*te.quantity)}</td>
                      <td>${Ce(te.ohp*te.quantity)}</td>
                      <td>${Ce(Ge(te))}</td>
                    </tr>
                  `).join("")}
                  <tr class="total">
                    <td colspan="7">Category Total</td>
                    <td>${Ce(z)}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          `).join("")}
          <div class="section">
            <table>
              <tr class="grand-total">
                <td colspan="7">GRAND TOTAL</td>
                <td>${Ce(De)}</td>
              </tr>
            </table>
          </div>
        </body>
      </html>
    `,Y=new Blob([R],{type:"text/html"}),K=window.URL.createObjectURL(Y),Ne=document.createElement("a");Ne.href=K,Ne.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),window.URL.revokeObjectURL(K),q("Estimate exported"),setTimeout(()=>q(null),2e3)},Ir=()=>{if(!o||m.length===0){M("Select a project and add line items before exporting");return}let R=`Project Name,Project ID,Date
`;R+=`"${o.name}",${o.id},"${new Date().toLocaleDateString()}"

`,R+=`Category,Description,Qty,UOM,Labour,Materials,Plant,OHP,Total
`,m.forEach(Pe=>{const z=Ge(Pe);R+=`"${Pe.category}","${Pe.description}",${Pe.quantity},"${Pe.uom}",${Pe.labour},${Pe.materials},${Pe.plant},${Pe.ohp},${z}
`}),R+=`
Category Totals
`,Object.entries(de).forEach(([Pe,z])=>{R+=`"${Pe}",,,,,,,,${z}
`}),R+=`
GRAND TOTAL,,,,,,,,,${De}
`;const Y=new Blob([R],{type:"text/csv"}),K=window.URL.createObjectURL(Y),Ne=document.createElement("a");Ne.href=K,Ne.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),window.URL.revokeObjectURL(K),q("Estimate exported"),setTimeout(()=>q(null),2e3)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Assembly"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Build cost estimates from rates or custom line items"})]}),W&&r.jsx(Dr,{message:W,onDismiss:()=>M(null)}),F&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:F})}),o?r.jsxs(r.Fragment,{children:[r.jsx(Z,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Selected Project"}),r.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:o.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",o.id]})]}),r.jsx(be,{variant:"secondary",onClick:()=>i(null),children:"Change Project"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(be,{variant:"primary",onClick:()=>L(!E),fullWidth:!0,children:E?" Close Rate Browser":"+ Add Rate"}),r.jsx(be,{variant:"secondary",onClick:()=>I(!D),fullWidth:!0,children:D?" Cancel Custom":"+ Custom Line Item"})]}),E&&r.jsx(Z,{title:"Available Rates",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Search rates...",value:b,onChange:R=>S(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),r.jsxs("select",{value:k,onChange:R=>w(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"all",children:"All Categories"}),f.map(R=>r.jsx("option",{value:R.name,children:R.name},R.id))]}),Object.entries(je).map(([R,Y])=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:R}),r.jsx("div",{className:"space-y-2",children:Y.map(K=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded hover:bg-gray-100",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:K.description}),r.jsxs("p",{className:"text-xs text-gray-600",children:[Ce(K.labour+K.materials+K.plant+K.ohp)," / ",K.uom]})]}),r.jsx("button",{onClick:()=>ee(K),className:"px-3 py-1 bg-khc-primary text-white rounded text-sm hover:bg-khc-secondary",children:"Add"})]},K.id))})]},R))]})}),D&&r.jsx(Z,{title:"Add Custom Line Item",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description*"}),r.jsx("input",{type:"text",value:$.description,onChange:R=>P({...$,description:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),r.jsxs("select",{value:$.category,onChange:R=>P({...$,category:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"",children:"Select category"}),f.map(R=>r.jsx("option",{value:R.name,children:R.name},R.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),r.jsx("input",{type:"number",value:$.quantity,onChange:R=>P({...$,quantity:parseFloat(R.target.value)||1}),min:"0.01",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"UOM*"}),r.jsx("input",{type:"text",value:$.uom,onChange:R=>P({...$,uom:R.target.value}),placeholder:"m2, m3, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Labour ()"}),r.jsx("input",{type:"number",value:$.labour||"",onChange:R=>P({...$,labour:parseFloat(R.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Materials ()"}),r.jsx("input",{type:"number",value:$.materials||"",onChange:R=>P({...$,materials:parseFloat(R.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plant ()"}),r.jsx("input",{type:"number",value:$.plant||"",onChange:R=>P({...$,plant:parseFloat(R.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"OHP ()"}),r.jsx("input",{type:"number",value:$.ohp||"",onChange:R=>P({...$,ohp:parseFloat(R.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Markup %"}),r.jsx("input",{type:"number",value:$.markupPercentage||"",onChange:R=>P({...$,markupPercentage:parseFloat(R.target.value)||0}),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{variant:"primary",onClick:Se,children:"Add Line Item"}),r.jsx(be,{variant:"secondary",onClick:()=>I(!1),children:"Cancel"})]})]})}),r.jsx(Z,{title:"Markup Settings",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:g,onChange:R=>h(R.target.checked),className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Apply global markup percentage"})]}),g&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Global Markup %"}),r.jsx("input",{type:"number",value:j||"",onChange:R=>x(parseFloat(R.target.value)||0),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),m.length>0&&r.jsxs(r.Fragment,{children:[Object.entries(de).map(([R,Y])=>r.jsx(Z,{title:R,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Labour"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Materials"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Plant"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"OHP"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-center",children:"Action"})]})}),r.jsxs("tbody",{children:[m.filter(K=>K.category===R).map(K=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:K.description}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("input",{type:"number",value:K.quantity,onChange:Ne=>ne(K.id,"quantity",parseFloat(Ne.target.value)||1),step:"0.01",min:"0.01",className:"w-16 px-2 py-1 border border-gray-300 rounded text-right text-sm"})}),r.jsx("td",{className:"px-3 py-2 text-right",children:Ce(K.labour*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:Ce(K.materials*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:Ce(K.plant*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:Ce(K.ohp*K.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:Ce(Ge(K))}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("button",{onClick:()=>ie(K.id),className:"text-red-600 hover:text-red-800",children:""})})]},K.id)),r.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[r.jsx("td",{colSpan:6,className:"px-3 py-2 text-right",children:"Category Total:"}),r.jsx("td",{className:"px-3 py-2 text-right text-khc-primary",children:Ce(Y)})]})]})]})})},R)),r.jsx(Z,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"GRAND TOTAL"}),r.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:Ce(De)})]}),r.jsxs("div",{className:"flex flex-col justify-end gap-2",children:[r.jsx(be,{variant:"primary",onClick:Cs,fullWidth:!0,children:" Export as HTML/PDF"}),r.jsx(be,{variant:"secondary",onClick:Ir,fullWidth:!0,children:" Export as CSV"})]})]})})]})]}):r.jsx(Z,{title:"Select a Project",children:s?r.jsx("p",{className:"text-center text-gray-500",children:"Loading projects..."}):t.length===0?r.jsxs("p",{className:"text-center text-gray-500",children:["No projects found. ",r.jsx("span",{onClick:()=>e("/projects/new"),className:"text-khc-primary cursor-pointer hover:underline",children:"Create one first"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(R=>r.jsxs("button",{onClick:()=>B(R.id),className:"text-left p-4 border border-gray-300 rounded-lg hover:border-khc-primary hover:bg-blue-50 transition",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:R.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",R.id]}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(R.start_date).toLocaleDateString()})]},R.id))})})]})}function Mj(){const{user:e}=dr(),[t,s]=v.useState([]),[n,a]=v.useState(!1),[l,o]=v.useState("bank_transfer"),[i,c]=v.useState({accountName:"",accountNumber:"",sortCode:""});v.useEffect(()=>{const y=localStorage.getItem(`referrals_${e==null?void 0:e.id}`);y&&s(JSON.parse(y))},[e==null?void 0:e.id]);const d=`${window.location.origin}/register?ref=${e==null?void 0:e.username}`,u=()=>{navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)},p=t.filter(y=>y.status==="completed"),f=p.reduce((y,j)=>y+j.amount,0),N=t.filter(y=>y.status==="pending").reduce((y,j)=>y+j.amount,0),m=y=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(y);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Referral Program"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Earn 20 for each successful referral"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(Z,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Total Earnings"}),r.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:m(f)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[p.length," completed referrals"]})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Pending Earnings"}),r.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:m(N)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[t.filter(y=>y.status==="pending").length," pending referrals"]})]})}),r.jsx(Z,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Next Payout"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:m(f)}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Monthly on 1st"})]})})]}),r.jsx(Z,{title:"Your Referral Link",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Share this link with your network and earn 20 for each successful sign-up:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 font-mono text-sm text-gray-700 overflow-auto",children:d}),r.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg font-medium transition ${n?"bg-green-500 text-white":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:n?" Copied":"Copy"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:" Tip:"})," Share this link on social media, email, or directly with colleagues. You'll earn 20 each time someone signs up using your link."]})})]})}),r.jsx(Z,{title:"How the Referral Program Works",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"1"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Share Your Link"}),r.jsx("p",{className:"text-gray-600",children:"Copy your unique referral link and share it with QS professionals and SME contractors."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"2"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"They Sign Up"}),r.jsx("p",{className:"text-gray-600",children:"When someone clicks your link and creates an account, they become your referral."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"3"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"You Earn 20"}),r.jsx("p",{className:"text-gray-600",children:"Once they complete their first purchase, you earn 20. No limits on how many you can refer!"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"4"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Get Paid"}),r.jsx("p",{className:"text-gray-600",children:"Payouts are processed monthly on the 1st of each month to your selected bank account."})]})]})]})}),r.jsx(Z,{title:"Referral History",children:t.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"mb-4",children:"No referrals yet. Start sharing your link to earn!"}),r.jsx(be,{variant:"primary",onClick:u,children:"Copy Link"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Earnings"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium",children:y.username}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.email}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})}),r.jsx("td",{className:"px-4 py-3 font-semibold text-khc-primary",children:m(y.amount)}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.earnedAt?new Date(y.earnedAt).toLocaleDateString():"Pending"})]},y.id))})]})})}),r.jsx(Z,{title:"Payout Settings",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payout Method"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"payout",value:"bank_transfer",checked:l==="bank_transfer",onChange:y=>o(y.target.value),className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"UK Bank Transfer"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Direct to your bank account (recommended)"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"payout",value:"paypal",checked:l==="paypal",onChange:y=>o(y.target.value),className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"PayPal"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Sent to your PayPal account"})]})]})]})]}),l==="bank_transfer"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"Bank Account Details"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),r.jsx("input",{type:"text",value:i.accountName,onChange:y=>c({...i,accountName:y.target.value}),placeholder:"As it appears on your bank account",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Code"}),r.jsx("input",{type:"text",value:i.sortCode,onChange:y=>c({...i,sortCode:y.target.value}),placeholder:"XX-XX-XX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),r.jsx("input",{type:"text",value:i.accountNumber,onChange:y=>c({...i,accountNumber:y.target.value}),placeholder:"8 digits",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),r.jsx(be,{variant:"primary",fullWidth:!0,children:"Save Bank Details"})]}),l==="paypal"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"PayPal Account"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PayPal Email"}),r.jsx("input",{type:"email",placeholder:"your@paypal.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsx(be,{variant:"primary",fullWidth:!0,children:"Save PayPal Details"})]})]})}),r.jsx(Z,{title:"Frequently Asked Questions",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How much can I earn?"}),r.jsx("p",{className:"text-gray-700",children:"Unlimited! There are no caps on referrals. Earn 20 for each person who signs up with your link."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"When do I get paid?"}),r.jsx("p",{className:"text-gray-700",children:"Referral earnings are paid out monthly on the 1st of each month to your chosen payout method."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"What counts as a valid referral?"}),r.jsx("p",{className:"text-gray-700",children:"A valid referral is someone who clicks your unique link and completes their first paid subscription."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Can I share my link on social media?"}),r.jsx("p",{className:"text-gray-700",children:"Yes! Share it anywhere - LinkedIn, Twitter, Facebook, email, or directly with colleagues. The more you share, the more you earn."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Is there a minimum payout?"}),r.jsx("p",{className:"text-gray-700",children:"No minimum. Once you have earnings, they'll be paid out monthly on the 1st."})]})]})})]})}const Uj=({groups:e,onSelectWorkSection:t,onSelectElement:s,selectedCode:n})=>{const[a,l]=v.useState(new Set),[o,i]=v.useState(new Set),[c,d]=v.useState(new Set),u=m=>{const y=new Set(a);y.has(m)?y.delete(m):y.add(m),l(y)},p=m=>{const y=new Set(o);y.has(m)?y.delete(m):y.add(m),i(y)},f=m=>{const y=new Set(c);y.has(m)?y.delete(m):y.add(m),d(y)},N=(m,y,j)=>{t&&t(m,y,j)};return r.jsx("div",{className:"nrm2-tree space-y-2",children:e.map(m=>r.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[r.jsxs("button",{onClick:()=>u(m.id),className:"w-full px-4 py-3 flex items-center hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-500",children:a.has(m.id)?"":""}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:[m.code," ",m.title]}),m.description&&r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:m.description})]})]}),a.has(m.id)&&m.elements&&r.jsx("div",{className:"bg-gray-50 border-t",children:m.elements.map(y=>r.jsxs("div",{className:"border-t",children:[r.jsxs("button",{onClick:()=>p(y.id),className:"w-full px-4 py-2 flex items-center hover:bg-gray-100 transition-colors text-left pl-8",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-400",children:o.has(y.id)?"":""}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"font-medium text-gray-800 text-sm",children:[y.code," ",y.title]})})]}),o.has(y.id)&&y.sub_elements&&r.jsx("div",{className:"bg-white",children:y.sub_elements.map(j=>r.jsxs("div",{className:"border-t border-gray-200",children:[r.jsxs("button",{onClick:()=>f(j.id),className:"w-full px-4 py-1.5 flex items-center hover:bg-gray-50 transition-colors text-left pl-12",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-300",children:c.has(j.id)?"":""}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[j.code," ",j.title]})})]}),c.has(j.id)&&j.work_sections&&r.jsx("div",{className:"bg-gray-50",children:j.work_sections.map((x,g)=>r.jsx("button",{onClick:()=>N(x.code,x.title,x.unit),className:`w-full px-4 py-1 flex items-start hover:bg-blue-50 transition-colors text-left pl-16 border-t border-gray-200 text-xs ${n===x.code?"bg-blue-100 border-blue-300":""}`,children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-gray-900 font-mono text-xs",children:x.code}),r.jsx("div",{className:"text-gray-700 text-xs",children:x.title}),x.unit&&r.jsxs("div",{className:"text-gray-500 text-xs",children:["Unit: ",x.unit]})]})},`${j.id}-${g}`))})]},j.id))})]},y.id))})]},m.id))})},Bj=({workSection:e,onUseInEstimate:t})=>{if(!e)return r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Select a work section to view details"})});const s=()=>{t&&t(e.code,e.title,e.unit)};return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4 text-white",children:[r.jsx("div",{className:"font-mono text-sm font-semibold",children:e.code}),r.jsx("div",{className:"text-lg font-bold mt-1",children:e.title})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.description&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e.description})]}),e.unit&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Unit of Measurement"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded px-3 py-2 text-sm font-mono text-blue-900",children:e.unit})]}),e.measurement_rules&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Measurement Rules"}),r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed bg-yellow-50 border border-yellow-200 rounded p-3",children:e.measurement_rules})]}),e.inclusions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Inclusions"}),r.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:e.inclusions.split(",").map((n,a)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2 text-green-600",children:""}),r.jsx("span",{children:n.trim()})]},a))})]}),e.exclusions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Exclusions"}),r.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:e.exclusions.split(",").map((n,a)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2 text-red-600",children:""}),r.jsx("span",{children:n.trim()})]},a))})]})]}),t&&r.jsx("div",{className:"border-t bg-gray-50 px-6 py-4",children:r.jsx("button",{onClick:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:"Use in Estimate"})})]})},zj=()=>{const e=ze(),{groups:t,searchResults:s,isLoading:n,isSearching:a,searchKeyword:l,currentWorkSection:o,error:i,fetchTree:c,searchNRM2:d,clearSearch:u,setCurrentWorkSection:p,setPendingWorkSection:f}=ec(),[N,m]=v.useState(null),[y,j]=v.useState(!1),[x,g]=v.useState("");v.useEffect(()=>{t.length===0&&c()},[t.length,c]);const h=w=>{w.preventDefault(),x.trim()&&(j(!0),d(x))},b=async w=>{if(w.type==="work_section")try{const L=await(await fetch(`/api/v1/nrm2/work-sections/${w.id}`)).json();L.success&&(m(L.data),p(L.data))}catch(E){console.error("Failed to fetch work section:",E)}},S=()=>{j(!1),g(""),u()},k=(w,E,L)=>{N&&(f(N),e("/projects"))};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"NRM 2 Reference"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"New Rules of Measurement 2 - Complete hierarchy and search"})]}),r.jsx("button",{onClick:()=>window.location.href="/references/documents",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:" View Full PDF"})]}),i&&r.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsxs("p",{className:"text-red-800",children:["Error loading NRM 2 data: ",i]}),r.jsx("button",{onClick:()=>c(),className:"mt-2 text-red-700 hover:text-red-900 underline text-sm",children:"Try again"})]}),r.jsx("form",{onSubmit:h,children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",value:x,onChange:w=>g(w.target.value),placeholder:"Search NRM 2 codes, titles, or descriptions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 text-lg",children:""})]}),y&&r.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Clear"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Search"})]})})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:y?r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:['Search Results for "',l,'"',s.length>0&&r.jsxs("span",{className:"text-gray-600 text-sm ml-2",children:["(",s.length," results)"]})]}),a?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Searching..."})]}):s.length>0?r.jsx("div",{className:"space-y-2",children:s.map(w=>r.jsx("button",{onClick:()=>b(w),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-sm font-semibold text-gray-900",children:w.code}),r.jsx("div",{className:"text-gray-700",children:w.title}),w.description&&r.jsx("div",{className:"text-gray-600 text-sm mt-1",children:w.description})]}),r.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded",children:w.type})]})},`${w.type}-${w.id}`))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsxs("p",{children:['No results found for "',l,'"']}),r.jsx("p",{className:"text-sm mt-2",children:"Try searching with different keywords"})]})]}):n?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading NRM 2 hierarchy..."})]}):i||t.length===0?r.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200 p-8",children:i?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-red-600 font-medium mb-4",children:"Failed to load NRM 2 data"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:i}),r.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600",children:"No NRM 2 data available"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Please check the server connection and try refreshing the page"})]})}):r.jsx(Uj,{groups:t,onSelectWorkSection:(w,E,L)=>{fetch(`/api/v1/nrm2/work-sections/by-code/${w}`).then(D=>D.json()).then(D=>{D.success&&(m(D.data),p(D.data))}).catch(D=>console.error("Failed to fetch work section:",D))},selectedCode:N==null?void 0:N.code})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"sticky top-24",children:r.jsx(Bj,{workSection:N,onUseInEstimate:k})})})]})})]})},Kl="http://localhost:3000",Hj=()=>{const[e,t]=v.useState([]),[s,n]=v.useState(null),[a,l]=v.useState(!0),[o,i]=v.useState(null),[c,d]=v.useState(!1),[u,p]=v.useState(null),[f,N]=v.useState(""),m=async()=>{var h,b,S;try{l(!0),i(null),console.log("Fetching documents...");const k=await ql.getAll(f||void 0);console.log("Documents API response:",k);const w=((h=k.data)==null?void 0:h.data)||[];console.log("Documents array:",w),t(Array.isArray(w)?w:[])}catch(k){console.error("Error fetching documents:",k);const w=((S=(b=k==null?void 0:k.response)==null?void 0:b.data)==null?void 0:S.error)||(k==null?void 0:k.message)||"Failed to load documents";i(w)}finally{l(!1)}};v.useEffect(()=>{m()},[f]);const y=async h=>{var k,w,E;const b=(k=h.target.files)==null?void 0:k[0];if(!b)return;const S=new FormData;S.append("file",b),S.append("category","standards"),S.append("description",`NRM 2 Reference Document - ${b.name}`);try{d(!0),p(null),console.log("Starting upload...");const L=await ql.upload(S);console.log("Upload response:",L),await m(),console.log("Documents refreshed after upload")}catch(L){console.error("Upload error:",L);const D=((E=(w=L==null?void 0:L.response)==null?void 0:w.data)==null?void 0:E.error)||(L==null?void 0:L.message)||"Failed to upload document";p(D)}finally{d(!1)}},j=async h=>{if(window.confirm("Are you sure you want to delete this document?"))try{await ql.delete(h),t(e.filter(b=>b.id!==h)),(s==null?void 0:s.id)===h&&n(null)}catch(b){console.error("Failed to delete document:",b)}},x=h=>{if(h===0)return"0 Bytes";const b=1024,S=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(h)/Math.log(b));return Math.round(h/Math.pow(b,k)*100)/100+" "+S[k]},g=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return console.log("ReferenceDocumentsPage rendered - state:",{isLoading:a,error:o,documentsCount:e.length}),r.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 flex-shrink-0",children:r.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Documents"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage PDFs, images, and standards documents"})]}),r.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[r.jsx("span",{className:"mr-2",children:""}),r.jsx("span",{children:"Upload Document"}),r.jsx("input",{type:"file",onChange:y,accept:".pdf,image/*",disabled:c,className:"hidden"})]})]}),(u||o)&&r.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:u||o}),c&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded text-blue-700 text-sm",children:"Uploading document..."})]})}),r.jsx("div",{className:"flex-1 overflow-hidden px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[r.jsx("div",{className:"lg:col-span-1 overflow-y-auto h-full",children:a?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading documents..."})]}):o?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-red-200 bg-red-50",children:[r.jsx("div",{className:"text-4xl mx-auto",children:""}),r.jsx("p",{className:"text-red-600 mt-4 font-medium",children:"Failed to load documents"}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:o}),r.jsx("button",{onClick:()=>m(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-6xl text-gray-400 mx-auto",children:""}),r.jsx("p",{className:"text-gray-700 mt-4 font-semibold",children:"No documents uploaded yet"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Upload NRM 2 PDF or reference documents using the button above"}),r.jsx("p",{className:"text-gray-500 text-xs mt-3",children:"Supported formats: PDF, PNG, JPG (max 50MB)"})]}):r.jsx("div",{className:"space-y-3",children:e.map(h=>r.jsx("div",{onClick:()=>n(h),className:`w-full text-left p-4 rounded-lg border transition-colors cursor-pointer ${(s==null?void 0:s.id)===h.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:h.name}),h.description&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:h.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[r.jsx("span",{children:x(h.file_size)}),r.jsx("span",{children:h.file_type}),r.jsx("span",{children:g(h.uploaded_at)})]})]}),h.id===(s==null?void 0:s.id)&&r.jsx("button",{onClick:b=>{b.stopPropagation(),j(h.id)},className:"text-red-600 hover:text-red-700 p-1 text-lg",title:"Delete",children:""})]})},h.id))})}),r.jsx("div",{className:"lg:col-span-3 flex flex-col overflow-hidden h-full",children:s?r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full",children:[r.jsx("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-200",children:r.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:s.name})}),r.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 flex items-center justify-center",children:s.file_type==="application/pdf"?r.jsx("iframe",{src:`${Kl}${s.file_path}`,className:"w-full h-full border-none",title:"PDF Viewer"}):s.file_type.startsWith("image/")?r.jsx("img",{src:`${Kl}${s.file_path}`,alt:s.name,className:"max-w-full max-h-full object-contain"}):r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"File type not supported for preview"}),r.jsx("a",{href:`${Kl}${s.file_path}`,download:!0,className:"text-blue-600 hover:text-blue-700 text-sm mt-2 inline-block",children:"Download file"})]})}),r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200 text-xs text-gray-600",children:[r.jsx("div",{children:x(s.file_size)}),r.jsx("div",{children:g(s.uploaded_at)})]})]}):r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:[r.jsx("div",{className:"text-4xl text-gray-400 mx-auto mb-3",children:""}),r.jsx("p",{className:"text-gray-600 font-medium",children:"Select a document to preview"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Choose a document from the list to view it here"})]})})]})})]})};function Wj({children:e,requiredRoles:t}){const s=dr(a=>a.user);return dr(a=>a.isLoading)?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-khc-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?t&&!t.includes(s.role)?r.jsx(qo,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(qo,{to:"/login",replace:!0})}function qj({onMenuClick:e}){const t=ze(),{user:s,logout:n}=dr(),a=async()=>{await n(),t("/login",{replace:!0})};return r.jsx("header",{className:"bg-khc-primary shadow-md sticky top-0 z-30",children:r.jsxs("div",{className:"h-16 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"md:hidden text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",title:"Toggle sidebar",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsxs(G,{to:"/dashboard",className:"flex md:hidden items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),r.jsx("span",{className:"text-white font-bold hidden sm:inline",children:"QSCostingPro"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"hidden sm:block relative group",children:[r.jsxs("button",{className:"flex items-center space-x-2 text-khc-light hover:bg-khc-secondary px-3 py-2 rounded-md transition",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:s&&s.username.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:"text-sm font-medium",children:s==null?void 0:s.username}),r.jsx("p",{className:"text-xs text-khc-light",children:s&&s.role.charAt(0).toUpperCase()+s.role.slice(1)})]})]}),r.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx(G,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),r.jsxs("div",{className:"sm:hidden relative group",children:[r.jsx("button",{className:"text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",children:r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:s&&s.username.charAt(0).toUpperCase()})})}),r.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx(G,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]})]})]})})}function He({to:e,icon:t,label:s,requiredRoles:n}){const{hasPermission:a}=Ht();return n&&!a(n)?null:r.jsxs(Tg,{to:e,className:({isActive:l})=>`flex items-center gap-3 px-4 py-3 rounded-md transition-all duration-200 ${l?"bg-khc-light border-l-4 border-khc-primary text-khc-primary font-medium scale-[1.02]":"text-gray-700 hover:bg-gray-50 hover:scale-[1.01]"}`,children:[r.jsx("span",{className:"text-lg",children:t}),r.jsx("span",{children:s})]})}function zr({title:e,icon:t,children:s,defaultOpen:n=!0,searchQuery:a=""}){const[l,o]=v.useState(n),i=!a||e.toLowerCase().includes(a.toLowerCase());return a&&!i?null:r.jsxs("div",{className:"border-t border-gray-200 pt-4 first:border-t-0 first:pt-0",children:[r.jsxs("button",{onClick:()=>o(!l),className:"w-full flex items-center gap-2 px-4 mb-2 text-xs font-semibold uppercase text-gray-500 hover:text-gray-700 transition-colors",children:[r.jsx("span",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:""}),t&&r.jsx("span",{children:t}),e]}),l&&r.jsx("div",{className:"space-y-1 animate-slide-in-top",children:s})]})}function Vj({onSearch:e}){const[t,s]=v.useState("");return r.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("input",{type:"text",placeholder:"Search pages...",value:t,onChange:n=>{s(n.target.value),e(n.target.value)},className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})})}function Hd({onClose:e}){const{user:t}=Ht(),[s,n]=v.useState(""),a=()=>{e==null||e()};return r.jsxs("div",{className:"w-64 h-screen bg-white border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"QS"}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg text-gray-900",children:"QSCostingPro"}),r.jsx("p",{className:"text-xs text-gray-500",children:"v1.0"})]})]}),r.jsx(Vj,{onSearch:n}),r.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[r.jsx("div",{onClick:a,className:"space-y-1",children:r.jsx(He,{to:"/dashboard",icon:"",label:"Home"})}),r.jsx(zr,{title:"Projects",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(He,{to:"/projects",icon:"",label:"All Projects"}),r.jsx(He,{to:"/projects/new",icon:"",label:"New"}),r.jsx(He,{to:"/projects?status=current",icon:"",label:"Current"}),r.jsx(He,{to:"/projects?status=completed",icon:"",label:"Completed"})]})}),r.jsx(zr,{title:"Estimate Builder",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(He,{to:"/projects",icon:"",label:"Build Estimate",requiredRoles:["admin","estimator"]}),r.jsx(He,{to:"/internal-rates",icon:"",label:"Build Rates",requiredRoles:["admin","estimator"]})]})}),r.jsx(zr,{title:"Contacts",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(He,{to:"/clients",icon:"",label:"Clients"}),r.jsx(He,{to:"/contractors",icon:"",label:"Contractors"})]})}),r.jsx(zr,{title:"Reference Library",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(He,{to:"/nrm2",icon:"",label:"NRM 2 Codes"}),r.jsx(He,{to:"/references/documents",icon:"",label:"Documents"})]})}),r.jsx(zr,{title:"Admin",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(He,{to:"/cost-items",icon:"",label:"Cost Database",requiredRoles:"admin"}),r.jsx(He,{to:"/users",icon:"",label:"User Management",requiredRoles:"admin"}),r.jsx(He,{to:"/personal-database",icon:"",label:"Cost Uploader",requiredRoles:"admin"})]})}),r.jsx(zr,{title:"Account",icon:"",searchQuery:s,children:r.jsx("div",{onClick:a,className:"space-y-1",children:r.jsx(He,{to:"/referrals",icon:"",label:"Referrals"})})})]}),t&&r.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-khc-primary rounded-full flex items-center justify-center text-white font-medium text-sm",children:t.username.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.username}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:t.role})]})]})})]})}function Qj(){const[e,t]=v.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-khc-light flex",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx(Hd,{})}),e&&r.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>t(!1)}),r.jsx("div",{className:"relative h-full w-80 max-w-[80%] bg-white shadow-xl",children:r.jsx(Hd,{onClose:()=>t(!1)})})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(qj,{onMenuClick:()=>t(!0)}),r.jsx("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx(yg,{})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-6 mt-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{children:r.jsx("p",{className:"text-sm",children:" 2026 QSCostingPro. Professional Cost Estimation for Quantity Surveyors."})}),r.jsx("div",{className:"text-sm",children:r.jsx("p",{children:"Version 1.0.0"})})]})})})]}),r.jsx(q0,{})]})}function Kj(){const{hydrate:e,user:t,accessToken:s}=dr();v.useEffect(()=>{e()},[e]);const n=!!t&&!!s;return r.jsx(Pg,{children:r.jsxs(vg,{children:[r.jsx(le,{path:"/",element:r.jsx(B0,{})}),r.jsx(le,{path:"/login",element:r.jsx(z0,{})}),r.jsx(le,{path:"/register",element:r.jsx(H0,{})}),r.jsx(le,{path:"/password-reset",element:r.jsx(V0,{})}),r.jsx(le,{path:"/privacy",element:r.jsx(Q0,{})}),r.jsx(le,{path:"/terms",element:r.jsx(K0,{})}),r.jsxs(le,{element:r.jsx(Wj,{children:r.jsx(Qj,{})}),children:[r.jsx(le,{path:"/dashboard",element:r.jsx(sj,{})}),r.jsx(le,{path:"/projects",element:r.jsx(oj,{})}),r.jsx(le,{path:"/projects/new",element:r.jsx(Ud,{})}),r.jsx(le,{path:"/projects/:id",element:r.jsx(mj,{})}),r.jsx(le,{path:"/projects/:id/edit",element:r.jsx(Ud,{})}),r.jsx(le,{path:"/projects/:id/estimates",element:r.jsx(wj,{})}),r.jsx(le,{path:"/projects/:id/actuals",element:r.jsx(Lj,{})}),r.jsx(le,{path:"/projects/:id/report",element:r.jsx(_j,{})}),r.jsx(le,{path:"/projects/:id/cost-total",element:r.jsx(Rj,{})}),r.jsx(le,{path:"/cost-items",element:r.jsx(Sj,{})}),r.jsx(le,{path:"/cost-analysis",element:r.jsx(Pj,{})}),r.jsx(le,{path:"/personal-database",element:r.jsx(Dj,{})}),r.jsx(le,{path:"/internal-rates",element:r.jsx(Oj,{})}),r.jsx(le,{path:"/cost-assembly",element:r.jsx($j,{})}),r.jsx(le,{path:"/referrals",element:r.jsx(Mj,{})}),r.jsx(le,{path:"/users",element:r.jsx(Tj,{})}),r.jsx(le,{path:"/clients",element:r.jsx(Aj,{})}),r.jsx(le,{path:"/contractors",element:r.jsx(Fj,{})}),r.jsx(le,{path:"/nrm2",element:r.jsx(zj,{})}),r.jsx(le,{path:"/references/documents",element:r.jsx(Hj,{})})]}),r.jsx(le,{path:"*",element:r.jsx(qo,{to:n?"/dashboard":"/",replace:!0})})]})})}Gl.createRoot(document.getElementById("root")).render(r.jsx($a.StrictMode,{children:r.jsx(Kj,{})}));
//# sourceMappingURL=index-ZuXkGxWv.js.map

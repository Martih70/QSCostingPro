function ep(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=s(a);fetch(a.href,l)}})();function Hd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qd={exports:{}},Ba={},Vd={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=Symbol.for("react.element"),tp=Symbol.for("react.portal"),rp=Symbol.for("react.fragment"),sp=Symbol.for("react.strict_mode"),np=Symbol.for("react.profiler"),ap=Symbol.for("react.provider"),lp=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),cp=Symbol.for("react.memo"),dp=Symbol.for("react.lazy"),rc=Symbol.iterator;function up(e){return e===null||typeof e!="object"?null:(e=rc&&e[rc]||e["@@iterator"],typeof e=="function"?e:null)}var Qd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kd=Object.assign,Gd={};function vs(e,t,s){this.props=e,this.context=t,this.refs=Gd,this.updater=s||Qd}vs.prototype.isReactComponent={};vs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Jd(){}Jd.prototype=vs.prototype;function ei(e,t,s){this.props=e,this.context=t,this.refs=Gd,this.updater=s||Qd}var ti=ei.prototype=new Jd;ti.constructor=ei;Kd(ti,vs.prototype);ti.isPureReactComponent=!0;var sc=Array.isArray,Yd=Object.prototype.hasOwnProperty,ri={current:null},Xd={key:!0,ref:!0,__self:!0,__source:!0};function Zd(e,t,s){var n,a={},l=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Yd.call(t,n)&&!Xd.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(i===1)a.children=s;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:Nn,type:e,key:l,ref:o,props:a,_owner:ri.current}}function mp(e,t){return{$$typeof:Nn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function si(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nn}function hp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var nc=/\/+/g;function fl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hp(""+e.key):t.toString(36)}function Xn(e,t,s,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Nn:case tp:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+fl(o,0):n,sc(a)?(s="",e!=null&&(s=e.replace(nc,"$&/")+"/"),Xn(a,t,s,"",function(d){return d})):a!=null&&(si(a)&&(a=mp(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(nc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",sc(e))for(var i=0;i<e.length;i++){l=e[i];var c=n+fl(l,i);o+=Xn(l,t,s,c,a)}else if(c=up(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=n+fl(l,i++),o+=Xn(l,t,s,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tn(e,t,s){if(e==null)return e;var n=[],a=0;return Xn(e,n,"","",function(l){return t.call(s,l,a++)}),n}function pp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},Zn={transition:null},fp={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:Zn,ReactCurrentOwner:ri};function eu(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Tn,forEach:function(e,t,s){Tn(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Tn(e,function(){t++}),t},toArray:function(e){return Tn(e,function(t){return t})||[]},only:function(e){if(!si(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};se.Component=vs;se.Fragment=rp;se.Profiler=np;se.PureComponent=ei;se.StrictMode=sp;se.Suspense=ip;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fp;se.act=eu;se.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Kd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=ri.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Yd.call(t,c)&&!Xd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:Nn,type:e.type,key:a,ref:l,props:n,_owner:o}};se.createContext=function(e){return e={$$typeof:lp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ap,_context:e},e.Consumer=e};se.createElement=Zd;se.createFactory=function(e){var t=Zd.bind(null,e);return t.type=e,t};se.createRef=function(){return{current:null}};se.forwardRef=function(e){return{$$typeof:op,render:e}};se.isValidElement=si;se.lazy=function(e){return{$$typeof:dp,_payload:{_status:-1,_result:e},_init:pp}};se.memo=function(e,t){return{$$typeof:cp,type:e,compare:t===void 0?null:t}};se.startTransition=function(e){var t=Zn.transition;Zn.transition={};try{e()}finally{Zn.transition=t}};se.unstable_act=eu;se.useCallback=function(e,t){return Ve.current.useCallback(e,t)};se.useContext=function(e){return Ve.current.useContext(e)};se.useDebugValue=function(){};se.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};se.useEffect=function(e,t){return Ve.current.useEffect(e,t)};se.useId=function(){return Ve.current.useId()};se.useImperativeHandle=function(e,t,s){return Ve.current.useImperativeHandle(e,t,s)};se.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};se.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};se.useMemo=function(e,t){return Ve.current.useMemo(e,t)};se.useReducer=function(e,t,s){return Ve.current.useReducer(e,t,s)};se.useRef=function(e){return Ve.current.useRef(e)};se.useState=function(e){return Ve.current.useState(e)};se.useSyncExternalStore=function(e,t,s){return Ve.current.useSyncExternalStore(e,t,s)};se.useTransition=function(){return Ve.current.useTransition()};se.version="18.3.1";Vd.exports=se;var j=Vd.exports;const tn=Hd(j),xp=ep({__proto__:null,default:tn},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp=j,yp=Symbol.for("react.element"),jp=Symbol.for("react.fragment"),vp=Object.prototype.hasOwnProperty,bp=gp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Np={key:!0,ref:!0,__self:!0,__source:!0};function tu(e,t,s){var n,a={},l=null,o=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)vp.call(t,n)&&!Np.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:yp,type:e,key:l,ref:o,props:a,_owner:bp.current}}Ba.Fragment=jp;Ba.jsx=tu;Ba.jsxs=tu;qd.exports=Ba;var r=qd.exports,Jl={},ru={exports:{}},ot={},su={exports:{}},nu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,O){var z=_.length;_.push(O);e:for(;0<z;){var Y=z-1>>>1,Q=_[Y];if(0<a(Q,O))_[Y]=O,_[z]=Q,z=Y;else break e}}function s(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var O=_[0],z=_.pop();if(z!==O){_[0]=z;e:for(var Y=0,Q=_.length,Z=Q>>>1;Y<Z;){var pe=2*(Y+1)-1,Ce=_[pe],te=pe+1,Ne=_[te];if(0>a(Ce,z))te<Q&&0>a(Ne,Ce)?(_[Y]=Ne,_[te]=z,Y=te):(_[Y]=Ce,_[pe]=z,Y=pe);else if(te<Q&&0>a(Ne,z))_[Y]=Ne,_[te]=z,Y=te;else break e}}return O}function a(_,O){var z=_.sortIndex-O.sortIndex;return z!==0?z:_.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,g=null,p=3,N=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(_){for(var O=s(d);O!==null;){if(O.callback===null)n(d);else if(O.startTime<=_)n(d),O.sortIndex=O.expirationTime,t(c,O);else break;O=s(d)}}function b(_){if(y=!1,h(_),!m)if(s(c)!==null)m=!0,I(S);else{var O=s(d);O!==null&&E(b,O.startTime-_)}}function S(_,O){m=!1,y&&(y=!1,x(P),P=-1),N=!0;var z=p;try{for(h(O),g=s(c);g!==null&&(!(g.expirationTime>O)||_&&!R());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,p=g.priorityLevel;var Q=Y(g.expirationTime<=O);O=e.unstable_now(),typeof Q=="function"?g.callback=Q:g===s(c)&&n(c),h(O)}else n(c);g=s(c)}if(g!==null)var Z=!0;else{var pe=s(d);pe!==null&&E(b,pe.startTime-O),Z=!1}return Z}finally{g=null,p=z,N=!1}}var k=!1,w=null,P=-1,L=5,$=-1;function R(){return!(e.unstable_now()-$<L)}function A(){if(w!==null){var _=e.unstable_now();$=_;var O=!0;try{O=w(!0,_)}finally{O?M():(k=!1,w=null)}}else k=!1}var M;if(typeof f=="function")M=function(){f(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=A,M=function(){q.postMessage(null)}}else M=function(){v(A,0)};function I(_){w=_,k||(k=!0,M())}function E(_,O){P=v(function(){_(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){m||N||(m=!0,I(S))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(_){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var z=p;p=O;try{return _()}finally{p=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,O){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var z=p;p=_;try{return O()}finally{p=z}},e.unstable_scheduleCallback=function(_,O,z){var Y=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,_){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=z+Q,_={id:u++,callback:O,priorityLevel:_,startTime:z,expirationTime:Q,sortIndex:-1},z>Y?(_.sortIndex=z,t(d,_),s(c)===null&&_===s(d)&&(y?(x(P),P=-1):y=!0,E(b,z-Y))):(_.sortIndex=Q,t(c,_),m||N||(m=!0,I(S))),_},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(_){var O=p;return function(){var z=p;p=O;try{return _.apply(this,arguments)}finally{p=z}}}})(nu);su.exports=nu;var wp=su.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=j,lt=wp;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var au=new Set,rn={};function Dr(e,t){ds(e,t),ds(e+"Capture",t)}function ds(e,t){for(rn[e]=t,e=0;e<t.length;e++)au.add(t[e])}var Mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=Object.prototype.hasOwnProperty,kp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ac={},lc={};function Cp(e){return Yl.call(lc,e)?!0:Yl.call(ac,e)?!1:kp.test(e)?lc[e]=!0:(ac[e]=!0,!1)}function Ep(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _p(e,t,s,n){if(t===null||typeof t>"u"||Ep(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,s,n,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var ni=/[\-:]([a-z])/g;function ai(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ni,ai);Ae[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ni,ai);Ae[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ni,ai);Ae[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function li(e,t,s,n){var a=Ae.hasOwnProperty(t)?Ae[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_p(t,s,a,n)&&(s=null),n||a===null?Cp(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var qt=Sp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,An=Symbol.for("react.element"),Vr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),oi=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),lu=Symbol.for("react.provider"),ou=Symbol.for("react.context"),ii=Symbol.for("react.forward_ref"),Zl=Symbol.for("react.suspense"),eo=Symbol.for("react.suspense_list"),ci=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),iu=Symbol.for("react.offscreen"),oc=Symbol.iterator;function Ls(e){return e===null||typeof e!="object"?null:(e=oc&&e[oc]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,xl;function Ms(e){if(xl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);xl=t&&t[1]||""}return`
`+xl+e}var gl=!1;function yl(e,t){if(!e||gl)return"";gl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{gl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ms(e):""}function Pp(e){switch(e.tag){case 5:return Ms(e.type);case 16:return Ms("Lazy");case 13:return Ms("Suspense");case 19:return Ms("SuspenseList");case 0:case 2:case 15:return e=yl(e.type,!1),e;case 11:return e=yl(e.type.render,!1),e;case 1:return e=yl(e.type,!0),e;default:return""}}function to(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qr:return"Fragment";case Vr:return"Portal";case Xl:return"Profiler";case oi:return"StrictMode";case Zl:return"Suspense";case eo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ou:return(e.displayName||"Context")+".Consumer";case lu:return(e._context.displayName||"Context")+".Provider";case ii:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ci:return t=e.displayName||null,t!==null?t:to(e.type)||"Memo";case Yt:t=e._payload,e=e._init;try{return to(e(t))}catch{}}return null}function Lp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return to(t);case 8:return t===oi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Rp(e){var t=cu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fn(e){e._valueTracker||(e._valueTracker=Rp(e))}function du(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=cu(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function pa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ro(e,t){var s=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function ic(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=hr(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uu(e,t){t=t.checked,t!=null&&li(e,"checked",t,!1)}function so(e,t){uu(e,t);var s=hr(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?no(e,t.type,s):t.hasOwnProperty("defaultValue")&&no(e,t.type,hr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function no(e,t,s){(t!=="number"||pa(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Bs=Array.isArray;function ns(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+hr(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ao(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(U(92));if(Bs(s)){if(1<s.length)throw Error(U(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:hr(s)}}function mu(e,t){var s=hr(t.value),n=hr(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function uc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dn,pu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Dn=Dn||document.createElement("div"),Dn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tp=["Webkit","ms","Moz","O"];Object.keys(Vs).forEach(function(e){Tp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vs[t]=Vs[e]})});function fu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Vs.hasOwnProperty(e)&&Vs[e]?(""+t).trim():t+"px"}function xu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=fu(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var Ap=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oo(e,t){if(t){if(Ap[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function io(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=null;function di(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uo=null,as=null,ls=null;function mc(e){if(e=kn(e)){if(typeof uo!="function")throw Error(U(280));var t=e.stateNode;t&&(t=Va(t),uo(e.stateNode,e.type,t))}}function gu(e){as?ls?ls.push(e):ls=[e]:as=e}function yu(){if(as){var e=as,t=ls;if(ls=as=null,mc(e),t)for(e=0;e<t.length;e++)mc(t[e])}}function ju(e,t){return e(t)}function vu(){}var jl=!1;function bu(e,t,s){if(jl)return e(t,s);jl=!0;try{return ju(e,t,s)}finally{jl=!1,(as!==null||ls!==null)&&(vu(),yu())}}function nn(e,t){var s=e.stateNode;if(s===null)return null;var n=Va(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(U(231,t,typeof s));return s}var mo=!1;if(Mt)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){mo=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{mo=!1}function Fp(e,t,s,n,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Qs=!1,fa=null,xa=!1,ho=null,Dp={onError:function(e){Qs=!0,fa=e}};function Ip(e,t,s,n,a,l,o,i,c){Qs=!1,fa=null,Fp.apply(Dp,arguments)}function Op(e,t,s,n,a,l,o,i,c){if(Ip.apply(this,arguments),Qs){if(Qs){var d=fa;Qs=!1,fa=null}else throw Error(U(198));xa||(xa=!0,ho=d)}}function Ir(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Nu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hc(e){if(Ir(e)!==e)throw Error(U(188))}function $p(e){var t=e.alternate;if(!t){if(t=Ir(e),t===null)throw Error(U(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===s)return hc(a),e;if(l===n)return hc(a),t;l=l.sibling}throw Error(U(188))}if(s.return!==n.return)s=a,n=l;else{for(var o=!1,i=a.child;i;){if(i===s){o=!0,s=a,n=l;break}if(i===n){o=!0,n=a,s=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===s){o=!0,s=l,n=a;break}if(i===n){o=!0,n=l,s=a;break}i=i.sibling}if(!o)throw Error(U(189))}}if(s.alternate!==n)throw Error(U(190))}if(s.tag!==3)throw Error(U(188));return s.stateNode.current===s?e:t}function wu(e){return e=$p(e),e!==null?Su(e):null}function Su(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Su(e);if(t!==null)return t;e=e.sibling}return null}var ku=lt.unstable_scheduleCallback,pc=lt.unstable_cancelCallback,Up=lt.unstable_shouldYield,Mp=lt.unstable_requestPaint,we=lt.unstable_now,Bp=lt.unstable_getCurrentPriorityLevel,ui=lt.unstable_ImmediatePriority,Cu=lt.unstable_UserBlockingPriority,ga=lt.unstable_NormalPriority,zp=lt.unstable_LowPriority,Eu=lt.unstable_IdlePriority,za=null,Lt=null;function Wp(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(za,e,void 0,(e.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Vp,Hp=Math.log,qp=Math.LN2;function Vp(e){return e>>>=0,e===0?32:31-(Hp(e)/qp|0)|0}var In=64,On=4194304;function zs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ya(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,o=s&268435455;if(o!==0){var i=o&~a;i!==0?n=zs(i):(l&=o,l!==0&&(n=zs(l)))}else o=s&~a,o!==0?n=zs(o):l!==0&&(n=zs(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-bt(t),a=1<<s,n|=e[s],t&=~a;return n}function Qp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kp(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-bt(l),i=1<<o,c=a[o];c===-1?(!(i&s)||i&n)&&(a[o]=Qp(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function po(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _u(){var e=In;return In<<=1,!(In&4194240)&&(In=64),e}function vl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function wn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bt(t),e[t]=s}function Gp(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-bt(s),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~l}}function mi(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-bt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var le=0;function Pu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lu,hi,Ru,Tu,Au,fo=!1,$n=[],nr=null,ar=null,lr=null,an=new Map,ln=new Map,Zt=[],Jp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":an.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ln.delete(t.pointerId)}}function Ts(e,t,s,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=kn(t),t!==null&&hi(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Yp(e,t,s,n,a){switch(t){case"focusin":return nr=Ts(nr,e,t,s,n,a),!0;case"dragenter":return ar=Ts(ar,e,t,s,n,a),!0;case"mouseover":return lr=Ts(lr,e,t,s,n,a),!0;case"pointerover":var l=a.pointerId;return an.set(l,Ts(an.get(l)||null,e,t,s,n,a)),!0;case"gotpointercapture":return l=a.pointerId,ln.set(l,Ts(ln.get(l)||null,e,t,s,n,a)),!0}return!1}function Fu(e){var t=Nr(e.target);if(t!==null){var s=Ir(t);if(s!==null){if(t=s.tag,t===13){if(t=Nu(s),t!==null){e.blockedOn=t,Au(e.priority,function(){Ru(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=xo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);co=n,s.target.dispatchEvent(n),co=null}else return t=kn(s),t!==null&&hi(t),e.blockedOn=s,!1;t.shift()}return!0}function xc(e,t,s){ea(e)&&s.delete(t)}function Xp(){fo=!1,nr!==null&&ea(nr)&&(nr=null),ar!==null&&ea(ar)&&(ar=null),lr!==null&&ea(lr)&&(lr=null),an.forEach(xc),ln.forEach(xc)}function As(e,t){e.blockedOn===t&&(e.blockedOn=null,fo||(fo=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,Xp)))}function on(e){function t(a){return As(a,e)}if(0<$n.length){As($n[0],e);for(var s=1;s<$n.length;s++){var n=$n[s];n.blockedOn===e&&(n.blockedOn=null)}}for(nr!==null&&As(nr,e),ar!==null&&As(ar,e),lr!==null&&As(lr,e),an.forEach(t),ln.forEach(t),s=0;s<Zt.length;s++)n=Zt[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Zt.length&&(s=Zt[0],s.blockedOn===null);)Fu(s),s.blockedOn===null&&Zt.shift()}var os=qt.ReactCurrentBatchConfig,ja=!0;function Zp(e,t,s,n){var a=le,l=os.transition;os.transition=null;try{le=1,pi(e,t,s,n)}finally{le=a,os.transition=l}}function ef(e,t,s,n){var a=le,l=os.transition;os.transition=null;try{le=4,pi(e,t,s,n)}finally{le=a,os.transition=l}}function pi(e,t,s,n){if(ja){var a=xo(e,t,s,n);if(a===null)Ll(e,t,n,va,s),fc(e,n);else if(Yp(a,e,t,s,n))n.stopPropagation();else if(fc(e,n),t&4&&-1<Jp.indexOf(e)){for(;a!==null;){var l=kn(a);if(l!==null&&Lu(l),l=xo(e,t,s,n),l===null&&Ll(e,t,n,va,s),l===a)break;a=l}a!==null&&n.stopPropagation()}else Ll(e,t,n,null,s)}}var va=null;function xo(e,t,s,n){if(va=null,e=di(n),e=Nr(e),e!==null)if(t=Ir(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Nu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return va=e,null}function Du(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bp()){case ui:return 1;case Cu:return 4;case ga:case zp:return 16;case Eu:return 536870912;default:return 16}default:return 16}}var tr=null,fi=null,ta=null;function Iu(){if(ta)return ta;var e,t=fi,s=t.length,n,a="value"in tr?tr.value:tr.textContent,l=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[l-n];n++);return ta=a.slice(e,1<n?1-n:void 0)}function ra(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Un(){return!0}function gc(){return!1}function it(e){function t(s,n,a,l,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s?s(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Un:gc,this.isPropagationStopped=gc,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),t}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=it(bs),Sn=je({},bs,{view:0,detail:0}),tf=it(Sn),bl,Nl,Fs,Wa=je({},Sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?(bl=e.screenX-Fs.screenX,Nl=e.screenY-Fs.screenY):Nl=bl=0,Fs=e),bl)},movementY:function(e){return"movementY"in e?e.movementY:Nl}}),yc=it(Wa),rf=je({},Wa,{dataTransfer:0}),sf=it(rf),nf=je({},Sn,{relatedTarget:0}),wl=it(nf),af=je({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),lf=it(af),of=je({},bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cf=it(of),df=je({},bs,{data:0}),jc=it(df),uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hf[e])?!!t[e]:!1}function gi(){return pf}var ff=je({},Sn,{key:function(e){if(e.key){var t=uf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ra(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gi,charCode:function(e){return e.type==="keypress"?ra(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ra(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xf=it(ff),gf=je({},Wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vc=it(gf),yf=je({},Sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gi}),jf=it(yf),vf=je({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),bf=it(vf),Nf=je({},Wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wf=it(Nf),Sf=[9,13,27,32],yi=Mt&&"CompositionEvent"in window,Ks=null;Mt&&"documentMode"in document&&(Ks=document.documentMode);var kf=Mt&&"TextEvent"in window&&!Ks,Ou=Mt&&(!yi||Ks&&8<Ks&&11>=Ks),bc=" ",Nc=!1;function $u(e,t){switch(e){case"keyup":return Sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function Cf(e,t){switch(e){case"compositionend":return Uu(t);case"keypress":return t.which!==32?null:(Nc=!0,bc);case"textInput":return e=t.data,e===bc&&Nc?null:e;default:return null}}function Ef(e,t){if(Kr)return e==="compositionend"||!yi&&$u(e,t)?(e=Iu(),ta=fi=tr=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ou&&t.locale!=="ko"?null:t.data;default:return null}}var _f={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_f[e.type]:t==="textarea"}function Mu(e,t,s,n){gu(n),t=ba(t,"onChange"),0<t.length&&(s=new xi("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Gs=null,cn=null;function Pf(e){Yu(e,0)}function Ha(e){var t=Yr(e);if(du(t))return e}function Lf(e,t){if(e==="change")return t}var Bu=!1;if(Mt){var Sl;if(Mt){var kl="oninput"in document;if(!kl){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),kl=typeof Sc.oninput=="function"}Sl=kl}else Sl=!1;Bu=Sl&&(!document.documentMode||9<document.documentMode)}function kc(){Gs&&(Gs.detachEvent("onpropertychange",zu),cn=Gs=null)}function zu(e){if(e.propertyName==="value"&&Ha(cn)){var t=[];Mu(t,cn,e,di(e)),bu(Pf,t)}}function Rf(e,t,s){e==="focusin"?(kc(),Gs=t,cn=s,Gs.attachEvent("onpropertychange",zu)):e==="focusout"&&kc()}function Tf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ha(cn)}function Af(e,t){if(e==="click")return Ha(t)}function Ff(e,t){if(e==="input"||e==="change")return Ha(t)}function Df(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Df;function dn(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Yl.call(t,a)||!wt(e[a],t[a]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ec(e,t){var s=Cc(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Cc(s)}}function Wu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hu(){for(var e=window,t=pa();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=pa(e.document)}return t}function ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function If(e){var t=Hu(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Wu(s.ownerDocument.documentElement,s)){if(n!==null&&ji(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=Ec(s,l);var o=Ec(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Of=Mt&&"documentMode"in document&&11>=document.documentMode,Gr=null,go=null,Js=null,yo=!1;function _c(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;yo||Gr==null||Gr!==pa(n)||(n=Gr,"selectionStart"in n&&ji(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Js&&dn(Js,n)||(Js=n,n=ba(go,"onSelect"),0<n.length&&(t=new xi("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Gr)))}function Mn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Jr={animationend:Mn("Animation","AnimationEnd"),animationiteration:Mn("Animation","AnimationIteration"),animationstart:Mn("Animation","AnimationStart"),transitionend:Mn("Transition","TransitionEnd")},Cl={},qu={};Mt&&(qu=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function qa(e){if(Cl[e])return Cl[e];if(!Jr[e])return e;var t=Jr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in qu)return Cl[e]=t[s];return e}var Vu=qa("animationend"),Qu=qa("animationiteration"),Ku=qa("animationstart"),Gu=qa("transitionend"),Ju=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Ju.set(e,t),Dr(t,[e])}for(var El=0;El<Pc.length;El++){var _l=Pc[El],$f=_l.toLowerCase(),Uf=_l[0].toUpperCase()+_l.slice(1);xr($f,"on"+Uf)}xr(Vu,"onAnimationEnd");xr(Qu,"onAnimationIteration");xr(Ku,"onAnimationStart");xr("dblclick","onDoubleClick");xr("focusin","onFocus");xr("focusout","onBlur");xr(Gu,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ws));function Lc(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Op(n,t,void 0,e),e.currentTarget=null}function Yu(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;Lc(a,i,d),l=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;Lc(a,i,d),l=c}}}if(xa)throw e=ho,xa=!1,ho=null,e}function ue(e,t){var s=t[wo];s===void 0&&(s=t[wo]=new Set);var n=e+"__bubble";s.has(n)||(Xu(t,e,2,!1),s.add(n))}function Pl(e,t,s){var n=0;t&&(n|=4),Xu(s,e,n,t)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function un(e){if(!e[Bn]){e[Bn]=!0,au.forEach(function(s){s!=="selectionchange"&&(Mf.has(s)||Pl(s,!1,e),Pl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bn]||(t[Bn]=!0,Pl("selectionchange",!1,t))}}function Xu(e,t,s,n){switch(Du(t)){case 1:var a=Zp;break;case 4:a=ef;break;default:a=pi}s=a.bind(null,t,s,e),a=void 0,!mo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Ll(e,t,s,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=Nr(i),o===null)return;if(c=o.tag,c===5||c===6){n=l=o;continue e}i=i.parentNode}}n=n.return}bu(function(){var d=l,u=di(s),g=[];e:{var p=Ju.get(e);if(p!==void 0){var N=xi,m=e;switch(e){case"keypress":if(ra(s)===0)break e;case"keydown":case"keyup":N=xf;break;case"focusin":m="focus",N=wl;break;case"focusout":m="blur",N=wl;break;case"beforeblur":case"afterblur":N=wl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=sf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=jf;break;case Vu:case Qu:case Ku:N=lf;break;case Gu:N=bf;break;case"scroll":N=tf;break;case"wheel":N=wf;break;case"copy":case"cut":case"paste":N=cf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=vc}var y=(t&4)!==0,v=!y&&e==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var f=d,h;f!==null;){h=f;var b=h.stateNode;if(h.tag===5&&b!==null&&(h=b,x!==null&&(b=nn(f,x),b!=null&&y.push(mn(f,b,h)))),v)break;f=f.return}0<y.length&&(p=new N(p,m,null,s,u),g.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",p&&s!==co&&(m=s.relatedTarget||s.fromElement)&&(Nr(m)||m[Bt]))break e;if((N||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,N?(m=s.relatedTarget||s.toElement,N=d,m=m?Nr(m):null,m!==null&&(v=Ir(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(N=null,m=d),N!==m)){if(y=yc,b="onMouseLeave",x="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(y=vc,b="onPointerLeave",x="onPointerEnter",f="pointer"),v=N==null?p:Yr(N),h=m==null?p:Yr(m),p=new y(b,f+"leave",N,s,u),p.target=v,p.relatedTarget=h,b=null,Nr(u)===d&&(y=new y(x,f+"enter",m,s,u),y.target=h,y.relatedTarget=v,b=y),v=b,N&&m)t:{for(y=N,x=m,f=0,h=y;h;h=Br(h))f++;for(h=0,b=x;b;b=Br(b))h++;for(;0<f-h;)y=Br(y),f--;for(;0<h-f;)x=Br(x),h--;for(;f--;){if(y===x||x!==null&&y===x.alternate)break t;y=Br(y),x=Br(x)}y=null}else y=null;N!==null&&Rc(g,p,N,y,!1),m!==null&&v!==null&&Rc(g,v,m,y,!0)}}e:{if(p=d?Yr(d):window,N=p.nodeName&&p.nodeName.toLowerCase(),N==="select"||N==="input"&&p.type==="file")var S=Lf;else if(wc(p))if(Bu)S=Ff;else{S=Tf;var k=Rf}else(N=p.nodeName)&&N.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=Af);if(S&&(S=S(e,d))){Mu(g,S,s,u);break e}k&&k(e,p,d),e==="focusout"&&(k=p._wrapperState)&&k.controlled&&p.type==="number"&&no(p,"number",p.value)}switch(k=d?Yr(d):window,e){case"focusin":(wc(k)||k.contentEditable==="true")&&(Gr=k,go=d,Js=null);break;case"focusout":Js=go=Gr=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,_c(g,s,u);break;case"selectionchange":if(Of)break;case"keydown":case"keyup":_c(g,s,u)}var w;if(yi)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Kr?$u(e,s)&&(P="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(P="onCompositionStart");P&&(Ou&&s.locale!=="ko"&&(Kr||P!=="onCompositionStart"?P==="onCompositionEnd"&&Kr&&(w=Iu()):(tr=u,fi="value"in tr?tr.value:tr.textContent,Kr=!0)),k=ba(d,P),0<k.length&&(P=new jc(P,e,null,s,u),g.push({event:P,listeners:k}),w?P.data=w:(w=Uu(s),w!==null&&(P.data=w)))),(w=kf?Cf(e,s):Ef(e,s))&&(d=ba(d,"onBeforeInput"),0<d.length&&(u=new jc("onBeforeInput","beforeinput",null,s,u),g.push({event:u,listeners:d}),u.data=w))}Yu(g,t)})}function mn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ba(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=nn(e,s),l!=null&&n.unshift(mn(e,l,a)),l=nn(e,t),l!=null&&n.push(mn(e,l,a))),e=e.return}return n}function Br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rc(e,t,s,n,a){for(var l=t._reactName,o=[];s!==null&&s!==n;){var i=s,c=i.alternate,d=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&d!==null&&(i=d,a?(c=nn(s,l),c!=null&&o.unshift(mn(s,c,i))):a||(c=nn(s,l),c!=null&&o.push(mn(s,c,i)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Bf=/\r\n?/g,zf=/\u0000|\uFFFD/g;function Tc(e){return(typeof e=="string"?e:""+e).replace(Bf,`
`).replace(zf,"")}function zn(e,t,s){if(t=Tc(t),Tc(e)!==t&&s)throw Error(U(425))}function Na(){}var jo=null,vo=null;function bo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var No=typeof setTimeout=="function"?setTimeout:void 0,Wf=typeof clearTimeout=="function"?clearTimeout:void 0,Ac=typeof Promise=="function"?Promise:void 0,Hf=typeof queueMicrotask=="function"?queueMicrotask:typeof Ac<"u"?function(e){return Ac.resolve(null).then(e).catch(qf)}:No;function qf(e){setTimeout(function(){throw e})}function Rl(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),on(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);on(t)}function or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Ns,hn="__reactProps$"+Ns,Bt="__reactContainer$"+Ns,wo="__reactEvents$"+Ns,Vf="__reactListeners$"+Ns,Qf="__reactHandles$"+Ns;function Nr(e){var t=e[Pt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Bt]||s[Pt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Fc(e);e!==null;){if(s=e[Pt])return s;e=Fc(e)}return t}e=s,s=e.parentNode}return null}function kn(e){return e=e[Pt]||e[Bt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function Va(e){return e[hn]||null}var So=[],Xr=-1;function gr(e){return{current:e}}function me(e){0>Xr||(e.current=So[Xr],So[Xr]=null,Xr--)}function ie(e,t){Xr++,So[Xr]=e.current,e.current=t}var pr={},Me=gr(pr),Ye=gr(!1),Pr=pr;function us(e,t){var s=e.type.contextTypes;if(!s)return pr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in s)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Xe(e){return e=e.childContextTypes,e!=null}function wa(){me(Ye),me(Me)}function Dc(e,t,s){if(Me.current!==pr)throw Error(U(168));ie(Me,t),ie(Ye,s)}function Zu(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(U(108,Lp(e)||"Unknown",a));return je({},s,n)}function Sa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Pr=Me.current,ie(Me,e),ie(Ye,Ye.current),!0}function Ic(e,t,s){var n=e.stateNode;if(!n)throw Error(U(169));s?(e=Zu(e,t,Pr),n.__reactInternalMemoizedMergedChildContext=e,me(Ye),me(Me),ie(Me,e)):me(Ye),ie(Ye,s)}var It=null,Qa=!1,Tl=!1;function em(e){It===null?It=[e]:It.push(e)}function Kf(e){Qa=!0,em(e)}function yr(){if(!Tl&&It!==null){Tl=!0;var e=0,t=le;try{var s=It;for(le=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}It=null,Qa=!1}catch(a){throw It!==null&&(It=It.slice(e+1)),ku(ui,yr),a}finally{le=t,Tl=!1}}return null}var Zr=[],es=0,ka=null,Ca=0,ct=[],dt=0,Lr=null,Ot=1,$t="";function jr(e,t){Zr[es++]=Ca,Zr[es++]=ka,ka=e,Ca=t}function tm(e,t,s){ct[dt++]=Ot,ct[dt++]=$t,ct[dt++]=Lr,Lr=e;var n=Ot;e=$t;var a=32-bt(n)-1;n&=~(1<<a),s+=1;var l=32-bt(t)+a;if(30<l){var o=a-a%5;l=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Ot=1<<32-bt(t)+a|s<<a|n,$t=l+e}else Ot=1<<l|s<<a|n,$t=e}function vi(e){e.return!==null&&(jr(e,1),tm(e,1,0))}function bi(e){for(;e===ka;)ka=Zr[--es],Zr[es]=null,Ca=Zr[--es],Zr[es]=null;for(;e===Lr;)Lr=ct[--dt],ct[dt]=null,$t=ct[--dt],ct[dt]=null,Ot=ct[--dt],ct[dt]=null}var at=null,nt=null,fe=!1,jt=null;function rm(e,t){var s=ut(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Oc(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,nt=or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Lr!==null?{id:Ot,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=ut(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,at=e,nt=null,!0):!1;default:return!1}}function ko(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Co(e){if(fe){var t=nt;if(t){var s=t;if(!Oc(e,t)){if(ko(e))throw Error(U(418));t=or(s.nextSibling);var n=at;t&&Oc(e,t)?rm(n,s):(e.flags=e.flags&-4097|2,fe=!1,at=e)}}else{if(ko(e))throw Error(U(418));e.flags=e.flags&-4097|2,fe=!1,at=e}}}function $c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function Wn(e){if(e!==at)return!1;if(!fe)return $c(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bo(e.type,e.memoizedProps)),t&&(t=nt)){if(ko(e))throw sm(),Error(U(418));for(;t;)rm(e,t),t=or(t.nextSibling)}if($c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){nt=or(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=at?or(e.stateNode.nextSibling):null;return!0}function sm(){for(var e=nt;e;)e=or(e.nextSibling)}function ms(){nt=at=null,fe=!1}function Ni(e){jt===null?jt=[e]:jt.push(e)}var Gf=qt.ReactCurrentBatchConfig;function Ds(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(U(309));var n=s.stateNode}if(!n)throw Error(U(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(U(284));if(!s._owner)throw Error(U(290,e))}return e}function Hn(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uc(e){var t=e._init;return t(e._payload)}function nm(e){function t(x,f){if(e){var h=x.deletions;h===null?(x.deletions=[f],x.flags|=16):h.push(f)}}function s(x,f){if(!e)return null;for(;f!==null;)t(x,f),f=f.sibling;return null}function n(x,f){for(x=new Map;f!==null;)f.key!==null?x.set(f.key,f):x.set(f.index,f),f=f.sibling;return x}function a(x,f){return x=ur(x,f),x.index=0,x.sibling=null,x}function l(x,f,h){return x.index=h,e?(h=x.alternate,h!==null?(h=h.index,h<f?(x.flags|=2,f):h):(x.flags|=2,f)):(x.flags|=1048576,f)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function i(x,f,h,b){return f===null||f.tag!==6?(f=Ul(h,x.mode,b),f.return=x,f):(f=a(f,h),f.return=x,f)}function c(x,f,h,b){var S=h.type;return S===Qr?u(x,f,h.props.children,b,h.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yt&&Uc(S)===f.type)?(b=a(f,h.props),b.ref=Ds(x,f,h),b.return=x,b):(b=ca(h.type,h.key,h.props,null,x.mode,b),b.ref=Ds(x,f,h),b.return=x,b)}function d(x,f,h,b){return f===null||f.tag!==4||f.stateNode.containerInfo!==h.containerInfo||f.stateNode.implementation!==h.implementation?(f=Ml(h,x.mode,b),f.return=x,f):(f=a(f,h.children||[]),f.return=x,f)}function u(x,f,h,b,S){return f===null||f.tag!==7?(f=Er(h,x.mode,b,S),f.return=x,f):(f=a(f,h),f.return=x,f)}function g(x,f,h){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Ul(""+f,x.mode,h),f.return=x,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case An:return h=ca(f.type,f.key,f.props,null,x.mode,h),h.ref=Ds(x,null,f),h.return=x,h;case Vr:return f=Ml(f,x.mode,h),f.return=x,f;case Yt:var b=f._init;return g(x,b(f._payload),h)}if(Bs(f)||Ls(f))return f=Er(f,x.mode,h,null),f.return=x,f;Hn(x,f)}return null}function p(x,f,h,b){var S=f!==null?f.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return S!==null?null:i(x,f,""+h,b);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case An:return h.key===S?c(x,f,h,b):null;case Vr:return h.key===S?d(x,f,h,b):null;case Yt:return S=h._init,p(x,f,S(h._payload),b)}if(Bs(h)||Ls(h))return S!==null?null:u(x,f,h,b,null);Hn(x,h)}return null}function N(x,f,h,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(h)||null,i(f,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case An:return x=x.get(b.key===null?h:b.key)||null,c(f,x,b,S);case Vr:return x=x.get(b.key===null?h:b.key)||null,d(f,x,b,S);case Yt:var k=b._init;return N(x,f,h,k(b._payload),S)}if(Bs(b)||Ls(b))return x=x.get(h)||null,u(f,x,b,S,null);Hn(f,b)}return null}function m(x,f,h,b){for(var S=null,k=null,w=f,P=f=0,L=null;w!==null&&P<h.length;P++){w.index>P?(L=w,w=null):L=w.sibling;var $=p(x,w,h[P],b);if($===null){w===null&&(w=L);break}e&&w&&$.alternate===null&&t(x,w),f=l($,f,P),k===null?S=$:k.sibling=$,k=$,w=L}if(P===h.length)return s(x,w),fe&&jr(x,P),S;if(w===null){for(;P<h.length;P++)w=g(x,h[P],b),w!==null&&(f=l(w,f,P),k===null?S=w:k.sibling=w,k=w);return fe&&jr(x,P),S}for(w=n(x,w);P<h.length;P++)L=N(w,x,P,h[P],b),L!==null&&(e&&L.alternate!==null&&w.delete(L.key===null?P:L.key),f=l(L,f,P),k===null?S=L:k.sibling=L,k=L);return e&&w.forEach(function(R){return t(x,R)}),fe&&jr(x,P),S}function y(x,f,h,b){var S=Ls(h);if(typeof S!="function")throw Error(U(150));if(h=S.call(h),h==null)throw Error(U(151));for(var k=S=null,w=f,P=f=0,L=null,$=h.next();w!==null&&!$.done;P++,$=h.next()){w.index>P?(L=w,w=null):L=w.sibling;var R=p(x,w,$.value,b);if(R===null){w===null&&(w=L);break}e&&w&&R.alternate===null&&t(x,w),f=l(R,f,P),k===null?S=R:k.sibling=R,k=R,w=L}if($.done)return s(x,w),fe&&jr(x,P),S;if(w===null){for(;!$.done;P++,$=h.next())$=g(x,$.value,b),$!==null&&(f=l($,f,P),k===null?S=$:k.sibling=$,k=$);return fe&&jr(x,P),S}for(w=n(x,w);!$.done;P++,$=h.next())$=N(w,x,P,$.value,b),$!==null&&(e&&$.alternate!==null&&w.delete($.key===null?P:$.key),f=l($,f,P),k===null?S=$:k.sibling=$,k=$);return e&&w.forEach(function(A){return t(x,A)}),fe&&jr(x,P),S}function v(x,f,h,b){if(typeof h=="object"&&h!==null&&h.type===Qr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case An:e:{for(var S=h.key,k=f;k!==null;){if(k.key===S){if(S=h.type,S===Qr){if(k.tag===7){s(x,k.sibling),f=a(k,h.props.children),f.return=x,x=f;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Yt&&Uc(S)===k.type){s(x,k.sibling),f=a(k,h.props),f.ref=Ds(x,k,h),f.return=x,x=f;break e}s(x,k);break}else t(x,k);k=k.sibling}h.type===Qr?(f=Er(h.props.children,x.mode,b,h.key),f.return=x,x=f):(b=ca(h.type,h.key,h.props,null,x.mode,b),b.ref=Ds(x,f,h),b.return=x,x=b)}return o(x);case Vr:e:{for(k=h.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===h.containerInfo&&f.stateNode.implementation===h.implementation){s(x,f.sibling),f=a(f,h.children||[]),f.return=x,x=f;break e}else{s(x,f);break}else t(x,f);f=f.sibling}f=Ml(h,x.mode,b),f.return=x,x=f}return o(x);case Yt:return k=h._init,v(x,f,k(h._payload),b)}if(Bs(h))return m(x,f,h,b);if(Ls(h))return y(x,f,h,b);Hn(x,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,f!==null&&f.tag===6?(s(x,f.sibling),f=a(f,h),f.return=x,x=f):(s(x,f),f=Ul(h,x.mode,b),f.return=x,x=f),o(x)):s(x,f)}return v}var hs=nm(!0),am=nm(!1),Ea=gr(null),_a=null,ts=null,wi=null;function Si(){wi=ts=_a=null}function ki(e){var t=Ea.current;me(Ea),e._currentValue=t}function Eo(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function is(e,t){_a=e,wi=ts=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Je=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(wi!==e)if(e={context:e,memoizedValue:t,next:null},ts===null){if(_a===null)throw Error(U(308));ts=e,_a.dependencies={lanes:0,firstContext:e}}else ts=ts.next=e;return t}var wr=null;function Ci(e){wr===null?wr=[e]:wr.push(e)}function lm(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Ci(t)):(s.next=a.next,a.next=s),t.interleaved=s,zt(e,n)}function zt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Xt=!1;function Ei(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ne&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,zt(e,s)}return a=n.interleaved,a===null?(t.next=t,Ci(n)):(t.next=a.next,a.next=t),n.interleaved=t,zt(e,s)}function sa(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,mi(e,s)}}function Mc(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?a=l=o:l=l.next=o,s=s.next}while(s!==null);l===null?a=l=t:l=l.next=t}else a=l=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Pa(e,t,s,n){var a=e.updateQueue;Xt=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==o&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(l!==null){var g=a.baseState;o=0,u=d=c=null,i=l;do{var p=i.lane,N=i.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:N,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var m=e,y=i;switch(p=t,N=s,y.tag){case 1:if(m=y.payload,typeof m=="function"){g=m.call(N,g,p);break e}g=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(N,g,p):m,p==null)break e;g=je({},g,p);break e;case 2:Xt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[i]:p.push(i))}else N={eventTime:N,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=N,c=g):u=u.next=N,o|=p;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;p=i,i=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(u===null&&(c=g),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Tr|=o,e.lanes=o,e.memoizedState=g}}function Bc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(U(191,a));a.call(n)}}}var Cn={},Rt=gr(Cn),pn=gr(Cn),fn=gr(Cn);function Sr(e){if(e===Cn)throw Error(U(174));return e}function _i(e,t){switch(ie(fn,t),ie(pn,e),ie(Rt,Cn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lo(t,e)}me(Rt),ie(Rt,t)}function ps(){me(Rt),me(pn),me(fn)}function im(e){Sr(fn.current);var t=Sr(Rt.current),s=lo(t,e.type);t!==s&&(ie(pn,e),ie(Rt,s))}function Pi(e){pn.current===e&&(me(Rt),me(pn))}var xe=gr(0);function La(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Al=[];function Li(){for(var e=0;e<Al.length;e++)Al[e]._workInProgressVersionPrimary=null;Al.length=0}var na=qt.ReactCurrentDispatcher,Fl=qt.ReactCurrentBatchConfig,Rr=0,ge=null,Ee=null,Pe=null,Ra=!1,Ys=!1,xn=0,Jf=0;function De(){throw Error(U(321))}function Ri(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!wt(e[s],t[s]))return!1;return!0}function Ti(e,t,s,n,a,l){if(Rr=l,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=e===null||e.memoizedState===null?ex:tx,e=s(n,a),Ys){l=0;do{if(Ys=!1,xn=0,25<=l)throw Error(U(301));l+=1,Pe=Ee=null,t.updateQueue=null,na.current=rx,e=s(n,a)}while(Ys)}if(na.current=Ta,t=Ee!==null&&Ee.next!==null,Rr=0,Pe=Ee=ge=null,Ra=!1,t)throw Error(U(300));return e}function Ai(){var e=xn!==0;return xn=0,e}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?ge.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function pt(){if(Ee===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Pe===null?ge.memoizedState:Pe.next;if(t!==null)Pe=t,Ee=e;else{if(e===null)throw Error(U(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Pe===null?ge.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function gn(e,t){return typeof t=="function"?t(e):t}function Dl(e){var t=pt(),s=t.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=e;var n=Ee,a=n.baseQueue,l=s.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}n.baseQueue=a=l,s.pending=null}if(a!==null){l=a.next,n=n.baseState;var i=o=null,c=null,d=l;do{var u=d.lane;if((Rr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var g={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=g,o=n):c=c.next=g,ge.lanes|=u,Tr|=u}d=d.next}while(d!==null&&d!==l);c===null?o=n:c.next=i,wt(n,t.memoizedState)||(Je=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do l=a.lane,ge.lanes|=l,Tr|=l,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Il(e){var t=pt(),s=t.queue;if(s===null)throw Error(U(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,l=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);wt(l,t.memoizedState)||(Je=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,n]}function cm(){}function dm(e,t){var s=ge,n=pt(),a=t(),l=!wt(n.memoizedState,a);if(l&&(n.memoizedState=a,Je=!0),n=n.queue,Fi(hm.bind(null,s,n,e),[e]),n.getSnapshot!==t||l||Pe!==null&&Pe.memoizedState.tag&1){if(s.flags|=2048,yn(9,mm.bind(null,s,n,a,t),void 0,null),Le===null)throw Error(U(349));Rr&30||um(s,t,a)}return a}function um(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function mm(e,t,s,n){t.value=s,t.getSnapshot=n,pm(t)&&fm(e)}function hm(e,t,s){return s(function(){pm(t)&&fm(e)})}function pm(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!wt(e,s)}catch{return!0}}function fm(e){var t=zt(e,1);t!==null&&Nt(t,e,1,-1)}function zc(e){var t=_t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:e},t.queue=e,e=e.dispatch=Zf.bind(null,ge,e),[t.memoizedState,e]}function yn(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function xm(){return pt().memoizedState}function aa(e,t,s,n){var a=_t();ge.flags|=e,a.memoizedState=yn(1|t,s,void 0,n===void 0?null:n)}function Ka(e,t,s,n){var a=pt();n=n===void 0?null:n;var l=void 0;if(Ee!==null){var o=Ee.memoizedState;if(l=o.destroy,n!==null&&Ri(n,o.deps)){a.memoizedState=yn(t,s,l,n);return}}ge.flags|=e,a.memoizedState=yn(1|t,s,l,n)}function Wc(e,t){return aa(8390656,8,e,t)}function Fi(e,t){return Ka(2048,8,e,t)}function gm(e,t){return Ka(4,2,e,t)}function ym(e,t){return Ka(4,4,e,t)}function jm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vm(e,t,s){return s=s!=null?s.concat([e]):null,Ka(4,4,jm.bind(null,t,e),s)}function Di(){}function bm(e,t){var s=pt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Ri(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Nm(e,t){var s=pt();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Ri(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function wm(e,t,s){return Rr&21?(wt(s,t)||(s=_u(),ge.lanes|=s,Tr|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Je=!0),e.memoizedState=s)}function Yf(e,t){var s=le;le=s!==0&&4>s?s:4,e(!0);var n=Fl.transition;Fl.transition={};try{e(!1),t()}finally{le=s,Fl.transition=n}}function Sm(){return pt().memoizedState}function Xf(e,t,s){var n=dr(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},km(e))Cm(t,s);else if(s=lm(e,t,s,n),s!==null){var a=qe();Nt(s,e,n,a),Em(s,t,n)}}function Zf(e,t,s){var n=dr(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(km(e))Cm(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,s);if(a.hasEagerState=!0,a.eagerState=i,wt(i,o)){var c=t.interleaved;c===null?(a.next=a,Ci(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=lm(e,t,a,n),s!==null&&(a=qe(),Nt(s,e,n,a),Em(s,t,n))}}function km(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function Cm(e,t){Ys=Ra=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Em(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,mi(e,s)}}var Ta={readContext:ht,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},ex={readContext:ht,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:Wc,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,aa(4194308,4,jm.bind(null,t,e),s)},useLayoutEffect:function(e,t){return aa(4194308,4,e,t)},useInsertionEffect:function(e,t){return aa(4,2,e,t)},useMemo:function(e,t){var s=_t();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=_t();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Xf.bind(null,ge,e),[n.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:zc,useDebugValue:Di,useDeferredValue:function(e){return _t().memoizedState=e},useTransition:function(){var e=zc(!1),t=e[0];return e=Yf.bind(null,e[1]),_t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=ge,a=_t();if(fe){if(s===void 0)throw Error(U(407));s=s()}else{if(s=t(),Le===null)throw Error(U(349));Rr&30||um(n,t,s)}a.memoizedState=s;var l={value:s,getSnapshot:t};return a.queue=l,Wc(hm.bind(null,n,l,e),[e]),n.flags|=2048,yn(9,mm.bind(null,n,l,s,t),void 0,null),s},useId:function(){var e=_t(),t=Le.identifierPrefix;if(fe){var s=$t,n=Ot;s=(n&~(1<<32-bt(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=xn++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Jf++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tx={readContext:ht,useCallback:bm,useContext:ht,useEffect:Fi,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Nm,useReducer:Dl,useRef:xm,useState:function(){return Dl(gn)},useDebugValue:Di,useDeferredValue:function(e){var t=pt();return wm(t,Ee.memoizedState,e)},useTransition:function(){var e=Dl(gn)[0],t=pt().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:dm,useId:Sm,unstable_isNewReconciler:!1},rx={readContext:ht,useCallback:bm,useContext:ht,useEffect:Fi,useImperativeHandle:vm,useInsertionEffect:gm,useLayoutEffect:ym,useMemo:Nm,useReducer:Il,useRef:xm,useState:function(){return Il(gn)},useDebugValue:Di,useDeferredValue:function(e){var t=pt();return Ee===null?t.memoizedState=e:wm(t,Ee.memoizedState,e)},useTransition:function(){var e=Il(gn)[0],t=pt().memoizedState;return[e,t]},useMutableSource:cm,useSyncExternalStore:dm,useId:Sm,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function _o(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:je({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ga={isMounted:function(e){return(e=e._reactInternals)?Ir(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=qe(),a=dr(e),l=Ut(n,a);l.payload=t,s!=null&&(l.callback=s),t=ir(e,l,a),t!==null&&(Nt(t,e,a,n),sa(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=qe(),a=dr(e),l=Ut(n,a);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=ir(e,l,a),t!==null&&(Nt(t,e,a,n),sa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=qe(),n=dr(e),a=Ut(s,n);a.tag=2,t!=null&&(a.callback=t),t=ir(e,a,n),t!==null&&(Nt(t,e,n,s),sa(t,e,n))}};function Hc(e,t,s,n,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,o):t.prototype&&t.prototype.isPureReactComponent?!dn(s,n)||!dn(a,l):!0}function _m(e,t,s){var n=!1,a=pr,l=t.contextType;return typeof l=="object"&&l!==null?l=ht(l):(a=Xe(t)?Pr:Me.current,n=t.contextTypes,l=(n=n!=null)?us(e,a):pr),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ga,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function qc(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Ga.enqueueReplaceState(t,t.state,null)}function Po(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Ei(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=ht(l):(l=Xe(t)?Pr:Me.current,a.context=us(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(_o(e,t,l,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ga.enqueueReplaceState(a,a.state,null),Pa(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function fs(e,t){try{var s="",n=t;do s+=Pp(n),n=n.return;while(n);var a=s}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Ol(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Lo(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var sx=typeof WeakMap=="function"?WeakMap:Map;function Pm(e,t,s){s=Ut(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Fa||(Fa=!0,Mo=n),Lo(e,t)},s}function Lm(e,t,s){s=Ut(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Lo(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){Lo(e,t),typeof n!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Vc(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new sx;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=gx.bind(null,e,t,s),t.then(e,e))}function Qc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kc(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Ut(-1,1),t.tag=2,ir(s,t,1))),s.lanes|=1),e)}var nx=qt.ReactCurrentOwner,Je=!1;function He(e,t,s,n){t.child=e===null?am(t,null,s,n):hs(t,e.child,s,n)}function Gc(e,t,s,n,a){s=s.render;var l=t.ref;return is(t,a),n=Ti(e,t,s,n,l,a),s=Ai(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wt(e,t,a)):(fe&&s&&vi(t),t.flags|=1,He(e,t,n,a),t.child)}function Jc(e,t,s,n,a){if(e===null){var l=s.type;return typeof l=="function"&&!Wi(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,Rm(e,t,l,n,a)):(e=ca(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(s=s.compare,s=s!==null?s:dn,s(o,n)&&e.ref===t.ref)return Wt(e,t,a)}return t.flags|=1,e=ur(l,n),e.ref=t.ref,e.return=t,t.child=e}function Rm(e,t,s,n,a){if(e!==null){var l=e.memoizedProps;if(dn(l,n)&&e.ref===t.ref)if(Je=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(Je=!0);else return t.lanes=e.lanes,Wt(e,t,a)}return Ro(e,t,s,n,a)}function Tm(e,t,s){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(ss,st),st|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ie(ss,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:s,ie(ss,st),st|=n}else l!==null?(n=l.baseLanes|s,t.memoizedState=null):n=s,ie(ss,st),st|=n;return He(e,t,a,s),t.child}function Am(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ro(e,t,s,n,a){var l=Xe(s)?Pr:Me.current;return l=us(t,l),is(t,a),s=Ti(e,t,s,n,l,a),n=Ai(),e!==null&&!Je?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wt(e,t,a)):(fe&&n&&vi(t),t.flags|=1,He(e,t,s,a),t.child)}function Yc(e,t,s,n,a){if(Xe(s)){var l=!0;Sa(t)}else l=!1;if(is(t,a),t.stateNode===null)la(e,t),_m(t,s,n),Po(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=ht(d):(d=Xe(s)?Pr:Me.current,d=us(t,d));var u=s.getDerivedStateFromProps,g=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==d)&&qc(t,o,n,d),Xt=!1;var p=t.memoizedState;o.state=p,Pa(t,n,o,a),c=t.memoizedState,i!==n||p!==c||Ye.current||Xt?(typeof u=="function"&&(_o(t,s,u,n),c=t.memoizedState),(i=Xt||Hc(t,s,i,n,p,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,om(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:gt(t.type,i),o.props=d,g=t.pendingProps,p=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=ht(c):(c=Xe(s)?Pr:Me.current,c=us(t,c));var N=s.getDerivedStateFromProps;(u=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==g||p!==c)&&qc(t,o,n,c),Xt=!1,p=t.memoizedState,o.state=p,Pa(t,n,o,a);var m=t.memoizedState;i!==g||p!==m||Ye.current||Xt?(typeof N=="function"&&(_o(t,s,N,n),m=t.memoizedState),(d=Xt||Hc(t,s,d,n,p,m,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return To(e,t,s,n,l,a)}function To(e,t,s,n,a,l){Am(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Ic(t,s,!1),Wt(e,t,l);n=t.stateNode,nx.current=t;var i=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=hs(t,e.child,null,l),t.child=hs(t,null,i,l)):He(e,t,i,l),t.memoizedState=n.state,a&&Ic(t,s,!0),t.child}function Fm(e){var t=e.stateNode;t.pendingContext?Dc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dc(e,t.context,!1),_i(e,t.containerInfo)}function Xc(e,t,s,n,a){return ms(),Ni(a),t.flags|=256,He(e,t,s,n),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dm(e,t,s){var n=t.pendingProps,a=xe.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ie(xe,a&1),e===null)return Co(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Xa(o,n,0,null),e=Er(e,n,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Fo(s),t.memoizedState=Ao,e):Ii(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return ax(e,t,o,n,i,a,s);if(l){l=n.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ur(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=ur(i,l):(l=Er(l,o,s,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=e.child.memoizedState,o=o===null?Fo(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Ao,n}return l=e.child,e=l.sibling,n=ur(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Ii(e,t){return t=Xa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qn(e,t,s,n){return n!==null&&Ni(n),hs(t,e.child,null,s),e=Ii(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ax(e,t,s,n,a,l,o){if(s)return t.flags&256?(t.flags&=-257,n=Ol(Error(U(422))),qn(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Xa({mode:"visible",children:n.children},a,0,null),l=Er(l,a,o,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&hs(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Ao,l);if(!(t.mode&1))return qn(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(U(419)),n=Ol(l,n,void 0),qn(e,t,o,n)}if(i=(o&e.childLanes)!==0,Je||i){if(n=Le,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,zt(e,a),Nt(n,e,a,-1))}return zi(),n=Ol(Error(U(421))),qn(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=yx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,nt=or(a.nextSibling),at=t,fe=!0,jt=null,e!==null&&(ct[dt++]=Ot,ct[dt++]=$t,ct[dt++]=Lr,Ot=e.id,$t=e.overflow,Lr=t),t=Ii(t,n.children),t.flags|=4096,t)}function Zc(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Eo(e.return,t,s)}function $l(e,t,s,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=s,l.tailMode=a)}function Im(e,t,s){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if(He(e,t,n.children,s),n=xe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zc(e,s,t);else if(e.tag===19)Zc(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ie(xe,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&La(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),$l(t,!1,a,s,l);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&La(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}$l(t,!0,s,null,l);break;case"together":$l(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function la(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Tr|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,s=ur(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=ur(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function lx(e,t,s){switch(t.tag){case 3:Fm(t),ms();break;case 5:im(t);break;case 1:Xe(t.type)&&Sa(t);break;case 4:_i(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ie(Ea,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ie(xe,xe.current&1),t.flags|=128,null):s&t.child.childLanes?Dm(e,t,s):(ie(xe,xe.current&1),e=Wt(e,t,s),e!==null?e.sibling:null);ie(xe,xe.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Im(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ie(xe,xe.current),n)break;return null;case 22:case 23:return t.lanes=0,Tm(e,t,s)}return Wt(e,t,s)}var Om,Do,$m,Um;Om=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Do=function(){};$m=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Sr(Rt.current);var l=null;switch(s){case"input":a=ro(e,a),n=ro(e,n),l=[];break;case"select":a=je({},a,{value:void 0}),n=je({},n,{value:void 0}),l=[];break;case"textarea":a=ao(e,a),n=ao(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Na)}oo(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(rn.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(i=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(l||(l=[]),l.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(rn.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ue("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}s&&(l=l||[]).push("style",s);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};Um=function(e,t,s,n){s!==n&&(t.flags|=4)};function Is(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function ox(e,t,s){var n=t.pendingProps;switch(bi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Xe(t.type)&&wa(),Ie(t),null;case 3:return n=t.stateNode,ps(),me(Ye),me(Me),Li(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jt!==null&&(Wo(jt),jt=null))),Do(e,t),Ie(t),null;case 5:Pi(t);var a=Sr(fn.current);if(s=t.type,e!==null&&t.stateNode!=null)$m(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(U(166));return Ie(t),null}if(e=Sr(Rt.current),Wn(t)){n=t.stateNode,s=t.type;var l=t.memoizedProps;switch(n[Pt]=t,n[hn]=l,e=(t.mode&1)!==0,s){case"dialog":ue("cancel",n),ue("close",n);break;case"iframe":case"object":case"embed":ue("load",n);break;case"video":case"audio":for(a=0;a<Ws.length;a++)ue(Ws[a],n);break;case"source":ue("error",n);break;case"img":case"image":case"link":ue("error",n),ue("load",n);break;case"details":ue("toggle",n);break;case"input":ic(n,l),ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ue("invalid",n);break;case"textarea":dc(n,l),ue("invalid",n)}oo(s,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&zn(n.textContent,i,e),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&zn(n.textContent,i,e),a=["children",""+i]):rn.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&ue("scroll",n)}switch(s){case"input":Fn(n),cc(n,l,!0);break;case"textarea":Fn(n),uc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Na)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Pt]=t,e[hn]=n,Om(e,t,!1,!1),t.stateNode=e;e:{switch(o=io(s,n),s){case"dialog":ue("cancel",e),ue("close",e),a=n;break;case"iframe":case"object":case"embed":ue("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ws.length;a++)ue(Ws[a],e);a=n;break;case"source":ue("error",e),a=n;break;case"img":case"image":case"link":ue("error",e),ue("load",e),a=n;break;case"details":ue("toggle",e),a=n;break;case"input":ic(e,n),a=ro(e,n),ue("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=je({},n,{value:void 0}),ue("invalid",e);break;case"textarea":dc(e,n),a=ao(e,n),ue("invalid",e);break;default:a=n}oo(s,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?xu(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pu(e,c)):l==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&sn(e,c):typeof c=="number"&&sn(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(rn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ue("scroll",e):c!=null&&li(e,l,c,o))}switch(s){case"input":Fn(e),cc(e,n,!1);break;case"textarea":Fn(e),uc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+hr(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?ns(e,!!n.multiple,l,!1):n.defaultValue!=null&&ns(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Na)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)Um(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(U(166));if(s=Sr(fn.current),Sr(Rt.current),Wn(t)){if(n=t.stateNode,s=t.memoizedProps,n[Pt]=t,(l=n.nodeValue!==s)&&(e=at,e!==null))switch(e.tag){case 3:zn(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zn(n.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Pt]=t,t.stateNode=n}return Ie(t),null;case 13:if(me(xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&nt!==null&&t.mode&1&&!(t.flags&128))sm(),ms(),t.flags|=98560,l=!1;else if(l=Wn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(U(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(U(317));l[Pt]=t}else ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),l=!1}else jt!==null&&(Wo(jt),jt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?_e===0&&(_e=3):zi())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return ps(),Do(e,t),e===null&&un(t.stateNode.containerInfo),Ie(t),null;case 10:return ki(t.type._context),Ie(t),null;case 17:return Xe(t.type)&&wa(),Ie(t),null;case 19:if(me(xe),l=t.memoizedState,l===null)return Ie(t),null;if(n=(t.flags&128)!==0,o=l.rendering,o===null)if(n)Is(l,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=La(e),o!==null){for(t.flags|=128,Is(l,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)l=s,e=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ie(xe,xe.current&1|2),t.child}e=e.sibling}l.tail!==null&&we()>xs&&(t.flags|=128,n=!0,Is(l,!1),t.lanes=4194304)}else{if(!n)if(e=La(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Is(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!fe)return Ie(t),null}else 2*we()-l.renderingStartTime>xs&&s!==1073741824&&(t.flags|=128,n=!0,Is(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(s=l.last,s!==null?s.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=we(),t.sibling=null,s=xe.current,ie(xe,n?s&1|2:s&1),t):(Ie(t),null);case 22:case 23:return Bi(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?st&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function ix(e,t){switch(bi(t),t.tag){case 1:return Xe(t.type)&&wa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ps(),me(Ye),me(Me),Li(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pi(t),null;case 13:if(me(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(xe),null;case 4:return ps(),null;case 10:return ki(t.type._context),null;case 22:case 23:return Bi(),null;case 24:return null;default:return null}}var Vn=!1,$e=!1,cx=typeof WeakSet=="function"?WeakSet:Set,H=null;function rs(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){ve(e,t,n)}else s.current=null}function Io(e,t,s){try{s()}catch(n){ve(e,t,n)}}var ed=!1;function dx(e,t){if(jo=ja,e=Hu(),ji(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var o=0,i=-1,c=-1,d=0,u=0,g=e,p=null;t:for(;;){for(var N;g!==s||a!==0&&g.nodeType!==3||(i=o+a),g!==l||n!==0&&g.nodeType!==3||(c=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(N=g.firstChild)!==null;)p=g,g=N;for(;;){if(g===e)break t;if(p===s&&++d===a&&(i=o),p===l&&++u===n&&(c=o),(N=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=N}s=i===-1||c===-1?null:{start:i,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(vo={focusedElem:e,selectionRange:s},ja=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,x=t.stateNode,f=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:gt(t.type,y),v);x.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){ve(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return m=ed,ed=!1,m}function Xs(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Io(t,s,l)}a=a.next}while(a!==n)}}function Ja(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Oo(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Mm(e){var t=e.alternate;t!==null&&(e.alternate=null,Mm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pt],delete t[hn],delete t[wo],delete t[Vf],delete t[Qf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bm(e){return e.tag===5||e.tag===3||e.tag===4}function td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $o(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Na));else if(n!==4&&(e=e.child,e!==null))for($o(e,t,s),e=e.sibling;e!==null;)$o(e,t,s),e=e.sibling}function Uo(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Uo(e,t,s),e=e.sibling;e!==null;)Uo(e,t,s),e=e.sibling}var Re=null,yt=!1;function Jt(e,t,s){for(s=s.child;s!==null;)zm(e,t,s),s=s.sibling}function zm(e,t,s){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(za,s)}catch{}switch(s.tag){case 5:$e||rs(s,t);case 6:var n=Re,a=yt;Re=null,Jt(e,t,s),Re=n,yt=a,Re!==null&&(yt?(e=Re,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Re.removeChild(s.stateNode));break;case 18:Re!==null&&(yt?(e=Re,s=s.stateNode,e.nodeType===8?Rl(e.parentNode,s):e.nodeType===1&&Rl(e,s),on(e)):Rl(Re,s.stateNode));break;case 4:n=Re,a=yt,Re=s.stateNode.containerInfo,yt=!0,Jt(e,t,s),Re=n,yt=a;break;case 0:case 11:case 14:case 15:if(!$e&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&Io(s,t,o),a=a.next}while(a!==n)}Jt(e,t,s);break;case 1:if(!$e&&(rs(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(i){ve(s,t,i)}Jt(e,t,s);break;case 21:Jt(e,t,s);break;case 22:s.mode&1?($e=(n=$e)||s.memoizedState!==null,Jt(e,t,s),$e=n):Jt(e,t,s);break;default:Jt(e,t,s)}}function rd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new cx),t.forEach(function(n){var a=jx.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function xt(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:Re=i.stateNode,yt=!1;break e;case 3:Re=i.stateNode.containerInfo,yt=!0;break e;case 4:Re=i.stateNode.containerInfo,yt=!0;break e}i=i.return}if(Re===null)throw Error(U(160));zm(l,o,a),Re=null,yt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){ve(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wm(t,e),t=t.sibling}function Wm(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),Ct(e),n&4){try{Xs(3,e,e.return),Ja(3,e)}catch(y){ve(e,e.return,y)}try{Xs(5,e,e.return)}catch(y){ve(e,e.return,y)}}break;case 1:xt(t,e),Ct(e),n&512&&s!==null&&rs(s,s.return);break;case 5:if(xt(t,e),Ct(e),n&512&&s!==null&&rs(s,s.return),e.flags&32){var a=e.stateNode;try{sn(a,"")}catch(y){ve(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=s!==null?s.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&uu(a,l),io(i,o);var d=io(i,l);for(o=0;o<c.length;o+=2){var u=c[o],g=c[o+1];u==="style"?xu(a,g):u==="dangerouslySetInnerHTML"?pu(a,g):u==="children"?sn(a,g):li(a,u,g,d)}switch(i){case"input":so(a,l);break;case"textarea":mu(a,l);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?ns(a,!!l.multiple,N,!1):p!==!!l.multiple&&(l.defaultValue!=null?ns(a,!!l.multiple,l.defaultValue,!0):ns(a,!!l.multiple,l.multiple?[]:"",!1))}a[hn]=l}catch(y){ve(e,e.return,y)}}break;case 6:if(xt(t,e),Ct(e),n&4){if(e.stateNode===null)throw Error(U(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){ve(e,e.return,y)}}break;case 3:if(xt(t,e),Ct(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{on(t.containerInfo)}catch(y){ve(e,e.return,y)}break;case 4:xt(t,e),Ct(e);break;case 13:xt(t,e),Ct(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Ui=we())),n&4&&rd(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?($e=(d=$e)||u,xt(t,e),$e=d):xt(t,e),Ct(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(H=e,u=e.child;u!==null;){for(g=H=u;H!==null;){switch(p=H,N=p.child,p.tag){case 0:case 11:case 14:case 15:Xs(4,p,p.return);break;case 1:rs(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){n=p,s=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){ve(n,s,y)}}break;case 5:rs(p,p.return);break;case 22:if(p.memoizedState!==null){nd(g);continue}}N!==null?(N.return=p,H=N):nd(g)}u=u.sibling}e:for(u=null,g=e;;){if(g.tag===5){if(u===null){u=g;try{a=g.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=fu("display",o))}catch(y){ve(e,e.return,y)}}}else if(g.tag===6){if(u===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(y){ve(e,e.return,y)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;u===g&&(u=null),g=g.return}u===g&&(u=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:xt(t,e),Ct(e),n&4&&rd(e);break;case 21:break;default:xt(t,e),Ct(e)}}function Ct(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Bm(s)){var n=s;break e}s=s.return}throw Error(U(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(sn(a,""),n.flags&=-33);var l=td(e);Uo(e,l,a);break;case 3:case 4:var o=n.stateNode.containerInfo,i=td(e);$o(e,i,o);break;default:throw Error(U(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ux(e,t,s){H=e,Hm(e)}function Hm(e,t,s){for(var n=(e.mode&1)!==0;H!==null;){var a=H,l=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Vn;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||$e;i=Vn;var d=$e;if(Vn=o,($e=c)&&!d)for(H=a;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?ad(a):c!==null?(c.return=o,H=c):ad(a);for(;l!==null;)H=l,Hm(l),l=l.sibling;H=a,Vn=i,$e=d}sd(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,H=l):sd(e)}}function sd(e){for(;H!==null;){var t=H;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$e||Ja(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!$e)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:gt(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Bc(t,l,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Bc(t,o,s)}break;case 5:var i=t.stateNode;if(s===null&&t.flags&4){s=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var g=u.dehydrated;g!==null&&on(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}$e||t.flags&512&&Oo(t)}catch(p){ve(t,t.return,p)}}if(t===e){H=null;break}if(s=t.sibling,s!==null){s.return=t.return,H=s;break}H=t.return}}function nd(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var s=t.sibling;if(s!==null){s.return=t.return,H=s;break}H=t.return}}function ad(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ja(4,t)}catch(c){ve(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){ve(t,a,c)}}var l=t.return;try{Oo(t)}catch(c){ve(t,l,c)}break;case 5:var o=t.return;try{Oo(t)}catch(c){ve(t,o,c)}}}catch(c){ve(t,t.return,c)}if(t===e){H=null;break}var i=t.sibling;if(i!==null){i.return=t.return,H=i;break}H=t.return}}var mx=Math.ceil,Aa=qt.ReactCurrentDispatcher,Oi=qt.ReactCurrentOwner,mt=qt.ReactCurrentBatchConfig,ne=0,Le=null,ke=null,Te=0,st=0,ss=gr(0),_e=0,jn=null,Tr=0,Ya=0,$i=0,Zs=null,Ge=null,Ui=0,xs=1/0,Dt=null,Fa=!1,Mo=null,cr=null,Qn=!1,rr=null,Da=0,en=0,Bo=null,oa=-1,ia=0;function qe(){return ne&6?we():oa!==-1?oa:oa=we()}function dr(e){return e.mode&1?ne&2&&Te!==0?Te&-Te:Gf.transition!==null?(ia===0&&(ia=_u()),ia):(e=le,e!==0||(e=window.event,e=e===void 0?16:Du(e.type)),e):1}function Nt(e,t,s,n){if(50<en)throw en=0,Bo=null,Error(U(185));wn(e,s,n),(!(ne&2)||e!==Le)&&(e===Le&&(!(ne&2)&&(Ya|=s),_e===4&&er(e,Te)),Ze(e,n),s===1&&ne===0&&!(t.mode&1)&&(xs=we()+500,Qa&&yr()))}function Ze(e,t){var s=e.callbackNode;Kp(e,t);var n=ya(e,e===Le?Te:0);if(n===0)s!==null&&pc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&pc(s),t===1)e.tag===0?Kf(ld.bind(null,e)):em(ld.bind(null,e)),Hf(function(){!(ne&6)&&yr()}),s=null;else{switch(Pu(n)){case 1:s=ui;break;case 4:s=Cu;break;case 16:s=ga;break;case 536870912:s=Eu;break;default:s=ga}s=Xm(s,qm.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function qm(e,t){if(oa=-1,ia=0,ne&6)throw Error(U(327));var s=e.callbackNode;if(cs()&&e.callbackNode!==s)return null;var n=ya(e,e===Le?Te:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ia(e,n);else{t=n;var a=ne;ne|=2;var l=Qm();(Le!==e||Te!==t)&&(Dt=null,xs=we()+500,Cr(e,t));do try{fx();break}catch(i){Vm(e,i)}while(!0);Si(),Aa.current=l,ne=a,ke!==null?t=0:(Le=null,Te=0,t=_e)}if(t!==0){if(t===2&&(a=po(e),a!==0&&(n=a,t=zo(e,a))),t===1)throw s=jn,Cr(e,0),er(e,n),Ze(e,we()),s;if(t===6)er(e,n);else{if(a=e.current.alternate,!(n&30)&&!hx(a)&&(t=Ia(e,n),t===2&&(l=po(e),l!==0&&(n=l,t=zo(e,l))),t===1))throw s=jn,Cr(e,0),er(e,n),Ze(e,we()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(U(345));case 2:vr(e,Ge,Dt);break;case 3:if(er(e,n),(n&130023424)===n&&(t=Ui+500-we(),10<t)){if(ya(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){qe(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=No(vr.bind(null,e,Ge,Dt),t);break}vr(e,Ge,Dt);break;case 4:if(er(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-bt(n);l=1<<o,o=t[o],o>a&&(a=o),n&=~l}if(n=a,n=we()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*mx(n/1960))-n,10<n){e.timeoutHandle=No(vr.bind(null,e,Ge,Dt),n);break}vr(e,Ge,Dt);break;case 5:vr(e,Ge,Dt);break;default:throw Error(U(329))}}}return Ze(e,we()),e.callbackNode===s?qm.bind(null,e):null}function zo(e,t){var s=Zs;return e.current.memoizedState.isDehydrated&&(Cr(e,t).flags|=256),e=Ia(e,t),e!==2&&(t=Ge,Ge=s,t!==null&&Wo(t)),e}function Wo(e){Ge===null?Ge=e:Ge.push.apply(Ge,e)}function hx(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],l=a.getSnapshot;a=a.value;try{if(!wt(l(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t){for(t&=~$i,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-bt(t),n=1<<s;e[s]=-1,t&=~n}}function ld(e){if(ne&6)throw Error(U(327));cs();var t=ya(e,0);if(!(t&1))return Ze(e,we()),null;var s=Ia(e,t);if(e.tag!==0&&s===2){var n=po(e);n!==0&&(t=n,s=zo(e,n))}if(s===1)throw s=jn,Cr(e,0),er(e,t),Ze(e,we()),s;if(s===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vr(e,Ge,Dt),Ze(e,we()),null}function Mi(e,t){var s=ne;ne|=1;try{return e(t)}finally{ne=s,ne===0&&(xs=we()+500,Qa&&yr())}}function Ar(e){rr!==null&&rr.tag===0&&!(ne&6)&&cs();var t=ne;ne|=1;var s=mt.transition,n=le;try{if(mt.transition=null,le=1,e)return e()}finally{le=n,mt.transition=s,ne=t,!(ne&6)&&yr()}}function Bi(){st=ss.current,me(ss)}function Cr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Wf(s)),ke!==null)for(s=ke.return;s!==null;){var n=s;switch(bi(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wa();break;case 3:ps(),me(Ye),me(Me),Li();break;case 5:Pi(n);break;case 4:ps();break;case 13:me(xe);break;case 19:me(xe);break;case 10:ki(n.type._context);break;case 22:case 23:Bi()}s=s.return}if(Le=e,ke=e=ur(e.current,null),Te=st=t,_e=0,jn=null,$i=Ya=Tr=0,Ge=Zs=null,wr!==null){for(t=0;t<wr.length;t++)if(s=wr[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,l=s.pending;if(l!==null){var o=l.next;l.next=a,n.next=o}s.pending=n}wr=null}return e}function Vm(e,t){do{var s=ke;try{if(Si(),na.current=Ta,Ra){for(var n=ge.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ra=!1}if(Rr=0,Pe=Ee=ge=null,Ys=!1,xn=0,Oi.current=null,s===null||s.return===null){_e=1,jn=t,ke=null;break}e:{var l=e,o=s.return,i=s,c=t;if(t=Te,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,g=u.tag;if(!(u.mode&1)&&(g===0||g===11||g===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var N=Qc(o);if(N!==null){N.flags&=-257,Kc(N,o,i,l,t),N.mode&1&&Vc(l,d,t),t=N,c=d;var m=t.updateQueue;if(m===null){var y=new Set;y.add(c),t.updateQueue=y}else m.add(c);break e}else{if(!(t&1)){Vc(l,d,t),zi();break e}c=Error(U(426))}}else if(fe&&i.mode&1){var v=Qc(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Kc(v,o,i,l,t),Ni(fs(c,i));break e}}l=c=fs(c,i),_e!==4&&(_e=2),Zs===null?Zs=[l]:Zs.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var x=Pm(l,c,t);Mc(l,x);break e;case 1:i=c;var f=l.type,h=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(cr===null||!cr.has(h)))){l.flags|=65536,t&=-t,l.lanes|=t;var b=Lm(l,i,t);Mc(l,b);break e}}l=l.return}while(l!==null)}Gm(s)}catch(S){t=S,ke===s&&s!==null&&(ke=s=s.return);continue}break}while(!0)}function Qm(){var e=Aa.current;return Aa.current=Ta,e===null?Ta:e}function zi(){(_e===0||_e===3||_e===2)&&(_e=4),Le===null||!(Tr&268435455)&&!(Ya&268435455)||er(Le,Te)}function Ia(e,t){var s=ne;ne|=2;var n=Qm();(Le!==e||Te!==t)&&(Dt=null,Cr(e,t));do try{px();break}catch(a){Vm(e,a)}while(!0);if(Si(),ne=s,Aa.current=n,ke!==null)throw Error(U(261));return Le=null,Te=0,_e}function px(){for(;ke!==null;)Km(ke)}function fx(){for(;ke!==null&&!Up();)Km(ke)}function Km(e){var t=Ym(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Gm(e):ke=t,Oi.current=null}function Gm(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=ix(s,t),s!==null){s.flags&=32767,ke=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,ke=null;return}}else if(s=ox(s,t,st),s!==null){ke=s;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);_e===0&&(_e=5)}function vr(e,t,s){var n=le,a=mt.transition;try{mt.transition=null,le=1,xx(e,t,s,n)}finally{mt.transition=a,le=n}return null}function xx(e,t,s,n){do cs();while(rr!==null);if(ne&6)throw Error(U(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(Gp(e,l),e===Le&&(ke=Le=null,Te=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Qn||(Qn=!0,Xm(ga,function(){return cs(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=mt.transition,mt.transition=null;var o=le;le=1;var i=ne;ne|=4,Oi.current=null,dx(e,s),Wm(s,e),If(vo),ja=!!jo,vo=jo=null,e.current=s,ux(s),Mp(),ne=i,le=o,mt.transition=l}else e.current=s;if(Qn&&(Qn=!1,rr=e,Da=a),l=e.pendingLanes,l===0&&(cr=null),Wp(s.stateNode),Ze(e,we()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Fa)throw Fa=!1,e=Mo,Mo=null,e;return Da&1&&e.tag!==0&&cs(),l=e.pendingLanes,l&1?e===Bo?en++:(en=0,Bo=e):en=0,yr(),null}function cs(){if(rr!==null){var e=Pu(Da),t=mt.transition,s=le;try{if(mt.transition=null,le=16>e?16:e,rr===null)var n=!1;else{if(e=rr,rr=null,Da=0,ne&6)throw Error(U(331));var a=ne;for(ne|=4,H=e.current;H!==null;){var l=H,o=l.child;if(H.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(H=d;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:Xs(8,u,l)}var g=u.child;if(g!==null)g.return=u,H=g;else for(;H!==null;){u=H;var p=u.sibling,N=u.return;if(Mm(u),u===d){H=null;break}if(p!==null){p.return=N,H=p;break}H=N}}}var m=l.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}H=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,H=o;else e:for(;H!==null;){if(l=H,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Xs(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,H=x;break e}H=l.return}}var f=e.current;for(H=f;H!==null;){o=H;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,H=h;else e:for(o=f;H!==null;){if(i=H,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Ja(9,i)}}catch(S){ve(i,i.return,S)}if(i===o){H=null;break e}var b=i.sibling;if(b!==null){b.return=i.return,H=b;break e}H=i.return}}if(ne=a,yr(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(za,e)}catch{}n=!0}return n}finally{le=s,mt.transition=t}}return!1}function od(e,t,s){t=fs(s,t),t=Pm(e,t,1),e=ir(e,t,1),t=qe(),e!==null&&(wn(e,1,t),Ze(e,t))}function ve(e,t,s){if(e.tag===3)od(e,e,s);else for(;t!==null;){if(t.tag===3){od(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cr===null||!cr.has(n))){e=fs(s,e),e=Lm(t,e,1),t=ir(t,e,1),e=qe(),t!==null&&(wn(t,1,e),Ze(t,e));break}}t=t.return}}function gx(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&s,Le===e&&(Te&s)===s&&(_e===4||_e===3&&(Te&130023424)===Te&&500>we()-Ui?Cr(e,0):$i|=s),Ze(e,t)}function Jm(e,t){t===0&&(e.mode&1?(t=On,On<<=1,!(On&130023424)&&(On=4194304)):t=1);var s=qe();e=zt(e,t),e!==null&&(wn(e,t,s),Ze(e,s))}function yx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Jm(e,s)}function jx(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(t),Jm(e,s)}var Ym;Ym=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)Je=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Je=!1,lx(e,t,s);Je=!!(e.flags&131072)}else Je=!1,fe&&t.flags&1048576&&tm(t,Ca,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;la(e,t),e=t.pendingProps;var a=us(t,Me.current);is(t,s),a=Ti(null,t,n,e,a,s);var l=Ai();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xe(n)?(l=!0,Sa(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ei(t),a.updater=Ga,t.stateNode=a,a._reactInternals=t,Po(t,n,e,s),t=To(null,t,n,!0,l,s)):(t.tag=0,fe&&l&&vi(t),He(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(la(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=bx(n),e=gt(n,e),a){case 0:t=Ro(null,t,n,e,s);break e;case 1:t=Yc(null,t,n,e,s);break e;case 11:t=Gc(null,t,n,e,s);break e;case 14:t=Jc(null,t,n,gt(n.type,e),s);break e}throw Error(U(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gt(n,a),Ro(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gt(n,a),Yc(e,t,n,a,s);case 3:e:{if(Fm(t),e===null)throw Error(U(387));n=t.pendingProps,l=t.memoizedState,a=l.element,om(e,t),Pa(t,n,null,s);var o=t.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=fs(Error(U(423)),t),t=Xc(e,t,n,s,a);break e}else if(n!==a){a=fs(Error(U(424)),t),t=Xc(e,t,n,s,a);break e}else for(nt=or(t.stateNode.containerInfo.firstChild),at=t,fe=!0,jt=null,s=am(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ms(),n===a){t=Wt(e,t,s);break e}He(e,t,n,s)}t=t.child}return t;case 5:return im(t),e===null&&Co(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,bo(n,a)?o=null:l!==null&&bo(n,l)&&(t.flags|=32),Am(e,t),He(e,t,o,s),t.child;case 6:return e===null&&Co(t),null;case 13:return Dm(e,t,s);case 4:return _i(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=hs(t,null,n,s):He(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gt(n,a),Gc(e,t,n,a,s);case 7:return He(e,t,t.pendingProps,s),t.child;case 8:return He(e,t,t.pendingProps.children,s),t.child;case 12:return He(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,ie(Ea,n._currentValue),n._currentValue=o,l!==null)if(wt(l.value,o)){if(l.children===a.children&&!Ye.current){t=Wt(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Ut(-1,s&-s),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Eo(l.return,s,t),i.lanes|=s;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(U(341));o.lanes|=s,i=o.alternate,i!==null&&(i.lanes|=s),Eo(o,s,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}He(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,is(t,s),a=ht(a),n=n(a),t.flags|=1,He(e,t,n,s),t.child;case 14:return n=t.type,a=gt(n,t.pendingProps),a=gt(n.type,a),Jc(e,t,n,a,s);case 15:return Rm(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:gt(n,a),la(e,t),t.tag=1,Xe(n)?(e=!0,Sa(t)):e=!1,is(t,s),_m(t,n,a),Po(t,n,a,s),To(null,t,n,!0,e,s);case 19:return Im(e,t,s);case 22:return Tm(e,t,s)}throw Error(U(156,t.tag))};function Xm(e,t){return ku(e,t)}function vx(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,t,s,n){return new vx(e,t,s,n)}function Wi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bx(e){if(typeof e=="function")return Wi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ii)return 11;if(e===ci)return 14}return 2}function ur(e,t){var s=e.alternate;return s===null?(s=ut(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ca(e,t,s,n,a,l){var o=2;if(n=e,typeof e=="function")Wi(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Qr:return Er(s.children,a,l,t);case oi:o=8,a|=8;break;case Xl:return e=ut(12,s,t,a|2),e.elementType=Xl,e.lanes=l,e;case Zl:return e=ut(13,s,t,a),e.elementType=Zl,e.lanes=l,e;case eo:return e=ut(19,s,t,a),e.elementType=eo,e.lanes=l,e;case iu:return Xa(s,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lu:o=10;break e;case ou:o=9;break e;case ii:o=11;break e;case ci:o=14;break e;case Yt:o=16,n=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=ut(o,s,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Er(e,t,s,n){return e=ut(7,e,n,t),e.lanes=s,e}function Xa(e,t,s,n){return e=ut(22,e,n,t),e.elementType=iu,e.lanes=s,e.stateNode={isHidden:!1},e}function Ul(e,t,s){return e=ut(6,e,null,t),e.lanes=s,e}function Ml(e,t,s){return t=ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nx(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Hi(e,t,s,n,a,l,o,i,c){return e=new Nx(e,t,s,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=ut(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ei(l),e}function wx(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Zm(e){if(!e)return pr;e=e._reactInternals;e:{if(Ir(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var s=e.type;if(Xe(s))return Zu(e,s,t)}return t}function eh(e,t,s,n,a,l,o,i,c){return e=Hi(s,n,!0,e,a,l,o,i,c),e.context=Zm(null),s=e.current,n=qe(),a=dr(s),l=Ut(n,a),l.callback=t??null,ir(s,l,a),e.current.lanes=a,wn(e,a,n),Ze(e,n),e}function Za(e,t,s,n){var a=t.current,l=qe(),o=dr(a);return s=Zm(s),t.context===null?t.context=s:t.pendingContext=s,t=Ut(l,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ir(a,t,o),e!==null&&(Nt(e,a,o,l),sa(e,a,o)),o}function Oa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function id(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function qi(e,t){id(e,t),(e=e.alternate)&&id(e,t)}function Sx(){return null}var th=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vi(e){this._internalRoot=e}el.prototype.render=Vi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));Za(e,t,null,null)};el.prototype.unmount=Vi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ar(function(){Za(null,e,null,null)}),t[Bt]=null}};function el(e){this._internalRoot=e}el.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Zt.length&&t!==0&&t<Zt[s].priority;s++);Zt.splice(s,0,e),s===0&&Fu(e)}};function Qi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function tl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cd(){}function kx(e,t,s,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=Oa(o);l.call(d)}}var o=eh(t,n,e,0,null,!1,!1,"",cd);return e._reactRootContainer=o,e[Bt]=o.current,un(e.nodeType===8?e.parentNode:e),Ar(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var d=Oa(c);i.call(d)}}var c=Hi(e,0,!1,null,null,!1,!1,"",cd);return e._reactRootContainer=c,e[Bt]=c.current,un(e.nodeType===8?e.parentNode:e),Ar(function(){Za(t,c,s,n)}),c}function rl(e,t,s,n,a){var l=s._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=Oa(o);i.call(c)}}Za(t,o,e,a)}else o=kx(s,t,e,a,n);return Oa(o)}Lu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=zs(t.pendingLanes);s!==0&&(mi(t,s|1),Ze(t,we()),!(ne&6)&&(xs=we()+500,yr()))}break;case 13:Ar(function(){var n=zt(e,1);if(n!==null){var a=qe();Nt(n,e,1,a)}}),qi(e,1)}};hi=function(e){if(e.tag===13){var t=zt(e,134217728);if(t!==null){var s=qe();Nt(t,e,134217728,s)}qi(e,134217728)}};Ru=function(e){if(e.tag===13){var t=dr(e),s=zt(e,t);if(s!==null){var n=qe();Nt(s,e,t,n)}qi(e,t)}};Tu=function(){return le};Au=function(e,t){var s=le;try{return le=e,t()}finally{le=s}};uo=function(e,t,s){switch(t){case"input":if(so(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Va(n);if(!a)throw Error(U(90));du(n),so(n,a)}}}break;case"textarea":mu(e,s);break;case"select":t=s.value,t!=null&&ns(e,!!s.multiple,t,!1)}};ju=Mi;vu=Ar;var Cx={usingClientEntryPoint:!1,Events:[kn,Yr,Va,gu,yu,Mi]},Os={findFiberByHostInstance:Nr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ex={bundleType:Os.bundleType,version:Os.version,rendererPackageName:Os.rendererPackageName,rendererConfig:Os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wu(e),e===null?null:e.stateNode},findFiberByHostInstance:Os.findFiberByHostInstance||Sx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kn.isDisabled&&Kn.supportsFiber)try{za=Kn.inject(Ex),Lt=Kn}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cx;ot.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qi(t))throw Error(U(200));return wx(e,t,null,s)};ot.createRoot=function(e,t){if(!Qi(e))throw Error(U(299));var s=!1,n="",a=th;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Hi(e,1,!1,null,null,s,!1,n,a),e[Bt]=t.current,un(e.nodeType===8?e.parentNode:e),new Vi(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=wu(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Ar(e)};ot.hydrate=function(e,t,s){if(!tl(t))throw Error(U(200));return rl(null,e,t,!0,s)};ot.hydrateRoot=function(e,t,s){if(!Qi(e))throw Error(U(405));var n=s!=null&&s.hydratedSources||null,a=!1,l="",o=th;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=eh(t,null,e,1,s??null,a,!1,l,o),e[Bt]=t.current,un(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new el(t)};ot.render=function(e,t,s){if(!tl(t))throw Error(U(200));return rl(null,e,t,!1,s)};ot.unmountComponentAtNode=function(e){if(!tl(e))throw Error(U(40));return e._reactRootContainer?(Ar(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[Bt]=null})}),!0):!1};ot.unstable_batchedUpdates=Mi;ot.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!tl(s))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return rl(e,t,s,!1,n)};ot.version="18.3.1-next-f1338f8080-20240426";function rh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rh)}catch(e){console.error(e)}}rh(),ru.exports=ot;var _x=ru.exports,dd=_x;Jl.createRoot=dd.createRoot,Jl.hydrateRoot=dd.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},vn.apply(this,arguments)}var sr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(sr||(sr={}));const ud="popstate";function Px(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:o,hash:i}=n.location;return Ho("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:$a(a)}return Rx(t,s,null,e)}function ye(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ki(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Lx(){return Math.random().toString(36).substr(2,8)}function md(e,t){return{usr:e.state,key:e.key,idx:t}}function Ho(e,t,s,n){return s===void 0&&(s=null),vn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ws(t):t,{state:s,key:t&&t.key||n||Lx()})}function $a(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ws(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Rx(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,i=sr.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(vn({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function g(){i=sr.Pop;let v=u(),x=v==null?null:v-d;d=v,c&&c({action:i,location:y.location,delta:x})}function p(v,x){i=sr.Push;let f=Ho(y.location,v,x);d=u()+1;let h=md(f,d),b=y.createHref(f);try{o.pushState(h,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(b)}l&&c&&c({action:i,location:y.location,delta:1})}function N(v,x){i=sr.Replace;let f=Ho(y.location,v,x);d=u();let h=md(f,d),b=y.createHref(f);o.replaceState(h,"",b),l&&c&&c({action:i,location:y.location,delta:0})}function m(v){let x=a.location.origin!=="null"?a.location.origin:a.location.href,f=typeof v=="string"?v:$a(v);return f=f.replace(/ $/,"%20"),ye(x,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,x)}let y={get action(){return i},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(ud,g),c=v,()=>{a.removeEventListener(ud,g),c=null}},createHref(v){return t(a,v)},createURL:m,encodeLocation(v){let x=m(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:N,go(v){return o.go(v)}};return y}var hd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hd||(hd={}));function Tx(e,t,s){return s===void 0&&(s="/"),Ax(e,t,s)}function Ax(e,t,s,n){let a=typeof t=="string"?ws(t):t,l=gs(a.pathname||"/",s);if(l==null)return null;let o=sh(e);Fx(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=qx(l);i=Wx(o[c],d)}return i}function sh(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(ye(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=mr([n,c.relativePath]),u=s.concat(c);l.children&&l.children.length>0&&(ye(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),sh(l.children,t,u,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Bx(d,l.index),routesMeta:u})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of nh(l.path))a(l,o,c)}),t}function nh(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=nh(n.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Fx(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:zx(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Dx=/^:[\w-]+$/,Ix=3,Ox=2,$x=1,Ux=10,Mx=-2,pd=e=>e==="*";function Bx(e,t){let s=e.split("/"),n=s.length;return s.some(pd)&&(n+=Mx),t&&(n+=Ox),s.filter(a=>!pd(a)).reduce((a,l)=>a+(Dx.test(l)?Ix:l===""?$x:Ux),n)}function zx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Wx(e,t,s){let{routesMeta:n}=e,a={},l="/",o=[];for(let i=0;i<n.length;++i){let c=n[i],d=i===n.length-1,u=l==="/"?t:t.slice(l.length)||"/",g=qo({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!g)return null;Object.assign(a,g.params),o.push({params:a,pathname:mr([l,g.pathname]),pathnameBase:Jx(mr([l,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(l=mr([l,g.pathnameBase]))}return o}function qo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Hx(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((d,u,g)=>{let{paramName:p,isOptional:N}=u;if(p==="*"){let y=i[g]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const m=i[g];return N&&!m?d[p]=void 0:d[p]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Hx(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Ki(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function qx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ki(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function gs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const Vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qx=e=>Vx.test(e);function Kx(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?ws(e):e,l;if(s)if(Qx(s))l=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Ki(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?l=fd(s.substring(1),"/"):l=fd(s,t)}else l=t;return{pathname:l,search:Yx(n),hash:Xx(a)}}function fd(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Bl(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Gx(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Gi(e,t){let s=Gx(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Ji(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ws(e):(a=vn({},e),ye(!a.pathname||!a.pathname.includes("?"),Bl("?","pathname","search",a)),ye(!a.pathname||!a.pathname.includes("#"),Bl("#","pathname","hash",a)),ye(!a.search||!a.search.includes("#"),Bl("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=s;else{let g=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;a.pathname=p.join("/")}i=g>=0?t[g]:"/"}let c=Kx(a,i),d=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const mr=e=>e.join("/").replace(/\/\/+/g,"/"),Jx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Xx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Zx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ah=["post","put","patch","delete"];new Set(ah);const eg=["get",...ah];new Set(eg);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},bn.apply(this,arguments)}const sl=j.createContext(null),lh=j.createContext(null),Vt=j.createContext(null),nl=j.createContext(null),Tt=j.createContext({outlet:null,matches:[],isDataRoute:!1}),oh=j.createContext(null);function tg(e,t){let{relative:s}=t===void 0?{}:t;Ss()||ye(!1);let{basename:n,navigator:a}=j.useContext(Vt),{hash:l,pathname:o,search:i}=al(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:mr([n,o])),a.createHref({pathname:c,search:i,hash:l})}function Ss(){return j.useContext(nl)!=null}function Or(){return Ss()||ye(!1),j.useContext(nl).location}function ih(e){j.useContext(Vt).static||j.useLayoutEffect(e)}function Be(){let{isDataRoute:e}=j.useContext(Tt);return e?xg():rg()}function rg(){Ss()||ye(!1);let e=j.useContext(sl),{basename:t,future:s,navigator:n}=j.useContext(Vt),{matches:a}=j.useContext(Tt),{pathname:l}=Or(),o=JSON.stringify(Gi(a,s.v7_relativeSplatPath)),i=j.useRef(!1);return ih(()=>{i.current=!0}),j.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){n.go(d);return}let g=Ji(d,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:mr([t,g.pathname])),(u.replace?n.replace:n.push)(g,u.state,u)},[t,n,o,l,e])}const sg=j.createContext(null);function ng(e){let t=j.useContext(Tt).outlet;return t&&j.createElement(sg.Provider,{value:e},t)}function ks(){let{matches:e}=j.useContext(Tt),t=e[e.length-1];return t?t.params:{}}function al(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=j.useContext(Vt),{matches:a}=j.useContext(Tt),{pathname:l}=Or(),o=JSON.stringify(Gi(a,n.v7_relativeSplatPath));return j.useMemo(()=>Ji(e,JSON.parse(o),l,s==="path"),[e,o,l,s])}function ag(e,t){return lg(e,t)}function lg(e,t,s,n){Ss()||ye(!1);let{navigator:a}=j.useContext(Vt),{matches:l}=j.useContext(Tt),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Or(),u;if(t){var g;let v=typeof t=="string"?ws(t):t;c==="/"||(g=v.pathname)!=null&&g.startsWith(c)||ye(!1),u=v}else u=d;let p=u.pathname||"/",N=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");N="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Tx(e,{pathname:N}),y=ug(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:mr([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:mr([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),l,s,n);return t&&y?j.createElement(nl.Provider,{value:{location:bn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:sr.Pop}},y):y}function og(){let e=fg(),t=Zx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),s?j.createElement("pre",{style:a},s):null,null)}const ig=j.createElement(og,null);class cg extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?j.createElement(Tt.Provider,{value:this.props.routeContext},j.createElement(oh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dg(e){let{routeContext:t,match:s,children:n}=e,a=j.useContext(sl);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),j.createElement(Tt.Provider,{value:t},n)}function ug(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,i=(a=s)==null?void 0:a.errors;if(i!=null){let u=o.findIndex(g=>g.route.id&&(i==null?void 0:i[g.route.id])!==void 0);u>=0||ye(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let g=o[u];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=u),g.route.id){let{loaderData:p,errors:N}=s,m=g.route.loader&&p[g.route.id]===void 0&&(!N||N[g.route.id]===void 0);if(g.route.lazy||m){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,g,p)=>{let N,m=!1,y=null,v=null;s&&(N=i&&g.route.id?i[g.route.id]:void 0,y=g.route.errorElement||ig,c&&(d<0&&p===0?(gg("route-fallback"),m=!0,v=null):d===p&&(m=!0,v=g.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,p+1)),f=()=>{let h;return N?h=y:m?h=v:g.route.Component?h=j.createElement(g.route.Component,null):g.route.element?h=g.route.element:h=u,j.createElement(dg,{match:g,routeContext:{outlet:u,matches:x,isDataRoute:s!=null},children:h})};return s&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?j.createElement(cg,{location:s.location,revalidation:s.revalidation,component:y,error:N,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var ch=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ch||{}),dh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dh||{});function mg(e){let t=j.useContext(sl);return t||ye(!1),t}function hg(e){let t=j.useContext(lh);return t||ye(!1),t}function pg(e){let t=j.useContext(Tt);return t||ye(!1),t}function uh(e){let t=pg(),s=t.matches[t.matches.length-1];return s.route.id||ye(!1),s.route.id}function fg(){var e;let t=j.useContext(oh),s=hg(),n=uh();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function xg(){let{router:e}=mg(ch.UseNavigateStable),t=uh(dh.UseNavigateStable),s=j.useRef(!1);return ih(()=>{s.current=!0}),j.useCallback(function(a,l){l===void 0&&(l={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,bn({fromRouteId:t},l)))},[e,t])}const xd={};function gg(e,t,s){xd[e]||(xd[e]=!0)}function yg(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Vo(e){let{to:t,replace:s,state:n,relative:a}=e;Ss()||ye(!1);let{future:l,static:o}=j.useContext(Vt),{matches:i}=j.useContext(Tt),{pathname:c}=Or(),d=Be(),u=Ji(t,Gi(i,l.v7_relativeSplatPath),c,a==="path"),g=JSON.stringify(u);return j.useEffect(()=>d(JSON.parse(g),{replace:s,state:n,relative:a}),[d,g,a,s,n]),null}function jg(e){return ng(e.context)}function ae(e){ye(!1)}function vg(e){let{basename:t="/",children:s=null,location:n,navigationType:a=sr.Pop,navigator:l,static:o=!1,future:i}=e;Ss()&&ye(!1);let c=t.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:l,static:o,future:bn({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof n=="string"&&(n=ws(n));let{pathname:u="/",search:g="",hash:p="",state:N=null,key:m="default"}=n,y=j.useMemo(()=>{let v=gs(u,c);return v==null?null:{location:{pathname:v,search:g,hash:p,state:N,key:m},navigationType:a}},[c,u,g,p,N,m,a]);return y==null?null:j.createElement(Vt.Provider,{value:d},j.createElement(nl.Provider,{children:s,value:y}))}function bg(e){let{children:t,location:s}=e;return ag(Qo(t),s)}new Promise(()=>{});function Qo(e,t){t===void 0&&(t=[]);let s=[];return j.Children.forEach(e,(n,a)=>{if(!j.isValidElement(n))return;let l=[...t,a];if(n.type===j.Fragment){s.push.apply(s,Qo(n.props.children,l));return}n.type!==ae&&ye(!1),!n.props.index||!n.props.children||ye(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qo(n.props.children,l)),s.push(o)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ua.apply(this,arguments)}function mh(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function Ng(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function wg(e,t){return e.button===0&&(!t||t==="_self")&&!Ng(e)}function Ko(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function Sg(e,t){let s=Ko(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(l=>{s.append(a,l)})}),s}const kg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cg=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Eg="6";try{window.__reactRouterVersion=Eg}catch{}const _g=j.createContext({isTransitioning:!1}),Pg="startTransition",gd=xp[Pg];function Lg(e){let{basename:t,children:s,future:n,window:a}=e,l=j.useRef();l.current==null&&(l.current=Px({window:a,v5Compat:!0}));let o=l.current,[i,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=j.useCallback(g=>{d&&gd?gd(()=>c(g)):c(g)},[c,d]);return j.useLayoutEffect(()=>o.listen(u),[o,u]),j.useEffect(()=>yg(n),[n]),j.createElement(vg,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:o,future:n})}const Rg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J=j.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:u,viewTransition:g}=t,p=mh(t,kg),{basename:N}=j.useContext(Vt),m,y=!1;if(typeof d=="string"&&Tg.test(d)&&(m=d,Rg))try{let h=new URL(window.location.href),b=d.startsWith("//")?new URL(h.protocol+d):new URL(d),S=gs(b.pathname,N);b.origin===h.origin&&S!=null?d=S+b.search+b.hash:y=!0}catch{}let v=tg(d,{relative:a}),x=Dg(d,{replace:o,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:g});function f(h){n&&n(h),h.defaultPrevented||x(h)}return j.createElement("a",Ua({},p,{href:m||v,onClick:y||l?n:f,ref:s,target:c}))}),Ag=j.forwardRef(function(t,s){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:c,viewTransition:d,children:u}=t,g=mh(t,Cg),p=al(c,{relative:g.relative}),N=Or(),m=j.useContext(lh),{navigator:y,basename:v}=j.useContext(Vt),x=m!=null&&Og(p)&&d===!0,f=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,h=N.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;a||(h=h.toLowerCase(),b=b?b.toLowerCase():null,f=f.toLowerCase()),b&&v&&(b=gs(b,v)||b);const S=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let k=h===f||!o&&h.startsWith(f)&&h.charAt(S)==="/",w=b!=null&&(b===f||!o&&b.startsWith(f)&&b.charAt(f.length)==="/"),P={isActive:k,isPending:w,isTransitioning:x},L=k?n:void 0,$;typeof l=="function"?$=l(P):$=[l,k?"active":null,w?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(P):i;return j.createElement(J,Ua({},g,{"aria-current":L,className:$,ref:s,style:R,to:c,viewTransition:d}),typeof u=="function"?u(P):u)});var Go;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Go||(Go={}));var yd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yd||(yd={}));function Fg(e){let t=j.useContext(sl);return t||ye(!1),t}function Dg(e,t){let{target:s,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=Be(),d=Or(),u=al(e,{relative:o});return j.useCallback(g=>{if(wg(g,s)){g.preventDefault();let p=n!==void 0?n:$a(d)===$a(u);c(e,{replace:p,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,u,n,a,s,e,l,o,i])}function Ig(e){let t=j.useRef(Ko(e)),s=j.useRef(!1),n=Or(),a=j.useMemo(()=>Sg(n.search,s.current?null:t.current),[n.search]),l=Be(),o=j.useCallback((i,c)=>{const d=Ko(typeof i=="function"?i(a):i);s.current=!0,l("?"+d,c)},[l,a]);return[a,o]}function Og(e,t){t===void 0&&(t={});let s=j.useContext(_g);s==null&&ye(!1);let{basename:n}=Fg(Go.useViewTransitionState),a=al(e,{relative:t.relative});if(!s.isTransitioning)return!1;let l=gs(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=gs(s.nextLocation.pathname,n)||s.nextLocation.pathname;return qo(a.pathname,o)!=null||qo(a.pathname,l)!=null}const $g={},jd=e=>{let t;const s=new Set,n=(u,g)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const N=t;t=g??(typeof p!="object"||p===null)?p:Object.assign({},t,p),s.forEach(m=>m(t,N))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(s.add(u),()=>s.delete(u)),destroy:()=>{($g?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},d=t=e(n,a,c);return c},Ug=e=>e?jd(e):jd;var hh={exports:{}},ph={},fh={exports:{}},xh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=j;function Mg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bg=typeof Object.is=="function"?Object.is:Mg,zg=ys.useState,Wg=ys.useEffect,Hg=ys.useLayoutEffect,qg=ys.useDebugValue;function Vg(e,t){var s=t(),n=zg({inst:{value:s,getSnapshot:t}}),a=n[0].inst,l=n[1];return Hg(function(){a.value=s,a.getSnapshot=t,zl(a)&&l({inst:a})},[e,s,t]),Wg(function(){return zl(a)&&l({inst:a}),e(function(){zl(a)&&l({inst:a})})},[e]),qg(s),s}function zl(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Bg(e,s)}catch{return!0}}function Qg(e,t){return t()}var Kg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qg:Vg;xh.useSyncExternalStore=ys.useSyncExternalStore!==void 0?ys.useSyncExternalStore:Kg;fh.exports=xh;var Gg=fh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=j,Jg=Gg;function Yg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xg=typeof Object.is=="function"?Object.is:Yg,Zg=Jg.useSyncExternalStore,ey=ll.useRef,ty=ll.useEffect,ry=ll.useMemo,sy=ll.useDebugValue;ph.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var l=ey(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=ry(function(){function c(N){if(!d){if(d=!0,u=N,N=n(N),a!==void 0&&o.hasValue){var m=o.value;if(a(m,N))return g=m}return g=N}if(m=g,Xg(u,N))return m;var y=n(N);return a!==void 0&&a(m,y)?(u=N,m):(u=N,g=y)}var d=!1,u,g,p=s===void 0?null:s;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,s,n,a]);var i=Zg(e,l[0],l[1]);return ty(function(){o.hasValue=!0,o.value=i},[i]),sy(i),i};hh.exports=ph;var ny=hh.exports;const ay=Hd(ny),gh={},{useDebugValue:ly}=tn,{useSyncExternalStoreWithSelector:oy}=ay;let vd=!1;const iy=e=>e;function cy(e,t=iy,s){(gh?"production":void 0)!=="production"&&s&&!vd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),vd=!0);const n=oy(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return ly(n),n}const bd=e=>{(gh?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Ug(e):e,s=(n,a)=>cy(t,n,a);return Object.assign(s,t),s},$r=e=>e?bd(e):bd;function yh(e,t){return function(){return e.apply(t,arguments)}}const{toString:dy}=Object.prototype,{getPrototypeOf:Yi}=Object,{iterator:ol,toStringTag:jh}=Symbol,il=(e=>t=>{const s=dy.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),St=e=>(e=e.toLowerCase(),t=>il(t)===e),cl=e=>t=>typeof t===e,{isArray:Cs}=Array,js=cl("undefined");function En(e){return e!==null&&!js(e)&&e.constructor!==null&&!js(e.constructor)&&et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const vh=St("ArrayBuffer");function uy(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&vh(e.buffer),t}const my=cl("string"),et=cl("function"),bh=cl("number"),_n=e=>e!==null&&typeof e=="object",hy=e=>e===!0||e===!1,da=e=>{if(il(e)!=="object")return!1;const t=Yi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(jh in e)&&!(ol in e)},py=e=>{if(!_n(e)||En(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},fy=St("Date"),xy=St("File"),gy=St("Blob"),yy=St("FileList"),jy=e=>_n(e)&&et(e.pipe),vy=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||et(e.append)&&((t=il(e))==="formdata"||t==="object"&&et(e.toString)&&e.toString()==="[object FormData]"))},by=St("URLSearchParams"),[Ny,wy,Sy,ky]=["ReadableStream","Request","Response","Headers"].map(St),Cy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Pn(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Cs(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(En(e))return;const l=s?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(n=0;n<o;n++)i=l[n],t.call(null,e[i],i,e)}}function Nh(e,t){if(En(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const kr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wh=e=>!js(e)&&e!==kr;function Jo(){const{caseless:e,skipUndefined:t}=wh(this)&&this||{},s={},n=(a,l)=>{const o=e&&Nh(s,l)||l;da(s[o])&&da(a)?s[o]=Jo(s[o],a):da(a)?s[o]=Jo({},a):Cs(a)?s[o]=a.slice():(!t||!js(a))&&(s[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&Pn(arguments[a],n);return s}const Ey=(e,t,s,{allOwnKeys:n}={})=>(Pn(t,(a,l)=>{s&&et(a)?Object.defineProperty(e,l,{value:yh(a,s),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),_y=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Py=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Ly=(e,t,s,n)=>{let a,l,o;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!n||n(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=s!==!1&&Yi(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Ry=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},Ty=e=>{if(!e)return null;if(Cs(e))return e;let t=e.length;if(!bh(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Ay=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Yi(Uint8Array)),Fy=(e,t)=>{const n=(e&&e[ol]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},Dy=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},Iy=St("HTMLFormElement"),Oy=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),Nd=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),$y=St("RegExp"),Sh=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Pn(s,(a,l)=>{let o;(o=t(a,l,e))!==!1&&(n[l]=o||a)}),Object.defineProperties(e,n)},Uy=e=>{Sh(e,(t,s)=>{if(et(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(et(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},My=(e,t)=>{const s={},n=a=>{a.forEach(l=>{s[l]=!0})};return Cs(e)?n(e):n(String(e).split(t)),s},By=()=>{},zy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Wy(e){return!!(e&&et(e.append)&&e[jh]==="FormData"&&e[ol])}const Hy=e=>{const t=new Array(10),s=(n,a)=>{if(_n(n)){if(t.indexOf(n)>=0)return;if(En(n))return n;if(!("toJSON"in n)){t[a]=n;const l=Cs(n)?[]:{};return Pn(n,(o,i)=>{const c=s(o,a+1);!js(c)&&(l[i]=c)}),t[a]=void 0,l}}return n};return s(e,0)},qy=St("AsyncFunction"),Vy=e=>e&&(_n(e)||et(e))&&et(e.then)&&et(e.catch),kh=((e,t)=>e?setImmediate:t?((s,n)=>(kr.addEventListener("message",({source:a,data:l})=>{a===kr&&l===s&&n.length&&n.shift()()},!1),a=>{n.push(a),kr.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",et(kr.postMessage)),Qy=typeof queueMicrotask<"u"?queueMicrotask.bind(kr):typeof process<"u"&&process.nextTick||kh,Ky=e=>e!=null&&et(e[ol]),C={isArray:Cs,isArrayBuffer:vh,isBuffer:En,isFormData:vy,isArrayBufferView:uy,isString:my,isNumber:bh,isBoolean:hy,isObject:_n,isPlainObject:da,isEmptyObject:py,isReadableStream:Ny,isRequest:wy,isResponse:Sy,isHeaders:ky,isUndefined:js,isDate:fy,isFile:xy,isBlob:gy,isRegExp:$y,isFunction:et,isStream:jy,isURLSearchParams:by,isTypedArray:Ay,isFileList:yy,forEach:Pn,merge:Jo,extend:Ey,trim:Cy,stripBOM:_y,inherits:Py,toFlatObject:Ly,kindOf:il,kindOfTest:St,endsWith:Ry,toArray:Ty,forEachEntry:Fy,matchAll:Dy,isHTMLForm:Iy,hasOwnProperty:Nd,hasOwnProp:Nd,reduceDescriptors:Sh,freezeMethods:Uy,toObjectSet:My,toCamelCase:Oy,noop:By,toFiniteNumber:zy,findKey:Nh,global:kr,isContextDefined:wh,isSpecCompliantForm:Wy,toJSONObject:Hy,isAsyncFn:qy,isThenable:Vy,setImmediate:kh,asap:Qy,isIterable:Ky};let K=class Ch extends Error{static from(t,s,n,a,l,o){const i=new Ch(t.message,s||t.code,n,a,l);return i.cause=t,i.name=t.name,o&&Object.assign(i,o),i}constructor(t,s,n,a,l){super(t),this.name="AxiosError",this.isAxiosError=!0,s&&(this.code=s),n&&(this.config=n),a&&(this.request=a),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:C.toJSONObject(this.config),code:this.code,status:this.status}}};K.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";K.ERR_BAD_OPTION="ERR_BAD_OPTION";K.ECONNABORTED="ECONNABORTED";K.ETIMEDOUT="ETIMEDOUT";K.ERR_NETWORK="ERR_NETWORK";K.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";K.ERR_DEPRECATED="ERR_DEPRECATED";K.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";K.ERR_BAD_REQUEST="ERR_BAD_REQUEST";K.ERR_CANCELED="ERR_CANCELED";K.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";K.ERR_INVALID_URL="ERR_INVALID_URL";const Gy=null;function Yo(e){return C.isPlainObject(e)||C.isArray(e)}function Eh(e){return C.endsWith(e,"[]")?e.slice(0,-2):e}function wd(e,t,s){return e?e.concat(t).map(function(a,l){return a=Eh(a),!s&&l?"["+a+"]":a}).join(s?".":""):t}function Jy(e){return C.isArray(e)&&!e.some(Yo)}const Yy=C.toFlatObject(C,{},null,function(t){return/^is[A-Z]/.test(t)});function dl(e,t,s){if(!C.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=C.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!C.isUndefined(v[y])});const n=s.metaTokens,a=s.visitor||u,l=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&C.isSpecCompliantForm(t);if(!C.isFunction(a))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(C.isDate(m))return m.toISOString();if(C.isBoolean(m))return m.toString();if(!c&&C.isBlob(m))throw new K("Blob is not supported. Use a Buffer instead.");return C.isArrayBuffer(m)||C.isTypedArray(m)?c&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,y,v){let x=m;if(m&&!v&&typeof m=="object"){if(C.endsWith(y,"{}"))y=n?y:y.slice(0,-2),m=JSON.stringify(m);else if(C.isArray(m)&&Jy(m)||(C.isFileList(m)||C.endsWith(y,"[]"))&&(x=C.toArray(m)))return y=Eh(y),x.forEach(function(h,b){!(C.isUndefined(h)||h===null)&&t.append(o===!0?wd([y],b,l):o===null?y:y+"[]",d(h))}),!1}return Yo(m)?!0:(t.append(wd(v,y,l),d(m)),!1)}const g=[],p=Object.assign(Yy,{defaultVisitor:u,convertValue:d,isVisitable:Yo});function N(m,y){if(!C.isUndefined(m)){if(g.indexOf(m)!==-1)throw Error("Circular reference detected in "+y.join("."));g.push(m),C.forEach(m,function(x,f){(!(C.isUndefined(x)||x===null)&&a.call(t,x,C.isString(f)?f.trim():f,y,p))===!0&&N(x,y?y.concat(f):[f])}),g.pop()}}if(!C.isObject(e))throw new TypeError("data must be an object");return N(e),t}function Sd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Xi(e,t){this._pairs=[],e&&dl(e,this,t)}const _h=Xi.prototype;_h.append=function(t,s){this._pairs.push([t,s])};_h.toString=function(t){const s=t?function(n){return t.call(this,n,Sd)}:Sd;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function Xy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ph(e,t,s){if(!t)return e;const n=s&&s.encode||Xy,a=C.isFunction(s)?{serialize:s}:s,l=a&&a.serialize;let o;if(l?o=l(t,a):o=C.isURLSearchParams(t)?t.toString():new Xi(t,a).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class kd{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){C.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Lh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zy=typeof URLSearchParams<"u"?URLSearchParams:Xi,e0=typeof FormData<"u"?FormData:null,t0=typeof Blob<"u"?Blob:null,r0={isBrowser:!0,classes:{URLSearchParams:Zy,FormData:e0,Blob:t0},protocols:["http","https","file","blob","url","data"]},Zi=typeof window<"u"&&typeof document<"u",Xo=typeof navigator=="object"&&navigator||void 0,s0=Zi&&(!Xo||["ReactNative","NativeScript","NS"].indexOf(Xo.product)<0),n0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",a0=Zi&&window.location.href||"http://localhost",l0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zi,hasStandardBrowserEnv:s0,hasStandardBrowserWebWorkerEnv:n0,navigator:Xo,origin:a0},Symbol.toStringTag,{value:"Module"})),Ue={...l0,...r0};function o0(e,t){return dl(e,new Ue.classes.URLSearchParams,{visitor:function(s,n,a,l){return Ue.isNode&&C.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function i0(e){return C.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function c0(e){const t={},s=Object.keys(e);let n;const a=s.length;let l;for(n=0;n<a;n++)l=s[n],t[l]=e[l];return t}function Rh(e){function t(s,n,a,l){let o=s[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=s.length;return o=!o&&C.isArray(a)?a.length:o,c?(C.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!i):((!a[o]||!C.isObject(a[o]))&&(a[o]=[]),t(s,n,a[o],l)&&C.isArray(a[o])&&(a[o]=c0(a[o])),!i)}if(C.isFormData(e)&&C.isFunction(e.entries)){const s={};return C.forEachEntry(e,(n,a)=>{t(i0(n),a,s,0)}),s}return null}function d0(e,t,s){if(C.isString(e))try{return(t||JSON.parse)(e),C.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Ln={transitional:Lh,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,l=C.isObject(t);if(l&&C.isHTMLForm(t)&&(t=new FormData(t)),C.isFormData(t))return a?JSON.stringify(Rh(t)):t;if(C.isArrayBuffer(t)||C.isBuffer(t)||C.isStream(t)||C.isFile(t)||C.isBlob(t)||C.isReadableStream(t))return t;if(C.isArrayBufferView(t))return t.buffer;if(C.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return o0(t,this.formSerializer).toString();if((i=C.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return dl(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||a?(s.setContentType("application/json",!1),d0(t)):t}],transformResponse:[function(t){const s=this.transitional||Ln.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(C.isResponse(t)||C.isReadableStream(t))return t;if(t&&C.isString(t)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?K.from(i,K.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ue.classes.FormData,Blob:Ue.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};C.forEach(["delete","get","head","post","put","patch"],e=>{Ln.headers[e]={}});const u0=C.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),m0=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||t[s]&&u0[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},Cd=Symbol("internals");function $s(e){return e&&String(e).trim().toLowerCase()}function ua(e){return e===!1||e==null?e:C.isArray(e)?e.map(ua):String(e)}function h0(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const p0=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Wl(e,t,s,n,a){if(C.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!C.isString(t)){if(C.isString(n))return t.indexOf(n)!==-1;if(C.isRegExp(n))return n.test(t)}}function f0(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function x0(e,t){const s=C.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,l,o){return this[n].call(this,t,a,l,o)},configurable:!0})})}let tt=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function l(i,c,d){const u=$s(c);if(!u)throw new Error("header name must be a non-empty string");const g=C.findKey(a,u);(!g||a[g]===void 0||d===!0||d===void 0&&a[g]!==!1)&&(a[g||c]=ua(i))}const o=(i,c)=>C.forEach(i,(d,u)=>l(d,u,c));if(C.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(C.isString(t)&&(t=t.trim())&&!p0(t))o(m0(t),s);else if(C.isObject(t)&&C.isIterable(t)){let i={},c,d;for(const u of t){if(!C.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?C.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(i,s)}else t!=null&&l(s,t,n);return this}get(t,s){if(t=$s(t),t){const n=C.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return h0(a);if(C.isFunction(s))return s.call(this,a,n);if(C.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=$s(t),t){const n=C.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Wl(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function l(o){if(o=$s(o),o){const i=C.findKey(n,o);i&&(!s||Wl(n,n[i],i,s))&&(delete n[i],a=!0)}}return C.isArray(t)?t.forEach(l):l(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const l=s[n];(!t||Wl(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const s=this,n={};return C.forEach(this,(a,l)=>{const o=C.findKey(n,l);if(o){s[o]=ua(a),delete s[l];return}const i=t?f0(l):String(l).trim();i!==l&&delete s[l],s[i]=ua(a),n[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return C.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&C.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Cd]=this[Cd]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=$s(o);n[i]||(x0(a,o),n[i]=!0)}return C.isArray(t)?t.forEach(l):l(t),this}};tt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);C.reduceDescriptors(tt.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});C.freezeMethods(tt);function Hl(e,t){const s=this||Ln,n=t||s,a=tt.from(n.headers);let l=n.data;return C.forEach(e,function(i){l=i.call(s,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function Th(e){return!!(e&&e.__CANCEL__)}let Rn=class extends K{constructor(t,s,n){super(t??"canceled",K.ERR_CANCELED,s,n),this.name="CanceledError",this.__CANCEL__=!0}};function Ah(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new K("Request failed with status code "+s.status,[K.ERR_BAD_REQUEST,K.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function g0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function y0(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,l=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[l];o||(o=d),s[a]=c,n[a]=d;let g=l,p=0;for(;g!==a;)p+=s[g++],g=g%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-o<t)return;const N=u&&d-u;return N?Math.round(p*1e3/N):void 0}}function j0(e,t){let s=0,n=1e3/t,a,l;const o=(d,u=Date.now())=>{s=u,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const u=Date.now(),g=u-s;g>=n?o(d,u):(a=d,l||(l=setTimeout(()=>{l=null,o(a)},n-g)))},()=>a&&o(a)]}const Ma=(e,t,s=3)=>{let n=0;const a=y0(50,250);return j0(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-n,d=a(c),u=o<=i;n=o;const g={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-o)/d:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(g)},s)},Ed=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},_d=e=>(...t)=>C.asap(()=>e(...t)),v0=Ue.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Ue.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Ue.origin),Ue.navigator&&/(msie|trident)/i.test(Ue.navigator.userAgent)):()=>!0,b0=Ue.hasStandardBrowserEnv?{write(e,t,s,n,a,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];C.isNumber(s)&&i.push(`expires=${new Date(s).toUTCString()}`),C.isString(n)&&i.push(`path=${n}`),C.isString(a)&&i.push(`domain=${a}`),l===!0&&i.push("secure"),C.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function N0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function w0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Fh(e,t,s){let n=!N0(t);return e&&(n||s==!1)?w0(e,t):t}const Pd=e=>e instanceof tt?{...e}:e;function Fr(e,t){t=t||{};const s={};function n(d,u,g,p){return C.isPlainObject(d)&&C.isPlainObject(u)?C.merge.call({caseless:p},d,u):C.isPlainObject(u)?C.merge({},u):C.isArray(u)?u.slice():u}function a(d,u,g,p){if(C.isUndefined(u)){if(!C.isUndefined(d))return n(void 0,d,g,p)}else return n(d,u,g,p)}function l(d,u){if(!C.isUndefined(u))return n(void 0,u)}function o(d,u){if(C.isUndefined(u)){if(!C.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function i(d,u,g){if(g in t)return n(d,u);if(g in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(d,u,g)=>a(Pd(d),Pd(u),g,!0)};return C.forEach(Object.keys({...e,...t}),function(u){const g=c[u]||a,p=g(e[u],t[u],u);C.isUndefined(p)&&g!==i||(s[u]=p)}),s}const Dh=e=>{const t=Fr({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=t;if(t.headers=o=tt.from(o),t.url=Ph(Fh(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),C.isFormData(s)){if(Ue.hasStandardBrowserEnv||Ue.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(C.isFunction(s.getHeaders)){const c=s.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,g])=>{d.includes(u.toLowerCase())&&o.set(u,g)})}}if(Ue.hasStandardBrowserEnv&&(n&&C.isFunction(n)&&(n=n(t)),n||n!==!1&&v0(t.url))){const c=a&&l&&b0.read(l);c&&o.set(a,c)}return t},S0=typeof XMLHttpRequest<"u",k0=S0&&function(e){return new Promise(function(s,n){const a=Dh(e);let l=a.data;const o=tt.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=a,u,g,p,N,m;function y(){N&&N(),m&&m(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function x(){if(!v)return;const h=tt.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),S={data:!i||i==="text"||i==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:h,config:e,request:v};Ah(function(w){s(w),y()},function(w){n(w),y()},S),v=null}"onloadend"in v?v.onloadend=x:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(x)},v.onabort=function(){v&&(n(new K("Request aborted",K.ECONNABORTED,e,v)),v=null)},v.onerror=function(b){const S=b&&b.message?b.message:"Network Error",k=new K(S,K.ERR_NETWORK,e,v);k.event=b||null,n(k),v=null},v.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const S=a.transitional||Lh;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new K(b,S.clarifyTimeoutError?K.ETIMEDOUT:K.ECONNABORTED,e,v)),v=null},l===void 0&&o.setContentType(null),"setRequestHeader"in v&&C.forEach(o.toJSON(),function(b,S){v.setRequestHeader(S,b)}),C.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),i&&i!=="json"&&(v.responseType=a.responseType),d&&([p,m]=Ma(d,!0),v.addEventListener("progress",p)),c&&v.upload&&([g,N]=Ma(c),v.upload.addEventListener("progress",g),v.upload.addEventListener("loadend",N)),(a.cancelToken||a.signal)&&(u=h=>{v&&(n(!h||h.type?new Rn(null,e,v):h),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const f=g0(a.url);if(f&&Ue.protocols.indexOf(f)===-1){n(new K("Unsupported protocol "+f+":",K.ERR_BAD_REQUEST,e));return}v.send(l||null)})},C0=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const l=function(d){if(!a){a=!0,i();const u=d instanceof Error?d:this.reason;n.abort(u instanceof K?u:new Rn(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,l(new K(`timeout of ${t}ms exceeded`,K.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>C.asap(i),c}},E0=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},_0=async function*(e,t){for await(const s of P0(e))yield*E0(s,t)},P0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},Ld=(e,t,s,n)=>{const a=_0(e,t);let l=0,o,i=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){i(),c.close();return}let g=u.byteLength;if(s){let p=l+=g;s(p)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},Rd=64*1024,{isFunction:Gn}=C,L0=(({Request:e,Response:t})=>({Request:e,Response:t}))(C.global),{ReadableStream:Td,TextEncoder:Ad}=C.global,Fd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},R0=e=>{e=C.merge.call({skipUndefined:!0},L0,e);const{fetch:t,Request:s,Response:n}=e,a=t?Gn(t):typeof fetch=="function",l=Gn(s),o=Gn(n);if(!a)return!1;const i=a&&Gn(Td),c=a&&(typeof Ad=="function"?(m=>y=>m.encode(y))(new Ad):async m=>new Uint8Array(await new s(m).arrayBuffer())),d=l&&i&&Fd(()=>{let m=!1;const y=new s(Ue.origin,{body:new Td,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!y}),u=o&&i&&Fd(()=>C.isReadableStream(new n("").body)),g={stream:u&&(m=>m.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!g[m]&&(g[m]=(y,v)=>{let x=y&&y[m];if(x)return x.call(y);throw new K(`Response type '${m}' is not supported`,K.ERR_NOT_SUPPORT,v)})});const p=async m=>{if(m==null)return 0;if(C.isBlob(m))return m.size;if(C.isSpecCompliantForm(m))return(await new s(Ue.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(C.isArrayBufferView(m)||C.isArrayBuffer(m))return m.byteLength;if(C.isURLSearchParams(m)&&(m=m+""),C.isString(m))return(await c(m)).byteLength},N=async(m,y)=>{const v=C.toFiniteNumber(m.getContentLength());return v??p(y)};return async m=>{let{url:y,method:v,data:x,signal:f,cancelToken:h,timeout:b,onDownloadProgress:S,onUploadProgress:k,responseType:w,headers:P,withCredentials:L="same-origin",fetchOptions:$}=Dh(m),R=t||fetch;w=w?(w+"").toLowerCase():"text";let A=C0([f,h&&h.toAbortSignal()],b),M=null;const D=A&&A.unsubscribe&&(()=>{A.unsubscribe()});let q;try{if(k&&d&&v!=="get"&&v!=="head"&&(q=await N(P,x))!==0){let Y=new s(y,{method:"POST",body:x,duplex:"half"}),Q;if(C.isFormData(x)&&(Q=Y.headers.get("content-type"))&&P.setContentType(Q),Y.body){const[Z,pe]=Ed(q,Ma(_d(k)));x=Ld(Y.body,Rd,Z,pe)}}C.isString(L)||(L=L?"include":"omit");const I=l&&"credentials"in s.prototype,E={...$,signal:A,method:v.toUpperCase(),headers:P.normalize().toJSON(),body:x,duplex:"half",credentials:I?L:void 0};M=l&&new s(y,E);let _=await(l?R(M,$):R(y,E));const O=u&&(w==="stream"||w==="response");if(u&&(S||O&&D)){const Y={};["status","statusText","headers"].forEach(Ce=>{Y[Ce]=_[Ce]});const Q=C.toFiniteNumber(_.headers.get("content-length")),[Z,pe]=S&&Ed(Q,Ma(_d(S),!0))||[];_=new n(Ld(_.body,Rd,Z,()=>{pe&&pe(),D&&D()}),Y)}w=w||"text";let z=await g[C.findKey(g,w)||"text"](_,m);return!O&&D&&D(),await new Promise((Y,Q)=>{Ah(Y,Q,{data:z,headers:tt.from(_.headers),status:_.status,statusText:_.statusText,config:m,request:M})})}catch(I){throw D&&D(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new K("Network Error",K.ERR_NETWORK,m,M),{cause:I.cause||I}):K.from(I,I&&I.code,m,M)}}},T0=new Map,Ih=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:a}=t,l=[n,a,s];let o=l.length,i=o,c,d,u=T0;for(;i--;)c=l[i],d=u.get(c),d===void 0&&u.set(c,d=i?new Map:R0(t)),u=d;return d};Ih();const ec={http:Gy,xhr:k0,fetch:{get:Ih}};C.forEach(ec,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Dd=e=>`- ${e}`,A0=e=>C.isFunction(e)||e===null||e===!1;function F0(e,t){e=C.isArray(e)?e:[e];const{length:s}=e;let n,a;const l={};for(let o=0;o<s;o++){n=e[o];let i;if(a=n,!A0(n)&&(a=ec[(i=String(n)).toLowerCase()],a===void 0))throw new K(`Unknown adapter '${i}'`);if(a&&(C.isFunction(a)||(a=a.get(t))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=s?o.length>1?`since :
`+o.map(Dd).join(`
`):" "+Dd(o[0]):"as no adapter specified";throw new K("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a}const Oh={getAdapter:F0,adapters:ec};function ql(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rn(null,e)}function Id(e){return ql(e),e.headers=tt.from(e.headers),e.data=Hl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Oh.getAdapter(e.adapter||Ln.adapter,e)(e).then(function(n){return ql(e),n.data=Hl.call(e,e.transformResponse,n),n.headers=tt.from(n.headers),n},function(n){return Th(n)||(ql(e),n&&n.response&&(n.response.data=Hl.call(e,e.transformResponse,n.response),n.response.headers=tt.from(n.response.headers))),Promise.reject(n)})}const $h="1.13.4",ul={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ul[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Od={};ul.transitional=function(t,s,n){function a(l,o){return"[Axios v"+$h+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,i)=>{if(t===!1)throw new K(a(o," has been removed"+(s?" in "+s:"")),K.ERR_DEPRECATED);return s&&!Od[o]&&(Od[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(l,o,i):!0}};ul.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function D0(e,t,s){if(typeof e!="object")throw new K("options must be an object",K.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],o=t[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new K("option "+l+" must be "+c,K.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new K("Unknown option "+l,K.ERR_BAD_OPTION)}}const ma={assertOptions:D0,validators:ul},Et=ma.validators;let _r=class{constructor(t){this.defaults=t||{},this.interceptors={request:new kd,response:new kd}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Fr(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:l}=s;n!==void 0&&ma.assertOptions(n,{silentJSONParsing:Et.transitional(Et.boolean),forcedJSONParsing:Et.transitional(Et.boolean),clarifyTimeoutError:Et.transitional(Et.boolean)},!1),a!=null&&(C.isFunction(a)?s.paramsSerializer={serialize:a}:ma.assertOptions(a,{encode:Et.function,serialize:Et.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),ma.assertOptions(s,{baseUrl:Et.spelling("baseURL"),withXsrfToken:Et.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=l&&C.merge(l.common,l[s.method]);l&&C.forEach(["delete","get","head","post","put","patch","common"],m=>{delete l[m]}),s.headers=tt.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,g=0,p;if(!c){const m=[Id.bind(this),void 0];for(m.unshift(...i),m.push(...d),p=m.length,u=Promise.resolve(s);g<p;)u=u.then(m[g++],m[g++]);return u}p=i.length;let N=s;for(;g<p;){const m=i[g++],y=i[g++];try{N=m(N)}catch(v){y.call(this,v);break}}try{u=Id.call(this,N)}catch(m){return Promise.reject(m)}for(g=0,p=d.length;g<p;)u=u.then(d[g++],d[g++]);return u}getUri(t){t=Fr(this.defaults,t);const s=Fh(t.baseURL,t.url,t.allowAbsoluteUrls);return Ph(s,t.params,t.paramsSerializer)}};C.forEach(["delete","get","head","options"],function(t){_r.prototype[t]=function(s,n){return this.request(Fr(n||{},{method:t,url:s,data:(n||{}).data}))}});C.forEach(["post","put","patch"],function(t){function s(n){return function(l,o,i){return this.request(Fr(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}_r.prototype[t]=s(),_r.prototype[t+"Form"]=s(!0)});let I0=class Uh{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{n.subscribe(i),l=i}).then(a);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,i){n.reason||(n.reason=new Rn(l,o,i),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Uh(function(a){t=a}),cancel:t}}};function O0(e){return function(s){return e.apply(null,s)}}function $0(e){return C.isObject(e)&&e.isAxiosError===!0}const Zo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Zo).forEach(([e,t])=>{Zo[t]=e});function Mh(e){const t=new _r(e),s=yh(_r.prototype.request,t);return C.extend(s,_r.prototype,t,{allOwnKeys:!0}),C.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return Mh(Fr(e,a))},s}const he=Mh(Ln);he.Axios=_r;he.CanceledError=Rn;he.CancelToken=I0;he.isCancel=Th;he.VERSION=$h;he.toFormData=dl;he.AxiosError=K;he.Cancel=he.CanceledError;he.all=function(t){return Promise.all(t)};he.spread=O0;he.isAxiosError=$0;he.mergeConfig=Fr;he.AxiosHeaders=tt;he.formToJSON=e=>Rh(C.isHTMLForm(e)?new FormData(e):e);he.getAdapter=Oh.getAdapter;he.HttpStatusCode=Zo;he.default=he;const{Axios:ev,AxiosError:U0,CanceledError:tv,isCancel:rv,CancelToken:sv,VERSION:nv,all:av,Cancel:lv,isAxiosError:ov,spread:iv,toFormData:cv,AxiosHeaders:dv,HttpStatusCode:uv,formToJSON:mv,getAdapter:hv,mergeConfig:pv}=he,M0="http://localhost:3000/api/v1",B=he.create({baseURL:M0,headers:{"Content-Type":"application/json"}});B.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));B.interceptors.response.use(e=>e,async e=>{var s;const t=e.config;if(((s=e.response)==null?void 0:s.status)===401&&!t._retry){t._retry=!0;try{const n=localStorage.getItem("refreshToken");if(!n)return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e);const a=await B.post("/auth/refresh",{refreshToken:n}),{accessToken:l,refreshToken:o}=a.data;return localStorage.setItem("accessToken",l),localStorage.setItem("refreshToken",o),t.headers.Authorization=`Bearer ${l}`,B(t)}catch(n){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(n)}}return Promise.reject(e)});const br={register:(e,t,s)=>B.post("/auth/register",{username:e,email:t,password:s}),login:(e,t)=>B.post("/auth/login",{username:e,password:t}),refresh:e=>B.post("/auth/refresh",{refreshToken:e}),logout:()=>B.post("/auth/logout"),getMe:()=>B.get("/auth/me"),getAllUsers:()=>B.get("/auth/users"),updateUser:(e,t)=>B.put(`/auth/users/${e}`,t)},B0={getAll:()=>B.get("/units")},Oe={getAll:()=>B.get("/cost-items"),getCostItems:e=>B.get("/cost-items",{params:e}),getById:e=>B.get(`/cost-items/${e}`),create:e=>B.post("/cost-items",e),update:(e,t)=>B.put(`/cost-items/${e}`,t),delete:e=>B.delete(`/cost-items/${e}`),getCategories:()=>B.get("/cost-categories"),createCategory:e=>B.post("/cost-categories",e),updateCategory:(e,t)=>B.put(`/cost-categories/${e}`,t),deleteCategory:e=>B.delete(`/cost-categories/${e}`),getSubElements:()=>B.get("/cost-sub-elements"),getSubElementsByCategory:e=>B.get("/cost-sub-elements",{params:{category_id:e}}),createSubElement:e=>B.post("/cost-sub-elements",e),updateSubElement:(e,t)=>B.put(`/cost-sub-elements/${e}`,t),deleteSubElement:e=>B.delete(`/cost-sub-elements/${e}`),getUnits:()=>B.get("/units"),createCostItem:e=>B.post("/cost-items",e),updateCostItem:(e,t)=>B.put(`/cost-items/${e}`,t),deleteCostItem:e=>B.delete(`/cost-items/${e}`)},Ft={getAll:()=>B.get("/projects"),getById:e=>B.get(`/projects/${e}`),create:e=>B.post("/projects",e),update:(e,t)=>B.put(`/projects/${e}`,t),delete:e=>B.delete(`/projects/${e}`),submitEstimate:e=>B.post(`/projects/${e}/submit-estimate`),approveEstimate:(e,t)=>B.post(`/projects/${e}/approve-estimate`,{notes:t}),rejectEstimate:(e,t)=>B.post(`/projects/${e}/reject-estimate`,{reason:t}),duplicate:(e,t)=>B.post(`/projects/${e}/duplicate`,t)},Us={getAll:e=>B.get(`/projects/${e}/estimates`),getById:(e,t)=>B.get(`/projects/${e}/estimates/${t}`),create:(e,t)=>B.post(`/projects/${e}/estimates`,t),update:(e,t,s)=>B.put(`/projects/${e}/estimates/${t}`,s),delete:(e,t)=>B.delete(`/projects/${e}/estimates/${t}`),getSummary:e=>B.get(`/projects/${e}/estimate-summary`)},Hs={getAll:e=>B.get("/clients",{params:e}),getById:e=>B.get(`/clients/${e}`),create:e=>B.post("/clients",e),update:(e,t)=>B.put(`/clients/${e}`,t),delete:e=>B.delete(`/clients/${e}`)},qs={getAll:e=>B.get("/contractors",{params:e}),getById:e=>B.get(`/contractors/${e}`),create:e=>B.post("/contractors",e),update:(e,t)=>B.put(`/contractors/${e}`,t),delete:e=>B.delete(`/contractors/${e}`)},zr={getAll:(e=!0)=>B.get("/estimate-templates",{params:{shared:e}}),getById:e=>B.get(`/estimate-templates/${e}`),create:e=>B.post("/estimate-templates",e),update:(e,t)=>B.put(`/estimate-templates/${e}`,t),delete:e=>B.delete(`/estimate-templates/${e}`),applyToProject:(e,t)=>B.post(`/estimate-templates/apply/${e}/to/${t}`)},$d={getGroups:()=>B.get("/nrm2/groups"),getGroupById:e=>B.get(`/nrm2/groups/${e}`),getElementById:e=>B.get(`/nrm2/elements/${e}`),getSubElementById:e=>B.get(`/nrm2/sub-elements/${e}`),getWorkSectionById:e=>B.get(`/nrm2/work-sections/${e}`),getWorkSectionByCode:e=>B.get(`/nrm2/work-sections/by-code/${e}`),search:(e,t)=>B.get("/nrm2/search",{params:{q:e,limit:t}}),getTree:e=>B.get("/nrm2/tree",{params:{groupId:e}}),getStatistics:()=>B.get("/nrm2/stats")},Vl={getAll:e=>B.get("/references",{params:{category:e}}),getById:e=>B.get(`/references/${e}`),getByCategory:e=>B.get("/references",{params:{category:e}}),upload:e=>B.post("/references/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),update:(e,t)=>B.patch(`/references/${e}`,t),delete:e=>B.delete(`/references/${e}`),search:e=>B.get("/references/search",{params:{q:e}}),getCategoryStats:()=>B.get("/references/categories/stats"),getDownloadUrl:e=>B.get(`/references/${e}/download`)},fr=$r((e,t)=>({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null,register:async(s,n,a)=>{var l,o;try{e({isLoading:!0,error:null});const i=await br.register(s,n,a);e({isLoading:!1}),await t().login(s,a)}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Registration failed";throw e({error:c,isLoading:!1}),i}},login:async(s,n)=>{var a,l;try{e({isLoading:!0,error:null});const o=await br.login(s,n),{user:i,accessToken:c,refreshToken:d}=o.data;localStorage.setItem("accessToken",c),localStorage.setItem("refreshToken",d),localStorage.setItem("user",JSON.stringify(i)),e({user:i,accessToken:c,refreshToken:d,isLoading:!1})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Login failed";throw e({error:i,isLoading:!1}),o}},logout:async()=>{try{e({isLoading:!0}),t().accessToken&&await br.logout()}catch(s){console.error("Logout error:",s)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),e({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null})}},refreshAccessToken:async()=>{try{const s=t().refreshToken;if(!s)throw new Error("No refresh token available");const n=await br.refresh(s),{accessToken:a,refreshToken:l}=n.data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",l),e({accessToken:a,refreshToken:l})}catch(s){throw await t().logout(),s}},checkAuth:async()=>{try{e({isLoading:!0});const s=await br.getMe(),{user:n}=s.data;e({user:n,isLoading:!1})}catch{e({user:null,accessToken:null,refreshToken:null,isLoading:!1})}},clearError:()=>{e({error:null})},hydrate:()=>{const s=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken"),a=localStorage.getItem("user");if(s&&n&&a)try{const l=JSON.parse(a);e({user:l,accessToken:s,refreshToken:n})}catch(l){console.error("Failed to hydrate auth state:",l)}}}));function z0(){const[e,t]=j.useState("monthly"),s=[{name:"Starter",description:"Perfect for freelancers starting out",price:e==="monthly"?19:190,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Up to 10 projects","Custom cost database access","Basic cost estimation","Up to 5 clients","PDF report generation","Email support"],highlighted:!1},{name:"Professional",description:"For established quantity surveyors",price:e==="monthly"?49:490,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Unlimited projects","Full cost database + regional pricing","Advanced cost estimation","Unlimited clients & contractors","Project templates","PDF & Word export","Multi-currency support","Priority support","Cost analysis & benchmarking"],highlighted:!0},{name:"Enterprise",description:"For consulting firms & teams",price:"Custom",period:"",savings:"",features:["Everything in Professional","Team collaboration (unlimited users)","Advanced analytics & reporting","Custom integrations","API access","Dedicated account manager","Custom database modules","On-premise option available"],highlighted:!1}],n=[{name:"Emma Richardson",role:"Freelance Quantity Surveyor",image:"",quote:"QSCostingPro has cut my estimation time in half. The comprehensive cost database and PDF export feature impresses my clients every time.",location:"London, UK"},{name:"David Chen",role:"Senior Cost Consultant",image:"",quote:"Finally a tool built by QS professionals for QS professionals. The regional pricing data and project templates save me hours on every project.",location:"Manchester, UK"},{name:"Sarah McCann",role:"Independent QS",image:"",quote:"The contractor management and client portal features make me look like I have a full team behind me. Absolutely transformed my business.",location:"Edinburgh, UK"},{name:"Michael Patel",role:"Construction Cost Manager",image:"",quote:"Multi-currency support and the ability to work with international projects has opened up new opportunities for my practice.",location:"Birmingham, UK"}],a=[{icon:"",title:"NRM 2 Database",description:"Standard measurement rules to simplify and normalise cost assembly"},{icon:"",title:"Client & Contractor Management",description:"Organize all your clients and contractors in one place. Track contact info, specializations, ratings, and project history."},{icon:"",title:"Professional Estimates",description:"Create detailed, branded cost estimates in PDF and Word formats. Impress clients with polished reports and detailed breakdowns."},{icon:"",title:"Cost Analysis & Benchmarking",description:"Analyze historical project data by region, building type, and specification. Make data-driven decisions on future projects."},{icon:"",title:"Multi-Currency & Regional Support",description:"Work with clients worldwide. Support for multiple currencies, regions, and localized cost databases."},{icon:"",title:"Project Templates",description:"Build reusable templates for common project types. Speed up estimation and ensure consistency across all projects."},{icon:"",title:"Easy Data Management",description:"Import/export data easily. Integrate with your existing workflows. APIs available for custom integrations."},{icon:"",title:"Enterprise Security",description:"Bank-level encryption, regular backups, and GDPR compliant. Your client data and estimates are always secure and private."}];return r.jsxs("div",{className:"bg-blue-200",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(J,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"QS"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"QSCostingPro"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(J,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(J,{to:"/register",className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg font-medium transition",children:"Sign Up Free"})]})]})})}),r.jsx("section",{className:"py-32 bg-cover bg-center bg-no-repeat relative flex items-center justify-center bg-gray-700",style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1581092162384-8987c1d64718?w=1200&h=600&fit=crop')"},children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Construction Costing Made Easy"}),r.jsx("p",{className:"text-lg text-khc-light mb-8 max-w-3xl mx-auto",children:"All-in-one cost-estimate and management platform from just 19/month"}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx(J,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Free Trial"}),r.jsx("button",{className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Watch Demo"})]})]})})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need to Succeed"}),r.jsx("p",{className:"text-xl text-gray-600",children:"From cost estimation to client management, QSCostingPro has the tools QS professionals rely on."})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((l,o)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition",children:[r.jsx("div",{className:"text-4xl mb-4",children:l.icon}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:l.title}),r.jsx("p",{className:"text-gray-600",children:l.description})]},o))})]})}),r.jsx("section",{className:"py-20 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Choose the plan that fits your practice"}),r.jsxs("div",{className:"flex justify-center gap-4 mb-12",children:[r.jsx("button",{onClick:()=>t("monthly"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="monthly"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),r.jsx("button",{onClick:()=>t("annual"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="annual"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annual (Save 17%)"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((l,o)=>r.jsxs("div",{className:`rounded-lg shadow overflow-hidden transition ${l.highlighted?"ring-2 ring-khc-primary scale-105":""}`,children:[r.jsxs("div",{className:`p-8 ${l.highlighted?"bg-khc-primary":"bg-gray-50"}`,children:[r.jsx("h3",{className:`text-2xl font-bold mb-2 ${l.highlighted?"text-white":"text-gray-900"}`,children:l.name}),r.jsx("p",{className:`mb-6 ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.description}),r.jsxs("div",{className:`mb-6 ${l.highlighted?"text-white":"text-gray-900"}`,children:[r.jsxs("span",{className:"text-4xl font-bold",children:[typeof l.price=="number"?"":"",l.price]}),r.jsx("span",{className:`text-lg ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.period}),l.savings&&r.jsx("p",{className:`text-sm font-semibold mt-2 ${l.highlighted?"text-khc-light":"text-khc-primary"}`,children:l.savings})]}),r.jsx(J,{to:"/register",className:`block text-center py-3 rounded-lg font-bold transition mb-8 ${l.highlighted?"bg-white text-khc-primary hover:bg-gray-100":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:"Get Started"})]}),r.jsx("div",{className:"p-8",children:r.jsx("ul",{className:"space-y-4",children:l.features.map((i,c)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-khc-primary font-bold mt-1",children:""}),r.jsx("span",{className:"text-gray-700",children:i})]},c))})})]},o))})]})}),r.jsx("section",{className:"py-20 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Loved by QS Professionals"}),r.jsx("p",{className:"text-xl text-gray-600",children:"See how QSCostingPro has transformed practices worldwide"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((l,o)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[r.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[r.jsx("span",{className:"text-5xl",children:l.image}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900",children:l.name}),r.jsx("p",{className:"text-sm text-gray-600",children:l.role}),r.jsx("p",{className:"text-xs text-gray-500",children:l.location})]})]}),r.jsxs("p",{className:"text-gray-700 italic",children:['"',l.quote,'"']})]},o))})]})}),r.jsx("section",{className:"py-20 bg-khc-primary text-white",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Work Smarter?"}),r.jsx("p",{className:"text-xl text-khc-light mb-8",children:"Join hundreds of quantity surveyors who are using QSCostingPro to save time and impress clients."}),r.jsxs("div",{className:"flex gap-4 justify-center",children:[r.jsx(J,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Your Free Trial"}),r.jsx(J,{to:"/login",className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Sign In"})]}),r.jsx("p",{className:"text-khc-light text-sm mt-6",children:"No credit card required. 14-day free trial on all plans."})]})}),r.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),r.jsx("span",{className:"font-bold text-white",children:"QSCostingPro"})]}),r.jsx("p",{className:"text-sm",children:"Professional cost estimation for quantity surveyors worldwide."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Product"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Features"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Pricing"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Security"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx(J,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(J,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white mb-4",children:"Connect"}),r.jsxs("ul",{className:"space-y-2 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition",children:"Support"})})]})]})]}),r.jsx("div",{className:"border-t border-gray-800 pt-8",children:r.jsx("p",{className:"text-sm text-center",children:" 2026 QSCostingPro. All rights reserved."})})]})})]})}function W0(){const e=Be(),{login:t,error:s,clearError:n,isLoading:a}=fr(),[l,o]=j.useState(""),[i,c]=j.useState(""),[d,u]=j.useState({}),g=()=>{const m={};return l.trim()||(m.username="Username is required"),i||(m.password="Password is required"),u(m),Object.keys(m).length===0},p=async m=>{if(m.preventDefault(),!!g())try{await t(l,i),e("/dashboard",{replace:!0})}catch{}},N=()=>{s&&n()};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),r.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Login"}),r.jsx(J,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),s&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:s}),r.jsxs("form",{onSubmit:p,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),r.jsx("input",{id:"username",type:"text",value:l,onChange:m=>{o(m.target.value),N()},placeholder:"Enter your username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.username?"border-red-500":"border-gray-300"}`,disabled:a}),d.username&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.username})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:i,onChange:m=>{c(m.target.value),N()},placeholder:"Enter your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.password?"border-red-500":"border-gray-300"}`,disabled:a}),d.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.password})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Signing in...":"Sign In"})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Don't have an account?"," ",r.jsx(J,{to:"/register",className:"text-khc-primary hover:underline font-medium",children:"Register here"})]}),r.jsx("div",{className:"mt-3 text-center text-sm text-khc-neutral",children:r.jsx(J,{to:"/password-reset",className:"text-khc-primary hover:underline font-medium",children:"Forgot password?"})})]}),r.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Demo Credentials:"}),r.jsx("p",{className:"text-xs",children:"Admin: username: admin | password: admin123456"}),r.jsx("p",{className:"text-xs",children:"Try creating a new account to get started!"})]})]})})}function H0(){const e=Be(),{register:t,error:s,clearError:n,isLoading:a}=fr(),[l,o]=j.useState({username:"",email:"",password:"",confirmPassword:""}),[i,c]=j.useState({}),d=()=>{const p={};return l.username.trim()?l.username.length<3&&(p.username="Username must be at least 3 characters"):p.username="Username is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(p.email="Invalid email format"):p.email="Email is required",l.password?l.password.length<8&&(p.password="Password must be at least 8 characters"):p.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(p.confirmPassword="Passwords do not match"):p.confirmPassword="Please confirm your password",c(p),Object.keys(p).length===0},u=async p=>{if(p.preventDefault(),!!d())try{await t(l.username,l.email,l.password),e("/dashboard",{replace:!0})}catch{}},g=p=>{const{name:N,value:m,type:y,checked:v}=p.target;o(x=>({...x,[N]:y==="checkbox"?v:m})),s&&n()};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4 py-8",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),r.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Create Account"}),r.jsx(J,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),s&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:s}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),r.jsx("input",{id:"username",type:"text",name:"username",value:l.username,onChange:g,placeholder:"Choose a username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.username?"border-red-500":"border-gray-300"}`,disabled:a}),i.username&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.username})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Email"}),r.jsx("input",{id:"email",type:"email",name:"email",value:l.email,onChange:g,placeholder:"Enter your email",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.email?"border-red-500":"border-gray-300"}`,disabled:a}),i.email&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),r.jsx("input",{id:"password",type:"password",name:"password",value:l.password,onChange:g,placeholder:"Create a password (min 8 characters)",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.password?"border-red-500":"border-gray-300"}`,disabled:a}),i.password&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:g,placeholder:"Confirm your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.confirmPassword?"border-red-500":"border-gray-300"}`,disabled:a}),i.confirmPassword&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.confirmPassword})]}),r.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Creating Account...":"Create Account"})]}),r.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Already have an account?"," ",r.jsx(J,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Sign in here"})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:r.jsxs("p",{className:"text-xs",children:[r.jsx("strong",{children:"Note:"})," After registration, you can add clients and contractors from your dashboard."]})})]})})}function q0({id:e,type:t,message:s,duration:n=4e3,onClose:a}){j.useEffect(()=>{const i=setTimeout(()=>a(e),n);return()=>clearTimeout(i)},[e,n,a]);const l={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[t],o={success:"",error:"",warning:"",info:""}[t];return r.jsxs("div",{className:`${l} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-in fade-in slide-in-from-right-2 duration-300`,role:"alert",children:[r.jsx("span",{className:"font-bold text-lg",children:o}),r.jsx("span",{className:"text-sm",children:s})]})}let ha=null;const Es=()=>{const e=ha;return{success:(t,s)=>{e&&e.addToast("success",t,s)},error:(t,s)=>{e&&e.addToast("error",t,s)},warning:(t,s)=>{e&&e.addToast("warning",t,s)},info:(t,s)=>{e&&e.addToast("info",t,s)}}};function V0({maxToasts:e=3}){const[t,s]=j.useState([]),n=j.useRef(null),a=j.useCallback((o,i,c)=>{const u={id:`toast-${Date.now()}-${Math.random()}`,type:o,message:i,duration:c};s(g=>{const p=[...g,u];return p.length>e?p.slice(-e):p})},[e]),l=j.useCallback(o=>{s(i=>i.filter(c=>c.id!==o))},[]);return j.useEffect(()=>(n.current={addToast:a,removeToast:l},ha=n.current,()=>{ha===n.current&&(ha=null)}),[a,l]),r.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:t.map(o=>r.jsx(q0,{id:o.id,type:o.type,message:o.message,duration:o.duration,onClose:l},o.id))})}function Q0(){const[e]=Ig(),t=Es(),s=e.get("token"),[n,a]=j.useState({request:!s,reset:!!s}),[l,o]=j.useState(""),[i,c]=j.useState(""),[d,u]=j.useState(""),[g,p]=j.useState(!1),[N,m]=j.useState(!1),y=async x=>{var f,h;if(x.preventDefault(),!l.trim()){t.error("Please enter your email address");return}p(!0);try{(await he.post("http://localhost:3000/api/v1/password-reset/request",{email:l})).data.success&&(t.success("Reset link sent! Check your email (and spam folder)"),o(""))}catch(b){t.error(((h=(f=b.response)==null?void 0:f.data)==null?void 0:h.error)||"Failed to request password reset")}finally{p(!1)}},v=async x=>{var f,h;if(x.preventDefault(),!i||!d){t.error("Please fill in all fields");return}if(i.length<8){t.error("Password must be at least 8 characters");return}if(i!==d){t.error("Passwords do not match");return}p(!0);try{(await he.post("http://localhost:3000/api/v1/password-reset/reset",{token:s,newPassword:i})).data.success&&(t.success("Password has been reset successfully!"),m(!0),c(""),u(""))}catch(b){t.error(((h=(f=b.response)==null?void 0:f.data)==null?void 0:h.error)||"Failed to reset password")}finally{p(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary mb-2 text-center",children:"Password Reset"}),r.jsx("p",{className:"text-gray-600 text-center mb-8",children:n.request?"Request a password reset link":"Set your new password"}),n.request&&!N&&r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",value:l,onChange:x=>o(x.target.value),placeholder:"admin@qscosting.local",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:g})]}),r.jsx("button",{type:"submit",disabled:g,className:"w-full py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary disabled:bg-gray-400 transition-colors font-medium",children:g?"Sending...":"Send Reset Link"}),r.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Remember your password?"," ",r.jsx(J,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Back to Login"})]})]}),n.reset&&!N&&s&&r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),r.jsx("input",{type:"password",id:"password",value:i,onChange:x=>c(x.target.value),placeholder:"At least 8 characters",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:g})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),r.jsx("input",{type:"password",id:"confirmPassword",value:d,onChange:x=>u(x.target.value),placeholder:"Re-enter your password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:g})]}),r.jsx("button",{type:"submit",disabled:g,className:"w-full py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary disabled:bg-gray-400 transition-colors font-medium",children:g?"Resetting...":"Reset Password"})]}),N&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Password Reset!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset."}),r.jsx(J,{to:"/login",className:"inline-block px-6 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition-colors font-medium",children:"Back to Login"})]}),n.request&&N&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-5xl mb-4",children:""}),r.jsx("h2",{className:"text-2xl font-bold text-khc-primary mb-2",children:"Check Your Email!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"A password reset link has been sent to your email address."}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Note: In production, you would receive an email. For testing, the reset link is:"}),s&&r.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-6 text-left",children:r.jsx("p",{className:"text-xs text-gray-600 break-all",children:s})}),r.jsx(J,{to:"/login",className:"inline-block px-6 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition-colors font-medium",children:"Back to Login"})]})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsxs("p",{className:"text-white text-sm",children:["Need help?"," ",r.jsx("a",{href:"mailto:support@qscosting.local",className:"underline hover:text-gray-200",children:"Contact Support"})]})})]})})}function K0(){return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(J,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(J,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(J,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),r.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),r.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Introduction"}),r.jsx("p",{children:'KHConstruct ("we," "us," "our," or "Company") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our application.'}),r.jsx("p",{children:"Please read this Privacy Policy carefully. If you do not agree with our policies and practices, please do not use our services."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Information We Collect"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.1 Information You Provide"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Account registration information (username, email, password)"}),r.jsx("li",{children:"Project data and cost estimates"}),r.jsx("li",{children:"Cost item data including dates, codes, descriptions, and amounts"}),r.jsx("li",{children:"Any communications with our support team"})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.2 Automatically Collected Information"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Device information (browser type, IP address, operating system)"}),r.jsx("li",{children:"Usage analytics (pages visited, features used, time spent)"}),r.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. How We Use Your Information"}),r.jsx("p",{children:"We use the information we collect to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Provide, maintain, and improve our services"}),r.jsx("li",{children:"Process transactions and send related information"}),r.jsx("li",{children:"Send informational and promotional communications"}),r.jsx("li",{children:"Respond to your inquiries and customer support requests"}),r.jsx("li",{children:"Monitor and analyze trends and usage of our services"}),r.jsx("li",{children:"Detect and prevent fraudulent transactions and other illegal activities"}),r.jsx("li",{children:"Comply with legal obligations"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Data Security"}),r.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. These measures include:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"SSL/TLS encryption for data in transit"}),r.jsx("li",{children:"Hashed password storage"}),r.jsx("li",{children:"Regular security audits and updates"}),r.jsx("li",{children:"Limited access to personal information on a need-to-know basis"})]}),r.jsx("p",{className:"mt-4",children:"However, no method of transmission over the Internet or electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Data Retention"}),r.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this Privacy Policy. You can request deletion of your account and associated data at any time by contacting our support team."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Sharing Your Information"}),r.jsx("p",{children:"We do not sell, trade, or rent your personal information to third parties. We may share information:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"With your explicit consent"}),r.jsx("li",{children:"To comply with legal obligations"}),r.jsx("li",{children:"With service providers who assist in operating our website and services"}),r.jsx("li",{children:"In connection with a merger, acquisition, or sale of assets"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Your Rights and Choices"}),r.jsx("p",{children:"Depending on your jurisdiction, you may have the right to:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Access your personal information"}),r.jsx("li",{children:"Correct inaccurate information"}),r.jsx("li",{children:"Request deletion of your information"}),r.jsx("li",{children:"Opt-out of marketing communications"}),r.jsx("li",{children:"Data portability"})]}),r.jsx("p",{className:"mt-4",children:"To exercise these rights, please contact us using the information provided at the end of this policy."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Cookies"}),r.jsx("p",{children:"We use cookies to enhance your experience on our website. You can control cookies through your browser settings. However, disabling cookies may affect the functionality of our services."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Children's Privacy"}),r.jsx("p",{children:"Our services are not intended for children under 13 years old. We do not knowingly collect personal information from children. If we become aware that a child has provided us with personal information, we will delete such information and terminate the child's account."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. Changes to This Privacy Policy"}),r.jsx("p",{children:'We may update this Privacy Policy from time to time to reflect changes in our practices or for other operational, legal, or regulatory reasons. We will notify you of any material changes by posting the new Privacy Policy on our website and updating the "Last updated" date.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Contact Us"}),r.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us at:"}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),r.jsx("p",{children:"Email: privacy@khconstruct.com"}),r.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[r.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),r.jsxs("div",{className:"mt-4 space-x-4",children:[r.jsx(J,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx("span",{children:"|"}),r.jsx(J,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function G0(){return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16",children:[r.jsxs(J,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold",children:"K"})}),r.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),r.jsxs("div",{className:"space-x-4",children:[r.jsx(J,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),r.jsx(J,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),r.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Terms of Service"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),r.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Agreement to Terms"}),r.jsx("p",{children:"By accessing and using the KHConstruct application and website, you accept and agree to be bound by and comply with these Terms of Service. If you do not agree to abide by the above, please do not use this service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Use License"}),r.jsx("p",{children:"Permission is granted to temporarily download one copy of the materials (information or software) from KHConstruct for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Modifying or copying the materials"}),r.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),r.jsx("li",{children:"Attempting to decompile, disassemble, or reverse engineer any software contained on KHConstruct"}),r.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),r.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),r.jsx("li",{children:"Using the materials for illegal purposes or in violation of any laws or regulations"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. Disclaimer"}),r.jsx("p",{children:"The materials on KHConstruct are provided on an 'as is' basis. KHConstruct makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."}),r.jsx("p",{className:"mt-4",children:"Further, KHConstruct does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its Internet web site or otherwise relating to such materials or on any sites linked to this site."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Limitations"}),r.jsx("p",{children:"In no event shall KHConstruct or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption,) arising out of the use or inability to use the materials on KHConstruct, even if KHConstruct or a KHConstruct authorized representative has been notified orally or in writing of the possibility of such damage."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Accuracy of Materials"}),r.jsx("p",{children:"The materials appearing on KHConstruct could include technical, typographical, or photographic errors. KHConstruct does not warrant that any of the materials on its website are accurate, complete, or current. KHConstruct may make changes to the materials contained on its website at any time without notice."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Materials and Content"}),r.jsx("p",{children:"The materials and content on KHConstruct are protected by copyright and may be owned by or licensed to KHConstruct by others. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said content, whether in whole or in part, for commercial purposes or for personal gain without express advance written permission from KHConstruct."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Links"}),r.jsx("p",{children:"KHConstruct has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by KHConstruct of the site. Use of any such linked website is at the user's own risk."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Modifications"}),r.jsx("p",{children:"KHConstruct may revise these terms of service for its website at any time without notice. By using this website, you are agreeing to be bound by the then current version of these terms of service."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Governing Law"}),r.jsx("p",{children:"These terms and conditions are governed by and construed in accordance with the laws of the United Kingdom, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. User Accounts"}),r.jsx("p",{children:"When you create an account on KHConstruct, you are responsible for maintaining the confidentiality of your account information and password. You agree to accept responsibility for all activities that occur under your account. You must notify us immediately of any unauthorized use of your account."}),r.jsx("p",{className:"mt-4",children:"You represent and warrant that the information you provide upon registration and at all other times is accurate, complete, and truthful."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Prohibited Activities"}),r.jsx("p",{children:"You agree that you will not engage in any activity that:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Violates any laws, regulations, or third-party rights"}),r.jsx("li",{children:"Infringes intellectual property rights"}),r.jsx("li",{children:"Contains viruses, malware, or other harmful code"}),r.jsx("li",{children:"Is defamatory, obscene, or offensive"}),r.jsx("li",{children:"Harasses or threatens others"}),r.jsx("li",{children:"Disrupts the normal flow of dialogue within our services"}),r.jsx("li",{children:"Attempts to gain unauthorized access to our systems"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"12. Intellectual Property Rights"}),r.jsx("p",{children:"Unless otherwise stated, KHConstruct and/or its licensors own the intellectual property rights for all material on KHConstruct. All intellectual property rights are reserved. You may access this from KHConstruct for your own personal use subject to restrictions set in these terms and conditions."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"13. Payment Terms"}),r.jsx("p",{children:"If you subscribe to a paid plan, you agree to pay the subscription fees as advertised. Billing occurs monthly or annually depending on your selected plan. You authorize us to charge your payment method for the subscription fees and any applicable taxes."}),r.jsx("p",{className:"mt-4",children:"You may cancel your subscription at any time. Refunds are subject to our refund policy, which is provided separately."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"14. Termination of Service"}),r.jsx("p",{children:"We reserve the right to suspend or terminate your account and access to our services at any time, for any reason, including but not limited to violation of these Terms of Service or for any unlawful purpose."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"15. Contact Information"}),r.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),r.jsx("p",{children:"Email: support@khconstruct.com"}),r.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[r.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),r.jsxs("div",{className:"mt-4 space-x-4",children:[r.jsx(J,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),r.jsx("span",{children:"|"}),r.jsx(J,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function Qt(){const{user:e,accessToken:t,isLoading:s,error:n,login:a,register:l,logout:o,refreshToken:i,clearError:c}=fr();return{user:e,accessToken:t,isLoading:s,error:n,isAuthenticated:!!e,login:a,register:l,logout:o,refreshToken:i,clearError:c,isAdmin:(e==null?void 0:e.role)==="admin",isEstimator:(e==null?void 0:e.role)==="estimator",isViewer:(e==null?void 0:e.role)==="viewer",hasPermission:d=>e?Array.isArray(d)?d.includes(e.role):e.role===d:!1}}const Ht=$r((e,t)=>({projects:[],currentProject:null,isLoading:!1,error:null,filters:{},fetchProjects:async()=>{var s,n;e({isLoading:!0,error:null});try{const a=await Ft.getAll();e({projects:a.data.data,isLoading:!1})}catch(a){const l=((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch projects";throw e({error:l,isLoading:!1}),a}},fetchProjectById:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Ft.getById(s);e({currentProject:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch project";throw e({error:o,isLoading:!1,currentProject:null}),l}},createProject:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Ft.create(s)).data.data;return e(i=>({projects:[o,...i.projects],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to create project";throw e({error:o,isLoading:!1}),l}},updateProject:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Ft.update(s,n)).data.data;return e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update project";throw e({error:i,isLoading:!1}),o}},deleteProject:async s=>{var n,a;e({isLoading:!0,error:null});try{await Ft.delete(s),e(l=>{var o;return{projects:l.projects.filter(i=>i.id!==s),currentProject:((o=l.currentProject)==null?void 0:o.id)===s?null:l.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete project";throw e({error:o,isLoading:!1}),l}},duplicateProject:async(s,n,a,l)=>{var o,i;e({isLoading:!0,error:null});try{const d=(await Ft.duplicate(s,{name:n,include_estimates:a,copy_status:l})).data.data;return e(u=>({projects:[d,...u.projects],isLoading:!1})),d}catch(c){const d=((i=(o=c.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to duplicate project";throw e({error:d,isLoading:!1}),c}},submitEstimate:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Ft.submitEstimate(s)).data.data;e(i=>{var c;return{projects:i.projects.map(d=>d.id===s?o:d),currentProject:((c=i.currentProject)==null?void 0:c.id)===s?o:i.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to submit estimate";throw e({error:o,isLoading:!1}),l}},approveEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Ft.approveEstimate(s,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to approve estimate";throw e({error:i,isLoading:!1}),o}},rejectEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Ft.rejectEstimate(s,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===s?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===s?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to reject estimate";throw e({error:i,isLoading:!1}),o}},setFilters:s=>{e(n=>({filters:{...n.filters,...s}}))},clearError:()=>{e({error:null})},setCurrentProject:s=>{e({currentProject:s})}}));function X(e,t="GBP",s="en-GB"){return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function J0(e,t=0,s="en-GB"){return new Intl.NumberFormat(s,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function Bh(e,t="en-GB",s){const n=typeof e=="string"?new Date(e):e,a={year:"numeric",month:"long",day:"numeric",...s};return new Intl.DateTimeFormat(t,a).format(n)}function ml(e,t=1,s="en-GB"){return`${J0(e,t,s)}%`}function Y0(e){return e.filter(t=>t.status!=="completed").reduce((t,s)=>{var a;const n=((a=s.estimate_totals)==null?void 0:a.grand_total)||s.budget_cost||0;return t+n},0)}function X0(e){const t=e.filter(n=>{var a,l;return((a=n.estimate_totals)==null?void 0:a.floor_area_m2)&&n.estimate_totals.floor_area_m2>0&&((l=n.estimate_totals)==null?void 0:l.grand_total)});if(t.length===0)return null;const s=t.reduce((n,a)=>{const l=a.estimate_totals.grand_total/a.estimate_totals.floor_area_m2;return n+l},0);return Math.round(s/t.length*100)/100}function Z0(e){const t=e.filter(c=>{var d;return c.budget_cost&&((d=c.estimate_totals)==null?void 0:d.grand_total)}),s=t.reduce((c,d)=>c+(d.budget_cost||0),0),n=t.reduce((c,d)=>{var u;return c+(((u=d.estimate_totals)==null?void 0:u.grand_total)||0)},0),a=n-s,l=s>0?Math.round(a/s*1e3)/10:0,o=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)>(c.budget_cost||0)}).length,i=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)<(c.budget_cost||0)}).length;return{totalBudget:s,totalEstimate:n,variance:a,variancePercentage:l,projectsOverBudget:o,projectsUnderBudget:i}}function zh(e){const t={};let s=0;return e.forEach(a=>{var o;(((o=a.estimate_totals)==null?void 0:o.categories)||[]).forEach(i=>{t[i.category_name]||(t[i.category_name]={total_cost:0,project_count:0}),t[i.category_name].total_cost+=i.subtotal||0,t[i.category_name].project_count+=1,s+=i.total||0})}),Object.entries(t).map(([a,l])=>({category_name:a,total_cost:l.total_cost,project_count:l.project_count,percentage:s>0?Math.round(l.total_cost/s*1e3)/10:0,avg_cost_per_project:Math.round(l.total_cost/l.project_count*100)/100})).sort((a,l)=>l.total_cost-a.total_cost)}function Wh(e,t=5){return e.filter(n=>{var a;return n.budget_cost&&((a=n.estimate_totals)==null?void 0:a.grand_total)}).map(n=>{var a,l,o,i;return{project_id:n.id,project_name:n.name||`Project ${n.id}`,budget:n.budget_cost||0,estimate:((a=n.estimate_totals)==null?void 0:a.grand_total)||0,variance:(((l=n.estimate_totals)==null?void 0:l.grand_total)||0)-(n.budget_cost||0),variancePercentage:(n.budget_cost||0)>0?Math.round(((((o=n.estimate_totals)==null?void 0:o.grand_total)||0)-(n.budget_cost||0))/(n.budget_cost||0)*1e3)/10:0,isOverBudget:(((i=n.estimate_totals)==null?void 0:i.grand_total)||0)>(n.budget_cost||0)}}).sort((n,a)=>a.estimate-n.estimate).slice(0,t)}function ej({projects:e,isLoading:t=!1}){const s=Z0(e),n=s.variance>0,a=n?"border-khc-accent":"border-green-500",l=n?"text-khc-accent":"text-green-600",o=n?"bg-orange-50":"bg-green-50";if(t)return r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a}`,children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})});const i=s.projectsOverBudget,c=s.projectsUnderBudget;return r.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a} transition-all hover:shadow-lg`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Budget Variance"}),r.jsxs("p",{className:`text-3xl font-bold mt-2 ${l}`,children:[n?"+":"",X(s.variance)]}),r.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[r.jsxs("span",{className:`inline-flex items-center ${n?"text-khc-accent":"text-green-600"} text-sm font-medium`,children:[n?r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12 15a1 1 0 01-.707-.293l-2.828-2.829a1 1 0 011.414-1.414L11 11.414V5a1 1 0 112 0v5.414l1.121-1.121a1 1 0 111.414 1.414l-2.828 2.829A1 1 0 0112 15z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12 5a1 1 0 01.707.293l2.828 2.829a1 1 0 11-1.414 1.414L13 8.586V15a1 1 0 11-2 0V8.586l-1.121 1.121a1 1 0 11-1.414-1.414l2.828-2.829A1 1 0 0112 5z",clipRule:"evenodd"})}),ml(Math.abs(s.variancePercentage),1)]}),r.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",n?"over":"under"," budget)"]})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i>0&&`${i} project${i!==1?"s":""} over budget  `,c>0&&`${c} under budget`,i===0&&c===0&&"No budget data available"]})]}),r.jsx("div",{className:`${o} rounded-lg w-16 h-16 flex items-center justify-center flex-shrink-0 text-2xl`,children:n?"":""})]})})}function tj({projects:e,isLoading:t=!1}){const s=Wh(e,5);if(t)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>r.jsxs("div",{children:[r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-8 bg-gray-100 rounded"})]},a))})]});if(s.length===0)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),r.jsx("p",{className:"text-center text-gray-600 py-8",children:"Set budgets to compare estimates"})]});const n=Math.max(...s.flatMap(a=>[a.budget,a.estimate]));return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),r.jsx("div",{className:"space-y-5",children:s.map(a=>{const l=a.budget/n*100,o=a.estimate/n*100,i=a.isOverBudget?"text-khc-accent":"text-green-600";return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate flex-1",children:a.project_name}),r.jsxs("span",{className:`text-xs font-semibold ${i}`,children:[a.isOverBudget?"+":"",ml(a.variancePercentage,1)]})]}),r.jsxs("div",{className:"relative h-5 bg-gray-100 rounded overflow-hidden",children:[r.jsx("div",{className:"absolute h-full bg-khc-primary rounded",style:{width:`${l}%`}}),r.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:l>20&&X(a.budget)})]}),r.jsxs("div",{className:"relative h-5 rounded overflow-hidden",style:{backgroundColor:"#f3f4f6"},children:[r.jsx("div",{className:`absolute h-full rounded ${a.isOverBudget?"bg-khc-accent":"bg-green-500"}`,style:{width:`${o}%`}}),r.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:o>20&&X(a.estimate)})]}),r.jsx("div",{className:"flex justify-between text-xs text-gray-600 px-1",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Budget:"})," ",X(a.budget)]}),r.jsxs("span",{children:[r.jsx("span",{className:"font-medium",children:"Estimate:"})," ",X(a.estimate)]})]})})]},a.project_id)})}),r.jsxs("div",{className:"mt-6 pt-4 border-t flex gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-khc-primary"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Budget"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-khc-accent"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Over)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),r.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Under)"})]})]})]})}const Ud=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function rj({projects:e,isLoading:t=!1}){const s=zh(e);if(t)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded"})]});if(s.length===0)return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),r.jsx("p",{className:"text-center text-gray-600 py-12",children:"No category data available"})]});const n=s.reduce((i,c)=>i+c.total_cost,0),a=70;let l=-90;const o=s.map((i,c)=>{const d=i.total_cost/n*100,u=l*(Math.PI/180),g=(l+d/100*360)*(Math.PI/180),p=100+a*Math.cos(u),N=100+a*Math.sin(u),m=100+a*Math.cos(g),y=100+a*Math.sin(g),v=d>50?1:0,x=`M ${p} ${N} A ${a} ${a} 0 ${v} 1 ${m} ${y} L ${100+(a-25)*Math.cos(g)} ${100+(a-25)*Math.sin(g)} A ${a-25} ${a-25} 0 ${v} 0 ${100+(a-25)*Math.cos(u)} ${100+(a-25)*Math.sin(u)} Z`;return l+=d/100*360,{path:x,color:Ud[c%Ud.length],...i}});return r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-8",children:[r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"relative w-64 h-64",children:[r.jsx("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:o.map((i,c)=>r.jsx("g",{children:r.jsx("path",{d:i.path,fill:i.color,opacity:"0.9",className:"hover:opacity-100 transition-opacity cursor-pointer"})},c))}),r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-khc-primary",children:X(n)}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total Cost"})]})})]})}),r.jsx("div",{className:"flex-1 space-y-3",children:o.map((i,c)=>r.jsxs("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-gray-50 transition",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:i.color}}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.category_name}),r.jsxs("div",{className:"flex items-center justify-between gap-2 mt-0.5",children:[r.jsx("p",{className:"text-xs text-gray-600",children:X(i.total_cost)}),r.jsx("p",{className:"text-xs font-semibold text-gray-700",children:ml(i.percentage,1)})]})]})]},c))})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Categories"}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:s.length})]}),r.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Avg per Category"}),r.jsx("p",{className:"text-lg font-bold text-gray-900",children:X(n/s.length)})]})]})]})}const Jn=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function sj({projects:e,isLoading:t=!1}){const s=zh(e),n=s.reduce((a,l)=>a+l.total_cost,0);return t?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>r.jsx("div",{className:"h-12 bg-gray-100 rounded"},a))})]}):s.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Cost by Category"}),r.jsx("p",{className:"text-center text-gray-600 py-8",children:"No category data available"})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-khc-primary to-khc-secondary",children:[r.jsx("h3",{className:"font-semibold text-white",children:" Cost by Category"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-1",children:[s.length," categories across projects"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-gray-50",children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Total Cost"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"%"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Projects"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-700",children:"Avg/Project"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map((a,l)=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:Jn[l%Jn.length]}}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.category_name})]})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:X(a.total_cost)})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${a.percentage}%`,backgroundColor:Jn[l%Jn.length]}})}),r.jsx("span",{className:"text-xs font-semibold text-gray-600 w-10 text-right",children:ml(a.percentage,1)})]})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsx("span",{className:"text-sm font-medium text-gray-600",children:a.project_count})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:X(a.avg_cost_per_project)})})]},l))})]})}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Project Total"}),r.jsx("span",{className:"text-lg font-bold text-khc-primary",children:X(n)})]})})]})}function nj(){const{user:e}=Qt(),{projects:t,isLoading:s,fetchProjects:n}=Ht();j.useEffect(()=>{n()},[n]);const a=Y0(t),l=X0(t),o=t.filter(d=>d.status!=="completed").length,i=Wh(t).length,c=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="estimator";return r.jsxs("div",{className:"space-y-6",children:[c&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"md:col-span-2 lg:col-span-6 lg:row-span-2",children:r.jsx("div",{className:"bg-gradient-to-br from-khc-primary to-khc-secondary rounded-lg shadow-md p-8 text-white h-full flex flex-col justify-between overflow-hidden relative",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/3 mb-4"}),r.jsx("div",{className:"h-12 bg-white bg-opacity-20 rounded w-1/2"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white text-opacity-80 mb-2",children:"Total Project Value"}),r.jsx("h2",{className:"text-4xl font-bold mb-1",children:X(a)}),r.jsxs("p",{className:"text-xs text-white text-opacity-70",children:[t.length," active projects"]})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-white border-opacity-20",children:[r.jsxs("svg",{className:"w-full h-16",viewBox:"0 0 200 60",children:[r.jsx("polyline",{points:"0,40 25,35 50,30 75,25 100,20 125,25 150,30 175,35 200,40",fill:"none",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2"}),r.jsx("polyline",{points:"0,45 25,40 50,35 75,30 100,25 125,30 150,35 175,40 200,45",fill:"rgba(255,255,255,0.1)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"})]}),r.jsx("p",{className:"text-xs text-white text-opacity-70 mt-2",children:"Cumulative estimate trend"})]})]})})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3 lg:row-span-2",children:r.jsx(ej,{projects:t,isLoading:s})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Active Projects"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"bg-green-50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"In Progress"}),r.jsx("p",{className:"font-bold text-green-700",children:t.filter(d=>d.status==="in_progress").length})]}),r.jsxs("div",{className:"bg-blue-50 rounded p-2",children:[r.jsx("p",{className:"text-gray-600",children:"Draft"}),r.jsx("p",{className:"font-bold text-blue-700",children:t.filter(d=>d.status==="draft").length})]})]})]})})}),l&&r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Avg Cost per m"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:X(l)})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("div",{className:"text-xs text-gray-500",children:[r.jsx("p",{children:"Per square meter"}),r.jsx("p",{className:"text-purple-600 font-semibold",children:"Industry metric"})]})})]})})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:r.jsx(J,{to:"/projects",className:"block bg-gradient-to-br from-khc-accent to-orange-600 rounded-lg shadow-md p-6 text-white h-full hover:shadow-lg transition-shadow cursor-pointer",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:s?r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/2 mb-4"}),r.jsx("div",{className:"h-8 bg-white bg-opacity-20 rounded w-1/3"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white text-opacity-90 mb-2",children:"Projects at Risk"}),r.jsx("p",{className:"text-4xl font-bold",children:i}),r.jsx("p",{className:"text-xs text-white text-opacity-80 mt-1",children:"Over budget"})]}),r.jsx("div",{className:"text-4xl",children:""})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-white border-opacity-20",children:r.jsx("p",{className:"text-xs text-white text-opacity-70",children:"View details "})})]})})}),r.jsx("div",{className:"md:col-span-2 lg:col-span-7",children:r.jsx(tj,{projects:t,isLoading:s})}),r.jsx("div",{className:"md:col-span-1 lg:col-span-5",children:r.jsx(rj,{projects:t,isLoading:s})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(sj,{projects:t,isLoading:s}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(J,{to:"/projects/new",className:"group block bg-khc-primary hover:bg-khc-neutral text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"Create Project"}),r.jsx("p",{className:"text-xs text-gray-200 mt-2",children:"Start a new project"})]}),r.jsxs(J,{to:"/projects",className:"group block bg-khc-secondary hover:bg-khc-primary text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"All Projects"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:["View ",t.length," projects"]})]}),r.jsxs(J,{to:"/projects",className:"group block bg-gradient-to-br from-emerald-500 to-green-600 text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[r.jsx("div",{className:"text-4xl mb-3",children:""}),r.jsx("h3",{className:"font-semibold",children:"Completed"}),r.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:[t.filter(d=>d.status==="completed").length," finished"]})]})]})]})]}),!c&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Financial metrics are available to administrators and estimators."})]})]})}const aj=e=>{const[t,s]=j.useState(new Set),n=j.useCallback(u=>{s(g=>{const p=new Set(g);return p.has(u)?p.delete(u):p.add(u),p})},[]),a=j.useCallback(()=>{const u=new Set(e.map(g=>g.id));s(u)},[e]),l=j.useCallback(()=>{s(new Set)},[]),o=j.useCallback(()=>{t.size===e.length?l():a()},[t.size,e.length,a,l]),i=j.useCallback(u=>t.has(u),[t]),c=j.useCallback(()=>e.filter(u=>t.has(u.id)),[e,t]),d=j.useCallback(()=>{s(new Set)},[]);return{selectedIds:t,selectedCount:t.size,isAllSelected:t.size===e.length&&e.length>0,isPartiallySelected:t.size>0&&t.size<e.length,toggleSelection:n,selectAll:a,deselectAll:l,toggleAll:o,isSelected:i,getSelectedItems:c,clearSelection:d}};function lj({selectedCount:e,totalCount:t,isAllSelected:s,isPartiallySelected:n,onSelectAll:a,onDeselectAll:l,onBulkDelete:o,onBulkStatusChange:i,isLoading:c=!1}){return r.jsx("div",{className:"bg-khc-light border-b-2 border-khc-primary sticky top-16 z-30 transition-all duration-300",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",children:[r.jsx("input",{type:"checkbox",checked:s,ref:d=>{d&&(d.indeterminate=n)},onChange:s?l:a,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:s?"Deselect All":"Select All"})]}),r.jsx("div",{className:"h-6 w-px bg-gray-300"}),r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e," of ",t," selected"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("button",{disabled:e===0||c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Change status for selected projects",children:" Change Status"}),r.jsxs("div",{className:"absolute right-0 mt-0 w-48 bg-white rounded-lg shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx("button",{onClick:()=>i("draft"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Draft"}),r.jsx("button",{onClick:()=>i("in_progress"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" In Progress"}),r.jsx("button",{onClick:()=>i("completed"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Completed"})]})]}),r.jsxs("button",{onClick:o,disabled:e===0||c,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Delete selected projects",children:[" Delete (",e,")"]}),r.jsx("button",{onClick:l,disabled:e===0,className:"px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg text-sm font-medium disabled:opacity-50 transition-colors",children:" Clear"})]})]})})})}function _s({isOpen:e,onClose:t,title:s,children:n,footer:a,size:l="md"}){if(!e)return null;const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center modal-overlay",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),r.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl ${o[l]} w-full mx-4 modal-content`,children:[s&&r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"px-6 py-4",children:n}),a&&r.jsx("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200",children:a})]})]})}function oj({isOpen:e,onClose:t,onDuplicate:s,projectName:n,isLoading:a=!1}){const[l,o]=j.useState(`${n} - Copy`),[i,c]=j.useState(!1),[d,u]=j.useState(!1),[g,p]=j.useState({}),N=async()=>{const m={};if(l.trim()||(m.name="Project name is required"),l.length>255&&(m.name="Project name must be less than 255 characters"),Object.keys(m).length>0){p(m);return}try{await s({name:l.trim(),includeEstimates:i,copyStatus:d}),o(`${n} - Copy`),c(!1),u(!1),p({}),t()}catch{}};return r.jsx(_s,{isOpen:e,onClose:t,title:"Duplicate Project",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Project Name *"}),r.jsx("input",{type:"text",value:l,onChange:m=>{o(m.target.value),g.name&&p({...g,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Project Name - Copy",maxLength:255}),g.name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:g.name})]}),r.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Copy Options"}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:i,onChange:m=>c(m.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Include Estimates"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Copy all line items and estimates from the original project"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:m=>u(m.target.checked),disabled:!i,className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer disabled:opacity-50"}),r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${d?"text-gray-900":"text-gray-600"}`,children:"Copy Status (if estimates included)"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Copy estimate status (approved, rejected, etc.)"})]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900",children:" The new project will be created as a draft. You can edit it after creation."})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,disabled:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:N,disabled:a,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:a?"Duplicating...":"Duplicate Project"})]})]})})}function vt(e){var t,s,n,a,l,o,i;if(he.isAxiosError(e)){const c=e;if((s=(t=c.response)==null?void 0:t.data)!=null&&s.error)return c.response.data.error;if((a=(n=c.response)==null?void 0:n.data)!=null&&a.message)return c.response.data.message;if((o=(l=c.response)==null?void 0:l.data)!=null&&o.errors){const d=c.response.data.errors;if(Array.isArray(d))return d.map(u=>u.message).join(", ")}if((i=c.response)!=null&&i.status)switch(c.response.status){case 400:return"Invalid request. Please check your input.";case 401:return"Authentication failed. Please login again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 409:return"This resource already exists.";case 422:return"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Please try again later.";case 503:return"Service unavailable. Please try again later.";default:return`Error: ${c.response.status} ${c.response.statusText}`}return c.message==="Network Error"?"Network error. Please check your internet connection.":c.message||"An error occurred"}return e instanceof Error?e.message:"An unknown error occurred"}function ij(){Be();const e=Es(),{user:t,isEstimator:s,isAdmin:n}=Qt(),{projects:a,isLoading:l,error:o,fetchProjects:i,deleteProject:c,updateProject:d,duplicateProject:u}=Ht(),[g,p]=j.useState({status:"",estimateStatus:"",progress:"",search:""}),[N,m]=j.useState(!1),[y,v]=j.useState(!1),[x,f]=j.useState(!1),[h,b]=j.useState(null),[S,k]=j.useState(""),w=aj(a);j.useEffect(()=>{i()},[i]);const P=a.filter(D=>!(g.status&&D.status!==g.status||g.estimateStatus&&D.estimate_status!==g.estimateStatus||g.progress&&D.progress!==g.progress||g.search&&!D.name.toLowerCase().includes(g.search.toLowerCase()))),L=async D=>{if(window.confirm("Are you sure you want to delete this project?"))try{await c(D)}catch{}},$=async()=>{const D=w.getSelectedItems(),q=`Delete ${D.length} project${D.length!==1?"s":""}? This cannot be undone.`;if(window.confirm(q))try{m(!0);let I=0,E=0;for(const _ of D)try{await c(_.id),I++}catch(O){E++,`${_.id}`}w.clearSelection(),e.success(`Deleted ${I} project${I!==1?"s":""}`),E>0&&e.error(`Failed to delete ${E} project${E!==1?"s":""}`)}finally{m(!1)}},R=async D=>{const q=w.getSelectedItems();try{m(!0);let I=0;for(const E of q)try{await d(E.id,{status:D}),I++}catch(_){`${E.id}`}w.clearSelection(),await i(),e.success(`Updated ${I} project${I!==1?"s":""}`)}finally{m(!1)}},A=(D,q)=>{b(D),k(q),f(!0)},M=async D=>{if(h)try{v(!0),await u(h,D.name,D.includeEstimates,D.copyStatus),await i(),e.success("Project duplicated successfully"),f(!1)}catch{e.error("Failed to duplicate project")}finally{v(!1)}};return r.jsxs("div",{className:"space-y-6",children:[w.selectedCount>0&&r.jsx(lj,{selectedCount:w.selectedCount,totalCount:a.length,isAllSelected:w.isAllSelected,isPartiallySelected:w.isPartiallySelected,onSelectAll:w.selectAll,onDeselectAll:w.deselectAll,onBulkDelete:$,onBulkStatusChange:R,isLoading:N}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Projects"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your estimation projects"})]}),(n||s)&&r.jsx(J,{to:"/projects/new",className:"bg-khc-primary hover:bg-khc-secondary text-white font-medium py-2 px-4 rounded-lg transition",children:"+ New Project"})]}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Search by name...",value:g.search,onChange:D=>p({...g,search:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:g.status,onChange:D=>p({...g,status:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimate Status"}),r.jsxs("select",{value:g.estimateStatus,onChange:D=>p({...g,estimateStatus:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Estimates"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress"}),r.jsxs("select",{value:g.progress,onChange:D=>p({...g,progress:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"All Progress"}),r.jsx("option",{value:"Not Started",children:"Not Started"}),r.jsx("option",{value:"Progressing",children:"Progressing"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]})]})}),o&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:o}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading projects..."}):P.length===0?r.jsx("div",{className:"p-6 text-center text-gray-600",children:a.length===0?"No projects yet.":"No projects match your filters."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700 w-12",children:r.jsx("input",{type:"checkbox",checked:w.isAllSelected,ref:D=>{D&&(D.indeterminate=w.isPartiallySelected)},onChange:w.toggleAll,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Location"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Estimate"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:P.map(D=>r.jsxs("tr",{className:`hover:bg-gray-50 transition ${w.isSelected(D.id)?"bg-khc-light":""}`,children:[r.jsx("td",{className:"px-6 py-4 w-12",children:r.jsx("input",{type:"checkbox",checked:w.isSelected(D.id),onChange:()=>w.toggleSelection(D.id),className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(J,{to:`/projects/${D.id}`,className:"text-khc-primary hover:underline font-medium",children:D.name})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:D.project_address||D.description||"N/A"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${D.progress==="Completed"?"bg-green-100 text-green-700":D.progress==="Progressing"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:D.progress||"Not Started"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium",children:D.status})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${D.estimate_status==="approved"?"bg-green-100 text-green-700":D.estimate_status==="submitted"?"bg-blue-100 text-blue-700":D.estimate_status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:D.estimate_status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(D.created_at).toLocaleDateString()}),r.jsxs("td",{className:"px-6 py-4 space-x-2 flex",children:[r.jsx(J,{to:`/projects/${D.id}`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"View"}),(n||(t==null?void 0:t.id)===D.created_by&&s)&&r.jsxs(r.Fragment,{children:[r.jsx(J,{to:`/projects/${D.id}/edit`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>A(D.id,D.name),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Duplicate"}),n&&r.jsx("button",{onClick:()=>L(D.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]},D.id))})]})})}),r.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",P.length," of ",a.length," projects"]}),r.jsx(oj,{isOpen:x,onClose:()=>f(!1),onDuplicate:M,projectName:S,isLoading:y})]})}function Ke({label:e="Back",className:t=""}){const s=Be();return r.jsxs("button",{onClick:()=>s(-1),className:`
        inline-flex items-center gap-2 px-4 py-2
        bg-gray-200 hover:bg-gray-300
        text-gray-700
        rounded-lg font-medium
        transition duration-200
        ${t}
      `,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e]})}function Md(){const{id:e}=ks(),t=Be(),{currentProject:s,isLoading:n,error:a,fetchProjectById:l,createProject:o,updateProject:i}=Ht(),c=!!e,[d,u]=j.useState({name:"",client_id:"",contractor_id:"",budget_cost:"",start_date:"",project_address:"",description:"",notes:"",progress:"Not Started"}),[g,p]=j.useState([]),[N,m]=j.useState([]),[y,v]=j.useState(!0),[x,f]=j.useState(!0),[h,b]=j.useState({});j.useEffect(()=>{(async()=>{try{const[$,R]=await Promise.all([Hs.getAll(),qs.getAll()]);p($.data.data||[]),m(R.data.data||[])}catch{console.error("Failed to load clients/contractors")}finally{v(!1),f(!1)}})()},[]),j.useEffect(()=>{c&&e&&l(Number(e)).then(()=>{var L,$,R;s&&u({name:s.name||"",client_id:((L=s.client_id)==null?void 0:L.toString())||"",contractor_id:(($=s.contractor_id)==null?void 0:$.toString())||"",budget_cost:((R=s.budget_cost)==null?void 0:R.toString())||"",start_date:s.start_date||"",project_address:s.project_address||"",description:s.description||"",notes:s.notes||"",progress:s.progress||"Not Started"})})},[e,c,l,s==null?void 0:s.id]);const S=()=>{const L={};return d.name.trim()||(L.name="Project name is required"),d.client_id.trim()||(L.client_id="Client is required"),d.start_date||(L.start_date="Start date is required"),d.budget_cost&&isNaN(Number(d.budget_cost))&&(L.budget_cost="Must be a valid number"),b(L),Object.keys(L).length===0},k=async L=>{if(L.preventDefault(),!!S())try{const $={name:d.name,client_id:Number(d.client_id),contractor_id:d.contractor_id?Number(d.contractor_id):void 0,budget_cost:d.budget_cost?Number(d.budget_cost):void 0,start_date:d.start_date,project_address:d.project_address||void 0,description:d.description||void 0,notes:d.notes||void 0};if(c&&e)await i(Number(e),$),t(`/projects/${e}`);else{const R=await o($);t(`/projects/${R.id}`)}}catch{}},w=L=>{const{name:$,value:R}=L.target;u(A=>({...A,[$]:R}))},P=async()=>{if(!(!c||!e)&&window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{const L=JSON.parse(localStorage.getItem("deletedProjects")||"[]");L.push(Number(e)),localStorage.setItem("deletedProjects",JSON.stringify(L));const R=JSON.parse(localStorage.getItem("projects")||"[]").filter(A=>A.id!==Number(e));localStorage.setItem("projects",JSON.stringify(R)),t("/projects")}catch(L){console.error("Error deleting project:",L)}};return r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsx(Ke,{}),r.jsx("div",{className:"mb-6",children:r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:c?"Edit Project":"Create New Project"})}),a&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:a}),r.jsxs("form",{onSubmit:k,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[c&&s&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Project ID:"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",s.id]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),r.jsx("input",{type:"text",name:"name",value:d.name,onChange:w,placeholder:"E.g., Kitchen Renovation, Office Expansion",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.name?"border-red-500":"border-gray-300"}`,disabled:n}),h.name&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.name})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name *"}),r.jsxs("select",{name:"client_id",value:d.client_id,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.client_id?"border-red-500":"border-gray-300"}`,disabled:n||y,children:[r.jsx("option",{value:"",children:"Select a client..."}),g.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]}),h.client_id&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.client_id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contractor Name"}),r.jsxs("select",{name:"contractor_id",value:d.contractor_id,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n||x,children:[r.jsx("option",{value:"",children:"Select a contractor (optional)..."}),N.map(L=>r.jsx("option",{value:L.id,children:L.name},L.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),r.jsx("input",{type:"date",name:"start_date",value:d.start_date,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.start_date?"border-red-500":"border-gray-300"}`,disabled:n}),h.start_date&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.start_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Cost ()"}),r.jsx("input",{type:"number",name:"budget_cost",value:d.budget_cost,onChange:w,placeholder:"0.00",step:"0.01",min:"0",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${h.budget_cost?"border-red-500":"border-gray-300"}`,disabled:n}),h.budget_cost&&r.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.budget_cost})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Progress"}),r.jsxs("select",{name:"progress",value:d.progress,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n,children:[r.jsx("option",{value:"Not Started",children:"Not Started"}),r.jsx("option",{value:"Progressing",children:"Progressing"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Address"}),r.jsx("input",{type:"text",name:"project_address",value:d.project_address,onChange:w,placeholder:"E.g., 123 Main Street, London, SW1A 1AA",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:d.description,onChange:w,placeholder:"Project scope, objectives, and key details...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{name:"notes",value:d.notes,onChange:w,placeholder:"Additional notes, constraints, special requirements...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),r.jsxs("div",{className:"flex gap-4 justify-between pt-6 border-t",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",disabled:n,children:"Cancel"}),c&&r.jsx("button",{type:"button",onClick:P,className:"px-6 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition font-medium",disabled:n,children:"Delete Project"})]}),r.jsx("button",{type:"submit",disabled:n,className:`px-6 py-2 rounded-lg text-white font-medium transition ${n?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:n?"Saving...":c?"Update Project":"Create Project"})]})]})]})}const Hh=$r((e,t)=>({estimates:[],estimateTotals:null,isLoading:!1,error:null,currentProjectId:null,fetchEstimates:async s=>{var n,a;e({isLoading:!0,error:null,currentProjectId:s});try{const l=await Us.getAll(s);e({estimates:l.data.data.estimates,estimateTotals:l.data.data.totals,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimates";throw e({error:o,isLoading:!1,estimates:[],estimateTotals:null}),l}},fetchEstimateSummary:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await Us.getSummary(s);e({estimateTotals:l.data.data.estimate,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimate summary";throw e({error:o,isLoading:!1,estimateTotals:null}),l}},addEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Us.create(s,n)).data.data;return await t().fetchEstimates(s),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to add estimate";throw e({error:i,isLoading:!1}),o}},updateEstimate:async(s,n,a)=>{var l,o;e({isLoading:!0,error:null});try{const c=(await Us.update(s,n,a)).data.data;return await t().fetchEstimates(s),c}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Failed to update estimate";throw e({error:c,isLoading:!1}),i}},deleteEstimate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{await Us.delete(s,n),await t().fetchEstimates(s)}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to delete estimate";throw e({error:i,isLoading:!1}),o}},clearError:()=>{e({error:null})},clearEstimates:()=>{e({estimates:[],estimateTotals:null,currentProjectId:null})}})),Ql="qscostingpro_recent_projects",cj=5,dj=()=>{const e=()=>{try{const n=localStorage.getItem(Ql);return n?JSON.parse(n):[]}catch{return[]}};return{getRecent:e,addRecent:(n,a)=>{try{const o=e().filter(d=>d.id!==n),c=[{id:Number(n),name:String(a||"Unknown"),viewed_at:Date.now()},...o].slice(0,cj);localStorage.setItem(Ql,JSON.stringify(c))}catch(l){console.error("Failed to add recent project:",l)}},clearRecent:()=>{try{localStorage.removeItem(Ql)}catch{}}}};function qh({projectId:e,projectName:t,isDisabled:s=!1}){const[n,a]=j.useState(!1),[l,o]=j.useState(null),[i,c]=j.useState("nrm2"),[d,u]=j.useState(!1),g=async()=>{var p,N;a(!0),o(null);try{const m=localStorage.getItem("accessToken");if(!m)throw new Error("No authentication token found");const y=await he.get(`http://localhost:3000/api/v1/projects/${e}/estimates/export-pdf?groupBy=${i}`,{headers:{Authorization:`Bearer ${m}`},responseType:"blob"}),v=new Blob([y.data],{type:"application/pdf"}),x=window.URL.createObjectURL(v),f=document.createElement("a");f.href=x;const h=new Date().toISOString().split("T")[0],b=`BOQ_${t.replace(/[^a-z0-9]/gi,"_")}_${h}.pdf`;f.setAttribute("download",b),document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(x)}catch(m){console.error("PDF export failed:",m),o(((N=(p=m.response)==null?void 0:p.data)==null?void 0:N.error)||"Failed to export PDF. Please ensure there are line items to export.")}finally{a(!1)}};return r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex gap-2 items-center relative",children:[r.jsx("button",{onClick:g,disabled:s||n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 flex items-center gap-2 justify-center",children:n?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):r.jsx(r.Fragment,{children:" Export PDF"})}),r.jsx("button",{onClick:()=>u(!d),disabled:s||n,className:"px-2 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg disabled:bg-gray-200 text-xs",title:"PDF export options",children:""}),d&&r.jsx("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-10 min-w-max",children:r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Group By:"}),r.jsxs("label",{className:"flex items-center gap-2 text-sm mb-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[r.jsx("input",{type:"radio",name:"groupBy",value:"nrm2",checked:i==="nrm2",onChange:p=>c(p.target.value),className:"cursor-pointer"}),r.jsx("span",{children:"NRM 2 Structure (recommended)"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-gray-50 p-1 rounded",children:[r.jsx("input",{type:"radio",name:"groupBy",value:"category",checked:i==="category",onChange:p=>c(p.target.value),className:"cursor-pointer"}),r.jsx("span",{children:"By Category"})]})]})})]}),l&&r.jsx("p",{className:"text-red-600 text-sm",children:l})]})}function uj({budgetCost:e,actualCost:t,contingencyAmount:s=0}){if(!e)return r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[" No budget set for this project. ",r.jsx("strong",{children:"Set a budget"})," to track costs against estimates."]})});const n=t+s,a=e-n,l=n/e*100,o=a<0;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Budget"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:["",e.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Actual Cost"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["",n.toLocaleString("en-GB",{maximumFractionDigits:0})]})]}),r.jsxs("div",{className:`rounded-lg p-4 ${o?"bg-red-50":"bg-emerald-50"}`,children:[r.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Remaining"}),r.jsxs("p",{className:`text-2xl font-bold mt-1 ${o?"text-red-600":"text-emerald-600"}`,children:["",Math.abs(a).toLocaleString("en-GB",{maximumFractionDigits:0})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"Budget Usage"}),r.jsxs("p",{className:"text-sm font-bold text-gray-600",children:[l.toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${l>100?"bg-red-500":l>80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(l,100)}%`}})})]}),r.jsx("div",{className:`rounded-lg p-3 ${o?"bg-red-50 border border-red-200":"bg-green-50 border border-green-200"}`,children:r.jsx("p",{className:`text-sm font-medium ${o?"text-red-800":"text-green-800"}`,children:o?r.jsxs(r.Fragment,{children:[" ",r.jsx("strong",{children:"Over Budget:"})," ",Math.abs(a).toLocaleString("en-GB",{maximumFractionDigits:2})," ","over budget"]}):r.jsxs(r.Fragment,{children:[" ",r.jsx("strong",{children:"Within Budget:"})," ",a.toLocaleString("en-GB",{maximumFractionDigits:2})," ","remaining"]})})}),s>0&&r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-gray-700",children:"Estimate Total:"}),r.jsxs("span",{className:"font-semibold",children:["",t.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",(s/t*100).toFixed(1),"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",s.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})}function mj({projectId:e,notes:t,onAddNote:s,onDeleteNote:n,isLoading:a=!1}){const[l,o]=j.useState(""),[i,c]=j.useState(!1),d=async u=>{if(u.preventDefault(),!!l.trim())try{c(!0),await s(l),o("")}finally{c(!1)}};return r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Project Notes"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add comments and notes about this project"})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("form",{onSubmit:d,className:"mb-6",children:[r.jsx("textarea",{value:l,onChange:u=>o(u.target.value),placeholder:"Add a note...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,disabled:i||a}),r.jsx("button",{type:"submit",disabled:!l.trim()||i||a,className:"mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors font-medium",children:i?"Adding...":"Add Note"})]}),r.jsx("div",{className:"space-y-3",children:t.length===0?r.jsx("div",{className:"py-8 text-center text-gray-500",children:r.jsx("p",{className:"text-sm",children:"No notes yet. Add one to get started!"})}):t.map(u=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:border-gray-300 transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:u.author}),r.jsx("p",{className:"text-xs text-gray-600",children:new Date(u.createdAt).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n&&r.jsx("button",{onClick:()=>n(u.id),className:"text-red-600 hover:text-red-700 text-xs font-medium",title:"Delete note",children:""})]}),r.jsx("p",{className:"text-gray-700 text-sm whitespace-pre-wrap",children:u.content})]},u.id))})]})]})}function hj(){var Ce;const{id:e}=ks();Be();const{user:t,isAdmin:s}=Qt(),n=Es(),{addRecent:a}=dj(),l=Number(e),{currentProject:o,isLoading:i,error:c,fetchProjectById:d}=Ht(),{estimateTotals:u,isLoading:g,error:p,fetchEstimateSummary:N,clearEstimates:m}=Hh(),[y,v]=j.useState(""),[x,f]=j.useState(""),[h,b]=j.useState(!1),[S,k]=j.useState(!1),[w,P]=j.useState(!1),[L,$]=j.useState([]);j.useEffect(()=>(l&&(d(l),N(l)),()=>{m()}),[l,d,N,m]),j.useEffect(()=>{o!=null&&o.name&&a(l,o.name)},[l,o==null?void 0:o.name,a]);const{submitEstimate:R,approveEstimate:A,rejectEstimate:M}=Ht(),D=async()=>{if(l)try{P(!0),await R(l),await d(l),await N(l),n.success("Estimate submitted for approval"),P(!1)}catch(te){n.error(vt(te)),P(!1)}},q=async()=>{if(l)try{P(!0),await A(l,y),await d(l),await N(l),n.success("Estimate approved successfully"),b(!1),v(""),P(!1)}catch(te){n.error(vt(te)),P(!1)}},I=async()=>{if(l)try{P(!0),await M(l,x),await d(l),await N(l),n.success("Estimate rejected"),k(!1),f(""),P(!1)}catch(te){n.error(vt(te)),P(!1)}},E=async te=>{const Ne={id:Date.now().toString(),author:(t==null?void 0:t.username)||"Unknown",content:te,createdAt:new Date().toISOString()};$([Ne,...L]),n.success("Note added successfully")},_=async te=>{$(L.filter(Ne=>Ne.id!==te)),n.success("Note deleted successfully")},O=i||g,z=c||p,Y=!i&&o&&(s||(t==null?void 0:t.id)===o.created_by),Q=s&&(o==null?void 0:o.estimate_status)==="submitted",Z=s&&(o==null?void 0:o.estimate_status)==="submitted",pe=!i&&o&&((t==null?void 0:t.id)===o.created_by||s)&&o.estimate_status==="draft";return O?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading project..."}):o?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:o.name}),r.jsx("p",{className:"text-gray-600 mt-2",children:o.project_address||o.description||"No address provided"})]}),r.jsxs("div",{className:"flex gap-2",children:[u&&u.grand_total>0&&r.jsx(qh,{projectId:l,projectName:o.name}),Y&&r.jsx(J,{to:`/projects/${l}/edit`,className:"px-4 py-2 border border-khc-primary text-khc-primary hover:bg-khc-light rounded-lg transition",children:"Edit"})]})]}),z&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:z}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:o.status})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Estimate Status"}),r.jsx("p",{className:`text-lg font-semibold mt-1 ${o.estimate_status==="approved"?"text-green-600":o.estimate_status==="submitted"?"text-blue-600":o.estimate_status==="rejected"?"text-red-600":"text-gray-600"}`,children:o.estimate_status})]}),o.budget_cost&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Budget Cost"}),r.jsxs("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:["",o.budget_cost.toLocaleString()]})]}),o.start_date&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Start Date"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:new Date(o.start_date).toLocaleDateString()})]})]}),o.budget_cost&&u&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Budget Overview"}),r.jsx(uj,{budgetCost:o.budget_cost,actualCost:u.grand_total,contingencyAmount:u.contingency_amount})]}),o.description&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700",children:o.description})]}),u&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:"Estimate Summary"}),r.jsx(J,{to:`/projects/${l}/estimates`,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:"Manage Estimate"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Cost Breakdown by Category"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Items"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Subtotal"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Contractor"})]})}),r.jsx("tbody",{className:"divide-y",children:u.categories.map(te=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:te.category_name}),r.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:te.line_count}),r.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-khc-primary",children:["",te.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["",te.contractor_items_subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]},te.category_id))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsxs("span",{className:"font-semibold",children:["",u.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",u.contingency_percentage,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",u.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-lg border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),r.jsxs("span",{className:"font-bold text-khc-primary text-xl",children:["",u.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[u.floor_area_m2&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Cost per m:"}),r.jsxs("span",{className:"font-semibold",children:["",(Ce=u.cost_per_m2)==null?void 0:Ce.toLocaleString("en-GB",{maximumFractionDigits:2})," / m"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Volunteer Cost:"}),r.jsxs("span",{className:"font-semibold",children:["",u.volunteer_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contractor Cost:"}),r.jsxs("span",{className:"font-semibold",children:["",u.contractor_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})]}),(pe||Q||Z)&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Actions"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[pe&&r.jsx("button",{onClick:D,disabled:w,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:bg-gray-400",children:w?"Submitting...":"Submit Estimate for Approval"}),Q&&r.jsx("button",{onClick:()=>b(!0),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:"Approve Estimate"}),Z&&r.jsx("button",{onClick:()=>k(!0),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition",children:"Reject Estimate"})]})]}),r.jsx(mj,{projectId:l,notes:L,onAddNote:E,onDeleteNote:_}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Approve Estimate"}),r.jsx("textarea",{value:y,onChange:te=>v(te.target.value),placeholder:"Add approval notes (optional)",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{b(!1),v("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:q,disabled:w,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Approving...":"Approve"})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reject Estimate"}),r.jsx("textarea",{value:x,onChange:te=>f(te.target.value),placeholder:"Reason for rejection",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{k(!1),f("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:I,disabled:w,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Rejecting...":"Reject"})]})]})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Project not found"}),r.jsx(J,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to projects"})]})}const Vh=$r((e,t)=>({templates:[],currentTemplate:null,isLoading:!1,error:null,fetchTemplates:async(s=!0)=>{var n,a;e({isLoading:!0,error:null});try{const l=await zr.getAll(s);e({templates:l.data.data||[],isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch templates";throw e({error:o,isLoading:!1}),l}},fetchTemplateById:async s=>{var n,a;e({isLoading:!0,error:null});try{const l=await zr.getById(s);e({currentTemplate:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch template";throw e({error:o,isLoading:!1,currentTemplate:null}),l}},saveTemplate:async s=>{var n,a;e({isLoading:!0,error:null});try{const o=(await zr.create(s)).data.data;return e(i=>({templates:[o,...i.templates],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to save template";throw e({error:o,isLoading:!1}),l}},updateTemplate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await zr.update(s,n)).data.data;return e(c=>{var d;return{templates:c.templates.map(u=>u.id===s?i:u),currentTemplate:((d=c.currentTemplate)==null?void 0:d.id)===s?i:c.currentTemplate,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update template";throw e({error:i,isLoading:!1}),o}},deleteTemplate:async s=>{var n,a;e({isLoading:!0,error:null});try{await zr.delete(s),e(l=>{var o;return{templates:l.templates.filter(i=>i.id!==s),currentTemplate:((o=l.currentTemplate)==null?void 0:o.id)===s?null:l.currentTemplate,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete template";throw e({error:o,isLoading:!1}),l}},applyTemplate:async(s,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await zr.applyToProject(s,n)).data.data;return e({currentTemplate:i,isLoading:!1}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to apply template";throw e({error:i,isLoading:!1}),o}},setCurrentTemplate:s=>{e({currentTemplate:s})},clearError:()=>{e({error:null})}})),tc=$r(e=>({groups:[],currentGroup:null,currentElement:null,currentSubElement:null,currentWorkSection:null,pendingWorkSection:null,searchResults:[],statistics:null,isLoading:!1,isSearching:!1,error:null,searchKeyword:"",fetchGroups:async()=>{e({isLoading:!0,error:null});try{const s=await(await fetch("/api/v1/nrm2/groups")).json();if(!s.success)throw new Error(s.error||"Failed to fetch groups");e({groups:s.data,isLoading:!1})}catch(t){const s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1})}},fetchTree:async()=>{e({isLoading:!0,error:null});try{const s=await(await fetch("/api/v1/nrm2/tree")).json();if(!s.success)throw new Error(s.error||"Failed to fetch NRM 2 hierarchy");e({groups:s.data,isLoading:!1})}catch(t){const s=t instanceof Error?t.message:"Unknown error";e({error:s,isLoading:!1}),console.error("Failed to fetch NRM 2 tree:",t)}},fetchGroupDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/groups/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch group details");e({currentGroup:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},fetchElementDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/elements/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch element details");e({currentElement:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},fetchSubElementDetails:async t=>{e({isLoading:!0,error:null});try{const n=await(await fetch(`/api/v1/nrm2/sub-elements/${t}`)).json();if(!n.success)throw new Error(n.error||"Failed to fetch sub-element details");e({currentSubElement:n.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isLoading:!1})}},searchNRM2:async t=>{if(!t.trim()){e({searchResults:[],searchKeyword:""});return}e({isSearching:!0,error:null,searchKeyword:t});try{const n=await(await fetch(`/api/v1/nrm2/search?q=${encodeURIComponent(t)}`)).json();if(!n.success)throw new Error(n.error||"Search failed");e({searchResults:n.data,isSearching:!1})}catch(s){const n=s instanceof Error?s.message:"Unknown error";e({error:n,isSearching:!1})}},clearSearch:()=>{e({searchResults:[],searchKeyword:"",error:null})},clearError:()=>{e({error:null})},setCurrentGroup:t=>{e({currentGroup:t})},setCurrentElement:t=>{e({currentElement:t})},setCurrentSubElement:t=>{e({currentSubElement:t})},setCurrentWorkSection:t=>{e({currentWorkSection:t})},setPendingWorkSection:t=>{e({pendingWorkSection:t})},fetchStatistics:async()=>{try{const s=await(await fetch("/api/v1/nrm2/stats")).json();if(!s.success)throw new Error(s.error||"Failed to fetch statistics");e({statistics:s.data})}catch(t){console.error("Failed to fetch NRM 2 statistics:",t)}}}));function pj({tabs:e,activeTab:t,onChange:s}){return r.jsx("div",{className:"border-b border-gray-200 mb-6",children:r.jsx("div",{className:"flex space-x-8",children:e.map(n=>r.jsxs("button",{onClick:()=>s(n.id),className:`px-1 py-4 border-b-2 font-medium text-sm transition-colors ${t===n.id?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[n.icon&&r.jsx("span",{className:"mr-2",children:n.icon}),n.label]},n.id))})})}function fj({items:e,isLoading:t,onSelectItem:s,selectedItemId:n}){const[a,l]=j.useState(""),o=e.filter(i=>i.description.toLowerCase().includes(a.toLowerCase())||i.code.toLowerCase().includes(a.toLowerCase()));return r.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[r.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:a,onChange:i=>l(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm mb-4"}),r.jsx("div",{className:"max-h-64 overflow-y-auto divide-y border rounded",children:t?r.jsx("div",{className:"p-4 text-center text-gray-600",children:"Loading items..."}):o.length===0?r.jsx("div",{className:"p-4 text-center text-gray-600",children:"No items found"}):o.slice(0,20).map(i=>{var c;return r.jsxs("div",{onClick:()=>s(i.id),className:`p-4 cursor-pointer transition ${n===i.id?"bg-khc-light border-l-4 border-khc-primary":"hover:bg-gray-100"}`,children:[r.jsx("p",{className:"font-semibold text-sm text-gray-900",children:i.description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",i.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})," ","/ ",((c=i.unit)==null?void 0:c.code)||"unit"]})]},i.id)})})]})}const Yn="qscostingpro_estimate_presets",xj=10,Qh=()=>{const e=j.useCallback(()=>{try{const l=localStorage.getItem(Yn);return l?JSON.parse(l):[]}catch{return[]}},[]),t=j.useCallback((l,o)=>{try{const i=e(),c={id:`preset-${Date.now()}`,name:String(l||""),description:String(o.description||""),custom_description:String(o.custom_description||""),quantity:Number(o.quantity||1),custom_unit:String(o.custom_unit||""),custom_unit_rate:Number(o.custom_unit_rate||0),category_id:Number(o.category_id||0),created_at:Date.now(),usage_count:0},d=[c,...i].slice(0,xj);return localStorage.setItem(Yn,JSON.stringify(d)),c}catch(i){return console.error("Failed to save preset:",i),null}},[e]),s=j.useCallback(l=>{try{const i=e().filter(c=>c.id!==l);localStorage.setItem(Yn,JSON.stringify(i))}catch{}},[e]),n=j.useCallback(l=>{try{const i=e().map(c=>({...c,usage_count:c.id===l?c.usage_count+1:c.usage_count}));localStorage.setItem(Yn,JSON.stringify(i))}catch(o){console.error("Failed to increment usage count:",o)}},[e]),a=j.useCallback((l=5)=>e().sort((o,i)=>i.usage_count-o.usage_count).slice(0,l),[e]);return{getPresets:e,savePreset:t,deletePreset:s,incrementUsageCount:n,getTopPresets:a}};function gj({onSelectPreset:e,onSaveAsPreset:t,showSaveOption:s=!1}){const{getTopPresets:n,deletePreset:a}=Qh(),l=n(5);return l.length===0?r.jsxs("div",{className:"p-4 text-center text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No presets saved yet"}),s&&r.jsx("p",{className:"text-xs mt-2",children:"Save frequently used items as presets to reuse them"})]}):r.jsx("div",{className:"space-y-2",children:l.map(o=>r.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 hover:border-khc-primary hover:bg-khc-light transition-all",children:r.jsxs("div",{className:"flex justify-between items-start gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:o.custom_description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[o.quantity,"  ",o.custom_unit_rate," ",o.custom_unit]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used ",o.usage_count," times"]})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[r.jsx("button",{onClick:()=>e(o),className:"px-2 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-xs rounded transition-colors",children:"Use"}),r.jsx("button",{onClick:()=>a(o.id),className:"px-2 py-1 bg-red-100 hover:bg-red-200 text-red-600 text-xs rounded transition-colors",title:"Delete preset",children:""})]})]})},o.id))})}const yj=({value:e,onChange:t,onSelect:s,placeholder:n="Search NRM 2 codes..."})=>{const[a,l]=j.useState(!1),[o,i]=j.useState(""),[c,d]=j.useState([]),[u,g]=j.useState(!1),[p,N]=j.useState(e||null),[m,y]=j.useState(""),[v,x]=j.useState(),f=async S=>{if(i(S),!S.trim()){d([]);return}try{g(!0);const k=await $d.search(S,20);d(k.data)}catch(k){console.error("Search failed:",k),d([])}finally{g(!1)}},h=async S=>{if(S.type==="work_section")try{const w=(await $d.getWorkSectionById(S.id)).data;N(w.code),y(w.title),x(w.unit),l(!1),i(""),d([]),t&&t(w),s&&s(w.code,w.title,w.unit)}catch(k){console.error("Failed to fetch work section:",k)}else N(S.code),y(S.title),l(!1),i(""),d([]),s&&s(S.code,S.title)},b=()=>{N(null),y(""),x(void 0),t&&t(null)};return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"relative",children:r.jsx("button",{onClick:()=>l(!a),type:"button",className:"w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:p?r.jsxs("div",{children:[r.jsx("div",{className:"font-mono font-semibold text-gray-900 text-sm",children:p}),r.jsx("div",{className:"text-gray-600 text-xs",children:m}),v&&r.jsxs("div",{className:"text-gray-500 text-xs",children:["Unit: ",v]})]}):r.jsx("div",{className:"text-gray-500 text-sm",children:n})}),p&&r.jsx("button",{onClick:S=>{S.stopPropagation(),b()},className:"text-gray-400 hover:text-gray-600 text-lg",children:""})]})})}),a&&r.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:[r.jsx("div",{className:"p-3 border-b border-gray-200",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:S=>f(S.target.value),placeholder:n,autoFocus:!0,className:"w-full px-3 py-2 border border-gray-300 rounded pl-8 focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"absolute left-2 top-2.5 text-gray-400",children:""})]})}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:u?r.jsxs("div",{className:"p-4 text-center text-gray-500 text-sm",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-2",children:"Searching..."})]}):o.trim()===""?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:r.jsx("p",{children:"Type to search NRM 2 codes"})}):c.length===0?r.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:r.jsx("p",{children:"No results found"})}):r.jsx("ul",{className:"space-y-0",children:c.map(S=>r.jsx("li",{children:r.jsx("button",{onClick:()=>h(S),type:"button",className:"w-full text-left px-4 py-2 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0",children:r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-mono font-semibold text-gray-900 text-sm",children:S.code}),r.jsx("div",{className:"text-gray-700 text-sm",children:S.title}),S.description&&r.jsx("div",{className:"text-gray-600 text-xs mt-1",children:S.description})]}),r.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:S.type})]})})},`${S.type}-${S.id}`))})})]}),a&&r.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>l(!1)})]})};function jj({isOpen:e,onClose:t,onAddFromLibrary:s,onAddCustom:n,costItems:a,categories:l,units:o,isSubmitting:i,costItemsLoading:c=!1}){const d=Es(),{incrementUsageCount:u,savePreset:g}=Qh(),[p,N]=j.useState("library"),[m,y]=j.useState(null),[v,x]=j.useState("1"),[f,h]=j.useState(""),[b,S]=j.useState(""),[k,w]=j.useState(""),[P,L]=j.useState("1"),[$,R]=j.useState(""),[A,M]=j.useState(""),[D,q]=j.useState(""),[I,E]=j.useState(""),[_,O]=j.useState(""),[z,Y]=j.useState(null),[Q,Z]=j.useState({}),[pe,Ce]=j.useState(!1),[te,Ne]=j.useState(""),ze=a.find(W=>W.id===m),F=()=>{y(null),x("1"),h(""),S(""),w(""),L("1"),R(""),M(""),q(""),E(""),O(""),Y(null),Z({})},ce=W=>{Y(W),O(W.code),W.unit&&R(W.unit),W.title&&!k&&w(W.title)},ft=W=>{w(W.custom_description),L(String(W.quantity)),R(W.custom_unit),M(String(W.custom_unit_rate)),q(W.category_id),N("custom"),u(W.id)},Se=()=>{F(),t()},Ps=()=>{const W={};return m||(W.item="Please select an item"),(v===""||isNaN(parseFloat(v))||parseFloat(v)<=0)&&(W.quantity="Quantity must be a valid number greater than 0"),f&&isNaN(parseFloat(f))&&(W.costOverride="Cost override must be a valid number"),Z(W),Object.keys(W).length===0},Mr=()=>{const W={};return k.trim()||(W.description="Description is required"),(P===""||isNaN(parseFloat(P))||parseFloat(P)<=0)&&(W.quantity="Quantity must be a valid number greater than 0"),$.trim()||(W.unit="Unit is required"),(A===""||isNaN(parseFloat(A))||parseFloat(A)<0)&&(W.unitRate="Unit rate must be a valid number 0 or greater"),D||(W.category="Category is required"),Z(W),Object.keys(W).length===0},T=async()=>{if(Ps())try{await s({cost_item_id:m,quantity:parseFloat(v),unit_cost_override:f?parseFloat(f):void 0,notes:b||void 0}),d.success("Line item added successfully"),F()}catch(W){const de=vt(W);d.error(de)}},ee=async()=>{if(Mr())try{const W=parseFloat(P);if(isNaN(W)||W===null){d.error("Quantity must be a valid number");return}const de=parseFloat(A);if(isNaN(de)||de===null){d.error("Unit Rate must be a valid number");return}const kt={custom_description:k,quantity:W,custom_unit:$,custom_unit_rate:de,category_id:Number(D),notes:I||void 0,nrm2_work_section_id:z==null?void 0:z.id,nrm2_code:_||void 0};console.log("Submitting custom item:",kt),await n(kt),d.success("Custom item added successfully"),F()}catch(W){const de=vt(W);d.error(de)}},G=()=>{if(!Mr())return;if(!te.trim()){d.error("Please enter a preset name");return}g(te,{name:te,description:`${k} - ${P}  ${A}`,custom_description:k,quantity:parseFloat(P),custom_unit:$,custom_unit_rate:parseFloat(A),category_id:Number(D)})?(d.success(`Preset "${te}" saved successfully`),Ce(!1),Ne("")):d.error("Failed to save preset")};return r.jsx(_s,{isOpen:e,onClose:Se,title:"Add Line Item",size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(pj,{tabs:[{id:"library",label:"From Library",icon:""},{id:"presets",label:"Quick Add",icon:""},{id:"custom",label:"Custom Item",icon:""}],activeTab:p,onChange:N}),p==="presets"&&r.jsx("div",{className:"space-y-4",children:r.jsx(gj,{onSelectPreset:ft})}),p==="library"&&r.jsxs("div",{className:"space-y-4",children:[Q.item&&r.jsx("div",{className:"text-sm text-red-600",children:Q.item}),r.jsx(fj,{items:a,isLoading:c,onSelectItem:y,selectedItemId:m}),ze&&r.jsxs("div",{className:"bg-khc-light rounded-lg p-4 border border-khc-primary space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700",children:ze.description}),r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Material: ",ze.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",value:v,onChange:W=>x(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),Q.quantity&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Override ()"}),r.jsx("input",{type:"number",value:f,onChange:W=>h(W.target.value),placeholder:"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),Q.costOverride&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.costOverride})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:b,onChange:W=>S(W.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]})]}),p==="custom"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NRM 2 Code (Optional)"}),r.jsx(yj,{value:_,onChange:ce}),z&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Selected: ",z.code," - ",z.title]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:k,onChange:W=>w(W.target.value),placeholder:"Enter item description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),k&&r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" From BOQ: ",z==null?void 0:z.code]}),Q.description&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:P,onChange:W=>L(W.target.value),placeholder:"Enter quantity",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),Q.quantity&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.quantity})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),r.jsx("input",{type:"text",value:$,onChange:W=>R(W.target.value),placeholder:"e.g., m2, sqm, item",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),Q.unit&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.unit})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Rate () *"}),r.jsx("input",{type:"number",value:A,onChange:W=>M(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),Q.unitRate&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.unitRate})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:D,onChange:W=>q(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",children:[r.jsx("option",{value:"",children:"Select category..."}),l.map(W=>r.jsx("option",{value:W.id,children:W.name},W.id))]}),Q.category&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:Q.category})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:I,onChange:W=>E(W.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]}),pe&&p==="custom"&&r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Save as Preset"}),r.jsx("input",{type:"text",value:te,onChange:W=>Ne(W.target.value),placeholder:"Preset name (e.g., 'Standard Labor Cost')",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",autoFocus:!0}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{Ce(!1),Ne("")},className:"flex-1 px-3 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Cancel"}),r.jsx("button",{onClick:G,className:"flex-1 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Preset"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-between",children:[p==="custom"&&!pe&&r.jsx("button",{onClick:()=>Ce(!0),className:"px-4 py-2 border border-blue-300 text-blue-600 hover:bg-blue-50 rounded-lg text-sm transition-colors",children:" Save as Preset"}),r.jsxs("div",{className:"flex gap-2 ml-auto",children:[r.jsx("button",{onClick:Se,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 text-sm",children:"Cancel"}),p!=="presets"&&r.jsx("button",{onClick:()=>{console.log("Add button clicked"),p==="library"?T():ee()},disabled:i||p==="library"&&!ze,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 text-sm",children:i?"Adding...":"Add Item"})]})]})]})})}function vj({data:e,onUpdateQuantity:t,onDeleteItem:s,onUpdateComponent:n,onAddComponent:a,onDeleteComponent:l,isLoading:o,isEmpty:i}){const[c,d]=j.useState(null),[u,g]=j.useState(null),[p,N]=j.useState(""),[m,y]=j.useState(""),[v,x]=j.useState(""),[f,h]=j.useState(!1),[b,S]=j.useState(new Set),k=R=>{const A=new Set(b);A.has(R)?A.delete(R):A.add(R),S(A)},w=async R=>{const A=parseFloat(p);if(isNaN(A)||A<=0){alert("Please enter a valid quantity");return}try{h(!0),await t(R,A),d(null),N("")}finally{h(!1)}},P=async R=>{const A=parseFloat(m),M=parseFloat(v);if(isNaN(A)||A<0){alert("Please enter a valid unit rate");return}if(isNaN(M)||M<=0){alert("Please enter a valid waste factor (e.g., 1.05 for 5% waste)");return}try{h(!0),await n(R,A,M),g(null),y(""),x("")}finally{h(!1)}},L=async R=>{if(window.confirm("Remove this item from the estimate?"))try{h(!0),await s(R)}finally{h(!1)}},$=async R=>{if(window.confirm("Remove this cost component?"))try{h(!0),await l(R)}finally{h(!1)}};return o?r.jsx("div",{className:"bg-white rounded-lg shadow",children:r.jsx("div",{className:"p-8 text-center text-gray-600",children:"Loading estimates..."})}):i?r.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:r.jsxs("div",{className:"text-gray-500",children:[r.jsx("p",{className:"text-lg font-semibold mb-2",children:" Build Your Estimate"}),r.jsx("p",{className:"text-sm",children:'No line items yet. Click "Add Line Item" or "Import from BOQ" to start building your estimate.'})]})}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-gray-100",children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"#"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"NRM2"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Qty"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Unit"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Component"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Unit Rate"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Waste"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Total"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e==null?void 0:e.elements.map(R=>r.jsxs(tn.Fragment,{children:[r.jsx("tr",{className:"bg-khc-light border-b",children:r.jsx("td",{colSpan:10,className:"px-4 py-3",children:r.jsxs("p",{className:"font-bold text-khc-primary text-sm",children:[R.bcis_code,". ",R.bcis_name]})})}),R.items.map((A,M)=>{Object.keys(A.components).length>0;const D=Object.entries(A.components).filter(([I,E])=>E),q=b.has(A.id);return r.jsxs(tn.Fragment,{children:[r.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-4 py-3 text-gray-600 w-8",children:M+1}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("p",{className:"font-medium text-gray-900",children:A.description}),A.notes&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.notes})]}),r.jsx("td",{className:"px-4 py-3 text-center",children:A.nrm2_code?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-semibold bg-blue-100 text-blue-800",children:A.nrm2_code}):r.jsx("span",{className:"text-gray-400 text-xs",children:""})}),r.jsx("td",{className:"px-4 py-3 text-right",children:c===A.id?r.jsx("input",{type:"number",step:"0.01",min:"0",value:p,onChange:I=>N(I.target.value),autoFocus:!0,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right"}):r.jsx("span",{className:"font-medium",children:A.quantity})}),r.jsx("td",{className:"px-4 py-3 text-center text-gray-600",children:A.unit}),r.jsxs("td",{colSpan:4,className:"px-4 py-3 text-right font-bold text-khc-primary",children:["",A.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx("div",{className:"flex gap-1 justify-center",children:c===A.id?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>w(A.id),disabled:f,className:"px-2 py-1 bg-khc-primary text-white text-xs rounded hover:bg-khc-secondary disabled:bg-gray-400",title:"Save quantity",children:""}),r.jsx("button",{onClick:()=>d(null),className:"px-2 py-1 border border-gray-300 text-xs rounded hover:bg-gray-100",title:"Cancel",children:""})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{d(A.id),N(A.quantity.toString())},className:"text-khc-primary hover:text-khc-secondary text-xs hover:underline",title:"Edit quantity",children:""}),r.jsx("button",{onClick:()=>k(A.id),className:"text-blue-600 hover:text-blue-700 text-xs hover:underline",title:q?"Collapse":"Expand",children:q?"":""}),r.jsx("button",{onClick:()=>L(A.id),disabled:f,className:"text-red-600 hover:text-red-700 text-xs hover:underline disabled:text-gray-400",title:"Delete item",children:""})]})})})]}),q&&r.jsxs(r.Fragment,{children:[D.length>0&&r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("td",{colSpan:2,className:"px-8 py-2 text-xs font-semibold text-gray-600",children:"Cost Components"}),r.jsx("td",{colSpan:2,className:"text-xs text-gray-600",children:"Unit Rate"}),r.jsx("td",{colSpan:1,className:"text-xs text-gray-600",children:"Waste"}),r.jsx("td",{className:"text-right text-xs font-semibold text-gray-600",children:"Total"}),r.jsx("td",{colSpan:2})]}),D.map(([I,E])=>r.jsxs("tr",{className:"bg-gray-50 border-b hover:bg-gray-100 transition",children:[r.jsx("td",{colSpan:2,className:"px-8 py-2",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-semibold bg-purple-100 text-purple-800 capitalize",children:I})}),r.jsx("td",{colSpan:2,className:"px-4 py-2 text-right",children:u===E.id?r.jsxs("div",{className:"flex gap-1 justify-end",children:[r.jsx("span",{className:"text-xs text-gray-600",children:""}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:m,onChange:_=>y(_.target.value),autoFocus:!0,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right text-xs",placeholder:"Rate"})]}):r.jsxs("span",{className:"text-sm font-medium",children:["",E.unit_rate.toFixed(2)]})}),r.jsx("td",{className:"px-4 py-2 text-right",children:u===E.id?r.jsx("input",{type:"number",step:"0.01",min:"0.01",value:v,onChange:_=>x(_.target.value),className:"w-16 px-2 py-1 border border-gray-300 rounded text-right text-xs",placeholder:"Waste"}):r.jsx("span",{className:"text-sm",children:E.waste_factor.toFixed(2)})}),r.jsxs("td",{className:"px-4 py-2 text-right font-semibold text-purple-600",children:["",E.total.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsx("td",{colSpan:2,className:"px-4 py-2 text-center",children:r.jsx("div",{className:"flex gap-1 justify-center",children:u===E.id?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>P(E.id),disabled:f,className:"px-2 py-1 bg-khc-primary text-white text-xs rounded hover:bg-khc-secondary disabled:bg-gray-400",title:"Save",children:""}),r.jsx("button",{onClick:()=>g(null),className:"px-2 py-1 border border-gray-300 text-xs rounded hover:bg-gray-100",title:"Cancel",children:""})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{g(E.id),y(E.unit_rate.toString()),x(E.waste_factor.toString())},className:"text-khc-primary hover:text-khc-secondary text-xs hover:underline",title:"Edit",children:""}),r.jsx("button",{onClick:()=>$(E.id),disabled:f,className:"text-red-600 hover:text-red-700 text-xs hover:underline disabled:text-gray-400",title:"Delete",children:""})]})})})]},E.id)),q&&r.jsx("tr",{className:"bg-blue-50 border-b",children:r.jsx("td",{colSpan:10,className:"px-8 py-2",children:r.jsxs("div",{className:"flex gap-2",children:[!A.components.material&&r.jsx("button",{onClick:()=>a(A.id,"material",0,1).catch(I=>alert("Error adding component: "+I.message)),disabled:f,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded disabled:bg-gray-400",children:"+ Material"}),!A.components.labor&&r.jsx("button",{onClick:()=>a(A.id,"labor",0,1).catch(I=>alert("Error adding component: "+I.message)),disabled:f,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded disabled:bg-gray-400",children:"+ Labor"}),!A.components.plant&&r.jsx("button",{onClick:()=>a(A.id,"plant",0,1).catch(I=>alert("Error adding component: "+I.message)),disabled:f,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded disabled:bg-gray-400",children:"+ Plant"})]})})})]})]},A.id)}),r.jsxs("tr",{className:"bg-khc-light border-b font-semibold",children:[r.jsxs("td",{colSpan:8,className:"px-4 py-3 text-right text-gray-700",children:[R.bcis_name," SUBTOTAL:"]}),r.jsxs("td",{className:"px-4 py-3 text-right font-bold text-khc-primary",children:["",R.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),r.jsx("td",{})]})]},R.bcis_code))})]})})})}function bj({isOpen:e,onClose:t,onSave:s,isLoading:n=!1}){const[a,l]=j.useState(""),[o,i]=j.useState(""),[c,d]=j.useState("standard"),[u,g]=j.useState(!1),[p,N]=j.useState({}),m=async()=>{const y={};if(a.trim()||(y.name="Template name is required"),a.length>255&&(y.name="Template name must be less than 255 characters"),Object.keys(y).length>0){N(y);return}try{await s(a,o,c,u),l(""),i(""),d("standard"),g(!1),N({}),t()}catch{}};return r.jsx(_s,{isOpen:e,onClose:t,title:"Save as Template",size:"md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),r.jsx("input",{type:"text",value:a,onChange:y=>{l(y.target.value),p.name&&N({...p,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Residential Interior",maxLength:255}),p.name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:p.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:o,onChange:y=>i(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary resize-none",placeholder:"Describe what this template is for...",rows:3,maxLength:500}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.length,"/500"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Type"}),r.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"quick",children:"Quick (5-10 items)"}),r.jsx("option",{value:"standard",children:"Standard (10-50 items)"}),r.jsx("option",{value:"complex",children:"Complex (50+ items)"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"isPublic",checked:u,onChange:y=>g(y.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),r.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Share template with team"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-900",children:" Save this estimate as a template to quickly create similar estimates in the future."})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:t,disabled:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),r.jsx("button",{onClick:m,disabled:n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:n?"Saving...":"Save Template"})]})]})})}function Nj({isOpen:e,onClose:t,onSelectTemplate:s,showShared:n=!0}){const{templates:a,isLoading:l,fetchTemplates:o}=Vh(),[i,c]=j.useState(""),[d,u]=j.useState("all");j.useEffect(()=>{e&&o(n)},[e,o,n]);const g=a.filter(p=>!(d!=="all"&&p.template_type!==d||i&&!p.name.toLowerCase().includes(i.toLowerCase())));return r.jsx(_s,{isOpen:e,onClose:t,title:"Template Library",size:"lg",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:p=>c(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("select",{value:d,onChange:p=>u(p.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"quick",children:"Quick"}),r.jsx("option",{value:"standard",children:"Standard"}),r.jsx("option",{value:"complex",children:"Complex"})]})]}),r.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:l?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading templates..."}):g.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:a.length===0?"No templates available":"No templates match your search"}):r.jsx("div",{className:"divide-y",children:g.map(p=>r.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),p.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:p.description}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${p.template_type==="quick"?"bg-blue-100 text-blue-700":p.template_type==="standard"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:p.template_type}),p.is_public&&r.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Shared"})]})]}),r.jsx("button",{onClick:()=>{s(p),t()},className:"ml-4 px-3 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded text-sm font-medium transition-colors",children:"Use"})]})},p.id))})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Close"})})]})})}function wj({isOpen:e,onClose:t,onSelectItem:s}){const n=Es(),{groups:a,isLoading:l,fetchGroups:o}=tc(),[i,c]=j.useState(""),[d,u]=j.useState(new Set);j.useEffect(()=>{e&&a.length===0&&o()},[e,a.length,o]);const g=j.useMemo(()=>{if(!a||a.length===0||i.trim()==="")return[];const m=i.toLowerCase(),y=[];return a.forEach(v=>{var x;(x=v.elements)==null||x.forEach(f=>{var h;(h=f.sub_elements)==null||h.forEach(b=>{var S;(S=b.work_sections)==null||S.forEach(k=>{var w;(k.code.toLowerCase().includes(m)||k.title.toLowerCase().includes(m)||(w=k.description)!=null&&w.toLowerCase().includes(m))&&y.push({id:k.id,code:k.code,title:k.title,description:k.description,unit:k.unit,sub_element_id:b.id})})})})}),y},[a,i]),p=m=>{const y=new Set(d);y.has(m)?y.delete(m):y.add(m),u(y)},N=()=>{if(d.size===0){n.error("Please select at least one item to import");return}const m=g.filter(y=>d.has(y.id));if(m.length===0){n.error("Selected items not found");return}s(m),u(new Set),c(""),n.success(`Imported ${m.length} item${m.length!==1?"s":""}`)};return r.jsx(_s,{isOpen:e,onClose:t,title:"Import from BOQ",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search BOQ Items"}),r.jsx("input",{type:"text",placeholder:"Search by code, description, or keyword...",value:i,onChange:m=>c(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),l?r.jsx("div",{className:"py-8 text-center text-gray-500",children:"Loading BOQ data..."}):i.trim()===""?r.jsxs("div",{className:"py-8 text-center text-gray-500",children:[r.jsx("p",{children:"Enter a search term to browse BOQ items"}),r.jsx("p",{className:"text-sm mt-2",children:'Try searching for "preliminary", "excavation", or "topsoil"'})]}):g.length===0?r.jsx("div",{className:"py-8 text-center text-gray-500",children:r.jsxs("p",{children:['No items found matching "',i,'"']})}):r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:g.map(m=>r.jsx("div",{onClick:()=>p(m.id),className:`p-3 border-b cursor-pointer hover:bg-blue-50 transition-colors ${d.has(m.id)?"bg-blue-100 border-l-4 border-l-blue-500":""}`,children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx("input",{type:"checkbox",checked:d.has(m.id),onChange:()=>p(m.id),className:"mt-1"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-sm text-gray-900",children:m.code}),r.jsx("div",{className:"text-sm text-gray-700 mt-0.5",children:m.title}),m.description&&r.jsx("div",{className:"text-xs text-gray-600 mt-1 truncate",children:m.description}),m.unit&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Unit: ",m.unit]})]})]})},m.id))}),d.size>0&&g.length>0&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-blue-900",children:["Selected: ",r.jsx("strong",{children:d.size})," item",d.size!==1?"s":""]}),r.jsx("div",{className:"mt-2 space-y-1 text-xs text-blue-800 max-h-20 overflow-y-auto",children:g.filter(m=>d.has(m.id)).map(m=>r.jsxs("div",{children:[" ",m.code," - ",m.title]},m.id))})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4 border-t",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),r.jsxs("button",{onClick:N,disabled:d.size===0||l,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 transition-colors",children:["Import Selected Items (",d.size,")"]})]})]})})}function Sj(){const{id:e}=ks();Be();const t=Es(),s=Number(e),{currentProject:n,fetchProjectById:a,isLoading:l}=Ht(),{estimates:o,estimateTotals:i,isLoading:c,error:d,fetchEstimates:u,addEstimate:g,updateEstimate:p,deleteEstimate:N}=Hh(),{saveTemplate:m,applyTemplate:y}=Vh(),{pendingWorkSection:v,setPendingWorkSection:x}=tc(),[f,h]=j.useState(!1),[b,S]=j.useState(!1),[k,w]=j.useState(!1),[P,L]=j.useState(!1),[$,R]=j.useState([]),[A,M]=j.useState([]),[D,q]=j.useState([]),[I,E]=j.useState(!1),[_,O]=j.useState(null),[z,Y]=j.useState(""),[Q,Z]=j.useState(!1),[pe,Ce]=j.useState(!1),[te,Ne]=j.useState(!1),[ze,F]=j.useState(null);j.useEffect(()=>{s&&(a(s),u(s),ft(),Se(),Ps(),ce())},[s,a,u]);const ce=async()=>{try{const V=await fetch(`/api/v1/projects/${s}/estimates/by-bcis-element`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(V.ok){const oe=await V.json();F(oe.data)}}catch(V){console.error("Failed to fetch BCIS grouped data:",V)}},ft=async()=>{E(!0);try{const V=await Oe.getAll();R(V.data.data||[])}catch(V){console.error("Failed to fetch cost items:",V)}finally{E(!1)}},Se=async()=>{try{const V=await B0.getAll();M(V.data.data||[])}catch(V){console.error("Failed to fetch units:",V)}},Ps=async()=>{try{const V=await Oe.getCategories();q(V.data.data||[])}catch(V){console.error("Failed to fetch categories:",V)}},Mr=async V=>{try{Z(!0),await g(s,{cost_item_id:V.cost_item_id,quantity:V.quantity,unit_cost_override:V.unit_cost_override,notes:V.notes}),h(!1)}finally{Z(!1)}},T=async V=>{try{Z(!0),await g(s,{custom_description:V.custom_description,quantity:V.quantity,custom_unit:V.custom_unit,custom_unit_rate:V.custom_unit_rate,category_id:V.category_id,notes:V.notes,nrm2_work_section_id:V.nrm2_work_section_id,nrm2_code:V.nrm2_code}),h(!1)}finally{Z(!1)}},ee=async V=>{try{Z(!0);for(const oe of V)await g(s,{custom_description:oe.title,quantity:1,custom_unit:oe.unit||"item",custom_unit_rate:0,category_id:9,nrm2_work_section_id:oe.id,nrm2_code:oe.code});t.success(`Added ${V.length} item${V.length!==1?"s":""} from BOQ`),S(!1)}catch(oe){t.error(vt(oe))}finally{Z(!1)}},G=async(V,oe)=>{try{Z(!0),await p(s,V,{quantity:oe}),t.success("Quantity updated successfully"),O(null),Y(""),Z(!1)}catch(rt){t.error(vt(rt)),Z(!1)}},W=async V=>{if(window.confirm("Remove this item from the estimate?"))try{Z(!0),await N(s,V),t.success("Item removed successfully"),Z(!1)}catch(oe){t.error(vt(oe)),Z(!1)}},de=V=>{if(!ze)return null;for(const oe of ze.elements)for(const rt of oe.items)for(const At of Object.values(rt.components))if(At&&At.id===V)return rt.id;return null},kt=async(V,oe,rt)=>{const At=de(V);if(!At){t.error("Could not find estimate for this component");return}try{if(Z(!0),!(await fetch(`/api/v1/projects/${s}/estimates/${At}/cost-components/${V}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({unit_rate:oe,waste_factor:rt})})).ok)throw new Error("Failed to update component");await ce(),t.success("Cost component updated"),Z(!1)}catch(Kt){t.error(vt(Kt)),Z(!1)}},Fe=async(V,oe,rt,At)=>{try{if(Z(!0),!(await fetch(`/api/v1/projects/${s}/estimates/${V}/cost-components`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({component_type:oe,unit_rate:rt,waste_factor:At})})).ok)throw new Error("Failed to add component");await ce(),t.success(`${oe.charAt(0).toUpperCase()+oe.slice(1)} cost component added`),Z(!1)}catch(Kt){t.error(vt(Kt)),Z(!1)}},Yh=async V=>{const oe=de(V);if(!oe){t.error("Could not find estimate for this component");return}if(window.confirm("Remove this cost component?"))try{if(Z(!0),!(await fetch(`/api/v1/projects/${s}/estimates/${oe}/cost-components/${V}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete component");await ce(),t.success("Cost component removed"),Z(!1)}catch(rt){t.error(vt(rt)),Z(!1)}},Xh=async(V,oe,rt,At)=>{try{Ne(!0);const Kt=o.map(Gt=>({cost_item_id:Gt.cost_item_id||void 0,custom_description:Gt.custom_description||void 0,custom_unit_rate:Gt.custom_unit_rate||void 0,custom_unit:Gt.custom_unit||void 0,category_id:Gt.category_id||void 0,quantity:Gt.quantity,unit_cost_override:Gt.unit_cost_override||void 0,notes:Gt.notes||void 0}));await m({name:V,description:oe,template_type:rt,is_public:At,line_items:Kt}),t.success("Template saved successfully"),w(!1)}catch{t.error("Failed to save template")}finally{Ne(!1)}},Zh=async V=>{try{Ne(!0),await y(V.id,s),t.success(`Template "${V.name}" loaded. Add quantities to create estimates.`)}catch{t.error("Failed to load template")}finally{Ne(!1)}};return(l||c||I)&&!n?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."}):n?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Build Estimate"}),r.jsx("p",{className:"text-gray-600 mt-2",children:n.name})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[r.jsx("button",{onClick:()=>L(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Load a saved estimate template",children:" Load Template"}),r.jsx("button",{onClick:()=>S(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-2 text-sm",title:"Import items from NRM 2 BOQ",children:" Import from BOQ"}),r.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg flex items-center gap-2",children:" Add Line Item"}),o.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Save current estimate as template",children:" Save Template"}),r.jsx(qh,{projectId:s,projectName:n.name,isDisabled:o.length===0})]})]})]}),d&&!pe&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[r.jsx("span",{children:d}),r.jsx("button",{onClick:()=>Ce(!0),className:"text-red-600 hover:text-red-800 font-bold",children:""})]}),r.jsx(wj,{isOpen:b,onClose:()=>S(!1),onSelectItem:ee}),r.jsx(jj,{isOpen:f,onClose:()=>{h(!1)},onAddFromLibrary:Mr,onAddCustom:T,costItems:$,categories:D,units:A,isSubmitting:Q,costItemsLoading:I}),r.jsx(bj,{isOpen:k,onClose:()=>w(!1),onSave:Xh,isLoading:te}),r.jsx(Nj,{isOpen:P,onClose:()=>L(!1),onSelectTemplate:Zh,showShared:!0}),r.jsx(vj,{data:ze,onUpdateQuantity:G,onDeleteItem:W,onUpdateComponent:kt,onAddComponent:Fe,onDeleteComponent:Yh,isLoading:c,isEmpty:o.length===0}),i&&r.jsxs("div",{className:"bg-khc-light rounded-lg p-6 border border-khc-primary",children:[r.jsx("h3",{className:"font-bold text-lg text-khc-primary mb-4",children:"Estimate Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{className:"font-semibold",children:["",i.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsxs("span",{children:["Contingency (",i.contingency_percentage,"%):"]}),r.jsxs("span",{className:"font-semibold",children:["",i.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex justify-between border-t border-khc-primary pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),r.jsxs("span",{className:"font-bold text-khc-primary text-lg",children:["",i.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),i.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 text-right pt-2",children:["",i.cost_per_m2.toLocaleString("en-GB",{maximumFractionDigits:2})," per m"]})]})]})]}):r.jsx("div",{className:"text-center py-12",children:"Project not found"})}const Kh=$r((e,t)=>({categories:[],subElements:[],costItems:[],units:[],isLoading:!1,error:null,selectedCategoryId:null,searchTerm:"",fetchCategories:async()=>{e({isLoading:!0,error:null});try{const s=await Oe.getCategories();e({categories:s.data.data||s.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to fetch categories";e({error:n,isLoading:!1})}},fetchSubElements:async s=>{e({isLoading:!0,error:null});try{const n=s?await Oe.getSubElementsByCategory(s):await Oe.getSubElements();e({subElements:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch sub-elements";e({error:a,isLoading:!1})}},fetchCostItems:async s=>{e({isLoading:!0,error:null});try{const n=await Oe.getCostItems(s);e({costItems:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch cost items";e({error:a,isLoading:!1})}},fetchUnits:async()=>{e({isLoading:!0,error:null});try{const s=await Oe.getUnits();e({units:s.data.data||s.data,isLoading:!1})}catch(s){const n=s instanceof Error?s.message:"Failed to fetch units";e({error:n,isLoading:!1})}},createCategory:async s=>{try{const n=await Oe.createCategory(s);return e(a=>({categories:[...a.categories,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create category";throw e({error:a}),n}},updateCategory:async(s,n)=>{try{const a=await Oe.updateCategory(s,n);return e(l=>({categories:l.categories.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update category";throw e({error:l}),a}},deleteCategory:async s=>{try{await Oe.deleteCategory(s),e(n=>({categories:n.categories.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete category";throw e({error:a}),n}},createSubElement:async s=>{try{const n=await Oe.createSubElement(s);return e(a=>({subElements:[...a.subElements,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create sub-element";throw e({error:a}),n}},updateSubElement:async(s,n)=>{try{const a=await Oe.updateSubElement(s,n);return e(l=>({subElements:l.subElements.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update sub-element";throw e({error:l}),a}},deleteSubElement:async s=>{try{await Oe.deleteSubElement(s),e(n=>({subElements:n.subElements.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete sub-element";throw e({error:a}),n}},createCostItem:async s=>{try{const n=await Oe.createCostItem(s);return e(a=>({costItems:[...a.costItems,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create cost item";throw e({error:a}),n}},updateCostItem:async(s,n)=>{try{const a=await Oe.updateCostItem(s,n);return e(l=>({costItems:l.costItems.map(o=>o.id===s?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update cost item";throw e({error:l}),a}},deleteCostItem:async s=>{try{await Oe.deleteCostItem(s),e(n=>({costItems:n.costItems.filter(a=>a.id!==s)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete cost item";throw e({error:a}),n}},setSelectedCategory:s=>{e({selectedCategoryId:s})},setSearchTerm:s=>{e({searchTerm:s})},clearError:()=>{e({error:null})},getSubElementsByCategory:s=>t().subElements.filter(n=>n.category_id===s),getCostItemsBySubElement:s=>t().costItems.filter(n=>n.sub_element_id===s),searchCostItems:s=>{const n=s.toLowerCase();return t().costItems.filter(a=>a.description.toLowerCase().includes(n)||a.code.toLowerCase().includes(n))}}));function kj(){const{isAdmin:e}=Qt(),{categories:t,subElements:s,costItems:n,units:a,isLoading:l,error:o,selectedCategoryId:i,searchTerm:c,fetchCategories:d,fetchSubElements:u,fetchCostItems:g,fetchUnits:p,setSelectedCategory:N,setSearchTerm:m,clearError:y,createCategory:v,updateCategory:x,deleteCategory:f,createSubElement:h,updateSubElement:b,deleteSubElement:S,createCostItem:k,updateCostItem:w,deleteCostItem:P}=Kh(),[L,$]=j.useState("costItems"),[R,A]=j.useState(!1),[M,D]=j.useState(null),[q,I]=j.useState({code:"",name:"",description:"",sort_order:0}),[E,_]=j.useState({category_id:0,code:"",name:"",description:"",sort_order:0}),[O,z]=j.useState({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05});j.useEffect(()=>{d(),u(),g(),p()},[d,u,g,p]);const Y=async()=>{try{M?(await x(M,q),D(null)):await v(q),I({code:"",name:"",description:"",sort_order:0}),A(!1)}catch(F){console.error("Failed to save category:",F)}},Q=async F=>{if(window.confirm("Delete this category? This will affect all sub-elements."))try{await f(F)}catch(ce){console.error("Failed to delete category:",ce)}},Z=async()=>{try{M?(await b(M,E),D(null)):await h(E),_({category_id:0,code:"",name:"",description:"",sort_order:0}),A(!1)}catch(F){console.error("Failed to save sub-element:",F)}},pe=async F=>{if(window.confirm("Delete this sub-element? This will affect all cost items."))try{await S(F)}catch(ce){console.error("Failed to delete sub-element:",ce)}},Ce=async()=>{try{M?(await w(M,O),D(null)):await k(O),z({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05}),A(!1)}catch(F){console.error("Failed to save cost item:",F)}},te=async F=>{if(window.confirm("Delete this cost item?"))try{await P(F)}catch(ce){console.error("Failed to delete cost item:",ce)}},Ne=i?s.filter(F=>F.category_id===i):s,ze=n.filter(F=>F.description.toLowerCase().includes(c.toLowerCase())||F.code.toLowerCase().includes(c.toLowerCase()));return e?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Cost Database Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage categories, sub-elements, and cost items"})]}),o&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[r.jsx("span",{children:o}),r.jsx("button",{onClick:y,className:"text-red-600 hover:text-red-800",children:""})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("div",{className:"flex gap-8",children:[r.jsx("button",{onClick:()=>$("categories"),className:`py-4 px-2 border-b-2 font-medium transition ${L==="categories"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Categories"}),r.jsx("button",{onClick:()=>$("subElements"),className:`py-4 px-2 border-b-2 font-medium transition ${L==="subElements"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Sub-Elements"}),r.jsx("button",{onClick:()=>$("costItems"),className:`py-4 px-2 border-b-2 font-medium transition ${L==="costItems"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Cost Items"})]})}),r.jsxs("div",{className:"space-y-4",children:[L==="categories"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Categories"}),r.jsx("button",{onClick:()=>{A(!R),D(null),I({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:R?"Cancel":"+ Add Category"})]}),R&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:q.code,onChange:F=>I({...q,code:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., CAT-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:q.name,onChange:F=>I({...q,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Category name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:q.description||"",onChange:F=>I({...q,description:F.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{A(!1),D(null),I({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Y,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:M?"Update":"Create"})]})]}),l&&!t.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading categories..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(F=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:F.code}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:F.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:F.description||"-"}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{I(F),D(F.id),A(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>Q(F.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},F.id))})]})})]}),L==="subElements"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Sub-Elements"}),r.jsx("button",{onClick:()=>{A(!R),D(null),_({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:R?"Cancel":"+ Add Sub-Element"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>N(null),className:`px-3 py-2 rounded-lg text-sm transition ${i===null?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All Categories"}),t.map(F=>r.jsx("button",{onClick:()=>N(F.id),className:`px-3 py-2 rounded-lg text-sm transition ${i===F.id?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:F.name},F.id))]}),R&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:E.category_id,onChange:F=>_({...E,category_id:Number(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select a category"}),t.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:E.code,onChange:F=>_({...E,code:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., SUB-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),r.jsx("input",{type:"text",value:E.name,onChange:F=>_({...E,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Sub-element name"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:E.description||"",onChange:F=>_({...E,description:F.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{A(!1),D(null),_({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Z,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:M?"Update":"Create"})]})]}),l&&!s.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading sub-elements..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:Ne.map(F=>{const ce=t.find(ft=>ft.id===F.category_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(ce==null?void 0:ce.name)||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:F.code}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:F.name}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{_(F),D(F.id),A(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>pe(F.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},F.id)})})]})})]}),L==="costItems"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Items"}),r.jsx("button",{onClick:()=>{A(!R),D(null),z({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:R?"Cancel":"+ Add Cost Item"})]}),r.jsx("div",{children:r.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:c,onChange:F=>m(F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})}),R&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Element *"}),r.jsxs("select",{value:O.sub_element_id,onChange:F=>z({...O,sub_element_id:Number(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select a sub-element"}),s.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),r.jsx("input",{type:"text",value:O.code,onChange:F=>z({...O,code:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., ITM-001"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:O.description,onChange:F=>z({...O,description:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Item description"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),r.jsxs("select",{value:O.unit_id,onChange:F=>z({...O,unit_id:Number(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:0,children:"Select unit"}),a.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste Factor"}),r.jsx("input",{type:"number",step:"0.01",value:O.waste_factor,onChange:F=>z({...O,waste_factor:parseFloat(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"1.05"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Required"}),r.jsx("input",{type:"checkbox",checked:O.is_contractor_required,onChange:F=>z({...O,is_contractor_required:F.target.checked}),className:"w-4 h-4 mt-2"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Cost *"}),r.jsx("input",{type:"number",step:"0.01",value:O.material_cost,onChange:F=>z({...O,material_cost:parseFloat(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Cost"}),r.jsx("input",{type:"number",step:"0.01",value:O.management_cost,onChange:F=>z({...O,management_cost:parseFloat(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Cost"}),r.jsx("input",{type:"number",step:"0.01",value:O.contractor_cost,onChange:F=>z({...O,contractor_cost:parseFloat(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>{A(!1),D(null),z({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:M?"Update":"Create"})]})]}),l&&!n.length?r.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading cost items..."}):r.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:r.jsxs("table",{className:"w-full min-w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Sub-Element"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Material Cost"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Mgmt Cost"}),r.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Contractor Cost"}),r.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:ze.map(F=>{const ce=s.find(ft=>ft.id===F.sub_element_id);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:F.code}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:F.description}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(ce==null?void 0:ce.name)||"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",F.material_cost.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",F.management_cost.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",F.contractor_cost.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("button",{onClick:()=>{z(F),D(F.id),A(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),r.jsx("button",{onClick:()=>te(F.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},F.id)})})]})})]})]})]}):r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access cost management"})})}const Wr=e=>{var t;if(e instanceof U0){const s=(t=e.response)==null?void 0:t.data;return(s==null?void 0:s.message)||e.message||"Unknown error"}return"Unknown error"},Hr={getReportData:async e=>{try{return(await B.get(`/projects/${e}/report`)).data.data}catch(t){throw new Error(`Failed to fetch report data: ${Wr(t)}`)}},getHistoricAnalysis:async e=>{try{return[]}catch(t){throw new Error(`Failed to fetch historic analysis: ${Wr(t)}`)}},getProjectActuals:async e=>{try{return(await B.get(`/projects/${e}/actuals`)).data.data}catch(t){throw new Error(`Failed to fetch project actuals: ${Wr(t)}`)}},createProjectActual:async(e,t)=>{try{return(await B.post(`/projects/${e}/actuals`,t)).data.data}catch(s){throw new Error(`Failed to create project actual: ${Wr(s)}`)}},updateProjectActual:async(e,t,s)=>{try{return(await B.put(`/projects/${e}/actuals/${t}`,s)).data.data}catch(n){throw new Error(`Failed to update project actual: ${Wr(n)}`)}},deleteProjectActual:async(e,t)=>{try{await B.delete(`/projects/${e}/actuals/${t}`)}catch(s){throw new Error(`Failed to delete project actual: ${Wr(s)}`)}}},hl=$r((e,t)=>({reportData:null,historicAnalysis:[],projectActuals:[],isLoading:!1,error:null,fetchReportData:async s=>{e({isLoading:!0,error:null});try{const n=await Hr.getReportData(s);e({reportData:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch report";e({error:a,isLoading:!1})}},fetchHistoricAnalysis:async s=>{e({isLoading:!0,error:null});try{const n=await Hr.getHistoricAnalysis(s);e({historicAnalysis:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch historic analysis";e({error:a,isLoading:!1})}},fetchProjectActuals:async s=>{e({isLoading:!0,error:null});try{const n=await Hr.getProjectActuals(s);e({projectActuals:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch project actuals";e({error:a,isLoading:!1})}},addProjectActual:async(s,n)=>{try{const a=await Hr.createProjectActual(s,n);return e(l=>({projectActuals:[...l.projectActuals,a]})),a}catch(a){const l=a instanceof Error?a.message:"Failed to add project actual";throw e({error:l}),a}},updateProjectActual:async(s,n,a)=>{try{const l=await Hr.updateProjectActual(s,n,a);return e(o=>({projectActuals:o.projectActuals.map(i=>i.id===n?l:i)})),l}catch(l){const o=l instanceof Error?l.message:"Failed to update project actual";throw e({error:o}),l}},deleteProjectActual:async(s,n)=>{try{await Hr.deleteProjectActual(s,n),e(a=>({projectActuals:a.projectActuals.filter(l=>l.id!==n)}))}catch(a){const l=a instanceof Error?a.message:"Failed to delete project actual";throw e({error:l}),a}},clearError:()=>{e({error:null})},clearReportData:()=>{e({reportData:null})}}));function be({variant:e="primary",size:t="md",loading:s=!1,fullWidth:n=!1,disabled:a,className:l="",children:o,...i}){const c={primary:"bg-khc-primary hover:bg-khc-secondary text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",outline:"border border-khc-primary text-khc-primary hover:bg-khc-light"},d={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return r.jsx("button",{...i,disabled:a||s,className:`
        rounded-lg font-medium transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${c[e]}
        ${d[t]}
        ${n?"w-full":""}
        ${l}
      `,children:s?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),o]}):o})}function Kl({label:e,error:t,helperText:s,className:n="",id:a,...l}){const o=a||`input-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:"space-y-1",children:[e&&r.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[e,l.required&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),r.jsx("input",{...l,id:o,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${l.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${n}
        `}),t&&r.jsx("p",{className:"text-sm text-red-600",children:t}),s&&!t&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}function Bd({label:e,error:t,helperText:s,options:n,placeholder:a,className:l="",id:o,...i}){const c=o||`select-${Math.random().toString(36).substr(2,9)}`;return r.jsxs("div",{className:"space-y-1",children:[e&&r.jsxs("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:[e,i.required&&r.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),r.jsxs("select",{...i,id:c,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${i.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${l}
        `,children:[a&&r.jsx("option",{value:"",disabled:!0,selected:!0,children:a}),n.map(d=>r.jsx("option",{value:d.value,children:d.label},d.value))]}),t&&r.jsx("p",{className:"text-sm text-red-600",children:t}),s&&!t&&r.jsx("p",{className:"text-sm text-gray-500",children:s})]})}function re({children:e,title:t,subtitle:s,className:n="",hover:a=!1}){return r.jsxs("div",{className:`
        bg-white rounded-lg shadow-md p-6
        ${a?"hover:shadow-lg transition-shadow duration-200 cursor-pointer":""}
        ${n}
      `,children:[t&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),s&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]}),e]})}function zd({children:e,variant:t="default",size:s="md"}){const n={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"},a={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"};return r.jsx("span",{className:`
        inline-block rounded-full font-medium
        ${n[t]}
        ${a[s]}
      `,children:e})}function pl({size:e="md",text:t="Loading..."}){const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},n={sm:"text-sm",md:"text-base",lg:"text-lg"};return r.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:`
          border-4 border-gray-200 border-t-khc-primary rounded-full animate-spin
          ${s[e]}
        `}),t&&r.jsx("p",{className:`text-gray-600 ${n[e]}`,children:t})]})}function Ur({message:e,onDismiss:t,autoClose:s=!1,autoCloseDuration:n=5e3}){const[a,l]=j.useState(!0);if(j.useEffect(()=>{if(s&&a){const i=setTimeout(()=>{l(!1),t==null||t()},n);return()=>clearTimeout(i)}},[s,n,a,t]),!a)return null;const o=()=>{l(!1),t==null||t()};return r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 pt-0.5",children:r.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium text-red-800",children:e})}),t&&r.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-800 transition",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function Cj(e,t="report.csv"){const s=[];if(s.push(["KHConstruct Report"]),s.push([""]),s.push(["Project Name",e.project_name]),s.push(["Project ID",e.project_id.toString()]),e.completion_date&&s.push(["Completion Date",e.completion_date]),s.push([""]),s.push(["Cost Summary"]),s.push(["","Estimated",e.estimated_costs.grand_total.toString()]),e.actual_costs){s.push(["","Actual",e.actual_costs.grand_total.toString()]);const a=e.actual_costs.grand_total-e.estimated_costs.grand_total;s.push(["","Variance",a.toString()])}s.push([""]),s.push(["Cost Breakdown"]),s.push(["Subtotal",e.estimated_costs.subtotal.toString()]),s.push(["Contingency",e.estimated_costs.contingency.toString()]),s.push(["Grand Total",e.estimated_costs.grand_total.toString()]),e.estimated_costs.cost_per_m2&&s.push(["Cost per m",e.estimated_costs.cost_per_m2.toString()]),s.push([""]),s.push(["Line Items"]),s.push(["Description","Category","Estimated","Actual","Variance"]),e.line_items.forEach(a=>{var l,o;s.push([a.description,a.category,a.estimated.toString(),((l=a.actual)==null?void 0:l.toString())||"",((o=a.variance)==null?void 0:o.toString())||""])}),e.notes&&(s.push([""]),s.push(["Notes",e.notes]));const n=s.map(a=>a.map(l=>`"${l}"`).join(",")).join(`
`);Gh(n,t,"text/csv")}function Ej(e,t="report.json"){const s=JSON.stringify(e,null,2);Gh(s,t,"application/json")}function Gh(e,t,s){const n=new Blob([e],{type:s}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}function Jh(e){return`
    <!DOCTYPE html>
    <html>
      <head>
        <title>KHConstruct Report - ${e.project_name}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { background-color: #2C5F8D; color: white; padding: 20px; margin-bottom: 20px; }
          .section { margin-bottom: 30px; }
          .section-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #2C5F8D; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background-color: #f2f2f2; font-weight: bold; }
          tr:hover { background-color: #f5f5f5; }
          .summary { display: flex; gap: 40px; }
          .summary-item { flex: 1; }
          .summary-item label { font-weight: bold; display: block; margin-bottom: 5px; }
          .summary-item value { font-size: 16px; color: #2C5F8D; }
          .variance-under { color: green; }
          .variance-over { color: red; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>KHConstruct Project Report</h1>
          <p>Project: ${e.project_name}</p>
          ${e.completion_date?`<p>Completion Date: ${new Date(e.completion_date).toLocaleDateString()}</p>`:""}
        </div>

        <div class="section">
          <div class="section-title">Cost Summary</div>
          <div class="summary">
            <div class="summary-item">
              <label>Estimated Total:</label>
              <div>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
            </div>
            ${e.actual_costs?`
              <div class="summary-item">
                <label>Actual Total:</label>
                <div>${e.actual_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
              </div>
              <div class="summary-item">
                <label>Variance:</label>
                <div class="${e.actual_costs.grand_total>e.estimated_costs.grand_total?"variance-over":"variance-under"}">
                  ${(e.actual_costs.grand_total-e.estimated_costs.grand_total).toLocaleString("en-GB",{maximumFractionDigits:2})}
                </div>
              </div>
            `:""}
          </div>
        </div>

        <div class="section">
          <div class="section-title">Cost Breakdown</div>
          <table>
            <tr>
              <th>Item</th>
              <th>Amount</th>
            </tr>
            <tr>
              <td>Subtotal</td>
              <td>${e.estimated_costs.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr>
              <td>Contingency</td>
              <td>${e.estimated_costs.contingency.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr style="font-weight: bold;">
              <td>Grand Total</td>
              <td>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
          </table>
        </div>

        <div class="section">
          <div class="section-title">Line Items</div>
          <table>
            <tr>
              <th>Description</th>
              <th>Category</th>
              <th>Estimated</th>
              ${e.actual_costs?"<th>Actual</th><th>Variance</th>":""}
            </tr>
            ${e.line_items.map(t=>`
              <tr>
                <td>${t.description}</td>
                <td>${t.category}</td>
                <td>${t.estimated.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                ${e.actual_costs&&t.actual?`
                  <td>${t.actual.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                  <td class="${t.variance&&t.variance>0?"variance-over":"variance-under"}">
                    ${t.variance?""+t.variance.toLocaleString("en-GB",{maximumFractionDigits:2}):"-"}
                  </td>
                `:""}
              </tr>
            `).join("")}
          </table>
        </div>

        ${e.notes?`
          <div class="section">
            <div class="section-title">Notes</div>
            <p>${e.notes}</p>
          </div>
        `:""}

        <div style="margin-top: 40px; text-align: center; color: #999; font-size: 12px;">
          <p>Generated by KHConstruct on ${new Date().toLocaleDateString()}</p>
        </div>
      </body>
    </html>
  `}function _j(e){const t=Jh(e),s=window.open("","","height=800,width=1000");s&&(s.document.write(t),s.document.close(),s.print())}function Pj(){const{id:e}=ks();Be();const t=Number(e),{reportData:s,isLoading:n,error:a,fetchReportData:l,clearReportData:o,clearError:i}=hl(),[c,d]=j.useState("csv"),[u,g]=j.useState(!1);j.useEffect(()=>(t&&l(t),()=>{o()}),[t,l,o]);const p=async()=>{if(s)try{g(!0);const m=new Date().toISOString().split("T")[0],y=`report-${s.project_name}-${m}`;switch(c){case"csv":Cj(s,`${y}.csv`);break;case"json":Ej(s,`${y}.json`);break;case"html":const v=Jh(s),x=new Blob([v],{type:"text/html"}),f=URL.createObjectURL(x),h=document.createElement("a");h.href=f,h.download=`${y}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(f);break}g(!1)}catch(m){console.error("Export failed:",m),g(!1)}},N=()=>{s&&_j(s)};return n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading report..."})}):s?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:s.project_name}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Project Report"})]}),a&&r.jsx(Ur,{message:a,onDismiss:i}),r.jsx(re,{title:"Export Report",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"csv",checked:c==="csv",onChange:m=>d(m.target.value)}),r.jsx("span",{children:"Export as CSV"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"json",checked:c==="json",onChange:m=>d(m.target.value)}),r.jsx("span",{children:"Export as JSON"})]}),r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",value:"html",checked:c==="html",onChange:m=>d(m.target.value)}),r.jsx("span",{children:"Export as HTML"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{variant:"primary",onClick:p,loading:u,children:" Download Report"}),r.jsx(be,{variant:"secondary",onClick:N,children:" Print to PDF"})]})]})}),r.jsx(re,{title:"Cost Summary",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:X(s.estimated_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contingency:"}),r.jsx("span",{className:"font-semibold",children:X(s.estimated_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:X(s.estimated_costs.grand_total)})]}),s.estimated_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",X(s.estimated_costs.cost_per_m2)]})]}),s.actual_costs&&r.jsxs("div",{className:"space-y-3 border-l pl-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:X(s.actual_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Contingency:"}),r.jsx("span",{className:"font-semibold",children:X(s.actual_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:X(s.actual_costs.grand_total)})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),r.jsx("span",{className:`font-bold text-lg ${s.actual_costs.grand_total>s.estimated_costs.grand_total?"text-red-600":"text-green-600"}`,children:X(s.actual_costs.grand_total-s.estimated_costs.grand_total)})]})}),s.actual_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",X(s.actual_costs.cost_per_m2)]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(re,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Project ID"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:s.project_id})]}),s.completion_date&&r.jsxs(re,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Completion Date"}),r.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:Bh(s.completion_date)})]})]}),r.jsx(re,{title:"Line Items Breakdown",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Estimated"}),s.actual_costs&&r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Variance"})]})]})}),r.jsx("tbody",{className:"divide-y",children:s.line_items.map((m,y)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:m.description}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:m.category}),r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:X(m.estimated)}),s.actual_costs&&r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-4 py-3 text-right font-mono",children:m.actual?X(m.actual):"-"}),r.jsx("td",{className:`px-4 py-3 text-right font-mono ${m.variance&&m.variance>0?"text-red-600":"text-green-600"}`,children:m.variance?X(m.variance):"-"})]})]},y))})]})})}),s.notes&&r.jsx(re,{title:"Notes",children:r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.notes})})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Report data not available"}),r.jsx(J,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to Projects"})]})}function Lj(){const{historicAnalysis:e,isLoading:t,error:s,fetchHistoricAnalysis:n,clearError:a}=hl(),{categories:l,fetchCategories:o}=Kh(),[i,c]=j.useState(""),[d,u]=j.useState("all");j.useEffect(()=>{o(),n()},[o,n]);const g=y=>{c(y),y?n(Number(y)):n()},p=e.filter(y=>!(d!=="all"&&y.region!==d)),N=["all",...new Set(e.map(y=>y.region).filter(y=>!!y))],m=p.reduce((y,v)=>{const x=v.building_age_range;return y[x]||(y[x]=[]),y[x].push(v),y},{});return t?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading cost analysis..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Historic Cost Analysis"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View cost benchmarks based on completed projects in your region"})]}),s&&r.jsx(Ur,{message:s,onDismiss:a}),r.jsx(re,{title:"Filters",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Bd,{label:"Category",value:i,onChange:y=>g(y.target.value),options:[{value:"",label:"All Categories"},...l.map(y=>({value:y.id.toString(),label:y.name}))]}),r.jsx(Bd,{label:"Region",value:d,onChange:y=>u(y.target.value),options:N.map(y=>({value:y,label:y==="all"?"All Regions":y}))})]})}),p.length===0?r.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("p",{className:"text-blue-800 font-semibold mb-2",children:"No Historic Cost Analysis Data"}),r.jsx("p",{className:"text-blue-700 text-sm",children:"Historic cost analysis will be available once completed projects with actual costs are recorded in the system."})]}):r.jsx("div",{className:"space-y-6",children:Object.entries(m).sort(([y],[v])=>{const x={"0-10":0,"10-20":1,"20-30":2,"30+":3};return(x[y]??999)-(x[v]??999)}).map(([y,v])=>r.jsx(re,{title:`Building Age: ${y} years`,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Condition Rating"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Cost per m"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Std Deviation"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Sample Size"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Confidence"})]})}),r.jsx("tbody",{className:"divide-y",children:v.map(x=>{const f=x.sample_size>=3?"High":"Low";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:x.condition_rating_range}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:X(x.cost_per_m2)}),r.jsxs("td",{className:"px-4 py-3 text-right font-mono text-gray-600",children:["",X(x.std_deviation)]}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsxs(zd,{variant:x.sample_size>=3?"success":"warning",children:[x.sample_size," projects"]})}),r.jsx("td",{className:"px-4 py-3 text-center",children:r.jsx(zd,{variant:f==="High"?"success":"warning",children:f})})]},x.id)})})]})})},y))}),r.jsx(re,{children:r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:r.jsx("strong",{children:"How to interpret this data:"})}),r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Cost per m:"})," Average cost for this category based on similar projects"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Std Deviation:"})," Expected variance from the average cost"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Sample Size:"})," Number of completed projects this benchmark is based on"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Confidence:"})," Higher confidence indicates more reliable data (3+ projects)"]})]})]})})]})}function Rj(){const{id:e}=ks();Be();const t=Number(e),{projectActuals:s,isLoading:n,error:a,fetchProjectActuals:l,updateProjectActual:o,deleteProjectActual:i,clearError:c}=hl(),{currentProject:d,fetchProjectById:u}=Ht(),[g,p]=j.useState(!1),[N,m]=j.useState(null),[y,v]=j.useState({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]}),[x,f]=j.useState(!1);j.useEffect(()=>{t&&(u(t),l(t))},[t,u,l]);const h=w=>{if(w){const P=s.find(L=>L.id===w);P&&(m(w),v({actual_quantity:P.actual_quantity,actual_cost:P.actual_cost,variance_reason:P.variance_reason||"",completed_date:P.completed_date}))}else m(null),v({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]});p(!0)},b=()=>{p(!1),m(null),v({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]})},S=async()=>{if(!(y.actual_quantity<=0||y.actual_cost<0))try{f(!0),N?await o(t,N,{actual_quantity:y.actual_quantity,actual_cost:y.actual_cost,variance_reason:y.variance_reason||void 0,completed_date:y.completed_date}):console.warn("Adding new actual cost requires cost item selection"),f(!1),b()}catch(w){f(!1),console.error("Failed to save actual cost:",w)}},k=async w=>{if(confirm("Are you sure you want to delete this actual cost record?"))try{await i(t,w)}catch(P){console.error("Failed to delete actual cost:",P)}};return n?r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading project actuals..."})}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Actuals"}),r.jsx("p",{className:"text-gray-600 mt-2",children:d==null?void 0:d.name})]}),a&&r.jsx(Ur,{message:a,onDismiss:c}),r.jsx(re,{children:r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:r.jsx("strong",{children:"Record Actual Costs:"})}),r.jsx("p",{children:"Enter actual quantities and costs for completed work items. The system will calculate variances between estimated and actual costs to help track project performance."})]})}),s.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[r.jsx("p",{className:"text-gray-600",children:"No actual cost records yet"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Complete project work items and record actual costs here"})]}):r.jsx(re,{title:"Recorded Actuals",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Completed Date"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Quantity"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Cost"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Variance Reason"}),r.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:s.map(w=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:Bh(w.completed_date)}),r.jsx("td",{className:"px-4 py-3 text-right",children:w.actual_quantity}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:X(w.actual_cost)}),r.jsx("td",{className:"px-4 py-3 text-gray-600 text-xs",children:w.variance_reason||r.jsx("span",{className:"text-gray-400",children:"-"})}),r.jsxs("td",{className:"px-4 py-3 text-center space-x-2 flex justify-center",children:[r.jsx("button",{onClick:()=>h(w.id),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition",children:"Edit"}),r.jsx("button",{onClick:()=>k(w.id),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition",children:"Delete"})]})]},w.id))})]})})}),r.jsx(_s,{isOpen:g,onClose:b,title:"Edit Actual Cost",children:r.jsxs("div",{className:"space-y-4 p-4",children:[r.jsx(Kl,{label:"Actual Quantity",type:"number",min:"0",step:"0.01",value:y.actual_quantity,onChange:w=>v({...y,actual_quantity:parseFloat(w.target.value)||0}),required:!0}),r.jsx(Kl,{label:"Actual Cost ()",type:"number",min:"0",step:"0.01",value:y.actual_cost,onChange:w=>v({...y,actual_cost:parseFloat(w.target.value)||0}),required:!0}),r.jsx(Kl,{label:"Completed Date",type:"date",value:y.completed_date,onChange:w=>v({...y,completed_date:w.target.value}),required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variance Reason"}),r.jsx("textarea",{value:y.variance_reason,onChange:w=>v({...y,variance_reason:w.target.value}),placeholder:"Explain any significant variance from estimate",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(be,{variant:"secondary",onClick:b,disabled:x,children:"Cancel"}),r.jsx(be,{variant:"primary",onClick:S,loading:x,children:"Save Changes"})]})]})})]})}function Tj(){var P,L,$;const{id:e}=ks(),t=Be(),s=Number(e),{reportData:n,isLoading:a,error:l,fetchReportData:o,clearError:i}=hl(),{currentProject:c,fetchProjectById:d}=Ht(),[u,g]=j.useState("none"),[p,N]=j.useState("csv"),[m,y]=j.useState({});j.useEffect(()=>{s&&(d(s),o(s))},[s,d,o]),j.useEffect(()=>{if(n&&n.line_items){const R={};u==="none"?y({}):(n.line_items.forEach(A=>{let M="";u==="pdCode"?M=A.category||"Uncategorized":u==="areaCode"?M="Area: "+A.category||"Uncategorized":u==="projectNumber"?M=String(s)||"Unknown":u==="itemDescription"&&(M=A.description||"Uncategorized"),M&&(R[M]=(R[M]||0)+(A.estimated||0))}),y(R))}},[n,u,s]);const v=()=>{if(!n)return;const R=new Date().toISOString().split("T")[0],A=`project-cost-total-${(c==null?void 0:c.name)||"project"}-${R}`,M={projectName:n.project_name,projectId:n.project_id,contingencyPercentage:10,estimatedCosts:n.estimated_costs,actualCosts:n.actual_costs,lineItems:n.line_items,breakdown:m,exportedAt:new Date().toISOString()};p==="csv"?x(M,`${A}.csv`):f(M,`${A}.json`)},x=(R,A)=>{var q,I,E,_,O;const M=[];M.push(["PROJECT COST TOTAL REPORT"]),M.push([]),M.push(["Project Name",R.projectName]),M.push(["Project ID",String(R.projectId)]),M.push(["Contingency %",String(R.contingencyPercentage)+"%"]),M.push([]),M.push(["COST SUMMARY"]),M.push(["Estimated Subtotal",String((q=R.estimatedCosts)==null?void 0:q.subtotal)]),M.push(["Contingency Amount",String((I=R.estimatedCosts)==null?void 0:I.contingency)]),M.push(["Estimated Total",String((E=R.estimatedCosts)==null?void 0:E.grand_total)]),(_=R.estimatedCosts)!=null&&_.cost_per_m2&&M.push(["Cost per m",String(R.estimatedCosts.cost_per_m2)]),R.actualCosts&&(M.push([]),M.push(["Actual Subtotal",String(R.actualCosts.subtotal)]),M.push(["Actual Contingency",String(R.actualCosts.contingency)]),M.push(["Actual Total",String(R.actualCosts.grand_total)]),R.actualCosts.cost_per_m2&&M.push(["Actual Cost per m",String(R.actualCosts.cost_per_m2)])),M.push([]),M.push(["LINE ITEMS"]),M.push(["Description","Category","Estimated","Actual","Variance"]),(O=R.lineItems)==null||O.forEach(z=>{M.push([z.description||"",z.category||"",String(z.estimated||0),String(z.actual||""),String(z.variance||"")])});const D=M.map(z=>z.map(Y=>`"${Y}"`).join(",")).join(`
`);h(D,A,"text/csv")},f=(R,A)=>{const M=JSON.stringify(R,null,2);h(M,A,"application/json")},h=(R,A,M)=>{const D=new Blob([R],{type:M}),q=URL.createObjectURL(D),I=document.createElement("a");I.href=q,I.download=A,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(q)};if(a)return r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsx(pl,{size:"lg",text:"Loading project costs..."})});if(!n)return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Cost data not available"}),r.jsx(be,{variant:"secondary",onClick:()=>t(`/projects/${s}`),children:"Back to Project"})]});const b=((P=n.estimated_costs)==null?void 0:P.grand_total)||0,S=(L=n.actual_costs)==null?void 0:L.grand_total,k=10,w=($=n.estimated_costs)==null?void 0:$.cost_per_m2;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Total"}),r.jsx("p",{className:"text-gray-600 mt-2",children:n.project_name})]}),l&&r.jsx(Ur,{message:l,onDismiss:i}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(re,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Contingency %"}),r.jsxs("p",{className:"text-4xl font-bold text-khc-primary mt-2",children:[k,"%"]})]}),r.jsxs(re,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Project Total"}),r.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:X(b)}),S&&r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Actual: ",X(S)]})]}),r.jsxs(re,{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Cost per m"}),r.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:w?X(w):"N/A"})]})]}),r.jsx(re,{title:"Cost Breakdown",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group By"}),r.jsxs("select",{value:u,onChange:R=>g(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[r.jsx("option",{value:"none",children:"No Grouping (Total Only)"}),r.jsx("option",{value:"pdCode",children:"PD Code / Category"}),r.jsx("option",{value:"areaCode",children:"Area Code"}),r.jsx("option",{value:"projectNumber",children:"Project Number"}),r.jsx("option",{value:"itemDescription",children:"Item Description"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),r.jsxs("select",{value:p,onChange:R=>N(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[r.jsx("option",{value:"csv",children:"CSV (Excel)"}),r.jsx("option",{value:"json",children:"JSON (Data)"})]})]})]}),r.jsx(be,{variant:"primary",onClick:v,fullWidth:!0,children:" Export Cost Total"})]})}),u!=="none"&&Object.keys(m).length>0&&r.jsx(re,{title:"Cost Breakdown by Category",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Amount"}),r.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"% of Total"})]})}),r.jsx("tbody",{className:"divide-y",children:Object.entries(m).sort(([,R],[,A])=>A-R).map(([R,A])=>{const M=(A/b*100).toFixed(1);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:R}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:X(A)}),r.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:[M,"%"]})]},R)})}),r.jsx("tfoot",{className:"bg-gray-50 border-t-2",children:r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 font-bold text-gray-900",children:"Total"}),r.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-khc-primary text-lg",children:X(b)}),r.jsx("td",{className:"px-4 py-3 text-right font-bold text-gray-600",children:"100%"})]})})]})})}),r.jsx(re,{title:"Summary",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),r.jsx("span",{className:"font-semibold",children:X(n.estimated_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-700",children:["Contingency (",k,"%):"]}),r.jsx("span",{className:"font-semibold",children:X(n.estimated_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:X(b)})]}),n.estimated_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",X(n.estimated_costs.cost_per_m2)]})]}),S&&n.actual_costs&&r.jsxs("div",{className:"space-y-3 border-l pl-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Actual Subtotal:"}),r.jsx("span",{className:"font-semibold",children:X(n.actual_costs.subtotal)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Actual Contingency:"}),r.jsx("span",{className:"font-semibold",children:X(n.actual_costs.contingency)})]}),r.jsxs("div",{className:"flex justify-between border-t pt-3",children:[r.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),r.jsx("span",{className:"font-bold text-khc-primary text-lg",children:X(S)})]}),r.jsx("div",{className:"pt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),r.jsx("span",{className:`font-bold text-lg ${S>b?"text-red-600":"text-green-600"}`,children:X(S-b)})]})}),n.actual_costs.cost_per_m2&&r.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Actual cost per m: ",X(n.actual_costs.cost_per_m2)]})]})]})})]})}function Aj(){const{user:e}=Qt(),[t,s]=j.useState([]),[n,a]=j.useState(!0),[l,o]=j.useState(null),[i,c]=j.useState(null),[d,u]=j.useState(null),[g,p]=j.useState(!1);if((e==null?void 0:e.role)!=="admin")return r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-red-700",children:"Only administrators can access user management."})]})});j.useEffect(()=>{N()},[]);const N=async()=>{var x,f;try{a(!0),o(null);const h=await br.getAllUsers();s(h.data.users)}catch(h){o(((f=(x=h.response)==null?void 0:x.data)==null?void 0:f.error)||"Failed to load users")}finally{a(!1)}},m=x=>{c(x.id),u({id:x.id,username:x.username,email:x.email,role:x.role,is_active:x.is_active})},y=()=>{c(null),u(null)},v=async()=>{var x,f;if(d)try{p(!0);const h={},b=t.find(S=>S.id===d.id);if(!b)return;if(d.username!==b.username&&(h.username=d.username),d.email!==b.email&&(h.email=d.email),d.role!==b.role&&(h.role=d.role),d.is_active!==b.is_active&&(h.is_active=d.is_active),Object.keys(h).length===0){y();return}await br.updateUser(d.id,h),s(t.map(S=>S.id===d.id?{...S,username:d.username,email:d.email,role:d.role,is_active:d.is_active}:S)),y()}catch(h){o(((f=(x=h.response)==null?void 0:x.data)==null?void 0:f.error)||"Failed to update user")}finally{p(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"User Management"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all users in the system"})]}),l&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:l}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading users..."}):t.length===0?r.jsx("div",{className:"p-6 text-center text-gray-600",children:"No users found"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Username"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(x=>r.jsx("tr",{className:"hover:bg-gray-50",children:i===x.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"text",value:(d==null?void 0:d.username)||"",onChange:f=>u({...d,username:f.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("input",{type:"email",value:(d==null?void 0:d.email)||"",onChange:f=>u({...d,email:f.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("select",{value:(d==null?void 0:d.role)||"",onChange:f=>u({...d,role:f.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[r.jsx("option",{value:"admin",children:"Admin"}),r.jsx("option",{value:"estimator",children:"Estimator"}),r.jsx("option",{value:"viewer",children:"Viewer"})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:(d==null?void 0:d.is_active)||!1,onChange:f=>u({...d,is_active:f.target.checked}),className:"h-4 w-4 text-khc-primary"}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d!=null&&d.is_active?"Active":"Inactive"})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:v,disabled:g,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:bg-gray-400",children:g?"Saving...":"Save"}),r.jsx("button",{onClick:y,disabled:g,className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded disabled:bg-gray-300",children:"Cancel"})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:x.username}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.email}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:x.role})}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${x.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>m(x),className:"px-3 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-sm rounded",children:"Edit"})})]})},x.id))})]})})})]})}function Fj(){Qt();const[e,t]=j.useState([]),[s,n]=j.useState(!1),[a,l]=j.useState(""),[o,i]=j.useState(!1),[c,d]=j.useState(null),[u,g]=j.useState(""),[p,N]=j.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),m=async()=>{var h,b;n(!0),l("");try{const S=await Hs.getAll({search:u});t(S.data.data||[])}catch(S){l(((b=(h=S.response)==null?void 0:h.data)==null?void 0:b.error)||"Failed to load clients")}finally{n(!1)}};j.useEffect(()=>{m()},[u]);const y=async h=>{var b;h.preventDefault(),l("");try{c?await Hs.update(c,p):await Hs.create(p),f(),m()}catch(S){const k=(b=S.response)==null?void 0:b.data;let w="Failed to save client";if(k!=null&&k.error&&(w=k.error,k.details&&Array.isArray(k.details))){const P=k.details.map(L=>`${L.field}: ${L.message}`).join(", ");w=`${k.error} - ${P}`}l(w)}},v=async h=>{var b,S;if(confirm("Are you sure you want to delete this client?"))try{await Hs.delete(h),m()}catch(k){l(((S=(b=k.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to delete client")}},x=h=>{N({name:h.name,email:h.email||"",phone:h.phone||"",address:h.address||"",city:h.city||"",postcode:h.postcode||"",country:h.country||"United Kingdom",website:h.website||"",notes:h.notes||""}),d(h.id),i(!0)},f=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),d(null),i(!1)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Clients"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your client contacts"})]}),r.jsx("button",{onClick:()=>{f(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Client"})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search clients by name, email, or city...",value:u,onChange:h=>g(h.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Client":"New Client"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),r.jsx("input",{type:"text",required:!0,value:p.name,onChange:h=>N({...p,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:p.email||"",onChange:h=>N({...p,email:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:p.phone||"",onChange:h=>N({...p,phone:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:p.website||"",onChange:h=>N({...p,website:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:p.address||"",onChange:h=>N({...p,address:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:p.city||"",onChange:h=>N({...p,city:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),r.jsx("input",{type:"text",value:p.postcode||"",onChange:h=>N({...p,postcode:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:p.country||"United Kingdom",onChange:h=>N({...p,country:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:p.notes||"",onChange:h=>N({...p,notes:h.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Client":"Add Client"}),r.jsx("button",{type:"button",onClick:f,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading clients..."}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No clients found. ",!o&&r.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Create one now"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(h=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:h.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.email||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.phone||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.city||"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[r.jsx("button",{onClick:()=>x(h),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>v(h.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},h.id))})]})})})]})}function Dj(){Qt();const[e,t]=j.useState([]),[s,n]=j.useState(!1),[a,l]=j.useState(""),[o,i]=j.useState(!1),[c,d]=j.useState(null),[u,g]=j.useState(""),[p,N]=j.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),m=async()=>{var b,S;n(!0),l("");try{const k=await qs.getAll({search:u});t(k.data.data||[])}catch(k){l(((S=(b=k.response)==null?void 0:b.data)==null?void 0:S.error)||"Failed to load contractors")}finally{n(!1)}};j.useEffect(()=>{m()},[u]);const y=async b=>{var S;b.preventDefault(),l("");try{c?await qs.update(c,p):await qs.create(p),f(),m()}catch(k){const w=(S=k.response)==null?void 0:S.data;let P="Failed to save contractor";if(w!=null&&w.error&&(P=w.error,w.details&&Array.isArray(w.details))){const L=w.details.map($=>`${$.field}: ${$.message}`).join(", ");P=`${w.error} - ${L}`}l(P)}},v=async b=>{var S,k;if(confirm("Are you sure you want to delete this contractor?"))try{await qs.delete(b),m()}catch(w){l(((k=(S=w.response)==null?void 0:S.data)==null?void 0:k.error)||"Failed to delete contractor")}},x=b=>{N({name:b.name,email:b.email||"",phone:b.phone||"",address:b.address||"",city:b.city||"",postcode:b.postcode||"",country:b.country||"United Kingdom",website:b.website||"",specialization:b.specialization||"",notes:b.notes||""}),d(b.id),i(!0)},f=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),d(null),i(!1)},h=({rating:b,size:S="sm"})=>{const k=S==="md"?"w-5 h-5":"w-4 h-4";return r.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(w=>r.jsx("span",{className:`${k} ${w<=b?"text-yellow-400":"text-gray-300"}`,children:""},w))})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Building Contractors"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your contractor network and specializations"})]}),r.jsx("button",{onClick:()=>{f(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Contractor"})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),r.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search contractors by name, email, specialty, or city...",value:u,onChange:b=>g(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Contractor":"New Contractor"}),r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Name *"}),r.jsx("input",{type:"text",required:!0,value:p.name,onChange:b=>N({...p,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),r.jsx("input",{type:"text",placeholder:"e.g., Electrical, Plumbing, Carpentry",value:p.specialization||"",onChange:b=>N({...p,specialization:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",value:p.email||"",onChange:b=>N({...p,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:p.phone||"",onChange:b=>N({...p,phone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),r.jsx("input",{type:"url",value:p.website||"",onChange:b=>N({...p,website:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("input",{type:"text",value:p.address||"",onChange:b=>N({...p,address:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),r.jsx("input",{type:"text",value:p.city||"",onChange:b=>N({...p,city:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),r.jsx("input",{type:"text",value:p.postcode||"",onChange:b=>N({...p,postcode:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),r.jsx("input",{type:"text",value:p.country||"United Kingdom",onChange:b=>N({...p,country:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:p.notes||"",onChange:b=>N({...p,notes:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Contractor":"Add Contractor"}),r.jsx("button",{type:"button",onClick:f,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading contractors..."}):e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No contractors found. ",!o&&r.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Add one now"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Specialization"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Rating"}),r.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(b=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:b.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.specialization||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.city||"-"}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx(h,{rating:Math.round(b.rating)})}),r.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[r.jsx("button",{onClick:()=>x(b),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),r.jsx("button",{onClick:()=>v(b.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},b.id))})]})})})]})}function Ij(){const[e,t]=j.useState([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),[s,n]=j.useState(!1),[a,l]=j.useState(null),[o,i]=j.useState(null),c=j.useRef(null),d=(v,x,f)=>{const h=[...e],b={...h[v]};x==="labour"||x==="materials"||x==="plant"||x==="ohp"||x==="rate"?b[x]=typeof f=="number"?f:parseFloat(String(f))||0:b[x]=String(f),h[v]=b,t(h)},u=()=>{t([...e,{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}])},g=v=>{t(e.filter((x,f)=>f!==v))},p=v=>{v.preventDefault();const f=v.clipboardData.getData("text").trim().split(`
`),h=[];for(const b of f){let S=b.split("	");if(S.length<8&&(S=b.split(",")),S.length>=8){const k=S.map(w=>w.trim());h.push({description:k[0]||"",uniqueId:k[1]||"",labour:parseFloat(k[2])||0,materials:parseFloat(k[3])||0,plant:parseFloat(k[4])||0,ohp:parseFloat(k[5])||0,uom:k[6]||"",rate:parseFloat(k[7])||0})}}if(h.length>0){const b=e.filter(k=>!k.description&&!k.uniqueId&&k.rate===0),S=e.filter(k=>k.description||k.uniqueId||k.rate>0);h.length>1&&b.length>0&&S.length===0?t(h):t([...e,...h])}},N=()=>{for(let v=0;v<e.length;v++){const x=e[v];if(!x.description||!x.uniqueId||!x.uom||x.rate<=0)return l(`Row ${v+1} has missing or invalid required fields`),!1}return!0},m=async()=>{if(N())try{n(!0),l(null);const v=e.filter(h=>h.description&&h.uniqueId&&h.uom&&h.rate>0);if(v.length===0){l("No valid rows to import"),n(!1);return}const f=[...JSON.parse(localStorage.getItem("personalCostDatabase")||"[]"),...v];localStorage.setItem("personalCostDatabase",JSON.stringify(f)),i(` Successfully saved ${v.length} cost item${v.length!==1?"s":""} to your personal database`),t([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),n(!1)}catch(v){n(!1),l(v instanceof Error?v.message:"Failed to save items")}},y=e.filter(v=>v.description&&v.uniqueId&&v.uom&&v.rate>0).length;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Personal Cost Database"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Build your custom cost database with labour, materials, plant and overhead costs"})]}),a&&r.jsx(Ur,{message:a,onDismiss:()=>l(null)}),o&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:o})}),r.jsx(re,{title:"Cost Items",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-3 bg-gray-50 text-sm text-gray-600",children:[" ",r.jsx("strong",{children:"Tip:"})," Click in the table and paste full rows of data (from Excel/Google Sheets). Table auto-expands to fit all rows!"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{ref:c,onPaste:p,className:"w-full text-sm border-collapse focus:outline-none",tabIndex:0,children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-khc-primary text-white",children:[r.jsx("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:"#"}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Description",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Unique ID",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Labour"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Materials"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Plant"}),r.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"OHP"}),r.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["UOM",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsxs("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:["Rate",r.jsx("span",{className:"text-red-400",children:"*"})]}),r.jsx("th",{className:"px-3 py-3 text-center font-semibold border border-gray-200",children:"Action"})]})}),r.jsx("tbody",{children:e.map((v,x)=>r.jsxs("tr",{className:"hover:bg-blue-50",children:[r.jsx("td",{className:"px-3 py-2 border border-gray-200 text-gray-600",children:x+1}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:v.description,onChange:f=>d(x,"description",f.target.value),placeholder:"Item description",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:v.uniqueId,onChange:f=>d(x,"uniqueId",f.target.value),placeholder:"e.g., ID001",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:v.labour||"",onChange:f=>d(x,"labour",f.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:v.materials||"",onChange:f=>d(x,"materials",f.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:v.plant||"",onChange:f=>d(x,"plant",f.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:v.ohp||"",onChange:f=>d(x,"ohp",f.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"text",value:v.uom,onChange:f=>d(x,"uom",f.target.value),placeholder:"e.g., m2, m3, no",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200",children:r.jsx("input",{type:"number",value:v.rate||"",onChange:f=>d(x,"rate",f.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),r.jsx("td",{className:"px-3 py-2 border border-gray-200 text-center",children:r.jsx("button",{onClick:()=>g(x),className:"text-red-600 hover:text-red-800 font-semibold text-lg",title:"Delete row",children:""})})]},x))})]})}),r.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600",children:r.jsxs("p",{children:[r.jsx("span",{className:"text-red-400",children:"*"})," Required fields: Description, Unique ID, UOM, Rate"]})}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(be,{variant:"secondary",onClick:u,children:"+ Add Row"}),r.jsx(be,{variant:"primary",onClick:m,loading:s,fullWidth:!0,disabled:y===0,children:s?"Saving...":`Save ${y} Cost Item${y!==1?"s":""}`})]})]})}),r.jsx(re,{title:"How to Use",children:r.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Fastest Method: Paste Full Database"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-600",children:[r.jsx("li",{children:"Select all data in Excel/Google Sheets (Ctrl+A)"}),r.jsx("li",{children:"Copy (Ctrl+C or Cmd+C)"}),r.jsx("li",{children:r.jsx("strong",{children:"Click anywhere in the table below"})}),r.jsx("li",{children:"Paste (Ctrl+V or Cmd+V)"}),r.jsx("li",{children:" Table auto-expands to match pasted rows!"})]}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Columns must be in order: Description, Unique ID, Labour, Materials, Plant, OHP, UOM, Rate"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Single Row Paste"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Copy one row of data from Excel"}),r.jsx("li",{children:"Click in the table and paste"}),r.jsx("li",{children:"Row is added to table automatically"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Manual Entry"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Click into any field and type the value"}),r.jsx("li",{children:"Tab or click to move to next field"}),r.jsx("li",{children:"Use the  button to delete a row"}),r.jsx("li",{children:'Click "+ Add Row" for additional entries'})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Field Guide"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Description:"})," Clear description of the cost item"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Unique ID:"})," Unique identifier (e.g., ID001, LB01)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Labour:"})," Labour cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Materials:"})," Material cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Plant:"})," Plant/equipment cost component ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"OHP:"})," Overheads and profit ( per unit)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"UOM:"})," Unit of measure (e.g., m2, m3, no, tonne)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Rate:"})," Total rate per unit (Labour + Materials + Plant + OHP)"]})]})]})]})})]})}const Oj=["Preliminaries","Excavation & Earthworks","Foundations","Structure","Roofing","External Walls","Windows & Doors","Partitions & Screens","Finishings","Mechanical Services","Electrical Services","Plumbing & Drainage","Site Works"];function $j(){const[e,t]=j.useState([]),[s,n]=j.useState([]),[a,l]=j.useState(null),[o,i]=j.useState(null),[c,d]=j.useState(""),[u,g]=j.useState("all"),[p,N]=j.useState(!1),[m,y]=j.useState(null),[v,x]=j.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),[f,h]=j.useState(""),[b,S]=j.useState(!1);j.useEffect(()=>{k(),w()},[]);const k=()=>{const E=localStorage.getItem("internalRates");E&&t(JSON.parse(E))},w=()=>{const E=localStorage.getItem("rateCategories");if(E)n(JSON.parse(E));else{const _=Oj.map((O,z)=>({id:`cat-${z}`,name:O,isCustom:!1}));n(_),localStorage.setItem("rateCategories",JSON.stringify(_))}},P=E=>{localStorage.setItem("internalRates",JSON.stringify(E)),t(E)},L=()=>{if(!f.trim()){l("Category name is required");return}if(s.some(O=>O.name.toLowerCase()===f.toLowerCase())){l("Category already exists");return}const E={id:`cat-${Date.now()}`,name:f,isCustom:!0},_=[...s,E];n(_),localStorage.setItem("rateCategories",JSON.stringify(_)),h(""),S(!1),i("Category added successfully"),setTimeout(()=>i(null),3e3)},$=()=>{if(!v.description.trim()||!v.category||!v.uom||v.labour+v.materials+v.plant+v.ohp===0){l("Description, Category, UOM, and at least one cost component are required");return}let E;if(m)E=e.map(_=>_.id===m?{...v,id:m,labour:parseFloat(String(v.labour))||0,materials:parseFloat(String(v.materials))||0,plant:parseFloat(String(v.plant))||0,ohp:parseFloat(String(v.ohp))||0,createdAt:_.createdAt}:_),i("Rate updated successfully");else{const _={id:`rate-${Date.now()}`,description:v.description,category:v.category,labour:parseFloat(String(v.labour))||0,materials:parseFloat(String(v.materials))||0,plant:parseFloat(String(v.plant))||0,ohp:parseFloat(String(v.ohp))||0,uom:v.uom,createdAt:new Date().toISOString()};E=[...e,_],i("Rate added successfully")}P(E),M(),setTimeout(()=>i(null),3e3)},R=E=>{window.confirm("Are you sure you want to delete this rate?")&&(P(e.filter(_=>_.id!==E)),i("Rate deleted successfully"),setTimeout(()=>i(null),3e3))},A=E=>{x({description:E.description,category:E.category,labour:E.labour,materials:E.materials,plant:E.plant,ohp:E.ohp,uom:E.uom}),y(E.id),N(!0)},M=()=>{x({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),y(null),N(!1)},D=e.filter(E=>{const _=u==="all"||E.category===u,O=E.description.toLowerCase().includes(c.toLowerCase());return _&&O}),q=D.reduce((E,_)=>(E[_.category]||(E[_.category]=[]),E[_.category].push(_),E),{}),I=E=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(E);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Internal Rates Builder"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage your organization's rate book"})]}),a&&r.jsx(Ur,{message:a,onDismiss:()=>l(null)}),o&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:o})}),p&&r.jsx(re,{title:m?"Edit Rate":"Add New Rate",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),r.jsx("input",{type:"text",value:v.description,onChange:E=>x({...v,description:E.target.value}),placeholder:"Rate description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category*"}),r.jsxs("select",{value:v.category,onChange:E=>x({...v,category:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"",children:"Select category"}),s.map(E=>r.jsx("option",{value:E.name,children:E.name},E.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour ()*"}),r.jsx("input",{type:"number",value:v.labour||"",onChange:E=>x({...v,labour:parseFloat(E.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Materials ()*"}),r.jsx("input",{type:"number",value:v.materials||"",onChange:E=>x({...v,materials:parseFloat(E.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant ()*"}),r.jsx("input",{type:"number",value:v.plant||"",onChange:E=>x({...v,plant:parseFloat(E.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OHP ()*"}),r.jsx("input",{type:"number",value:v.ohp||"",onChange:E=>x({...v,ohp:parseFloat(E.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UOM*"}),r.jsx("input",{type:"text",value:v.uom,onChange:E=>x({...v,uom:E.target.value}),placeholder:"e.g., m2, m3, no",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(be,{variant:"primary",onClick:$,children:m?"Update Rate":"Add Rate"}),r.jsx(be,{variant:"secondary",onClick:M,children:"Cancel"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!p&&r.jsx(be,{variant:"primary",onClick:()=>N(!0),fullWidth:!0,children:"+ Add New Rate"}),!b&&r.jsx(be,{variant:"secondary",onClick:()=>S(!0),fullWidth:!0,children:"+ Add Category"}),b&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:f,onChange:E=>h(E.target.value),placeholder:"New category name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsx("button",{onClick:L,className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary",children:""}),r.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:""})]})]}),r.jsx(re,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",placeholder:"Search rates by description...",value:c,onChange:E=>d(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),r.jsxs("select",{value:u,onChange:E=>g(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[r.jsx("option",{value:"all",children:"All Categories"}),s.map(E=>r.jsx("option",{value:E.name,children:E.name},E.id))]})]})}),D.length===0?r.jsx(re,{children:r.jsxs("p",{className:"text-center text-gray-500",children:["No rates found. ",!p&&r.jsx("span",{onClick:()=>N(!0),className:"text-khc-primary cursor-pointer hover:underline",children:"Add one now"})]})}):Object.entries(q).map(([E,_])=>r.jsx(re,{title:E,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Labour"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Materials"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Plant"}),r.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"OHP"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"UOM"}),r.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Action"})]})}),r.jsx("tbody",{children:_.map(O=>{const z=O.labour+O.materials+O.plant+O.ohp;return r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:O.description}),r.jsx("td",{className:"px-3 py-2 text-right",children:I(O.labour)}),r.jsx("td",{className:"px-3 py-2 text-right",children:I(O.materials)}),r.jsx("td",{className:"px-3 py-2 text-right",children:I(O.plant)}),r.jsx("td",{className:"px-3 py-2 text-right",children:I(O.ohp)}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold text-khc-primary",children:I(z)}),r.jsx("td",{className:"px-3 py-2 text-center",children:O.uom}),r.jsxs("td",{className:"px-3 py-2 text-center space-x-2",children:[r.jsx("button",{onClick:()=>A(O),className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Edit",children:""}),r.jsx("button",{onClick:()=>R(O.id),className:"text-red-600 hover:text-red-800 font-semibold",title:"Delete",children:""})]})]},O.id)})})]})})},E)),r.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded p-3",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Total Rates:"})," ",e.length]})})]})}function Uj(){const e=Be(),{projects:t,isLoading:s,fetchProjects:n}=Ht(),[a,l]=j.useState(null),[o,i]=j.useState(null),[c,d]=j.useState([]),[u,g]=j.useState([]),[p,N]=j.useState([]),[m,y]=j.useState([]),[v,x]=j.useState(0),[f,h]=j.useState(!1),[b,S]=j.useState(""),[k,w]=j.useState("all"),[P,L]=j.useState(!1),[$,R]=j.useState(!1),[A,M]=j.useState(null),[D,q]=j.useState(null),[I,E]=j.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0});j.useEffect(()=>{n(),_(),O()},[n]);const _=()=>{const T=JSON.parse(localStorage.getItem("internalRates")||"[]"),ee=JSON.parse(localStorage.getItem("personalCostDatabase")||"[]");d(T),g(ee)},O=()=>{const T=localStorage.getItem("rateCategories");T&&N(JSON.parse(T))},z=T=>{l(T);const ee=t.find(G=>G.id===T);i(ee||null),y([]),q(`Project "${ee==null?void 0:ee.name}" selected`),setTimeout(()=>q(null),2e3)},Z=[...c,...u].filter(T=>{const ee=k==="all"||T.category===k,G=T.description.toLowerCase().includes(b.toLowerCase());return ee&&G}).reduce((T,ee)=>(T[ee.category]||(T[ee.category]=[]),T[ee.category].push(ee),T),{}),pe=T=>{if(!o){M("Please select a project first");return}const ee={id:`line-${Date.now()}`,description:T.description,source:c.some(G=>G.id===T.id)?"internal":"imported",labour:T.labour,materials:T.materials,plant:T.plant,ohp:T.ohp,uom:T.uom,quantity:1,markupPercentage:0,category:T.category};y([...m,ee]),q("Rate added to assembly"),setTimeout(()=>q(null),2e3)},Ce=()=>{if(!o){M("Please select a project first");return}if(!I.description||!I.category||!I.uom){M("Description, category, and UOM are required");return}if(I.labour+I.materials+I.plant+I.ohp===0){M("At least one cost component is required");return}const T={id:`line-${Date.now()}`,description:I.description,source:"custom",labour:I.labour,materials:I.materials,plant:I.plant,ohp:I.ohp,uom:I.uom,quantity:I.quantity,markupPercentage:I.markupPercentage,category:I.category};y([...m,T]),E({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0}),R(!1),q("Custom line item added"),setTimeout(()=>q(null),2e3)},te=(T,ee,G)=>{y(m.map(W=>W.id===T?{...W,[ee]:G}:W))},Ne=T=>{y(m.filter(ee=>ee.id!==T))},ze=T=>{const ee=(T.labour+T.materials+T.plant+T.ohp)*T.quantity,G=f?v:T.markupPercentage;return ee*(1+G/100)},ce=(()=>{const T={};return m.forEach(ee=>{T[ee.category]||(T[ee.category]=0),T[ee.category]+=ze(ee)}),T})(),ft=Object.values(ce).reduce((T,ee)=>T+ee,0),Se=T=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(T),Ps=()=>{if(!o||m.length===0){M("Select a project and add line items before exporting");return}const T=`
      <html>
        <head>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #003366; }
            .header { margin-bottom: 20px; }
            .section { margin-bottom: 30px; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #003366; color: white; }
            .total { font-weight: bold; background-color: #f0f0f0; }
            .grand-total { font-weight: bold; font-size: 16px; background-color: #e0e0e0; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${o.name}</h1>
            <p><strong>Project ID:</strong> ${o.id}</p>
            <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
          </div>
          ${Object.entries(ce).map(([de,kt])=>`
            <div class="section">
              <h2>${de}</h2>
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th>Qty</th>
                    <th>UOM</th>
                    <th>Labour</th>
                    <th>Materials</th>
                    <th>Plant</th>
                    <th>OHP</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${m.filter(Fe=>Fe.category===de).map(Fe=>`
                    <tr>
                      <td>${Fe.description}</td>
                      <td>${Fe.quantity}</td>
                      <td>${Fe.uom}</td>
                      <td>${Se(Fe.labour*Fe.quantity)}</td>
                      <td>${Se(Fe.materials*Fe.quantity)}</td>
                      <td>${Se(Fe.plant*Fe.quantity)}</td>
                      <td>${Se(Fe.ohp*Fe.quantity)}</td>
                      <td>${Se(ze(Fe))}</td>
                    </tr>
                  `).join("")}
                  <tr class="total">
                    <td colspan="7">Category Total</td>
                    <td>${Se(kt)}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          `).join("")}
          <div class="section">
            <table>
              <tr class="grand-total">
                <td colspan="7">GRAND TOTAL</td>
                <td>${Se(ft)}</td>
              </tr>
            </table>
          </div>
        </body>
      </html>
    `,ee=new Blob([T],{type:"text/html"}),G=window.URL.createObjectURL(ee),W=document.createElement("a");W.href=G,W.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(G),q("Estimate exported"),setTimeout(()=>q(null),2e3)},Mr=()=>{if(!o||m.length===0){M("Select a project and add line items before exporting");return}let T=`Project Name,Project ID,Date
`;T+=`"${o.name}",${o.id},"${new Date().toLocaleDateString()}"

`,T+=`Category,Description,Qty,UOM,Labour,Materials,Plant,OHP,Total
`,m.forEach(de=>{const kt=ze(de);T+=`"${de.category}","${de.description}",${de.quantity},"${de.uom}",${de.labour},${de.materials},${de.plant},${de.ohp},${kt}
`}),T+=`
Category Totals
`,Object.entries(ce).forEach(([de,kt])=>{T+=`"${de}",,,,,,,,${kt}
`}),T+=`
GRAND TOTAL,,,,,,,,,${ft}
`;const ee=new Blob([T],{type:"text/csv"}),G=window.URL.createObjectURL(ee),W=document.createElement("a");W.href=G,W.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(G),q("Estimate exported"),setTimeout(()=>q(null),2e3)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Assembly"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Build cost estimates from rates or custom line items"})]}),A&&r.jsx(Ur,{message:A,onDismiss:()=>M(null)}),D&&r.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:r.jsx("p",{className:"font-semibold",children:D})}),o?r.jsxs(r.Fragment,{children:[r.jsx(re,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Selected Project"}),r.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:o.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",o.id]})]}),r.jsx(be,{variant:"secondary",onClick:()=>i(null),children:"Change Project"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(be,{variant:"primary",onClick:()=>L(!P),fullWidth:!0,children:P?" Close Rate Browser":"+ Add Rate"}),r.jsx(be,{variant:"secondary",onClick:()=>R(!$),fullWidth:!0,children:$?" Cancel Custom":"+ Custom Line Item"})]}),P&&r.jsx(re,{title:"Available Rates",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"text",placeholder:"Search rates...",value:b,onChange:T=>S(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),r.jsxs("select",{value:k,onChange:T=>w(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"all",children:"All Categories"}),p.map(T=>r.jsx("option",{value:T.name,children:T.name},T.id))]}),Object.entries(Z).map(([T,ee])=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:T}),r.jsx("div",{className:"space-y-2",children:ee.map(G=>r.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded hover:bg-gray-100",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:G.description}),r.jsxs("p",{className:"text-xs text-gray-600",children:[Se(G.labour+G.materials+G.plant+G.ohp)," / ",G.uom]})]}),r.jsx("button",{onClick:()=>pe(G),className:"px-3 py-1 bg-khc-primary text-white rounded text-sm hover:bg-khc-secondary",children:"Add"})]},G.id))})]},T))]})}),$&&r.jsx(re,{title:"Add Custom Line Item",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description*"}),r.jsx("input",{type:"text",value:I.description,onChange:T=>E({...I,description:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),r.jsxs("select",{value:I.category,onChange:T=>E({...I,category:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[r.jsx("option",{value:"",children:"Select category"}),p.map(T=>r.jsx("option",{value:T.name,children:T.name},T.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),r.jsx("input",{type:"number",value:I.quantity,onChange:T=>E({...I,quantity:parseFloat(T.target.value)||1}),min:"0.01",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"UOM*"}),r.jsx("input",{type:"text",value:I.uom,onChange:T=>E({...I,uom:T.target.value}),placeholder:"m2, m3, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Labour ()"}),r.jsx("input",{type:"number",value:I.labour||"",onChange:T=>E({...I,labour:parseFloat(T.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Materials ()"}),r.jsx("input",{type:"number",value:I.materials||"",onChange:T=>E({...I,materials:parseFloat(T.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plant ()"}),r.jsx("input",{type:"number",value:I.plant||"",onChange:T=>E({...I,plant:parseFloat(T.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"OHP ()"}),r.jsx("input",{type:"number",value:I.ohp||"",onChange:T=>E({...I,ohp:parseFloat(T.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Markup %"}),r.jsx("input",{type:"number",value:I.markupPercentage||"",onChange:T=>E({...I,markupPercentage:parseFloat(T.target.value)||0}),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(be,{variant:"primary",onClick:Ce,children:"Add Line Item"}),r.jsx(be,{variant:"secondary",onClick:()=>R(!1),children:"Cancel"})]})]})}),r.jsx(re,{title:"Markup Settings",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:f,onChange:T=>h(T.target.checked),className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Apply global markup percentage"})]}),f&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Global Markup %"}),r.jsx("input",{type:"number",value:v||"",onChange:T=>x(parseFloat(T.target.value)||0),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),m.length>0&&r.jsxs(r.Fragment,{children:[Object.entries(ce).map(([T,ee])=>r.jsx(re,{title:T,children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50 border-b",children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Labour"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Materials"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Plant"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"OHP"}),r.jsx("th",{className:"px-3 py-2 text-right",children:"Total"}),r.jsx("th",{className:"px-3 py-2 text-center",children:"Action"})]})}),r.jsxs("tbody",{children:[m.filter(G=>G.category===T).map(G=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"px-3 py-2",children:G.description}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx("input",{type:"number",value:G.quantity,onChange:W=>te(G.id,"quantity",parseFloat(W.target.value)||1),step:"0.01",min:"0.01",className:"w-16 px-2 py-1 border border-gray-300 rounded text-right text-sm"})}),r.jsx("td",{className:"px-3 py-2 text-right",children:Se(G.labour*G.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:Se(G.materials*G.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:Se(G.plant*G.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right",children:Se(G.ohp*G.quantity)}),r.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:Se(ze(G))}),r.jsx("td",{className:"px-3 py-2 text-center",children:r.jsx("button",{onClick:()=>Ne(G.id),className:"text-red-600 hover:text-red-800",children:""})})]},G.id)),r.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[r.jsx("td",{colSpan:6,className:"px-3 py-2 text-right",children:"Category Total:"}),r.jsx("td",{className:"px-3 py-2 text-right text-khc-primary",children:Se(ee)})]})]})]})})},T)),r.jsx(re,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"GRAND TOTAL"}),r.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:Se(ft)})]}),r.jsxs("div",{className:"flex flex-col justify-end gap-2",children:[r.jsx(be,{variant:"primary",onClick:Ps,fullWidth:!0,children:" Export as HTML/PDF"}),r.jsx(be,{variant:"secondary",onClick:Mr,fullWidth:!0,children:" Export as CSV"})]})]})})]})]}):r.jsx(re,{title:"Select a Project",children:s?r.jsx("p",{className:"text-center text-gray-500",children:"Loading projects..."}):t.length===0?r.jsxs("p",{className:"text-center text-gray-500",children:["No projects found. ",r.jsx("span",{onClick:()=>e("/projects/new"),className:"text-khc-primary cursor-pointer hover:underline",children:"Create one first"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(T=>r.jsxs("button",{onClick:()=>z(T.id),className:"text-left p-4 border border-gray-300 rounded-lg hover:border-khc-primary hover:bg-blue-50 transition",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:T.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",T.id]}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(T.start_date).toLocaleDateString()})]},T.id))})})]})}function Mj(){const{user:e}=fr(),[t,s]=j.useState([]),[n,a]=j.useState(!1),[l,o]=j.useState("bank_transfer"),[i,c]=j.useState({accountName:"",accountNumber:"",sortCode:""});j.useEffect(()=>{const y=localStorage.getItem(`referrals_${e==null?void 0:e.id}`);y&&s(JSON.parse(y))},[e==null?void 0:e.id]);const d=`${window.location.origin}/register?ref=${e==null?void 0:e.username}`,u=()=>{navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)},g=t.filter(y=>y.status==="completed"),p=g.reduce((y,v)=>y+v.amount,0),N=t.filter(y=>y.status==="pending").reduce((y,v)=>y+v.amount,0),m=y=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(y);return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ke,{}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Referral Program"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Earn 20 for each successful referral"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(re,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Total Earnings"}),r.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:m(p)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[g.length," completed referrals"]})]})}),r.jsx(re,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Pending Earnings"}),r.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:m(N)}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[t.filter(y=>y.status==="pending").length," pending referrals"]})]})}),r.jsx(re,{children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Next Payout"}),r.jsx("p",{className:"text-3xl font-bold text-green-600",children:m(p)}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Monthly on 1st"})]})})]}),r.jsx(re,{title:"Your Referral Link",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-700",children:"Share this link with your network and earn 20 for each successful sign-up:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 font-mono text-sm text-gray-700 overflow-auto",children:d}),r.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg font-medium transition ${n?"bg-green-500 text-white":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:n?" Copied":"Copy"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:" Tip:"})," Share this link on social media, email, or directly with colleagues. You'll earn 20 each time someone signs up using your link."]})})]})}),r.jsx(re,{title:"How the Referral Program Works",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"1"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Share Your Link"}),r.jsx("p",{className:"text-gray-600",children:"Copy your unique referral link and share it with QS professionals and SME contractors."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"2"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"They Sign Up"}),r.jsx("p",{className:"text-gray-600",children:"When someone clicks your link and creates an account, they become your referral."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"3"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"You Earn 20"}),r.jsx("p",{className:"text-gray-600",children:"Once they complete their first purchase, you earn 20. No limits on how many you can refer!"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"4"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Get Paid"}),r.jsx("p",{className:"text-gray-600",children:"Payouts are processed monthly on the 1st of each month to your selected bank account."})]})]})]})}),r.jsx(re,{title:"Referral History",children:t.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{className:"mb-4",children:"No referrals yet. Start sharing your link to earn!"}),r.jsx(be,{variant:"primary",onClick:u,children:"Copy Link"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Email"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Earnings"}),r.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y",children:t.map(y=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 font-medium",children:y.username}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.email}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})}),r.jsx("td",{className:"px-4 py-3 font-semibold text-khc-primary",children:m(y.amount)}),r.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.earnedAt?new Date(y.earnedAt).toLocaleDateString():"Pending"})]},y.id))})]})})}),r.jsx(re,{title:"Payout Settings",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payout Method"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"payout",value:"bank_transfer",checked:l==="bank_transfer",onChange:y=>o(y.target.value),className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"UK Bank Transfer"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Direct to your bank account (recommended)"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"payout",value:"paypal",checked:l==="paypal",onChange:y=>o(y.target.value),className:"w-4 h-4"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"PayPal"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Sent to your PayPal account"})]})]})]})]}),l==="bank_transfer"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"Bank Account Details"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),r.jsx("input",{type:"text",value:i.accountName,onChange:y=>c({...i,accountName:y.target.value}),placeholder:"As it appears on your bank account",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Code"}),r.jsx("input",{type:"text",value:i.sortCode,onChange:y=>c({...i,sortCode:y.target.value}),placeholder:"XX-XX-XX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),r.jsx("input",{type:"text",value:i.accountNumber,onChange:y=>c({...i,accountNumber:y.target.value}),placeholder:"8 digits",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),r.jsx(be,{variant:"primary",fullWidth:!0,children:"Save Bank Details"})]}),l==="paypal"&&r.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[r.jsx("h4",{className:"font-semibold text-gray-900",children:"PayPal Account"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PayPal Email"}),r.jsx("input",{type:"email",placeholder:"your@paypal.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),r.jsx(be,{variant:"primary",fullWidth:!0,children:"Save PayPal Details"})]})]})}),r.jsx(re,{title:"Frequently Asked Questions",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How much can I earn?"}),r.jsx("p",{className:"text-gray-700",children:"Unlimited! There are no caps on referrals. Earn 20 for each person who signs up with your link."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"When do I get paid?"}),r.jsx("p",{className:"text-gray-700",children:"Referral earnings are paid out monthly on the 1st of each month to your chosen payout method."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"What counts as a valid referral?"}),r.jsx("p",{className:"text-gray-700",children:"A valid referral is someone who clicks your unique link and completes their first paid subscription."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Can I share my link on social media?"}),r.jsx("p",{className:"text-gray-700",children:"Yes! Share it anywhere - LinkedIn, Twitter, Facebook, email, or directly with colleagues. The more you share, the more you earn."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Is there a minimum payout?"}),r.jsx("p",{className:"text-gray-700",children:"No minimum. Once you have earnings, they'll be paid out monthly on the 1st."})]})]})})]})}const Bj=({groups:e,onSelectWorkSection:t,onSelectElement:s,selectedCode:n})=>{const[a,l]=j.useState(new Set),[o,i]=j.useState(new Set),[c,d]=j.useState(new Set),u=m=>{const y=new Set(a);y.has(m)?y.delete(m):y.add(m),l(y)},g=m=>{const y=new Set(o);y.has(m)?y.delete(m):y.add(m),i(y)},p=m=>{const y=new Set(c);y.has(m)?y.delete(m):y.add(m),d(y)},N=(m,y,v)=>{t&&t(m,y,v)};return r.jsx("div",{className:"nrm2-tree space-y-2",children:e.map(m=>r.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[r.jsxs("button",{onClick:()=>u(m.id),className:"w-full px-4 py-3 flex items-center hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-500",children:a.has(m.id)?"":""}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsxs("div",{className:"font-semibold text-gray-900",children:[m.code," ",m.title]}),m.description&&r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:m.description})]})]}),a.has(m.id)&&m.elements&&r.jsx("div",{className:"bg-gray-50 border-t",children:m.elements.map(y=>r.jsxs("div",{className:"border-t",children:[r.jsxs("button",{onClick:()=>g(y.id),className:"w-full px-4 py-2 flex items-center hover:bg-gray-100 transition-colors text-left pl-8",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-400",children:o.has(y.id)?"":""}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"font-medium text-gray-800 text-sm",children:[y.code," ",y.title]})})]}),o.has(y.id)&&y.sub_elements&&r.jsx("div",{className:"bg-white",children:y.sub_elements.map(v=>r.jsxs("div",{className:"border-t border-gray-200",children:[r.jsxs("button",{onClick:()=>p(v.id),className:"w-full px-4 py-1.5 flex items-center hover:bg-gray-50 transition-colors text-left pl-12",children:[r.jsx("div",{className:"flex-shrink-0 mr-2 text-gray-300",children:c.has(v.id)?"":""}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"text-xs font-medium text-gray-700",children:[v.code," ",v.title]})})]}),c.has(v.id)&&v.work_sections&&r.jsx("div",{className:"bg-gray-50",children:v.work_sections.map((x,f)=>r.jsx("button",{onClick:()=>N(x.code,x.title,x.unit),className:`w-full px-4 py-1 flex items-start hover:bg-blue-50 transition-colors text-left pl-16 border-t border-gray-200 text-xs ${n===x.code?"bg-blue-100 border-blue-300":""}`,children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-gray-900 font-mono text-xs",children:x.code}),r.jsx("div",{className:"text-gray-700 text-xs",children:x.title}),x.unit&&r.jsxs("div",{className:"text-gray-500 text-xs",children:["Unit: ",x.unit]})]})},`${v.id}-${f}`))})]},v.id))})]},y.id))})]},m.id))})},zj=({workSection:e,onUseInEstimate:t})=>{if(!e)return r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Select a work section to view details"})});const s=()=>{t&&t(e.code,e.title,e.unit)};return r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4 text-white",children:[r.jsx("div",{className:"font-mono text-sm font-semibold",children:e.code}),r.jsx("div",{className:"text-lg font-bold mt-1",children:e.title})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.description&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:e.description})]}),e.unit&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Unit of Measurement"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded px-3 py-2 text-sm font-mono text-blue-900",children:e.unit})]}),e.measurement_rules&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Measurement Rules"}),r.jsx("p",{className:"text-gray-700 text-sm leading-relaxed bg-yellow-50 border border-yellow-200 rounded p-3",children:e.measurement_rules})]}),e.inclusions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Inclusions"}),r.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:e.inclusions.split(",").map((n,a)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2 text-green-600",children:""}),r.jsx("span",{children:n.trim()})]},a))})]}),e.exclusions&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Exclusions"}),r.jsx("ul",{className:"text-gray-700 text-sm space-y-1",children:e.exclusions.split(",").map((n,a)=>r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2 text-red-600",children:""}),r.jsx("span",{children:n.trim()})]},a))})]})]}),t&&r.jsx("div",{className:"border-t bg-gray-50 px-6 py-4",children:r.jsx("button",{onClick:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition-colors",children:"Use in Estimate"})})]})},Wj=()=>{const e=Be(),{groups:t,searchResults:s,isLoading:n,isSearching:a,searchKeyword:l,currentWorkSection:o,error:i,fetchTree:c,searchNRM2:d,clearSearch:u,setCurrentWorkSection:g,setPendingWorkSection:p}=tc(),[N,m]=j.useState(null),[y,v]=j.useState(!1),[x,f]=j.useState("");j.useEffect(()=>{t.length===0&&c()},[t.length,c]);const h=w=>{w.preventDefault(),x.trim()&&(v(!0),d(x))},b=async w=>{if(w.type==="work_section")try{const L=await(await fetch(`/api/v1/nrm2/work-sections/${w.id}`)).json();L.success&&(m(L.data),g(L.data))}catch(P){console.error("Failed to fetch work section:",P)}},S=()=>{v(!1),f(""),u()},k=(w,P,L)=>{N&&(p(N),e("/projects"))};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"NRM 2 Reference"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"New Rules of Measurement 2 - Complete hierarchy and search"})]}),r.jsx("button",{onClick:()=>window.location.href="/references/documents",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:" View Full PDF"})]}),i&&r.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsxs("p",{className:"text-red-800",children:["Error loading NRM 2 data: ",i]}),r.jsx("button",{onClick:()=>c(),className:"mt-2 text-red-700 hover:text-red-900 underline text-sm",children:"Try again"})]}),r.jsx("form",{onSubmit:h,children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",value:x,onChange:w=>f(w.target.value),placeholder:"Search NRM 2 codes, titles, or descriptions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("span",{className:"absolute right-3 top-2.5 text-gray-400 text-lg",children:""})]}),y&&r.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Clear"}),r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Search"})]})})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:y?r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:['Search Results for "',l,'"',s.length>0&&r.jsxs("span",{className:"text-gray-600 text-sm ml-2",children:["(",s.length," results)"]})]}),a?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Searching..."})]}):s.length>0?r.jsx("div",{className:"space-y-2",children:s.map(w=>r.jsx("button",{onClick:()=>b(w),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-mono text-sm font-semibold text-gray-900",children:w.code}),r.jsx("div",{className:"text-gray-700",children:w.title}),w.description&&r.jsx("div",{className:"text-gray-600 text-sm mt-1",children:w.description})]}),r.jsx("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded",children:w.type})]})},`${w.type}-${w.id}`))}):r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsxs("p",{children:['No results found for "',l,'"']}),r.jsx("p",{className:"text-sm mt-2",children:"Try searching with different keywords"})]})]}):n?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading NRM 2 hierarchy..."})]}):i||t.length===0?r.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200 p-8",children:i?r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-red-600 font-medium mb-4",children:"Failed to load NRM 2 data"}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:i}),r.jsx("button",{onClick:()=>c(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Try Again"})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-gray-600",children:"No NRM 2 data available"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Please check the server connection and try refreshing the page"})]})}):r.jsx(Bj,{groups:t,onSelectWorkSection:(w,P,L)=>{fetch(`/api/v1/nrm2/work-sections/by-code/${w}`).then($=>$.json()).then($=>{$.success&&(m($.data),g($.data))}).catch($=>console.error("Failed to fetch work section:",$))},selectedCode:N==null?void 0:N.code})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"sticky top-24",children:r.jsx(zj,{workSection:N,onUseInEstimate:k})})})]})})]})},Gl="http://localhost:3000",Hj=()=>{const[e,t]=j.useState([]),[s,n]=j.useState(null),[a,l]=j.useState(!0),[o,i]=j.useState(null),[c,d]=j.useState(!1),[u,g]=j.useState(null),[p,N]=j.useState(""),m=async()=>{var h,b,S;try{l(!0),i(null),console.log("Fetching documents...");const k=await Vl.getAll(p||void 0);console.log("Documents API response:",k);const w=((h=k.data)==null?void 0:h.data)||[];console.log("Documents array:",w),t(Array.isArray(w)?w:[])}catch(k){console.error("Error fetching documents:",k);const w=((S=(b=k==null?void 0:k.response)==null?void 0:b.data)==null?void 0:S.error)||(k==null?void 0:k.message)||"Failed to load documents";i(w)}finally{l(!1)}};j.useEffect(()=>{m()},[p]);const y=async h=>{var k,w,P;const b=(k=h.target.files)==null?void 0:k[0];if(!b)return;const S=new FormData;S.append("file",b),S.append("category","standards"),S.append("description",`NRM 2 Reference Document - ${b.name}`);try{d(!0),g(null),console.log("Starting upload...");const L=await Vl.upload(S);console.log("Upload response:",L),await m(),console.log("Documents refreshed after upload")}catch(L){console.error("Upload error:",L);const $=((P=(w=L==null?void 0:L.response)==null?void 0:w.data)==null?void 0:P.error)||(L==null?void 0:L.message)||"Failed to upload document";g($)}finally{d(!1)}},v=async h=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Vl.delete(h),t(e.filter(b=>b.id!==h)),(s==null?void 0:s.id)===h&&n(null)}catch(b){console.error("Failed to delete document:",b)}},x=h=>{if(h===0)return"0 Bytes";const b=1024,S=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(h)/Math.log(b));return Math.round(h/Math.pow(b,k)*100)/100+" "+S[k]},f=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return console.log("ReferenceDocumentsPage rendered - state:",{isLoading:a,error:o,documentsCount:e.length}),r.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 overflow-hidden",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 flex-shrink-0",children:r.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reference Documents"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Manage PDFs, images, and standards documents"})]}),r.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[r.jsx("span",{className:"mr-2",children:""}),r.jsx("span",{children:"Upload Document"}),r.jsx("input",{type:"file",onChange:y,accept:".pdf,image/*",disabled:c,className:"hidden"})]})]}),(u||o)&&r.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:u||o}),c&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded text-blue-700 text-sm",children:"Uploading document..."})]})}),r.jsx("div",{className:"flex-1 overflow-hidden px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 h-full",children:[r.jsx("div",{className:"lg:col-span-1 overflow-y-auto h-full",children:a?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Loading documents..."})]}):o?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-red-200 bg-red-50",children:[r.jsx("div",{className:"text-4xl mx-auto",children:""}),r.jsx("p",{className:"text-red-600 mt-4 font-medium",children:"Failed to load documents"}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:o}),r.jsx("button",{onClick:()=>m(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]}):e.length===0?r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"text-6xl text-gray-400 mx-auto",children:""}),r.jsx("p",{className:"text-gray-700 mt-4 font-semibold",children:"No documents uploaded yet"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Upload NRM 2 PDF or reference documents using the button above"}),r.jsx("p",{className:"text-gray-500 text-xs mt-3",children:"Supported formats: PDF, PNG, JPG (max 50MB)"})]}):r.jsx("div",{className:"space-y-3",children:e.map(h=>r.jsx("div",{onClick:()=>n(h),className:`w-full text-left p-4 rounded-lg border transition-colors cursor-pointer ${(s==null?void 0:s.id)===h.id?"border-blue-300 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:h.name}),h.description&&r.jsx("p",{className:"text-gray-600 text-sm mt-1",children:h.description}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[r.jsx("span",{children:x(h.file_size)}),r.jsx("span",{children:h.file_type}),r.jsx("span",{children:f(h.uploaded_at)})]})]}),h.id===(s==null?void 0:s.id)&&r.jsx("button",{onClick:b=>{b.stopPropagation(),v(h.id)},className:"text-red-600 hover:text-red-700 p-1 text-lg",title:"Delete",children:""})]})},h.id))})}),r.jsx("div",{className:"lg:col-span-3 flex flex-col overflow-hidden h-full",children:s?r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden flex flex-col h-full",children:[r.jsx("div",{className:"bg-gray-100 px-4 py-3 border-b border-gray-200",children:r.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:s.name})}),r.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 flex items-center justify-center",children:s.file_type==="application/pdf"?r.jsx("iframe",{src:`${Gl}${s.file_path}`,className:"w-full h-full border-none",title:"PDF Viewer"}):s.file_type.startsWith("image/")?r.jsx("img",{src:`${Gl}${s.file_path}`,alt:s.name,className:"max-w-full max-h-full object-contain"}):r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"File type not supported for preview"}),r.jsx("a",{href:`${Gl}${s.file_path}`,download:!0,className:"text-blue-600 hover:text-blue-700 text-sm mt-2 inline-block",children:"Download file"})]})}),r.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-t border-gray-200 text-xs text-gray-600",children:[r.jsx("div",{children:x(s.file_size)}),r.jsx("div",{children:f(s.uploaded_at)})]})]}):r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 text-center",children:[r.jsx("div",{className:"text-4xl text-gray-400 mx-auto mb-3",children:""}),r.jsx("p",{className:"text-gray-600 font-medium",children:"Select a document to preview"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Choose a document from the list to view it here"})]})})]})})]})};function qj({children:e,requiredRoles:t}){const s=fr(a=>a.user);return fr(a=>a.isLoading)?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-khc-primary mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s?t&&!t.includes(s.role)?r.jsx(Vo,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:e}):r.jsx(Vo,{to:"/login",replace:!0})}function Vj({onMenuClick:e}){const t=Be(),{user:s,logout:n}=fr(),a=async()=>{await n(),t("/login",{replace:!0})};return r.jsx("header",{className:"bg-khc-primary shadow-md sticky top-0 z-30",children:r.jsxs("div",{className:"h-16 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"md:hidden text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",title:"Toggle sidebar",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsxs(J,{to:"/dashboard",className:"flex md:hidden items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),r.jsx("span",{className:"text-white font-bold hidden sm:inline",children:"QSCostingPro"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"hidden sm:block relative group",children:[r.jsxs("button",{className:"flex items-center space-x-2 text-khc-light hover:bg-khc-secondary px-3 py-2 rounded-md transition",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:s&&s.username.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:"text-sm font-medium",children:s==null?void 0:s.username}),r.jsx("p",{className:"text-xs text-khc-light",children:s&&s.role.charAt(0).toUpperCase()+s.role.slice(1)})]})]}),r.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx(J,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),r.jsxs("div",{className:"sm:hidden relative group",children:[r.jsx("button",{className:"text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",children:r.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:s&&s.username.charAt(0).toUpperCase()})})}),r.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[r.jsx(J,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]})]})]})})}function We({to:e,icon:t,label:s,requiredRoles:n}){const{hasPermission:a}=Qt();return n&&!a(n)?null:r.jsxs(Ag,{to:e,className:({isActive:l})=>`flex items-center gap-3 px-4 py-3 rounded-md transition-all duration-200 ${l?"bg-khc-light border-l-4 border-khc-primary text-khc-primary font-medium scale-[1.02]":"text-gray-700 hover:bg-gray-50 hover:scale-[1.01]"}`,children:[r.jsx("span",{className:"text-lg",children:t}),r.jsx("span",{children:s})]})}function qr({title:e,icon:t,children:s,defaultOpen:n=!0,searchQuery:a=""}){const[l,o]=j.useState(n),i=!a||e.toLowerCase().includes(a.toLowerCase());return a&&!i?null:r.jsxs("div",{className:"border-t border-gray-200 pt-4 first:border-t-0 first:pt-0",children:[r.jsxs("button",{onClick:()=>o(!l),className:"w-full flex items-center gap-2 px-4 mb-2 text-xs font-semibold uppercase text-gray-500 hover:text-gray-700 transition-colors",children:[r.jsx("span",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:""}),t&&r.jsx("span",{children:t}),e]}),l&&r.jsx("div",{className:"space-y-1 animate-slide-in-top",children:s})]})}function Qj({onSearch:e}){const[t,s]=j.useState("");return r.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("input",{type:"text",placeholder:"Search pages...",value:t,onChange:n=>{s(n.target.value),e(n.target.value)},className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})})}function Wd({onClose:e}){const{user:t}=Qt(),[s,n]=j.useState(""),a=()=>{e==null||e()};return r.jsxs("div",{className:"w-64 h-screen bg-white border-r border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"QS"}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg text-gray-900",children:"QSCostingPro"}),r.jsx("p",{className:"text-xs text-gray-500",children:"v1.0"})]})]}),r.jsx(Qj,{onSearch:n}),r.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[r.jsx("div",{onClick:a,className:"space-y-1",children:r.jsx(We,{to:"/dashboard",icon:"",label:"Home"})}),r.jsx(qr,{title:"Projects",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/projects",icon:"",label:"All Projects"}),r.jsx(We,{to:"/projects/new",icon:"",label:"New"}),r.jsx(We,{to:"/projects?status=current",icon:"",label:"Current"}),r.jsx(We,{to:"/projects?status=completed",icon:"",label:"Completed"})]})}),r.jsx(qr,{title:"Estimate Builder",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/projects",icon:"",label:"Build Estimate",requiredRoles:["admin","estimator"]}),r.jsx(We,{to:"/internal-rates",icon:"",label:"Build Rates",requiredRoles:["admin","estimator"]})]})}),r.jsx(qr,{title:"Contacts",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/clients",icon:"",label:"Clients"}),r.jsx(We,{to:"/contractors",icon:"",label:"Contractors"})]})}),r.jsx(qr,{title:"Reference Library",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/nrm2",icon:"",label:"NRM 2 Codes"}),r.jsx(We,{to:"/references/documents",icon:"",label:"Documents"})]})}),r.jsx(qr,{title:"Admin",icon:"",searchQuery:s,children:r.jsxs("div",{onClick:a,className:"space-y-1",children:[r.jsx(We,{to:"/cost-items",icon:"",label:"Cost Database",requiredRoles:"admin"}),r.jsx(We,{to:"/users",icon:"",label:"User Management",requiredRoles:"admin"}),r.jsx(We,{to:"/personal-database",icon:"",label:"Cost Uploader",requiredRoles:"admin"})]})}),r.jsx(qr,{title:"Account",icon:"",searchQuery:s,children:r.jsx("div",{onClick:a,className:"space-y-1",children:r.jsx(We,{to:"/referrals",icon:"",label:"Referrals"})})})]}),t&&r.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-khc-primary rounded-full flex items-center justify-center text-white font-medium text-sm",children:t.username.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.username}),r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:t.role})]})]})})]})}function Kj(){const[e,t]=j.useState(!1);return r.jsxs("div",{className:"min-h-screen bg-khc-light flex",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx(Wd,{})}),e&&r.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>t(!1)}),r.jsx("div",{className:"relative h-full w-80 max-w-[80%] bg-white shadow-xl",children:r.jsx(Wd,{onClose:()=>t(!1)})})]}),r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx(Vj,{onMenuClick:()=>t(!0)}),r.jsx("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx(jg,{})}),r.jsx("footer",{className:"bg-khc-neutral text-khc-light py-6 mt-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{children:r.jsx("p",{className:"text-sm",children:" 2026 QSCostingPro. Professional Cost Estimation for Quantity Surveyors."})}),r.jsx("div",{className:"text-sm",children:r.jsx("p",{children:"Version 1.0.0"})})]})})})]}),r.jsx(V0,{})]})}function Gj(){const{hydrate:e,user:t,accessToken:s}=fr();j.useEffect(()=>{e()},[e]);const n=!!t&&!!s;return r.jsx(Lg,{children:r.jsxs(bg,{children:[r.jsx(ae,{path:"/",element:r.jsx(z0,{})}),r.jsx(ae,{path:"/login",element:r.jsx(W0,{})}),r.jsx(ae,{path:"/register",element:r.jsx(H0,{})}),r.jsx(ae,{path:"/password-reset",element:r.jsx(Q0,{})}),r.jsx(ae,{path:"/privacy",element:r.jsx(K0,{})}),r.jsx(ae,{path:"/terms",element:r.jsx(G0,{})}),r.jsxs(ae,{element:r.jsx(qj,{children:r.jsx(Kj,{})}),children:[r.jsx(ae,{path:"/dashboard",element:r.jsx(nj,{})}),r.jsx(ae,{path:"/projects",element:r.jsx(ij,{})}),r.jsx(ae,{path:"/projects/new",element:r.jsx(Md,{})}),r.jsx(ae,{path:"/projects/:id",element:r.jsx(hj,{})}),r.jsx(ae,{path:"/projects/:id/edit",element:r.jsx(Md,{})}),r.jsx(ae,{path:"/projects/:id/estimates",element:r.jsx(Sj,{})}),r.jsx(ae,{path:"/projects/:id/actuals",element:r.jsx(Rj,{})}),r.jsx(ae,{path:"/projects/:id/report",element:r.jsx(Pj,{})}),r.jsx(ae,{path:"/projects/:id/cost-total",element:r.jsx(Tj,{})}),r.jsx(ae,{path:"/cost-items",element:r.jsx(kj,{})}),r.jsx(ae,{path:"/cost-analysis",element:r.jsx(Lj,{})}),r.jsx(ae,{path:"/personal-database",element:r.jsx(Ij,{})}),r.jsx(ae,{path:"/internal-rates",element:r.jsx($j,{})}),r.jsx(ae,{path:"/cost-assembly",element:r.jsx(Uj,{})}),r.jsx(ae,{path:"/referrals",element:r.jsx(Mj,{})}),r.jsx(ae,{path:"/users",element:r.jsx(Aj,{})}),r.jsx(ae,{path:"/clients",element:r.jsx(Fj,{})}),r.jsx(ae,{path:"/contractors",element:r.jsx(Dj,{})}),r.jsx(ae,{path:"/nrm2",element:r.jsx(Wj,{})}),r.jsx(ae,{path:"/references/documents",element:r.jsx(Hj,{})})]}),r.jsx(ae,{path:"*",element:r.jsx(Vo,{to:n?"/dashboard":"/",replace:!0})})]})})}Jl.createRoot(document.getElementById("root")).render(r.jsx(tn.StrictMode,{children:r.jsx(Gj,{})}));
//# sourceMappingURL=index-qYseP03j.js.map

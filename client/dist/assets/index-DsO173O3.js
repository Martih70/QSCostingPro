function Mp(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function Ad(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Id={exports:{}},Aa={},Dd={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pn=Symbol.for("react.element"),Bp=Symbol.for("react.portal"),zp=Symbol.for("react.fragment"),Hp=Symbol.for("react.strict_mode"),Vp=Symbol.for("react.profiler"),Wp=Symbol.for("react.provider"),qp=Symbol.for("react.context"),Qp=Symbol.for("react.forward_ref"),Kp=Symbol.for("react.suspense"),Gp=Symbol.for("react.memo"),Jp=Symbol.for("react.lazy"),qi=Symbol.iterator;function Yp(e){return e===null||typeof e!="object"?null:(e=qi&&e[qi]||e["@@iterator"],typeof e=="function"?e:null)}var Od={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fd=Object.assign,$d={};function ms(e,t,r){this.props=e,this.context=t,this.refs=$d,this.updater=r||Od}ms.prototype.isReactComponent={};ms.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ms.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ud(){}Ud.prototype=ms.prototype;function Wo(e,t,r){this.props=e,this.context=t,this.refs=$d,this.updater=r||Od}var qo=Wo.prototype=new Ud;qo.constructor=Wo;Fd(qo,ms.prototype);qo.isPureReactComponent=!0;var Qi=Array.isArray,Md=Object.prototype.hasOwnProperty,Qo={current:null},Bd={key:!0,ref:!0,__self:!0,__source:!0};function zd(e,t,r){var n,a={},l=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(l=""+t.key),t)Md.call(t,n)&&!Bd.hasOwnProperty(n)&&(a[n]=t[n]);var i=arguments.length-2;if(i===1)a.children=r;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)a[n]===void 0&&(a[n]=i[n]);return{$$typeof:pn,type:e,key:l,ref:o,props:a,_owner:Qo.current}}function Xp(e,t){return{$$typeof:pn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ko(e){return typeof e=="object"&&e!==null&&e.$$typeof===pn}function Zp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ki=/\/+/g;function cl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zp(""+e.key):t.toString(36)}function Vn(e,t,r,n,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case pn:case Bp:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+cl(o,0):n,Qi(a)?(r="",e!=null&&(r=e.replace(Ki,"$&/")+"/"),Vn(a,t,r,"",function(d){return d})):a!=null&&(Ko(a)&&(a=Xp(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Ki,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Qi(e))for(var i=0;i<e.length;i++){l=e[i];var c=n+cl(l,i);o+=Vn(l,t,r,c,a)}else if(c=Yp(e),typeof c=="function")for(e=c.call(e),i=0;!(l=e.next()).done;)l=l.value,c=n+cl(l,i++),o+=Vn(l,t,r,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function kn(e,t,r){if(e==null)return e;var n=[],a=0;return Vn(e,n,"","",function(l){return t.call(r,l,a++)}),n}function eh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Me={current:null},Wn={transition:null},th={ReactCurrentDispatcher:Me,ReactCurrentBatchConfig:Wn,ReactCurrentOwner:Qo};function Hd(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:kn,forEach:function(e,t,r){kn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return kn(e,function(){t++}),t},toArray:function(e){return kn(e,function(t){return t})||[]},only:function(e){if(!Ko(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=ms;ee.Fragment=zp;ee.Profiler=Vp;ee.PureComponent=Wo;ee.StrictMode=Hp;ee.Suspense=Kp;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th;ee.act=Hd;ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Fd({},e.props),a=e.key,l=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,o=Qo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Md.call(t,c)&&!Bd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:pn,type:e.type,key:a,ref:l,props:n,_owner:o}};ee.createContext=function(e){return e={$$typeof:qp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Wp,_context:e},e.Consumer=e};ee.createElement=zd;ee.createFactory=function(e){var t=zd.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Qp,render:e}};ee.isValidElement=Ko;ee.lazy=function(e){return{$$typeof:Jp,_payload:{_status:-1,_result:e},_init:eh}};ee.memo=function(e,t){return{$$typeof:Gp,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=Wn.transition;Wn.transition={};try{e()}finally{Wn.transition=t}};ee.unstable_act=Hd;ee.useCallback=function(e,t){return Me.current.useCallback(e,t)};ee.useContext=function(e){return Me.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Me.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Me.current.useEffect(e,t)};ee.useId=function(){return Me.current.useId()};ee.useImperativeHandle=function(e,t,r){return Me.current.useImperativeHandle(e,t,r)};ee.useInsertionEffect=function(e,t){return Me.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Me.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Me.current.useMemo(e,t)};ee.useReducer=function(e,t,r){return Me.current.useReducer(e,t,r)};ee.useRef=function(e){return Me.current.useRef(e)};ee.useState=function(e){return Me.current.useState(e)};ee.useSyncExternalStore=function(e,t,r){return Me.current.useSyncExternalStore(e,t,r)};ee.useTransition=function(){return Me.current.useTransition()};ee.version="18.3.1";Dd.exports=ee;var v=Dd.exports;const Ia=Ad(v),rh=Mp({__proto__:null,default:Ia},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=v,nh=Symbol.for("react.element"),ah=Symbol.for("react.fragment"),lh=Object.prototype.hasOwnProperty,oh=sh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ih={key:!0,ref:!0,__self:!0,__source:!0};function Vd(e,t,r){var n,a={},l=null,o=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)lh.call(t,n)&&!ih.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:nh,type:e,key:l,ref:o,props:a,_owner:oh.current}}Aa.Fragment=ah;Aa.jsx=Vd;Aa.jsxs=Vd;Id.exports=Aa;var s=Id.exports,zl={},Wd={exports:{}},at={},qd={exports:{}},Qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,T){var M=E.length;E.push(T);e:for(;0<M;){var K=M-1>>>1,W=E[K];if(0<a(W,T))E[K]=T,E[M]=W,M=K;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var T=E[0],M=E.pop();if(M!==T){E[0]=M;e:for(var K=0,W=E.length,ge=W>>>1;K<ge;){var ie=2*(K+1)-1,Le=E[ie],Fe=ie+1,Ze=E[Fe];if(0>a(Le,M))Fe<W&&0>a(Ze,Le)?(E[K]=Ze,E[Fe]=M,K=Fe):(E[K]=Le,E[ie]=M,K=ie);else if(Fe<W&&0>a(Ze,M))E[K]=Ze,E[Fe]=M,K=Fe;else break e}}return T}function a(E,T){var M=E.sortIndex-T.sortIndex;return M!==0?M:E.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],u=1,f=null,m=3,N=!1,h=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(E){for(var T=r(d);T!==null;){if(T.callback===null)n(d);else if(T.startTime<=E)n(d),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(d)}}function b(E){if(y=!1,x(E),!h)if(r(c)!==null)h=!0,O(k);else{var T=r(d);T!==null&&P(b,T.startTime-E)}}function k(E,T){h=!1,y&&(y=!1,g(L),L=-1),N=!0;var M=m;try{for(x(T),f=r(c);f!==null&&(!(f.expirationTime>T)||E&&!D());){var K=f.callback;if(typeof K=="function"){f.callback=null,m=f.priorityLevel;var W=K(f.expirationTime<=T);T=e.unstable_now(),typeof W=="function"?f.callback=W:f===r(c)&&n(c),x(T)}else n(c);f=r(c)}if(f!==null)var ge=!0;else{var ie=r(d);ie!==null&&P(b,ie.startTime-T),ge=!1}return ge}finally{f=null,m=M,N=!1}}var C=!1,w=null,L=-1,F=5,$=-1;function D(){return!(e.unstable_now()-$<F)}function H(){if(w!==null){var E=e.unstable_now();$=E;var T=!0;try{T=w(!0,E)}finally{T?U():(C=!1,w=null)}}else C=!1}var U;if(typeof p=="function")U=function(){p(H)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,q=A.port2;A.port1.onmessage=H,U=function(){q.postMessage(null)}}else U=function(){j(H,0)};function O(E){w=E,C||(C=!0,U())}function P(E,T){L=j(function(){E(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){h||N||(h=!0,O(k))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(m){case 1:case 2:case 3:var T=3;break;default:T=m}var M=m;m=T;try{return E()}finally{m=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,T){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var M=m;m=E;try{return T()}finally{m=M}},e.unstable_scheduleCallback=function(E,T,M){var K=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?K+M:K):M=K,E){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=M+W,E={id:u++,callback:T,priorityLevel:E,startTime:M,expirationTime:W,sortIndex:-1},M>K?(E.sortIndex=M,t(d,E),r(c)===null&&E===r(d)&&(y?(g(L),L=-1):y=!0,P(b,M-K))):(E.sortIndex=W,t(c,E),h||N||(h=!0,O(k))),E},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(E){var T=m;return function(){var M=m;m=T;try{return E.apply(this,arguments)}finally{m=M}}}})(Qd);qd.exports=Qd;var ch=qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh=v,nt=ch;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kd=new Set,Qs={};function Tr(e,t){rs(e,t),rs(e+"Capture",t)}function rs(e,t){for(Qs[e]=t,e=0;e<t.length;e++)Kd.add(t[e])}var Ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hl=Object.prototype.hasOwnProperty,uh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gi={},Ji={};function mh(e){return Hl.call(Ji,e)?!0:Hl.call(Gi,e)?!1:uh.test(e)?Ji[e]=!0:(Gi[e]=!0,!1)}function ph(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hh(e,t,r,n){if(t===null||typeof t>"u"||ph(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Be(e,t,r,n,a,l,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new Be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pe[t]=new Be(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new Be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new Be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new Be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new Be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new Be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new Be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new Be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Go=/[\-:]([a-z])/g;function Jo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Go,Jo);Pe[t]=new Be(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Go,Jo);Pe[t]=new Be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Go,Jo);Pe[t]=new Be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new Be(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new Be(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yo(e,t,r,n){var a=Pe.hasOwnProperty(t)?Pe[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hh(t,r,a,n)&&(r=null),n||a===null?mh(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Bt=dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sn=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),Xo=Symbol.for("react.strict_mode"),Vl=Symbol.for("react.profiler"),Gd=Symbol.for("react.provider"),Jd=Symbol.for("react.context"),Zo=Symbol.for("react.forward_ref"),Wl=Symbol.for("react.suspense"),ql=Symbol.for("react.suspense_list"),ei=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),Yd=Symbol.for("react.offscreen"),Yi=Symbol.iterator;function bs(e){return e===null||typeof e!="object"?null:(e=Yi&&e[Yi]||e["@@iterator"],typeof e=="function"?e:null)}var me=Object.assign,dl;function Rs(e){if(dl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dl=t&&t[1]||""}return`
`+dl+e}var ul=!1;function ml(e,t){if(!e||ul)return"";ul=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=n.stack.split(`
`),o=a.length-1,i=l.length-1;1<=o&&0<=i&&a[o]!==l[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==l[i]){if(o!==1||i!==1)do if(o--,i--,0>i||a[o]!==l[i]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{ul=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Rs(e):""}function fh(e){switch(e.tag){case 5:return Rs(e.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return e=ml(e.type,!1),e;case 11:return e=ml(e.type.render,!1),e;case 1:return e=ml(e.type,!0),e;default:return""}}function Ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ur:return"Fragment";case $r:return"Portal";case Vl:return"Profiler";case Xo:return"StrictMode";case Wl:return"Suspense";case ql:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jd:return(e.displayName||"Context")+".Consumer";case Gd:return(e._context.displayName||"Context")+".Provider";case Zo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ei:return t=e.displayName||null,t!==null?t:Ql(e.type)||"Memo";case Wt:t=e._payload,e=e._init;try{return Ql(e(t))}catch{}}return null}function xh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ql(t);case 8:return t===Xo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function or(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gh(e){var t=Xd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,l.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cn(e){e._valueTracker||(e._valueTracker=gh(e))}function Zd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Xd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function la(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kl(e,t){var r=t.checked;return me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xi(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=or(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eu(e,t){t=t.checked,t!=null&&Yo(e,"checked",t,!1)}function Gl(e,t){eu(e,t);var r=or(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jl(e,t.type,r):t.hasOwnProperty("defaultValue")&&Jl(e,t.type,or(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zi(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Jl(e,t,r){(t!=="number"||la(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var As=Array.isArray;function Jr(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+or(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Yl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ec(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(I(92));if(As(r)){if(1<r.length)throw Error(I(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:or(r)}}function tu(e,t){var r=or(t.value),n=or(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function tc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ru(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ru(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var En,su=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(En=En||document.createElement("div"),En.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=En.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ks(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yh=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(e){yh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$s[t]=$s[e]})});function nu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$s.hasOwnProperty(e)&&$s[e]?(""+t).trim():t+"px"}function au(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=nu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var vh=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zl(e,t){if(t){if(vh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function eo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var to=null;function ti(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ro=null,Yr=null,Xr=null;function rc(e){if(e=xn(e)){if(typeof ro!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Ua(t),ro(e.stateNode,e.type,t))}}function lu(e){Yr?Xr?Xr.push(e):Xr=[e]:Yr=e}function ou(){if(Yr){var e=Yr,t=Xr;if(Xr=Yr=null,rc(e),t)for(e=0;e<t.length;e++)rc(t[e])}}function iu(e,t){return e(t)}function cu(){}var pl=!1;function du(e,t,r){if(pl)return e(t,r);pl=!0;try{return iu(e,t,r)}finally{pl=!1,(Yr!==null||Xr!==null)&&(cu(),ou())}}function Gs(e,t){var r=e.stateNode;if(r===null)return null;var n=Ua(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(I(231,t,typeof r));return r}var so=!1;if(Ot)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){so=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{so=!1}function jh(e,t,r,n,a,l,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Us=!1,oa=null,ia=!1,no=null,bh={onError:function(e){Us=!0,oa=e}};function Nh(e,t,r,n,a,l,o,i,c){Us=!1,oa=null,jh.apply(bh,arguments)}function wh(e,t,r,n,a,l,o,i,c){if(Nh.apply(this,arguments),Us){if(Us){var d=oa;Us=!1,oa=null}else throw Error(I(198));ia||(ia=!0,no=d)}}function Rr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function uu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sc(e){if(Rr(e)!==e)throw Error(I(188))}function kh(e){var t=e.alternate;if(!t){if(t=Rr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var l=a.alternate;if(l===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===r)return sc(a),e;if(l===n)return sc(a),t;l=l.sibling}throw Error(I(188))}if(r.return!==n.return)r=a,n=l;else{for(var o=!1,i=a.child;i;){if(i===r){o=!0,r=a,n=l;break}if(i===n){o=!0,n=a,r=l;break}i=i.sibling}if(!o){for(i=l.child;i;){if(i===r){o=!0,r=l,n=a;break}if(i===n){o=!0,n=l,r=a;break}i=i.sibling}if(!o)throw Error(I(189))}}if(r.alternate!==n)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?e:t}function mu(e){return e=kh(e),e!==null?pu(e):null}function pu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pu(e);if(t!==null)return t;e=e.sibling}return null}var hu=nt.unstable_scheduleCallback,nc=nt.unstable_cancelCallback,Sh=nt.unstable_shouldYield,Ch=nt.unstable_requestPaint,ye=nt.unstable_now,Eh=nt.unstable_getCurrentPriorityLevel,ri=nt.unstable_ImmediatePriority,fu=nt.unstable_UserBlockingPriority,ca=nt.unstable_NormalPriority,_h=nt.unstable_LowPriority,xu=nt.unstable_IdlePriority,Da=null,Et=null;function Ph(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Da,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:Rh,Lh=Math.log,Th=Math.LN2;function Rh(e){return e>>>=0,e===0?32:31-(Lh(e)/Th|0)|0}var _n=64,Pn=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function da(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,l=e.pingedLanes,o=r&268435455;if(o!==0){var i=o&~a;i!==0?n=Is(i):(l&=o,l!==0&&(n=Is(l)))}else o=r&~a,o!==0?n=Is(o):l!==0&&(n=Is(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-yt(t),a=1<<r,n|=e[r],t&=~a;return n}function Ah(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ih(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var o=31-yt(l),i=1<<o,c=a[o];c===-1?(!(i&r)||i&n)&&(a[o]=Ah(i,t)):c<=t&&(e.expiredLanes|=i),l&=~i}}function ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gu(){var e=_n;return _n<<=1,!(_n&4194240)&&(_n=64),e}function hl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yt(t),e[t]=r}function Dh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-yt(r),l=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~l}}function si(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-yt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var re=0;function yu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vu,ni,ju,bu,Nu,lo=!1,Ln=[],Xt=null,Zt=null,er=null,Js=new Map,Ys=new Map,Qt=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ac(e,t){switch(e){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(t.pointerId)}}function ws(e,t,r,n,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[a]},t!==null&&(t=xn(t),t!==null&&ni(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Fh(e,t,r,n,a){switch(t){case"focusin":return Xt=ws(Xt,e,t,r,n,a),!0;case"dragenter":return Zt=ws(Zt,e,t,r,n,a),!0;case"mouseover":return er=ws(er,e,t,r,n,a),!0;case"pointerover":var l=a.pointerId;return Js.set(l,ws(Js.get(l)||null,e,t,r,n,a)),!0;case"gotpointercapture":return l=a.pointerId,Ys.set(l,ws(Ys.get(l)||null,e,t,r,n,a)),!0}return!1}function wu(e){var t=gr(e.target);if(t!==null){var r=Rr(t);if(r!==null){if(t=r.tag,t===13){if(t=uu(r),t!==null){e.blockedOn=t,Nu(e.priority,function(){ju(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qn(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=oo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);to=n,r.target.dispatchEvent(n),to=null}else return t=xn(r),t!==null&&ni(t),e.blockedOn=r,!1;t.shift()}return!0}function lc(e,t,r){qn(e)&&r.delete(t)}function $h(){lo=!1,Xt!==null&&qn(Xt)&&(Xt=null),Zt!==null&&qn(Zt)&&(Zt=null),er!==null&&qn(er)&&(er=null),Js.forEach(lc),Ys.forEach(lc)}function ks(e,t){e.blockedOn===t&&(e.blockedOn=null,lo||(lo=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,$h)))}function Xs(e){function t(a){return ks(a,e)}if(0<Ln.length){ks(Ln[0],e);for(var r=1;r<Ln.length;r++){var n=Ln[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Xt!==null&&ks(Xt,e),Zt!==null&&ks(Zt,e),er!==null&&ks(er,e),Js.forEach(t),Ys.forEach(t),r=0;r<Qt.length;r++)n=Qt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qt.length&&(r=Qt[0],r.blockedOn===null);)wu(r),r.blockedOn===null&&Qt.shift()}var Zr=Bt.ReactCurrentBatchConfig,ua=!0;function Uh(e,t,r,n){var a=re,l=Zr.transition;Zr.transition=null;try{re=1,ai(e,t,r,n)}finally{re=a,Zr.transition=l}}function Mh(e,t,r,n){var a=re,l=Zr.transition;Zr.transition=null;try{re=4,ai(e,t,r,n)}finally{re=a,Zr.transition=l}}function ai(e,t,r,n){if(ua){var a=oo(e,t,r,n);if(a===null)kl(e,t,n,ma,r),ac(e,n);else if(Fh(a,e,t,r,n))n.stopPropagation();else if(ac(e,n),t&4&&-1<Oh.indexOf(e)){for(;a!==null;){var l=xn(a);if(l!==null&&vu(l),l=oo(e,t,r,n),l===null&&kl(e,t,n,ma,r),l===a)break;a=l}a!==null&&n.stopPropagation()}else kl(e,t,n,null,r)}}var ma=null;function oo(e,t,r,n){if(ma=null,e=ti(n),e=gr(e),e!==null)if(t=Rr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=uu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ma=e,null}function ku(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eh()){case ri:return 1;case fu:return 4;case ca:case _h:return 16;case xu:return 536870912;default:return 16}default:return 16}}var Gt=null,li=null,Qn=null;function Su(){if(Qn)return Qn;var e,t=li,r=t.length,n,a="value"in Gt?Gt.value:Gt.textContent,l=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[l-n];n++);return Qn=a.slice(e,1<n?1-n:void 0)}function Kn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tn(){return!0}function oc(){return!1}function lt(e){function t(r,n,a,l,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=l,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Tn:oc,this.isPropagationStopped=oc,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Tn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Tn)},persist:function(){},isPersistent:Tn}),t}var ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oi=lt(ps),fn=me({},ps,{view:0,detail:0}),Bh=lt(fn),fl,xl,Ss,Oa=me({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ii,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ss&&(Ss&&e.type==="mousemove"?(fl=e.screenX-Ss.screenX,xl=e.screenY-Ss.screenY):xl=fl=0,Ss=e),fl)},movementY:function(e){return"movementY"in e?e.movementY:xl}}),ic=lt(Oa),zh=me({},Oa,{dataTransfer:0}),Hh=lt(zh),Vh=me({},fn,{relatedTarget:0}),gl=lt(Vh),Wh=me({},ps,{animationName:0,elapsedTime:0,pseudoElement:0}),qh=lt(Wh),Qh=me({},ps,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kh=lt(Qh),Gh=me({},ps,{data:0}),cc=lt(Gh),Jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xh[e])?!!t[e]:!1}function ii(){return Zh}var ef=me({},fn,{key:function(e){if(e.key){var t=Jh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ii,charCode:function(e){return e.type==="keypress"?Kn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tf=lt(ef),rf=me({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=lt(rf),sf=me({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ii}),nf=lt(sf),af=me({},ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),lf=lt(af),of=me({},Oa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cf=lt(of),df=[9,13,27,32],ci=Ot&&"CompositionEvent"in window,Ms=null;Ot&&"documentMode"in document&&(Ms=document.documentMode);var uf=Ot&&"TextEvent"in window&&!Ms,Cu=Ot&&(!ci||Ms&&8<Ms&&11>=Ms),uc=" ",mc=!1;function Eu(e,t){switch(e){case"keyup":return df.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function mf(e,t){switch(e){case"compositionend":return _u(t);case"keypress":return t.which!==32?null:(mc=!0,uc);case"textInput":return e=t.data,e===uc&&mc?null:e;default:return null}}function pf(e,t){if(Mr)return e==="compositionend"||!ci&&Eu(e,t)?(e=Su(),Qn=li=Gt=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cu&&t.locale!=="ko"?null:t.data;default:return null}}var hf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hf[e.type]:t==="textarea"}function Pu(e,t,r,n){lu(n),t=pa(t,"onChange"),0<t.length&&(r=new oi("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Bs=null,Zs=null;function ff(e){Mu(e,0)}function Fa(e){var t=Hr(e);if(Zd(t))return e}function xf(e,t){if(e==="change")return t}var Lu=!1;if(Ot){var yl;if(Ot){var vl="oninput"in document;if(!vl){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),vl=typeof hc.oninput=="function"}yl=vl}else yl=!1;Lu=yl&&(!document.documentMode||9<document.documentMode)}function fc(){Bs&&(Bs.detachEvent("onpropertychange",Tu),Zs=Bs=null)}function Tu(e){if(e.propertyName==="value"&&Fa(Zs)){var t=[];Pu(t,Zs,e,ti(e)),du(ff,t)}}function gf(e,t,r){e==="focusin"?(fc(),Bs=t,Zs=r,Bs.attachEvent("onpropertychange",Tu)):e==="focusout"&&fc()}function yf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fa(Zs)}function vf(e,t){if(e==="click")return Fa(t)}function jf(e,t){if(e==="input"||e==="change")return Fa(t)}function bf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:bf;function en(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Hl.call(t,a)||!jt(e[a],t[a]))return!1}return!0}function xc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var r=xc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xc(r)}}function Ru(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ru(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Au(){for(var e=window,t=la();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=la(e.document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Nf(e){var t=Au(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ru(r.ownerDocument.documentElement,r)){if(n!==null&&di(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,l=Math.min(n.start,a);n=n.end===void 0?l:Math.min(n.end,a),!e.extend&&l>n&&(a=n,n=l,l=a),a=gc(r,l);var o=gc(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wf=Ot&&"documentMode"in document&&11>=document.documentMode,Br=null,io=null,zs=null,co=!1;function yc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;co||Br==null||Br!==la(n)||(n=Br,"selectionStart"in n&&di(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zs&&en(zs,n)||(zs=n,n=pa(io,"onSelect"),0<n.length&&(t=new oi("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Br)))}function Rn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zr={animationend:Rn("Animation","AnimationEnd"),animationiteration:Rn("Animation","AnimationIteration"),animationstart:Rn("Animation","AnimationStart"),transitionend:Rn("Transition","TransitionEnd")},jl={},Iu={};Ot&&(Iu=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function $a(e){if(jl[e])return jl[e];if(!zr[e])return e;var t=zr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Iu)return jl[e]=t[r];return e}var Du=$a("animationend"),Ou=$a("animationiteration"),Fu=$a("animationstart"),$u=$a("transitionend"),Uu=new Map,vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){Uu.set(e,t),Tr(t,[e])}for(var bl=0;bl<vc.length;bl++){var Nl=vc[bl],kf=Nl.toLowerCase(),Sf=Nl[0].toUpperCase()+Nl.slice(1);dr(kf,"on"+Sf)}dr(Du,"onAnimationEnd");dr(Ou,"onAnimationIteration");dr(Fu,"onAnimationStart");dr("dblclick","onDoubleClick");dr("focusin","onFocus");dr("focusout","onBlur");dr($u,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ds));function jc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,wh(n,t,void 0,e),e.currentTarget=null}function Mu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==l&&a.isPropagationStopped())break e;jc(a,i,d),l=c}else for(o=0;o<n.length;o++){if(i=n[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==l&&a.isPropagationStopped())break e;jc(a,i,d),l=c}}}if(ia)throw e=no,ia=!1,no=null,e}function ae(e,t){var r=t[fo];r===void 0&&(r=t[fo]=new Set);var n=e+"__bubble";r.has(n)||(Bu(t,e,2,!1),r.add(n))}function wl(e,t,r){var n=0;t&&(n|=4),Bu(r,e,n,t)}var An="_reactListening"+Math.random().toString(36).slice(2);function tn(e){if(!e[An]){e[An]=!0,Kd.forEach(function(r){r!=="selectionchange"&&(Cf.has(r)||wl(r,!1,e),wl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[An]||(t[An]=!0,wl("selectionchange",!1,t))}}function Bu(e,t,r,n){switch(ku(t)){case 1:var a=Uh;break;case 4:a=Mh;break;default:a=ai}r=a.bind(null,t,r,e),a=void 0,!so||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function kl(e,t,r,n,a){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===a||i.nodeType===8&&i.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;i!==null;){if(o=gr(i),o===null)return;if(c=o.tag,c===5||c===6){n=l=o;continue e}i=i.parentNode}}n=n.return}du(function(){var d=l,u=ti(r),f=[];e:{var m=Uu.get(e);if(m!==void 0){var N=oi,h=e;switch(e){case"keypress":if(Kn(r)===0)break e;case"keydown":case"keyup":N=tf;break;case"focusin":h="focus",N=gl;break;case"focusout":h="blur",N=gl;break;case"beforeblur":case"afterblur":N=gl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=nf;break;case Du:case Ou:case Fu:N=qh;break;case $u:N=lf;break;case"scroll":N=Bh;break;case"wheel":N=cf;break;case"copy":case"cut":case"paste":N=Kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=dc}var y=(t&4)!==0,j=!y&&e==="scroll",g=y?m!==null?m+"Capture":null:m;y=[];for(var p=d,x;p!==null;){x=p;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=Gs(p,g),b!=null&&y.push(rn(p,b,x)))),j)break;p=p.return}0<y.length&&(m=new N(m,h,null,r,u),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",m&&r!==to&&(h=r.relatedTarget||r.fromElement)&&(gr(h)||h[Ft]))break e;if((N||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,N?(h=r.relatedTarget||r.toElement,N=d,h=h?gr(h):null,h!==null&&(j=Rr(h),h!==j||h.tag!==5&&h.tag!==6)&&(h=null)):(N=null,h=d),N!==h)){if(y=ic,b="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=dc,b="onPointerLeave",g="onPointerEnter",p="pointer"),j=N==null?m:Hr(N),x=h==null?m:Hr(h),m=new y(b,p+"leave",N,r,u),m.target=j,m.relatedTarget=x,b=null,gr(u)===d&&(y=new y(g,p+"enter",h,r,u),y.target=x,y.relatedTarget=j,b=y),j=b,N&&h)t:{for(y=N,g=h,p=0,x=y;x;x=Ir(x))p++;for(x=0,b=g;b;b=Ir(b))x++;for(;0<p-x;)y=Ir(y),p--;for(;0<x-p;)g=Ir(g),x--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=Ir(y),g=Ir(g)}y=null}else y=null;N!==null&&bc(f,m,N,y,!1),h!==null&&j!==null&&bc(f,j,h,y,!0)}}e:{if(m=d?Hr(d):window,N=m.nodeName&&m.nodeName.toLowerCase(),N==="select"||N==="input"&&m.type==="file")var k=xf;else if(pc(m))if(Lu)k=jf;else{k=yf;var C=gf}else(N=m.nodeName)&&N.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=vf);if(k&&(k=k(e,d))){Pu(f,k,r,u);break e}C&&C(e,m,d),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Jl(m,"number",m.value)}switch(C=d?Hr(d):window,e){case"focusin":(pc(C)||C.contentEditable==="true")&&(Br=C,io=d,zs=null);break;case"focusout":zs=io=Br=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,yc(f,r,u);break;case"selectionchange":if(wf)break;case"keydown":case"keyup":yc(f,r,u)}var w;if(ci)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Mr?Eu(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(Cu&&r.locale!=="ko"&&(Mr||L!=="onCompositionStart"?L==="onCompositionEnd"&&Mr&&(w=Su()):(Gt=u,li="value"in Gt?Gt.value:Gt.textContent,Mr=!0)),C=pa(d,L),0<C.length&&(L=new cc(L,e,null,r,u),f.push({event:L,listeners:C}),w?L.data=w:(w=_u(r),w!==null&&(L.data=w)))),(w=uf?mf(e,r):pf(e,r))&&(d=pa(d,"onBeforeInput"),0<d.length&&(u=new cc("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=w))}Mu(f,t)})}function rn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function pa(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Gs(e,r),l!=null&&n.unshift(rn(e,l,a)),l=Gs(e,t),l!=null&&n.push(rn(e,l,a))),e=e.return}return n}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bc(e,t,r,n,a){for(var l=t._reactName,o=[];r!==null&&r!==n;){var i=r,c=i.alternate,d=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&d!==null&&(i=d,a?(c=Gs(r,l),c!=null&&o.unshift(rn(r,c,i))):a||(c=Gs(r,l),c!=null&&o.push(rn(r,c,i)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Ef=/\r\n?/g,_f=/\u0000|\uFFFD/g;function Nc(e){return(typeof e=="string"?e:""+e).replace(Ef,`
`).replace(_f,"")}function In(e,t,r){if(t=Nc(t),Nc(e)!==t&&r)throw Error(I(425))}function ha(){}var uo=null,mo=null;function po(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ho=typeof setTimeout=="function"?setTimeout:void 0,Pf=typeof clearTimeout=="function"?clearTimeout:void 0,wc=typeof Promise=="function"?Promise:void 0,Lf=typeof queueMicrotask=="function"?queueMicrotask:typeof wc<"u"?function(e){return wc.resolve(null).then(e).catch(Tf)}:ho;function Tf(e){setTimeout(function(){throw e})}function Sl(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Xs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Xs(t)}function tr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),Ct="__reactFiber$"+hs,sn="__reactProps$"+hs,Ft="__reactContainer$"+hs,fo="__reactEvents$"+hs,Rf="__reactListeners$"+hs,Af="__reactHandles$"+hs;function gr(e){var t=e[Ct];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ft]||r[Ct]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=kc(e);e!==null;){if(r=e[Ct])return r;e=kc(e)}return t}e=r,r=e.parentNode}return null}function xn(e){return e=e[Ct]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Ua(e){return e[sn]||null}var xo=[],Vr=-1;function ur(e){return{current:e}}function le(e){0>Vr||(e.current=xo[Vr],xo[Vr]=null,Vr--)}function ne(e,t){Vr++,xo[Vr]=e.current,e.current=t}var ir={},Oe=ur(ir),Qe=ur(!1),Sr=ir;function ss(e,t){var r=e.type.contextTypes;if(!r)return ir;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in r)a[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ke(e){return e=e.childContextTypes,e!=null}function fa(){le(Qe),le(Oe)}function Sc(e,t,r){if(Oe.current!==ir)throw Error(I(168));ne(Oe,t),ne(Qe,r)}function zu(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(I(108,xh(e)||"Unknown",a));return me({},r,n)}function xa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ir,Sr=Oe.current,ne(Oe,e),ne(Qe,Qe.current),!0}function Cc(e,t,r){var n=e.stateNode;if(!n)throw Error(I(169));r?(e=zu(e,t,Sr),n.__reactInternalMemoizedMergedChildContext=e,le(Qe),le(Oe),ne(Oe,e)):le(Qe),ne(Qe,r)}var Rt=null,Ma=!1,Cl=!1;function Hu(e){Rt===null?Rt=[e]:Rt.push(e)}function If(e){Ma=!0,Hu(e)}function mr(){if(!Cl&&Rt!==null){Cl=!0;var e=0,t=re;try{var r=Rt;for(re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Rt=null,Ma=!1}catch(a){throw Rt!==null&&(Rt=Rt.slice(e+1)),hu(ri,mr),a}finally{re=t,Cl=!1}}return null}var Wr=[],qr=0,ga=null,ya=0,ot=[],it=0,Cr=null,At=1,It="";function hr(e,t){Wr[qr++]=ya,Wr[qr++]=ga,ga=e,ya=t}function Vu(e,t,r){ot[it++]=At,ot[it++]=It,ot[it++]=Cr,Cr=e;var n=At;e=It;var a=32-yt(n)-1;n&=~(1<<a),r+=1;var l=32-yt(t)+a;if(30<l){var o=a-a%5;l=(n&(1<<o)-1).toString(32),n>>=o,a-=o,At=1<<32-yt(t)+a|r<<a|n,It=l+e}else At=1<<l|r<<a|n,It=e}function ui(e){e.return!==null&&(hr(e,1),Vu(e,1,0))}function mi(e){for(;e===ga;)ga=Wr[--qr],Wr[qr]=null,ya=Wr[--qr],Wr[qr]=null;for(;e===Cr;)Cr=ot[--it],ot[it]=null,It=ot[--it],ot[it]=null,At=ot[--it],ot[it]=null}var st=null,rt=null,oe=!1,gt=null;function Wu(e,t){var r=ct(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ec(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,rt=tr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Cr!==null?{id:At,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ct(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,st=e,rt=null,!0):!1;default:return!1}}function go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yo(e){if(oe){var t=rt;if(t){var r=t;if(!Ec(e,t)){if(go(e))throw Error(I(418));t=tr(r.nextSibling);var n=st;t&&Ec(e,t)?Wu(n,r):(e.flags=e.flags&-4097|2,oe=!1,st=e)}}else{if(go(e))throw Error(I(418));e.flags=e.flags&-4097|2,oe=!1,st=e}}}function _c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function Dn(e){if(e!==st)return!1;if(!oe)return _c(e),oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!po(e.type,e.memoizedProps)),t&&(t=rt)){if(go(e))throw qu(),Error(I(418));for(;t;)Wu(e,t),t=tr(t.nextSibling)}if(_c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){rt=tr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}rt=null}}else rt=st?tr(e.stateNode.nextSibling):null;return!0}function qu(){for(var e=rt;e;)e=tr(e.nextSibling)}function ns(){rt=st=null,oe=!1}function pi(e){gt===null?gt=[e]:gt.push(e)}var Df=Bt.ReactCurrentBatchConfig;function Cs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var n=r.stateNode}if(!n)throw Error(I(147,e));var a=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var i=a.refs;o===null?delete i[l]:i[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,e))}return e}function On(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pc(e){var t=e._init;return t(e._payload)}function Qu(e){function t(g,p){if(e){var x=g.deletions;x===null?(g.deletions=[p],g.flags|=16):x.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=ar(g,p),g.index=0,g.sibling=null,g}function l(g,p,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<p?(g.flags|=2,p):x):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,p,x,b){return p===null||p.tag!==6?(p=Al(x,g.mode,b),p.return=g,p):(p=a(p,x),p.return=g,p)}function c(g,p,x,b){var k=x.type;return k===Ur?u(g,p,x.props.children,b,x.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wt&&Pc(k)===p.type)?(b=a(p,x.props),b.ref=Cs(g,p,x),b.return=g,b):(b=ta(x.type,x.key,x.props,null,g.mode,b),b.ref=Cs(g,p,x),b.return=g,b)}function d(g,p,x,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=Il(x,g.mode,b),p.return=g,p):(p=a(p,x.children||[]),p.return=g,p)}function u(g,p,x,b,k){return p===null||p.tag!==7?(p=Nr(x,g.mode,b,k),p.return=g,p):(p=a(p,x),p.return=g,p)}function f(g,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Al(""+p,g.mode,x),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Sn:return x=ta(p.type,p.key,p.props,null,g.mode,x),x.ref=Cs(g,null,p),x.return=g,x;case $r:return p=Il(p,g.mode,x),p.return=g,p;case Wt:var b=p._init;return f(g,b(p._payload),x)}if(As(p)||bs(p))return p=Nr(p,g.mode,x,null),p.return=g,p;On(g,p)}return null}function m(g,p,x,b){var k=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:i(g,p,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sn:return x.key===k?c(g,p,x,b):null;case $r:return x.key===k?d(g,p,x,b):null;case Wt:return k=x._init,m(g,p,k(x._payload),b)}if(As(x)||bs(x))return k!==null?null:u(g,p,x,b,null);On(g,x)}return null}function N(g,p,x,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,i(p,g,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sn:return g=g.get(b.key===null?x:b.key)||null,c(p,g,b,k);case $r:return g=g.get(b.key===null?x:b.key)||null,d(p,g,b,k);case Wt:var C=b._init;return N(g,p,x,C(b._payload),k)}if(As(b)||bs(b))return g=g.get(x)||null,u(p,g,b,k,null);On(p,b)}return null}function h(g,p,x,b){for(var k=null,C=null,w=p,L=p=0,F=null;w!==null&&L<x.length;L++){w.index>L?(F=w,w=null):F=w.sibling;var $=m(g,w,x[L],b);if($===null){w===null&&(w=F);break}e&&w&&$.alternate===null&&t(g,w),p=l($,p,L),C===null?k=$:C.sibling=$,C=$,w=F}if(L===x.length)return r(g,w),oe&&hr(g,L),k;if(w===null){for(;L<x.length;L++)w=f(g,x[L],b),w!==null&&(p=l(w,p,L),C===null?k=w:C.sibling=w,C=w);return oe&&hr(g,L),k}for(w=n(g,w);L<x.length;L++)F=N(w,g,L,x[L],b),F!==null&&(e&&F.alternate!==null&&w.delete(F.key===null?L:F.key),p=l(F,p,L),C===null?k=F:C.sibling=F,C=F);return e&&w.forEach(function(D){return t(g,D)}),oe&&hr(g,L),k}function y(g,p,x,b){var k=bs(x);if(typeof k!="function")throw Error(I(150));if(x=k.call(x),x==null)throw Error(I(151));for(var C=k=null,w=p,L=p=0,F=null,$=x.next();w!==null&&!$.done;L++,$=x.next()){w.index>L?(F=w,w=null):F=w.sibling;var D=m(g,w,$.value,b);if(D===null){w===null&&(w=F);break}e&&w&&D.alternate===null&&t(g,w),p=l(D,p,L),C===null?k=D:C.sibling=D,C=D,w=F}if($.done)return r(g,w),oe&&hr(g,L),k;if(w===null){for(;!$.done;L++,$=x.next())$=f(g,$.value,b),$!==null&&(p=l($,p,L),C===null?k=$:C.sibling=$,C=$);return oe&&hr(g,L),k}for(w=n(g,w);!$.done;L++,$=x.next())$=N(w,g,L,$.value,b),$!==null&&(e&&$.alternate!==null&&w.delete($.key===null?L:$.key),p=l($,p,L),C===null?k=$:C.sibling=$,C=$);return e&&w.forEach(function(H){return t(g,H)}),oe&&hr(g,L),k}function j(g,p,x,b){if(typeof x=="object"&&x!==null&&x.type===Ur&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Sn:e:{for(var k=x.key,C=p;C!==null;){if(C.key===k){if(k=x.type,k===Ur){if(C.tag===7){r(g,C.sibling),p=a(C,x.props.children),p.return=g,g=p;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wt&&Pc(k)===C.type){r(g,C.sibling),p=a(C,x.props),p.ref=Cs(g,C,x),p.return=g,g=p;break e}r(g,C);break}else t(g,C);C=C.sibling}x.type===Ur?(p=Nr(x.props.children,g.mode,b,x.key),p.return=g,g=p):(b=ta(x.type,x.key,x.props,null,g.mode,b),b.ref=Cs(g,p,x),b.return=g,g=b)}return o(g);case $r:e:{for(C=x.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){r(g,p.sibling),p=a(p,x.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=Il(x,g.mode,b),p.return=g,g=p}return o(g);case Wt:return C=x._init,j(g,p,C(x._payload),b)}if(As(x))return h(g,p,x,b);if(bs(x))return y(g,p,x,b);On(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(r(g,p.sibling),p=a(p,x),p.return=g,g=p):(r(g,p),p=Al(x,g.mode,b),p.return=g,g=p),o(g)):r(g,p)}return j}var as=Qu(!0),Ku=Qu(!1),va=ur(null),ja=null,Qr=null,hi=null;function fi(){hi=Qr=ja=null}function xi(e){var t=va.current;le(va),e._currentValue=t}function vo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function es(e,t){ja=e,hi=Qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qe=!0),e.firstContext=null)}function ut(e){var t=e._currentValue;if(hi!==e)if(e={context:e,memoizedValue:t,next:null},Qr===null){if(ja===null)throw Error(I(308));Qr=e,ja.dependencies={lanes:0,firstContext:e}}else Qr=Qr.next=e;return t}var yr=null;function gi(e){yr===null?yr=[e]:yr.push(e)}function Gu(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,gi(t)):(r.next=a.next,a.next=r),t.interleaved=r,$t(e,n)}function $t(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qt=!1;function yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ju(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,te&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,$t(e,r)}return a=n.interleaved,a===null?(t.next=t,gi(n)):(t.next=a.next,a.next=t),n.interleaved=t,$t(e,r)}function Gn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,si(e,r)}}function Lc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?a=l=o:l=l.next=o,r=r.next}while(r!==null);l===null?a=l=t:l=l.next=t}else a=l=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ba(e,t,r,n){var a=e.updateQueue;qt=!1;var l=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(i!==null){a.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?l=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==o&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(l!==null){var f=a.baseState;o=0,u=d=c=null,i=l;do{var m=i.lane,N=i.eventTime;if((n&m)===m){u!==null&&(u=u.next={eventTime:N,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,y=i;switch(m=t,N=r,y.tag){case 1:if(h=y.payload,typeof h=="function"){f=h.call(N,f,m);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=y.payload,m=typeof h=="function"?h.call(N,f,m):h,m==null)break e;f=me({},f,m);break e;case 2:qt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[i]:m.push(i))}else N={eventTime:N,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=N,c=f):u=u.next=N,o|=m;if(i=i.next,i===null){if(i=a.shared.pending,i===null)break;m=i,i=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);_r|=o,e.lanes=o,e.memoizedState=f}}function Tc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(I(191,a));a.call(n)}}}var gn={},_t=ur(gn),nn=ur(gn),an=ur(gn);function vr(e){if(e===gn)throw Error(I(174));return e}function vi(e,t){switch(ne(an,t),ne(nn,e),ne(_t,gn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xl(t,e)}le(_t),ne(_t,t)}function ls(){le(_t),le(nn),le(an)}function Yu(e){vr(an.current);var t=vr(_t.current),r=Xl(t,e.type);t!==r&&(ne(nn,e),ne(_t,r))}function ji(e){nn.current===e&&(le(_t),le(nn))}var ce=ur(0);function Na(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var El=[];function bi(){for(var e=0;e<El.length;e++)El[e]._workInProgressVersionPrimary=null;El.length=0}var Jn=Bt.ReactCurrentDispatcher,_l=Bt.ReactCurrentBatchConfig,Er=0,de=null,Ne=null,ke=null,wa=!1,Hs=!1,ln=0,Of=0;function Te(){throw Error(I(321))}function Ni(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!jt(e[r],t[r]))return!1;return!0}function wi(e,t,r,n,a,l){if(Er=l,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jn.current=e===null||e.memoizedState===null?Mf:Bf,e=r(n,a),Hs){l=0;do{if(Hs=!1,ln=0,25<=l)throw Error(I(301));l+=1,ke=Ne=null,t.updateQueue=null,Jn.current=zf,e=r(n,a)}while(Hs)}if(Jn.current=ka,t=Ne!==null&&Ne.next!==null,Er=0,ke=Ne=de=null,wa=!1,t)throw Error(I(300));return e}function ki(){var e=ln!==0;return ln=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?de.memoizedState=ke=e:ke=ke.next=e,ke}function mt(){if(Ne===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Ne.next;var t=ke===null?de.memoizedState:ke.next;if(t!==null)ke=t,Ne=e;else{if(e===null)throw Error(I(310));Ne=e,e={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},ke===null?de.memoizedState=ke=e:ke=ke.next=e}return ke}function on(e,t){return typeof t=="function"?t(e):t}function Pl(e){var t=mt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=Ne,a=n.baseQueue,l=r.pending;if(l!==null){if(a!==null){var o=a.next;a.next=l.next,l.next=o}n.baseQueue=a=l,r.pending=null}if(a!==null){l=a.next,n=n.baseState;var i=o=null,c=null,d=l;do{var u=d.lane;if((Er&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,o=n):c=c.next=f,de.lanes|=u,_r|=u}d=d.next}while(d!==null&&d!==l);c===null?o=n:c.next=i,jt(n,t.memoizedState)||(qe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do l=a.lane,de.lanes|=l,_r|=l,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ll(e){var t=mt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,l=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do l=e(l,o.action),o=o.next;while(o!==a);jt(l,t.memoizedState)||(qe=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Xu(){}function Zu(e,t){var r=de,n=mt(),a=t(),l=!jt(n.memoizedState,a);if(l&&(n.memoizedState=a,qe=!0),n=n.queue,Si(rm.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,cn(9,tm.bind(null,r,n,a,t),void 0,null),Se===null)throw Error(I(349));Er&30||em(r,t,a)}return a}function em(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function tm(e,t,r,n){t.value=r,t.getSnapshot=n,sm(t)&&nm(e)}function rm(e,t,r){return r(function(){sm(t)&&nm(e)})}function sm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!jt(e,r)}catch{return!0}}function nm(e){var t=$t(e,1);t!==null&&vt(t,e,1,-1)}function Rc(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:on,lastRenderedState:e},t.queue=e,e=e.dispatch=Uf.bind(null,de,e),[t.memoizedState,e]}function cn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function am(){return mt().memoizedState}function Yn(e,t,r,n){var a=St();de.flags|=e,a.memoizedState=cn(1|t,r,void 0,n===void 0?null:n)}function Ba(e,t,r,n){var a=mt();n=n===void 0?null:n;var l=void 0;if(Ne!==null){var o=Ne.memoizedState;if(l=o.destroy,n!==null&&Ni(n,o.deps)){a.memoizedState=cn(t,r,l,n);return}}de.flags|=e,a.memoizedState=cn(1|t,r,l,n)}function Ac(e,t){return Yn(8390656,8,e,t)}function Si(e,t){return Ba(2048,8,e,t)}function lm(e,t){return Ba(4,2,e,t)}function om(e,t){return Ba(4,4,e,t)}function im(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cm(e,t,r){return r=r!=null?r.concat([e]):null,Ba(4,4,im.bind(null,t,e),r)}function Ci(){}function dm(e,t){var r=mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ni(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function um(e,t){var r=mt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ni(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function mm(e,t,r){return Er&21?(jt(r,t)||(r=gu(),de.lanes|=r,_r|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qe=!0),e.memoizedState=r)}function Ff(e,t){var r=re;re=r!==0&&4>r?r:4,e(!0);var n=_l.transition;_l.transition={};try{e(!1),t()}finally{re=r,_l.transition=n}}function pm(){return mt().memoizedState}function $f(e,t,r){var n=nr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},hm(e))fm(t,r);else if(r=Gu(e,t,r,n),r!==null){var a=Ue();vt(r,e,n,a),xm(r,t,n)}}function Uf(e,t,r){var n=nr(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(hm(e))fm(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var o=t.lastRenderedState,i=l(o,r);if(a.hasEagerState=!0,a.eagerState=i,jt(i,o)){var c=t.interleaved;c===null?(a.next=a,gi(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Gu(e,t,a,n),r!==null&&(a=Ue(),vt(r,e,n,a),xm(r,t,n))}}function hm(e){var t=e.alternate;return e===de||t!==null&&t===de}function fm(e,t){Hs=wa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function xm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,si(e,r)}}var ka={readContext:ut,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},Mf={readContext:ut,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:ut,useEffect:Ac,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Yn(4194308,4,im.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Yn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yn(4,2,e,t)},useMemo:function(e,t){var r=St();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=St();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$f.bind(null,de,e),[n.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:Rc,useDebugValue:Ci,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=Rc(!1),t=e[0];return e=Ff.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=de,a=St();if(oe){if(r===void 0)throw Error(I(407));r=r()}else{if(r=t(),Se===null)throw Error(I(349));Er&30||em(n,t,r)}a.memoizedState=r;var l={value:r,getSnapshot:t};return a.queue=l,Ac(rm.bind(null,n,l,e),[e]),n.flags|=2048,cn(9,tm.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=St(),t=Se.identifierPrefix;if(oe){var r=It,n=At;r=(n&~(1<<32-yt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ln++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Of++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Bf={readContext:ut,useCallback:dm,useContext:ut,useEffect:Si,useImperativeHandle:cm,useInsertionEffect:lm,useLayoutEffect:om,useMemo:um,useReducer:Pl,useRef:am,useState:function(){return Pl(on)},useDebugValue:Ci,useDeferredValue:function(e){var t=mt();return mm(t,Ne.memoizedState,e)},useTransition:function(){var e=Pl(on)[0],t=mt().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Zu,useId:pm,unstable_isNewReconciler:!1},zf={readContext:ut,useCallback:dm,useContext:ut,useEffect:Si,useImperativeHandle:cm,useInsertionEffect:lm,useLayoutEffect:om,useMemo:um,useReducer:Ll,useRef:am,useState:function(){return Ll(on)},useDebugValue:Ci,useDeferredValue:function(e){var t=mt();return Ne===null?t.memoizedState=e:mm(t,Ne.memoizedState,e)},useTransition:function(){var e=Ll(on)[0],t=mt().memoizedState;return[e,t]},useMutableSource:Xu,useSyncExternalStore:Zu,useId:pm,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=me({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function jo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:me({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var za={isMounted:function(e){return(e=e._reactInternals)?Rr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ue(),a=nr(e),l=Dt(n,a);l.payload=t,r!=null&&(l.callback=r),t=rr(e,l,a),t!==null&&(vt(t,e,a,n),Gn(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ue(),a=nr(e),l=Dt(n,a);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=rr(e,l,a),t!==null&&(vt(t,e,a,n),Gn(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ue(),n=nr(e),a=Dt(r,n);a.tag=2,t!=null&&(a.callback=t),t=rr(e,a,n),t!==null&&(vt(t,e,n,r),Gn(t,e,n))}};function Ic(e,t,r,n,a,l,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,o):t.prototype&&t.prototype.isPureReactComponent?!en(r,n)||!en(a,l):!0}function gm(e,t,r){var n=!1,a=ir,l=t.contextType;return typeof l=="object"&&l!==null?l=ut(l):(a=Ke(t)?Sr:Oe.current,n=t.contextTypes,l=(n=n!=null)?ss(e,a):ir),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function Dc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function bo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},yi(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=ut(l):(l=Ke(t)?Sr:Oe.current,a.context=ss(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(jo(e,t,l,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&za.enqueueReplaceState(a,a.state,null),ba(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function os(e,t){try{var r="",n=t;do r+=fh(n),n=n.return;while(n);var a=r}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Tl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function No(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Hf=typeof WeakMap=="function"?WeakMap:Map;function ym(e,t,r){r=Dt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ca||(Ca=!0,Ro=n),No(e,t)},r}function vm(e,t,r){r=Dt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){No(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){No(e,t),typeof n!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Oc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Hf;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=sx.bind(null,e,t,r),t.then(e,e))}function Fc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $c(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dt(-1,1),t.tag=2,rr(r,t,1))),r.lanes|=1),e)}var Vf=Bt.ReactCurrentOwner,qe=!1;function $e(e,t,r,n){t.child=e===null?Ku(t,null,r,n):as(t,e.child,r,n)}function Uc(e,t,r,n,a){r=r.render;var l=t.ref;return es(t,a),n=wi(e,t,r,n,l,a),r=ki(),e!==null&&!qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ut(e,t,a)):(oe&&r&&ui(t),t.flags|=1,$e(e,t,n,a),t.child)}function Mc(e,t,r,n,a){if(e===null){var l=r.type;return typeof l=="function"&&!Ii(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,jm(e,t,l,n,a)):(e=ta(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var o=l.memoizedProps;if(r=r.compare,r=r!==null?r:en,r(o,n)&&e.ref===t.ref)return Ut(e,t,a)}return t.flags|=1,e=ar(l,n),e.ref=t.ref,e.return=t,t.child=e}function jm(e,t,r,n,a){if(e!==null){var l=e.memoizedProps;if(en(l,n)&&e.ref===t.ref)if(qe=!1,t.pendingProps=n=l,(e.lanes&a)!==0)e.flags&131072&&(qe=!0);else return t.lanes=e.lanes,Ut(e,t,a)}return wo(e,t,r,n,a)}function bm(e,t,r){var n=t.pendingProps,a=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Gr,tt),tt|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(Gr,tt),tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,ne(Gr,tt),tt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,ne(Gr,tt),tt|=n;return $e(e,t,a,r),t.child}function Nm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wo(e,t,r,n,a){var l=Ke(r)?Sr:Oe.current;return l=ss(t,l),es(t,a),r=wi(e,t,r,n,l,a),n=ki(),e!==null&&!qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ut(e,t,a)):(oe&&n&&ui(t),t.flags|=1,$e(e,t,r,a),t.child)}function Bc(e,t,r,n,a){if(Ke(r)){var l=!0;xa(t)}else l=!1;if(es(t,a),t.stateNode===null)Xn(e,t),gm(t,r,n),bo(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ut(d):(d=Ke(r)?Sr:Oe.current,d=ss(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||c!==d)&&Dc(t,o,n,d),qt=!1;var m=t.memoizedState;o.state=m,ba(t,n,o,a),c=t.memoizedState,i!==n||m!==c||Qe.current||qt?(typeof u=="function"&&(jo(t,r,u,n),c=t.memoizedState),(i=qt||Ic(t,r,i,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ju(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:ft(t.type,i),o.props=d,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ut(c):(c=Ke(r)?Sr:Oe.current,c=ss(t,c));var N=r.getDerivedStateFromProps;(u=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==f||m!==c)&&Dc(t,o,n,c),qt=!1,m=t.memoizedState,o.state=m,ba(t,n,o,a);var h=t.memoizedState;i!==f||m!==h||Qe.current||qt?(typeof N=="function"&&(jo(t,r,N,n),h=t.memoizedState),(d=qt||Ic(t,r,d,n,m,h,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,h,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,h,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return ko(e,t,r,n,l,a)}function ko(e,t,r,n,a,l){Nm(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Cc(t,r,!1),Ut(e,t,l);n=t.stateNode,Vf.current=t;var i=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=as(t,e.child,null,l),t.child=as(t,null,i,l)):$e(e,t,i,l),t.memoizedState=n.state,a&&Cc(t,r,!0),t.child}function wm(e){var t=e.stateNode;t.pendingContext?Sc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sc(e,t.context,!1),vi(e,t.containerInfo)}function zc(e,t,r,n,a){return ns(),pi(a),t.flags|=256,$e(e,t,r,n),t.child}var So={dehydrated:null,treeContext:null,retryLane:0};function Co(e){return{baseLanes:e,cachePool:null,transitions:null}}function km(e,t,r){var n=t.pendingProps,a=ce.current,l=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(a&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ne(ce,a&1),e===null)return yo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,l?(n=t.mode,l=t.child,o={mode:"hidden",children:o},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=o):l=Wa(o,n,0,null),e=Nr(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Co(r),t.memoizedState=So,e):Ei(t,o));if(a=e.memoizedState,a!==null&&(i=a.dehydrated,i!==null))return Wf(e,t,o,n,i,a,r);if(l){l=n.fallback,o=t.mode,a=e.child,i=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ar(a,c),n.subtreeFlags=a.subtreeFlags&14680064),i!==null?l=ar(i,l):(l=Nr(l,o,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,o=e.child.memoizedState,o=o===null?Co(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~r,t.memoizedState=So,n}return l=e.child,e=l.sibling,n=ar(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ei(e,t){return t=Wa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fn(e,t,r,n){return n!==null&&pi(n),as(t,e.child,null,r),e=Ei(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wf(e,t,r,n,a,l,o){if(r)return t.flags&256?(t.flags&=-257,n=Tl(Error(I(422))),Fn(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,a=t.mode,n=Wa({mode:"visible",children:n.children},a,0,null),l=Nr(l,a,o,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&as(t,e.child,null,o),t.child.memoizedState=Co(o),t.memoizedState=So,l);if(!(t.mode&1))return Fn(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var i=n.dgst;return n=i,l=Error(I(419)),n=Tl(l,n,void 0),Fn(e,t,o,n)}if(i=(o&e.childLanes)!==0,qe||i){if(n=Se,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,$t(e,a),vt(n,e,a,-1))}return Ai(),n=Tl(Error(I(421))),Fn(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=nx.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,rt=tr(a.nextSibling),st=t,oe=!0,gt=null,e!==null&&(ot[it++]=At,ot[it++]=It,ot[it++]=Cr,At=e.id,It=e.overflow,Cr=t),t=Ei(t,n.children),t.flags|=4096,t)}function Hc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),vo(e.return,t,r)}function Rl(e,t,r,n,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=a)}function Sm(e,t,r){var n=t.pendingProps,a=n.revealOrder,l=n.tail;if($e(e,t,n.children,r),n=ce.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,r,t);else if(e.tag===19)Hc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ne(ce,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Na(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Rl(t,!1,a,r,l);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Na(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Rl(t,!0,r,null,l);break;case"together":Rl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ut(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),_r|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,r=ar(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ar(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qf(e,t,r){switch(t.tag){case 3:wm(t),ns();break;case 5:Yu(t);break;case 1:Ke(t.type)&&xa(t);break;case 4:vi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ne(va,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ne(ce,ce.current&1),t.flags|=128,null):r&t.child.childLanes?km(e,t,r):(ne(ce,ce.current&1),e=Ut(e,t,r),e!==null?e.sibling:null);ne(ce,ce.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Sm(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ne(ce,ce.current),n)break;return null;case 22:case 23:return t.lanes=0,bm(e,t,r)}return Ut(e,t,r)}var Cm,Eo,Em,_m;Cm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Eo=function(){};Em=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,vr(_t.current);var l=null;switch(r){case"input":a=Kl(e,a),n=Kl(e,n),l=[];break;case"select":a=me({},a,{value:void 0}),n=me({},n,{value:void 0}),l=[];break;case"textarea":a=Yl(e,a),n=Yl(e,n),l=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ha)}Zl(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var i=a[d];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qs.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in n){var c=n[d];if(i=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(l||(l=[]),l.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ae("scroll",e),l||i===c||(l=[])):(l=l||[]).push(d,c))}r&&(l=l||[]).push("style",r);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};_m=function(e,t,r,n){r!==n&&(t.flags|=4)};function Es(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Qf(e,t,r){var n=t.pendingProps;switch(mi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Ke(t.type)&&fa(),Re(t),null;case 3:return n=t.stateNode,ls(),le(Qe),le(Oe),bi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Dn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gt!==null&&(Do(gt),gt=null))),Eo(e,t),Re(t),null;case 5:ji(t);var a=vr(an.current);if(r=t.type,e!==null&&t.stateNode!=null)Em(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(I(166));return Re(t),null}if(e=vr(_t.current),Dn(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Ct]=t,n[sn]=l,e=(t.mode&1)!==0,r){case"dialog":ae("cancel",n),ae("close",n);break;case"iframe":case"object":case"embed":ae("load",n);break;case"video":case"audio":for(a=0;a<Ds.length;a++)ae(Ds[a],n);break;case"source":ae("error",n);break;case"img":case"image":case"link":ae("error",n),ae("load",n);break;case"details":ae("toggle",n);break;case"input":Xi(n,l),ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},ae("invalid",n);break;case"textarea":ec(n,l),ae("invalid",n)}Zl(r,l),a=null;for(var o in l)if(l.hasOwnProperty(o)){var i=l[o];o==="children"?typeof i=="string"?n.textContent!==i&&(l.suppressHydrationWarning!==!0&&In(n.textContent,i,e),a=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&In(n.textContent,i,e),a=["children",""+i]):Qs.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&ae("scroll",n)}switch(r){case"input":Cn(n),Zi(n,l,!0);break;case"textarea":Cn(n),tc(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ha)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ru(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Ct]=t,e[sn]=n,Cm(e,t,!1,!1),t.stateNode=e;e:{switch(o=eo(r,n),r){case"dialog":ae("cancel",e),ae("close",e),a=n;break;case"iframe":case"object":case"embed":ae("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ds.length;a++)ae(Ds[a],e);a=n;break;case"source":ae("error",e),a=n;break;case"img":case"image":case"link":ae("error",e),ae("load",e),a=n;break;case"details":ae("toggle",e),a=n;break;case"input":Xi(e,n),a=Kl(e,n),ae("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=me({},n,{value:void 0}),ae("invalid",e);break;case"textarea":ec(e,n),a=Yl(e,n),ae("invalid",e);break;default:a=n}Zl(r,a),i=a;for(l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="style"?au(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&su(e,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ks(e,c):typeof c=="number"&&Ks(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qs.hasOwnProperty(l)?c!=null&&l==="onScroll"&&ae("scroll",e):c!=null&&Yo(e,l,c,o))}switch(r){case"input":Cn(e),Zi(e,n,!1);break;case"textarea":Cn(e),tc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+or(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Jr(e,!!n.multiple,l,!1):n.defaultValue!=null&&Jr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ha)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)_m(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));if(r=vr(an.current),vr(_t.current),Dn(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ct]=t,(l=n.nodeValue!==r)&&(e=st,e!==null))switch(e.tag){case 3:In(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&In(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ct]=t,t.stateNode=n}return Re(t),null;case 13:if(le(ce),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oe&&rt!==null&&t.mode&1&&!(t.flags&128))qu(),ns(),t.flags|=98560,l=!1;else if(l=Dn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(I(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(I(317));l[Ct]=t}else ns(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),l=!1}else gt!==null&&(Do(gt),gt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?we===0&&(we=3):Ai())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return ls(),Eo(e,t),e===null&&tn(t.stateNode.containerInfo),Re(t),null;case 10:return xi(t.type._context),Re(t),null;case 17:return Ke(t.type)&&fa(),Re(t),null;case 19:if(le(ce),l=t.memoizedState,l===null)return Re(t),null;if(n=(t.flags&128)!==0,o=l.rendering,o===null)if(n)Es(l,!1);else{if(we!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Na(e),o!==null){for(t.flags|=128,Es(l,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,o=l.alternate,o===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ne(ce,ce.current&1|2),t.child}e=e.sibling}l.tail!==null&&ye()>is&&(t.flags|=128,n=!0,Es(l,!1),t.lanes=4194304)}else{if(!n)if(e=Na(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Es(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!oe)return Re(t),null}else 2*ye()-l.renderingStartTime>is&&r!==1073741824&&(t.flags|=128,n=!0,Es(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(r=l.last,r!==null?r.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ye(),t.sibling=null,r=ce.current,ne(ce,n?r&1|2:r&1),t):(Re(t),null);case 22:case 23:return Ri(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?tt&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function Kf(e,t){switch(mi(t),t.tag){case 1:return Ke(t.type)&&fa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(),le(Qe),le(Oe),bi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ji(t),null;case 13:if(le(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));ns()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(ce),null;case 4:return ls(),null;case 10:return xi(t.type._context),null;case 22:case 23:return Ri(),null;case 24:return null;default:return null}}var $n=!1,Ie=!1,Gf=typeof WeakSet=="function"?WeakSet:Set,z=null;function Kr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){fe(e,t,n)}else r.current=null}function _o(e,t,r){try{r()}catch(n){fe(e,t,n)}}var Vc=!1;function Jf(e,t){if(uo=ua,e=Au(),di(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var o=0,i=-1,c=-1,d=0,u=0,f=e,m=null;t:for(;;){for(var N;f!==r||a!==0&&f.nodeType!==3||(i=o+a),f!==l||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(N=f.firstChild)!==null;)m=f,f=N;for(;;){if(f===e)break t;if(m===r&&++d===a&&(i=o),m===l&&++u===n&&(c=o),(N=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=N}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(mo={focusedElem:e,selectionRange:r},ua=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var y=h.memoizedProps,j=h.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ft(t.type,y),j);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(b){fe(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return h=Vc,Vc=!1,h}function Vs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&_o(t,r,l)}a=a.next}while(a!==n)}}function Ha(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Po(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Pm(e){var t=e.alternate;t!==null&&(e.alternate=null,Pm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[sn],delete t[fo],delete t[Rf],delete t[Af])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lm(e){return e.tag===5||e.tag===3||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ha));else if(n!==4&&(e=e.child,e!==null))for(Lo(e,t,r),e=e.sibling;e!==null;)Lo(e,t,r),e=e.sibling}function To(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(To(e,t,r),e=e.sibling;e!==null;)To(e,t,r),e=e.sibling}var Ee=null,xt=!1;function Vt(e,t,r){for(r=r.child;r!==null;)Tm(e,t,r),r=r.sibling}function Tm(e,t,r){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Da,r)}catch{}switch(r.tag){case 5:Ie||Kr(r,t);case 6:var n=Ee,a=xt;Ee=null,Vt(e,t,r),Ee=n,xt=a,Ee!==null&&(xt?(e=Ee,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ee.removeChild(r.stateNode));break;case 18:Ee!==null&&(xt?(e=Ee,r=r.stateNode,e.nodeType===8?Sl(e.parentNode,r):e.nodeType===1&&Sl(e,r),Xs(e)):Sl(Ee,r.stateNode));break;case 4:n=Ee,a=xt,Ee=r.stateNode.containerInfo,xt=!0,Vt(e,t,r),Ee=n,xt=a;break;case 0:case 11:case 14:case 15:if(!Ie&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var l=a,o=l.destroy;l=l.tag,o!==void 0&&(l&2||l&4)&&_o(r,t,o),a=a.next}while(a!==n)}Vt(e,t,r);break;case 1:if(!Ie&&(Kr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){fe(r,t,i)}Vt(e,t,r);break;case 21:Vt(e,t,r);break;case 22:r.mode&1?(Ie=(n=Ie)||r.memoizedState!==null,Vt(e,t,r),Ie=n):Vt(e,t,r);break;default:Vt(e,t,r)}}function qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Gf),t.forEach(function(n){var a=ax.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ht(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var l=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:Ee=i.stateNode,xt=!1;break e;case 3:Ee=i.stateNode.containerInfo,xt=!0;break e;case 4:Ee=i.stateNode.containerInfo,xt=!0;break e}i=i.return}if(Ee===null)throw Error(I(160));Tm(l,o,a),Ee=null,xt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){fe(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rm(t,e),t=t.sibling}function Rm(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(t,e),wt(e),n&4){try{Vs(3,e,e.return),Ha(3,e)}catch(y){fe(e,e.return,y)}try{Vs(5,e,e.return)}catch(y){fe(e,e.return,y)}}break;case 1:ht(t,e),wt(e),n&512&&r!==null&&Kr(r,r.return);break;case 5:if(ht(t,e),wt(e),n&512&&r!==null&&Kr(r,r.return),e.flags&32){var a=e.stateNode;try{Ks(a,"")}catch(y){fe(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,o=r!==null?r.memoizedProps:l,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&eu(a,l),eo(i,o);var d=eo(i,l);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?au(a,f):u==="dangerouslySetInnerHTML"?su(a,f):u==="children"?Ks(a,f):Yo(a,u,f,d)}switch(i){case"input":Gl(a,l);break;case"textarea":tu(a,l);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?Jr(a,!!l.multiple,N,!1):m!==!!l.multiple&&(l.defaultValue!=null?Jr(a,!!l.multiple,l.defaultValue,!0):Jr(a,!!l.multiple,l.multiple?[]:"",!1))}a[sn]=l}catch(y){fe(e,e.return,y)}}break;case 6:if(ht(t,e),wt(e),n&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(y){fe(e,e.return,y)}}break;case 3:if(ht(t,e),wt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Xs(t.containerInfo)}catch(y){fe(e,e.return,y)}break;case 4:ht(t,e),wt(e);break;case 13:ht(t,e),wt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Li=ye())),n&4&&qc(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ie=(d=Ie)||u,ht(t,e),Ie=d):ht(t,e),wt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(z=e,u=e.child;u!==null;){for(f=z=u;z!==null;){switch(m=z,N=m.child,m.tag){case 0:case 11:case 14:case 15:Vs(4,m,m.return);break;case 1:Kr(m,m.return);var h=m.stateNode;if(typeof h.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(y){fe(n,r,y)}}break;case 5:Kr(m,m.return);break;case 22:if(m.memoizedState!==null){Kc(f);continue}}N!==null?(N.return=m,z=N):Kc(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=nu("display",o))}catch(y){fe(e,e.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){fe(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ht(t,e),wt(e),n&4&&qc(e);break;case 21:break;default:ht(t,e),wt(e)}}function wt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Lm(r)){var n=r;break e}r=r.return}throw Error(I(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ks(a,""),n.flags&=-33);var l=Wc(e);To(e,l,a);break;case 3:case 4:var o=n.stateNode.containerInfo,i=Wc(e);Lo(e,i,o);break;default:throw Error(I(161))}}catch(c){fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yf(e,t,r){z=e,Am(e)}function Am(e,t,r){for(var n=(e.mode&1)!==0;z!==null;){var a=z,l=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||$n;if(!o){var i=a.alternate,c=i!==null&&i.memoizedState!==null||Ie;i=$n;var d=Ie;if($n=o,(Ie=c)&&!d)for(z=a;z!==null;)o=z,c=o.child,o.tag===22&&o.memoizedState!==null?Gc(a):c!==null?(c.return=o,z=c):Gc(a);for(;l!==null;)z=l,Am(l),l=l.sibling;z=a,$n=i,Ie=d}Qc(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,z=l):Qc(e)}}function Qc(e){for(;z!==null;){var t=z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ie||Ha(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ie)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ft(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Tc(t,l,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Tc(t,o,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Xs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ie||t.flags&512&&Po(t)}catch(m){fe(t,t.return,m)}}if(t===e){z=null;break}if(r=t.sibling,r!==null){r.return=t.return,z=r;break}z=t.return}}function Kc(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,z=r;break}z=t.return}}function Gc(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ha(4,t)}catch(c){fe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){fe(t,a,c)}}var l=t.return;try{Po(t)}catch(c){fe(t,l,c)}break;case 5:var o=t.return;try{Po(t)}catch(c){fe(t,o,c)}}}catch(c){fe(t,t.return,c)}if(t===e){z=null;break}var i=t.sibling;if(i!==null){i.return=t.return,z=i;break}z=t.return}}var Xf=Math.ceil,Sa=Bt.ReactCurrentDispatcher,_i=Bt.ReactCurrentOwner,dt=Bt.ReactCurrentBatchConfig,te=0,Se=null,ve=null,_e=0,tt=0,Gr=ur(0),we=0,dn=null,_r=0,Va=0,Pi=0,Ws=null,We=null,Li=0,is=1/0,Tt=null,Ca=!1,Ro=null,sr=null,Un=!1,Jt=null,Ea=0,qs=0,Ao=null,Zn=-1,ea=0;function Ue(){return te&6?ye():Zn!==-1?Zn:Zn=ye()}function nr(e){return e.mode&1?te&2&&_e!==0?_e&-_e:Df.transition!==null?(ea===0&&(ea=gu()),ea):(e=re,e!==0||(e=window.event,e=e===void 0?16:ku(e.type)),e):1}function vt(e,t,r,n){if(50<qs)throw qs=0,Ao=null,Error(I(185));hn(e,r,n),(!(te&2)||e!==Se)&&(e===Se&&(!(te&2)&&(Va|=r),we===4&&Kt(e,_e)),Ge(e,n),r===1&&te===0&&!(t.mode&1)&&(is=ye()+500,Ma&&mr()))}function Ge(e,t){var r=e.callbackNode;Ih(e,t);var n=da(e,e===Se?_e:0);if(n===0)r!==null&&nc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&nc(r),t===1)e.tag===0?If(Jc.bind(null,e)):Hu(Jc.bind(null,e)),Lf(function(){!(te&6)&&mr()}),r=null;else{switch(yu(n)){case 1:r=ri;break;case 4:r=fu;break;case 16:r=ca;break;case 536870912:r=xu;break;default:r=ca}r=Bm(r,Im.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Im(e,t){if(Zn=-1,ea=0,te&6)throw Error(I(327));var r=e.callbackNode;if(ts()&&e.callbackNode!==r)return null;var n=da(e,e===Se?_e:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=_a(e,n);else{t=n;var a=te;te|=2;var l=Om();(Se!==e||_e!==t)&&(Tt=null,is=ye()+500,br(e,t));do try{tx();break}catch(i){Dm(e,i)}while(!0);fi(),Sa.current=l,te=a,ve!==null?t=0:(Se=null,_e=0,t=we)}if(t!==0){if(t===2&&(a=ao(e),a!==0&&(n=a,t=Io(e,a))),t===1)throw r=dn,br(e,0),Kt(e,n),Ge(e,ye()),r;if(t===6)Kt(e,n);else{if(a=e.current.alternate,!(n&30)&&!Zf(a)&&(t=_a(e,n),t===2&&(l=ao(e),l!==0&&(n=l,t=Io(e,l))),t===1))throw r=dn,br(e,0),Kt(e,n),Ge(e,ye()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(I(345));case 2:fr(e,We,Tt);break;case 3:if(Kt(e,n),(n&130023424)===n&&(t=Li+500-ye(),10<t)){if(da(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Ue(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ho(fr.bind(null,e,We,Tt),t);break}fr(e,We,Tt);break;case 4:if(Kt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-yt(n);l=1<<o,o=t[o],o>a&&(a=o),n&=~l}if(n=a,n=ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Xf(n/1960))-n,10<n){e.timeoutHandle=ho(fr.bind(null,e,We,Tt),n);break}fr(e,We,Tt);break;case 5:fr(e,We,Tt);break;default:throw Error(I(329))}}}return Ge(e,ye()),e.callbackNode===r?Im.bind(null,e):null}function Io(e,t){var r=Ws;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=_a(e,t),e!==2&&(t=We,We=r,t!==null&&Do(t)),e}function Do(e){We===null?We=e:We.push.apply(We,e)}function Zf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],l=a.getSnapshot;a=a.value;try{if(!jt(l(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Kt(e,t){for(t&=~Pi,t&=~Va,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-yt(t),n=1<<r;e[r]=-1,t&=~n}}function Jc(e){if(te&6)throw Error(I(327));ts();var t=da(e,0);if(!(t&1))return Ge(e,ye()),null;var r=_a(e,t);if(e.tag!==0&&r===2){var n=ao(e);n!==0&&(t=n,r=Io(e,n))}if(r===1)throw r=dn,br(e,0),Kt(e,t),Ge(e,ye()),r;if(r===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fr(e,We,Tt),Ge(e,ye()),null}function Ti(e,t){var r=te;te|=1;try{return e(t)}finally{te=r,te===0&&(is=ye()+500,Ma&&mr())}}function Pr(e){Jt!==null&&Jt.tag===0&&!(te&6)&&ts();var t=te;te|=1;var r=dt.transition,n=re;try{if(dt.transition=null,re=1,e)return e()}finally{re=n,dt.transition=r,te=t,!(te&6)&&mr()}}function Ri(){tt=Gr.current,le(Gr)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Pf(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(mi(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fa();break;case 3:ls(),le(Qe),le(Oe),bi();break;case 5:ji(n);break;case 4:ls();break;case 13:le(ce);break;case 19:le(ce);break;case 10:xi(n.type._context);break;case 22:case 23:Ri()}r=r.return}if(Se=e,ve=e=ar(e.current,null),_e=tt=t,we=0,dn=null,Pi=Va=_r=0,We=Ws=null,yr!==null){for(t=0;t<yr.length;t++)if(r=yr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,l=r.pending;if(l!==null){var o=l.next;l.next=a,n.next=o}r.pending=n}yr=null}return e}function Dm(e,t){do{var r=ve;try{if(fi(),Jn.current=ka,wa){for(var n=de.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}wa=!1}if(Er=0,ke=Ne=de=null,Hs=!1,ln=0,_i.current=null,r===null||r.return===null){we=1,dn=t,ve=null;break}e:{var l=e,o=r.return,i=r,c=t;if(t=_e,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var N=Fc(o);if(N!==null){N.flags&=-257,$c(N,o,i,l,t),N.mode&1&&Oc(l,d,t),t=N,c=d;var h=t.updateQueue;if(h===null){var y=new Set;y.add(c),t.updateQueue=y}else h.add(c);break e}else{if(!(t&1)){Oc(l,d,t),Ai();break e}c=Error(I(426))}}else if(oe&&i.mode&1){var j=Fc(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),$c(j,o,i,l,t),pi(os(c,i));break e}}l=c=os(c,i),we!==4&&(we=2),Ws===null?Ws=[l]:Ws.push(l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=ym(l,c,t);Lc(l,g);break e;case 1:i=c;var p=l.type,x=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(sr===null||!sr.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t;var b=vm(l,i,t);Lc(l,b);break e}}l=l.return}while(l!==null)}$m(r)}catch(k){t=k,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function Om(){var e=Sa.current;return Sa.current=ka,e===null?ka:e}function Ai(){(we===0||we===3||we===2)&&(we=4),Se===null||!(_r&268435455)&&!(Va&268435455)||Kt(Se,_e)}function _a(e,t){var r=te;te|=2;var n=Om();(Se!==e||_e!==t)&&(Tt=null,br(e,t));do try{ex();break}catch(a){Dm(e,a)}while(!0);if(fi(),te=r,Sa.current=n,ve!==null)throw Error(I(261));return Se=null,_e=0,we}function ex(){for(;ve!==null;)Fm(ve)}function tx(){for(;ve!==null&&!Sh();)Fm(ve)}function Fm(e){var t=Mm(e.alternate,e,tt);e.memoizedProps=e.pendingProps,t===null?$m(e):ve=t,_i.current=null}function $m(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Kf(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{we=6,ve=null;return}}else if(r=Qf(r,t,tt),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);we===0&&(we=5)}function fr(e,t,r){var n=re,a=dt.transition;try{dt.transition=null,re=1,rx(e,t,r,n)}finally{dt.transition=a,re=n}return null}function rx(e,t,r,n){do ts();while(Jt!==null);if(te&6)throw Error(I(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(Dh(e,l),e===Se&&(ve=Se=null,_e=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Un||(Un=!0,Bm(ca,function(){return ts(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=dt.transition,dt.transition=null;var o=re;re=1;var i=te;te|=4,_i.current=null,Jf(e,r),Rm(r,e),Nf(mo),ua=!!uo,mo=uo=null,e.current=r,Yf(r),Ch(),te=i,re=o,dt.transition=l}else e.current=r;if(Un&&(Un=!1,Jt=e,Ea=a),l=e.pendingLanes,l===0&&(sr=null),Ph(r.stateNode),Ge(e,ye()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ca)throw Ca=!1,e=Ro,Ro=null,e;return Ea&1&&e.tag!==0&&ts(),l=e.pendingLanes,l&1?e===Ao?qs++:(qs=0,Ao=e):qs=0,mr(),null}function ts(){if(Jt!==null){var e=yu(Ea),t=dt.transition,r=re;try{if(dt.transition=null,re=16>e?16:e,Jt===null)var n=!1;else{if(e=Jt,Jt=null,Ea=0,te&6)throw Error(I(331));var a=te;for(te|=4,z=e.current;z!==null;){var l=z,o=l.child;if(z.flags&16){var i=l.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(z=d;z!==null;){var u=z;switch(u.tag){case 0:case 11:case 15:Vs(8,u,l)}var f=u.child;if(f!==null)f.return=u,z=f;else for(;z!==null;){u=z;var m=u.sibling,N=u.return;if(Pm(u),u===d){z=null;break}if(m!==null){m.return=N,z=m;break}z=N}}}var h=l.alternate;if(h!==null){var y=h.child;if(y!==null){h.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}z=l}}if(l.subtreeFlags&2064&&o!==null)o.return=l,z=o;else e:for(;z!==null;){if(l=z,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Vs(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,z=g;break e}z=l.return}}var p=e.current;for(z=p;z!==null;){o=z;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,z=x;else e:for(o=p;z!==null;){if(i=z,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Ha(9,i)}}catch(k){fe(i,i.return,k)}if(i===o){z=null;break e}var b=i.sibling;if(b!==null){b.return=i.return,z=b;break e}z=i.return}}if(te=a,mr(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Da,e)}catch{}n=!0}return n}finally{re=r,dt.transition=t}}return!1}function Yc(e,t,r){t=os(r,t),t=ym(e,t,1),e=rr(e,t,1),t=Ue(),e!==null&&(hn(e,1,t),Ge(e,t))}function fe(e,t,r){if(e.tag===3)Yc(e,e,r);else for(;t!==null;){if(t.tag===3){Yc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(sr===null||!sr.has(n))){e=os(r,e),e=vm(t,e,1),t=rr(t,e,1),e=Ue(),t!==null&&(hn(t,1,e),Ge(t,e));break}}t=t.return}}function sx(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&r,Se===e&&(_e&r)===r&&(we===4||we===3&&(_e&130023424)===_e&&500>ye()-Li?br(e,0):Pi|=r),Ge(e,t)}function Um(e,t){t===0&&(e.mode&1?(t=Pn,Pn<<=1,!(Pn&130023424)&&(Pn=4194304)):t=1);var r=Ue();e=$t(e,t),e!==null&&(hn(e,t,r),Ge(e,r))}function nx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Um(e,r)}function ax(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(t),Um(e,r)}var Mm;Mm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)qe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qe=!1,qf(e,t,r);qe=!!(e.flags&131072)}else qe=!1,oe&&t.flags&1048576&&Vu(t,ya,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Xn(e,t),e=t.pendingProps;var a=ss(t,Oe.current);es(t,r),a=wi(null,t,n,e,a,r);var l=ki();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ke(n)?(l=!0,xa(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,yi(t),a.updater=za,t.stateNode=a,a._reactInternals=t,bo(t,n,e,r),t=ko(null,t,n,!0,l,r)):(t.tag=0,oe&&l&&ui(t),$e(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Xn(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=ox(n),e=ft(n,e),a){case 0:t=wo(null,t,n,e,r);break e;case 1:t=Bc(null,t,n,e,r);break e;case 11:t=Uc(null,t,n,e,r);break e;case 14:t=Mc(null,t,n,ft(n.type,e),r);break e}throw Error(I(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ft(n,a),wo(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ft(n,a),Bc(e,t,n,a,r);case 3:e:{if(wm(t),e===null)throw Error(I(387));n=t.pendingProps,l=t.memoizedState,a=l.element,Ju(e,t),ba(t,n,null,r);var o=t.memoizedState;if(n=o.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=os(Error(I(423)),t),t=zc(e,t,n,r,a);break e}else if(n!==a){a=os(Error(I(424)),t),t=zc(e,t,n,r,a);break e}else for(rt=tr(t.stateNode.containerInfo.firstChild),st=t,oe=!0,gt=null,r=Ku(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ns(),n===a){t=Ut(e,t,r);break e}$e(e,t,n,r)}t=t.child}return t;case 5:return Yu(t),e===null&&yo(t),n=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,o=a.children,po(n,a)?o=null:l!==null&&po(n,l)&&(t.flags|=32),Nm(e,t),$e(e,t,o,r),t.child;case 6:return e===null&&yo(t),null;case 13:return km(e,t,r);case 4:return vi(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=as(t,null,n,r):$e(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ft(n,a),Uc(e,t,n,a,r);case 7:return $e(e,t,t.pendingProps,r),t.child;case 8:return $e(e,t,t.pendingProps.children,r),t.child;case 12:return $e(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,l=t.memoizedProps,o=a.value,ne(va,n._currentValue),n._currentValue=o,l!==null)if(jt(l.value,o)){if(l.children===a.children&&!Qe.current){t=Ut(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){o=l.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(l.tag===1){c=Dt(-1,r&-r),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),vo(l.return,r,t),i.lanes|=r;break}c=c.next}}else if(l.tag===10)o=l.type===t.type?null:l.child;else if(l.tag===18){if(o=l.return,o===null)throw Error(I(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),vo(o,r,t),o=l.sibling}else o=l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===t){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}$e(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,es(t,r),a=ut(a),n=n(a),t.flags|=1,$e(e,t,n,r),t.child;case 14:return n=t.type,a=ft(n,t.pendingProps),a=ft(n.type,a),Mc(e,t,n,a,r);case 15:return jm(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ft(n,a),Xn(e,t),t.tag=1,Ke(n)?(e=!0,xa(t)):e=!1,es(t,r),gm(t,n,a),bo(t,n,a,r),ko(null,t,n,!0,e,r);case 19:return Sm(e,t,r);case 22:return bm(e,t,r)}throw Error(I(156,t.tag))};function Bm(e,t){return hu(e,t)}function lx(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ct(e,t,r,n){return new lx(e,t,r,n)}function Ii(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ox(e){if(typeof e=="function")return Ii(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zo)return 11;if(e===ei)return 14}return 2}function ar(e,t){var r=e.alternate;return r===null?(r=ct(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ta(e,t,r,n,a,l){var o=2;if(n=e,typeof e=="function")Ii(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ur:return Nr(r.children,a,l,t);case Xo:o=8,a|=8;break;case Vl:return e=ct(12,r,t,a|2),e.elementType=Vl,e.lanes=l,e;case Wl:return e=ct(13,r,t,a),e.elementType=Wl,e.lanes=l,e;case ql:return e=ct(19,r,t,a),e.elementType=ql,e.lanes=l,e;case Yd:return Wa(r,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gd:o=10;break e;case Jd:o=9;break e;case Zo:o=11;break e;case ei:o=14;break e;case Wt:o=16,n=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=ct(o,r,t,a),t.elementType=e,t.type=n,t.lanes=l,t}function Nr(e,t,r,n){return e=ct(7,e,n,t),e.lanes=r,e}function Wa(e,t,r,n){return e=ct(22,e,n,t),e.elementType=Yd,e.lanes=r,e.stateNode={isHidden:!1},e}function Al(e,t,r){return e=ct(6,e,null,t),e.lanes=r,e}function Il(e,t,r){return t=ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ix(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Di(e,t,r,n,a,l,o,i,c){return e=new ix(e,t,r,i,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=ct(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},yi(l),e}function cx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function zm(e){if(!e)return ir;e=e._reactInternals;e:{if(Rr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var r=e.type;if(Ke(r))return zu(e,r,t)}return t}function Hm(e,t,r,n,a,l,o,i,c){return e=Di(r,n,!0,e,a,l,o,i,c),e.context=zm(null),r=e.current,n=Ue(),a=nr(r),l=Dt(n,a),l.callback=t??null,rr(r,l,a),e.current.lanes=a,hn(e,a,n),Ge(e,n),e}function qa(e,t,r,n){var a=t.current,l=Ue(),o=nr(a);return r=zm(r),t.context===null?t.context=r:t.pendingContext=r,t=Dt(l,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=rr(a,t,o),e!==null&&(vt(e,a,o,l),Gn(e,a,o)),o}function Pa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Oi(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}function dx(){return null}var Vm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fi(e){this._internalRoot=e}Qa.prototype.render=Fi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));qa(e,t,null,null)};Qa.prototype.unmount=Fi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pr(function(){qa(null,e,null,null)}),t[Ft]=null}};function Qa(e){this._internalRoot=e}Qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=bu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qt.length&&t!==0&&t<Qt[r].priority;r++);Qt.splice(r,0,e),r===0&&wu(e)}};function $i(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ka(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zc(){}function ux(e,t,r,n,a){if(a){if(typeof n=="function"){var l=n;n=function(){var d=Pa(o);l.call(d)}}var o=Hm(t,n,e,0,null,!1,!1,"",Zc);return e._reactRootContainer=o,e[Ft]=o.current,tn(e.nodeType===8?e.parentNode:e),Pr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var i=n;n=function(){var d=Pa(c);i.call(d)}}var c=Di(e,0,!1,null,null,!1,!1,"",Zc);return e._reactRootContainer=c,e[Ft]=c.current,tn(e.nodeType===8?e.parentNode:e),Pr(function(){qa(t,c,r,n)}),c}function Ga(e,t,r,n,a){var l=r._reactRootContainer;if(l){var o=l;if(typeof a=="function"){var i=a;a=function(){var c=Pa(o);i.call(c)}}qa(t,o,e,a)}else o=ux(r,t,e,a,n);return Pa(o)}vu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Is(t.pendingLanes);r!==0&&(si(t,r|1),Ge(t,ye()),!(te&6)&&(is=ye()+500,mr()))}break;case 13:Pr(function(){var n=$t(e,1);if(n!==null){var a=Ue();vt(n,e,1,a)}}),Oi(e,1)}};ni=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var r=Ue();vt(t,e,134217728,r)}Oi(e,134217728)}};ju=function(e){if(e.tag===13){var t=nr(e),r=$t(e,t);if(r!==null){var n=Ue();vt(r,e,t,n)}Oi(e,t)}};bu=function(){return re};Nu=function(e,t){var r=re;try{return re=e,t()}finally{re=r}};ro=function(e,t,r){switch(t){case"input":if(Gl(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ua(n);if(!a)throw Error(I(90));Zd(n),Gl(n,a)}}}break;case"textarea":tu(e,r);break;case"select":t=r.value,t!=null&&Jr(e,!!r.multiple,t,!1)}};iu=Ti;cu=Pr;var mx={usingClientEntryPoint:!1,Events:[xn,Hr,Ua,lu,ou,Ti]},_s={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mu(e),e===null?null:e.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mn.isDisabled&&Mn.supportsFiber)try{Da=Mn.inject(px),Et=Mn}catch{}}at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;at.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$i(t))throw Error(I(200));return cx(e,t,null,r)};at.createRoot=function(e,t){if(!$i(e))throw Error(I(299));var r=!1,n="",a=Vm;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Di(e,1,!1,null,null,r,!1,n,a),e[Ft]=t.current,tn(e.nodeType===8?e.parentNode:e),new Fi(t)};at.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=mu(t),e=e===null?null:e.stateNode,e};at.flushSync=function(e){return Pr(e)};at.hydrate=function(e,t,r){if(!Ka(t))throw Error(I(200));return Ga(null,e,t,!0,r)};at.hydrateRoot=function(e,t,r){if(!$i(e))throw Error(I(405));var n=r!=null&&r.hydratedSources||null,a=!1,l="",o=Vm;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Hm(t,null,e,1,r??null,a,!1,l,o),e[Ft]=t.current,tn(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Qa(t)};at.render=function(e,t,r){if(!Ka(t))throw Error(I(200));return Ga(null,e,t,!1,r)};at.unmountComponentAtNode=function(e){if(!Ka(e))throw Error(I(40));return e._reactRootContainer?(Pr(function(){Ga(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1};at.unstable_batchedUpdates=Ti;at.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ka(r))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return Ga(e,t,r,!1,n)};at.version="18.3.1-next-f1338f8080-20240426";function Wm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wm)}catch(e){console.error(e)}}Wm(),Wd.exports=at;var hx=Wd.exports,ed=hx;zl.createRoot=ed.createRoot,zl.hydrateRoot=ed.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function un(){return un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},un.apply(this,arguments)}var Yt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Yt||(Yt={}));const td="popstate";function fx(e){e===void 0&&(e={});function t(n,a){let{pathname:l,search:o,hash:i}=n.location;return Oo("",{pathname:l,search:o,hash:i},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:La(a)}return gx(t,r,null,e)}function ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ui(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xx(){return Math.random().toString(36).substr(2,8)}function rd(e,t){return{usr:e.state,key:e.key,idx:t}}function Oo(e,t,r,n){return r===void 0&&(r=null),un({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fs(t):t,{state:r,key:t&&t.key||n||xx()})}function La(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function fs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function gx(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:l=!1}=n,o=a.history,i=Yt.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(un({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function f(){i=Yt.Pop;let j=u(),g=j==null?null:j-d;d=j,c&&c({action:i,location:y.location,delta:g})}function m(j,g){i=Yt.Push;let p=Oo(y.location,j,g);d=u()+1;let x=rd(p,d),b=y.createHref(p);try{o.pushState(x,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(b)}l&&c&&c({action:i,location:y.location,delta:1})}function N(j,g){i=Yt.Replace;let p=Oo(y.location,j,g);d=u();let x=rd(p,d),b=y.createHref(p);o.replaceState(x,"",b),l&&c&&c({action:i,location:y.location,delta:0})}function h(j){let g=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof j=="string"?j:La(j);return p=p.replace(/ $/,"%20"),ue(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let y={get action(){return i},get location(){return e(a,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(td,f),c=j,()=>{a.removeEventListener(td,f),c=null}},createHref(j){return t(a,j)},createURL:h,encodeLocation(j){let g=h(j);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:N,go(j){return o.go(j)}};return y}var sd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sd||(sd={}));function yx(e,t,r){return r===void 0&&(r="/"),vx(e,t,r)}function vx(e,t,r,n){let a=typeof t=="string"?fs(t):t,l=cs(a.pathname||"/",r);if(l==null)return null;let o=qm(e);jx(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=Tx(l);i=Px(o[c],d)}return i}function qm(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(l,o,i)=>{let c={relativePath:i===void 0?l.path||"":i,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};c.relativePath.startsWith("/")&&(ue(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=lr([n,c.relativePath]),u=r.concat(c);l.children&&l.children.length>0&&(ue(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qm(l.children,t,u,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:Ex(d,l.index),routesMeta:u})};return e.forEach((l,o)=>{var i;if(l.path===""||!((i=l.path)!=null&&i.includes("?")))a(l,o);else for(let c of Qm(l.path))a(l,o,c)}),t}function Qm(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let o=Qm(n.join("/")),i=[];return i.push(...o.map(c=>c===""?l:[l,c].join("/"))),a&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function jx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_x(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const bx=/^:[\w-]+$/,Nx=3,wx=2,kx=1,Sx=10,Cx=-2,nd=e=>e==="*";function Ex(e,t){let r=e.split("/"),n=r.length;return r.some(nd)&&(n+=Cx),t&&(n+=wx),r.filter(a=>!nd(a)).reduce((a,l)=>a+(bx.test(l)?Nx:l===""?kx:Sx),n)}function _x(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Px(e,t,r){let{routesMeta:n}=e,a={},l="/",o=[];for(let i=0;i<n.length;++i){let c=n[i],d=i===n.length-1,u=l==="/"?t:t.slice(l.length)||"/",f=Fo({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:lr([l,f.pathname]),pathnameBase:Ox(lr([l,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(l=lr([l,f.pathnameBase]))}return o}function Fo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Lx(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],o=l.replace(/(.)\/+$/,"$1"),i=a.slice(1);return{params:n.reduce((d,u,f)=>{let{paramName:m,isOptional:N}=u;if(m==="*"){let y=i[f]||"";o=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const h=i[f];return N&&!h?d[m]=void 0:d[m]=(h||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:o,pattern:e}}function Lx(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ui(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(n.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Tx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ui(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=e=>Rx.test(e);function Ix(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?fs(e):e,l;if(r)if(Ax(r))l=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ui(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?l=ad(r.substring(1),"/"):l=ad(r,t)}else l=t;return{pathname:l,search:Fx(n),hash:$x(a)}}function ad(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Dl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dx(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Mi(e,t){let r=Dx(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Bi(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=fs(e):(a=un({},e),ue(!a.pathname||!a.pathname.includes("?"),Dl("?","pathname","search",a)),ue(!a.pathname||!a.pathname.includes("#"),Dl("#","pathname","hash",a)),ue(!a.search||!a.search.includes("#"),Dl("#","search","hash",a)));let l=e===""||a.pathname==="",o=l?"/":a.pathname,i;if(o==null)i=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}i=f>=0?t[f]:"/"}let c=Ix(a,i),d=o&&o!=="/"&&o.endsWith("/"),u=(l||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const lr=e=>e.join("/").replace(/\/\/+/g,"/"),Ox=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Fx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$x=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ux(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Km=["post","put","patch","delete"];new Set(Km);const Mx=["get",...Km];new Set(Mx);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mn.apply(this,arguments)}const Ja=v.createContext(null),Gm=v.createContext(null),zt=v.createContext(null),Ya=v.createContext(null),Pt=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Jm=v.createContext(null);function Bx(e,t){let{relative:r}=t===void 0?{}:t;xs()||ue(!1);let{basename:n,navigator:a}=v.useContext(zt),{hash:l,pathname:o,search:i}=Xa(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:lr([n,o])),a.createHref({pathname:c,search:i,hash:l})}function xs(){return v.useContext(Ya)!=null}function gs(){return xs()||ue(!1),v.useContext(Ya).location}function Ym(e){v.useContext(zt).static||v.useLayoutEffect(e)}function Xe(){let{isDataRoute:e}=v.useContext(Pt);return e?rg():zx()}function zx(){xs()||ue(!1);let e=v.useContext(Ja),{basename:t,future:r,navigator:n}=v.useContext(zt),{matches:a}=v.useContext(Pt),{pathname:l}=gs(),o=JSON.stringify(Mi(a,r.v7_relativeSplatPath)),i=v.useRef(!1);return Ym(()=>{i.current=!0}),v.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){n.go(d);return}let f=Bi(d,JSON.parse(o),l,u.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:lr([t,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[t,n,o,l,e])}const Hx=v.createContext(null);function Vx(e){let t=v.useContext(Pt).outlet;return t&&v.createElement(Hx.Provider,{value:e},t)}function ys(){let{matches:e}=v.useContext(Pt),t=e[e.length-1];return t?t.params:{}}function Xa(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=v.useContext(zt),{matches:a}=v.useContext(Pt),{pathname:l}=gs(),o=JSON.stringify(Mi(a,n.v7_relativeSplatPath));return v.useMemo(()=>Bi(e,JSON.parse(o),l,r==="path"),[e,o,l,r])}function Wx(e,t){return qx(e,t)}function qx(e,t,r,n){xs()||ue(!1);let{navigator:a}=v.useContext(zt),{matches:l}=v.useContext(Pt),o=l[l.length-1],i=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=gs(),u;if(t){var f;let j=typeof t=="string"?fs(t):t;c==="/"||(f=j.pathname)!=null&&f.startsWith(c)||ue(!1),u=j}else u=d;let m=u.pathname||"/",N=m;if(c!=="/"){let j=c.replace(/^\//,"").split("/");N="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let h=yx(e,{pathname:N}),y=Yx(h&&h.map(j=>Object.assign({},j,{params:Object.assign({},i,j.params),pathname:lr([c,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:lr([c,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),l,r,n);return t&&y?v.createElement(Ya.Provider,{value:{location:mn({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Yt.Pop}},y):y}function Qx(){let e=tg(),t=Ux(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,null)}const Kx=v.createElement(Qx,null);class Gx extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?v.createElement(Pt.Provider,{value:this.props.routeContext},v.createElement(Jm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jx(e){let{routeContext:t,match:r,children:n}=e,a=v.useContext(Ja);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),v.createElement(Pt.Provider,{value:t},n)}function Yx(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var l;if(!r)return null;if(r.errors)e=r.matches;else if((l=n)!=null&&l.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,i=(a=r)==null?void 0:a.errors;if(i!=null){let u=o.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);u>=0||ue(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=u),f.route.id){let{loaderData:m,errors:N}=r,h=f.route.loader&&m[f.route.id]===void 0&&(!N||N[f.route.id]===void 0);if(f.route.lazy||h){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,f,m)=>{let N,h=!1,y=null,j=null;r&&(N=i&&f.route.id?i[f.route.id]:void 0,y=f.route.errorElement||Kx,c&&(d<0&&m===0?(sg("route-fallback"),h=!0,j=null):d===m&&(h=!0,j=f.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),p=()=>{let x;return N?x=y:h?x=j:f.route.Component?x=v.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=u,v.createElement(Jx,{match:f,routeContext:{outlet:u,matches:g,isDataRoute:r!=null},children:x})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?v.createElement(Gx,{location:r.location,revalidation:r.revalidation,component:y,error:N,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Xm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Xm||{}),Zm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zm||{});function Xx(e){let t=v.useContext(Ja);return t||ue(!1),t}function Zx(e){let t=v.useContext(Gm);return t||ue(!1),t}function eg(e){let t=v.useContext(Pt);return t||ue(!1),t}function ep(e){let t=eg(),r=t.matches[t.matches.length-1];return r.route.id||ue(!1),r.route.id}function tg(){var e;let t=v.useContext(Jm),r=Zx(),n=ep();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function rg(){let{router:e}=Xx(Xm.UseNavigateStable),t=ep(Zm.UseNavigateStable),r=v.useRef(!1);return Ym(()=>{r.current=!0}),v.useCallback(function(a,l){l===void 0&&(l={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,mn({fromRouteId:t},l)))},[e,t])}const ld={};function sg(e,t,r){ld[e]||(ld[e]=!0)}function ng(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $o(e){let{to:t,replace:r,state:n,relative:a}=e;xs()||ue(!1);let{future:l,static:o}=v.useContext(zt),{matches:i}=v.useContext(Pt),{pathname:c}=gs(),d=Xe(),u=Bi(t,Mi(i,l.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(u);return v.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:a}),[d,f,a,r,n]),null}function ag(e){return Vx(e.context)}function se(e){ue(!1)}function lg(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Yt.Pop,navigator:l,static:o=!1,future:i}=e;xs()&&ue(!1);let c=t.replace(/^\/*/,"/"),d=v.useMemo(()=>({basename:c,navigator:l,static:o,future:mn({v7_relativeSplatPath:!1},i)}),[c,i,l,o]);typeof n=="string"&&(n=fs(n));let{pathname:u="/",search:f="",hash:m="",state:N=null,key:h="default"}=n,y=v.useMemo(()=>{let j=cs(u,c);return j==null?null:{location:{pathname:j,search:f,hash:m,state:N,key:h},navigationType:a}},[c,u,f,m,N,h,a]);return y==null?null:v.createElement(zt.Provider,{value:d},v.createElement(Ya.Provider,{children:r,value:y}))}function og(e){let{children:t,location:r}=e;return Wx(Uo(t),r)}new Promise(()=>{});function Uo(e,t){t===void 0&&(t=[]);let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let l=[...t,a];if(n.type===v.Fragment){r.push.apply(r,Uo(n.props.children,l));return}n.type!==se&&ue(!1),!n.props.index||!n.props.children||ue(!1);let o={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Uo(n.props.children,l)),r.push(o)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ta.apply(this,arguments)}function tp(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,l;for(l=0;l<n.length;l++)a=n[l],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ig(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cg(e,t){return e.button===0&&(!t||t==="_self")&&!ig(e)}const dg=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ug=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mg="6";try{window.__reactRouterVersion=mg}catch{}const pg=v.createContext({isTransitioning:!1}),hg="startTransition",od=rh[hg];function fg(e){let{basename:t,children:r,future:n,window:a}=e,l=v.useRef();l.current==null&&(l.current=fx({window:a,v5Compat:!0}));let o=l.current,[i,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=v.useCallback(f=>{d&&od?od(()=>c(f)):c(f)},[c,d]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>ng(n),[n]),v.createElement(lg,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}const xg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X=v.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:l,replace:o,state:i,target:c,to:d,preventScrollReset:u,viewTransition:f}=t,m=tp(t,dg),{basename:N}=v.useContext(zt),h,y=!1;if(typeof d=="string"&&gg.test(d)&&(h=d,xg))try{let x=new URL(window.location.href),b=d.startsWith("//")?new URL(x.protocol+d):new URL(d),k=cs(b.pathname,N);b.origin===x.origin&&k!=null?d=k+b.search+b.hash:y=!0}catch{}let j=Bx(d,{relative:a}),g=jg(d,{replace:o,state:i,target:c,preventScrollReset:u,relative:a,viewTransition:f});function p(x){n&&n(x),x.defaultPrevented||g(x)}return v.createElement("a",Ta({},m,{href:h||j,onClick:y||l?n:p,ref:r,target:c}))}),yg=v.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:l="",end:o=!1,style:i,to:c,viewTransition:d,children:u}=t,f=tp(t,ug),m=Xa(c,{relative:f.relative}),N=gs(),h=v.useContext(Gm),{navigator:y,basename:j}=v.useContext(zt),g=h!=null&&bg(m)&&d===!0,p=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,x=N.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;a||(x=x.toLowerCase(),b=b?b.toLowerCase():null,p=p.toLowerCase()),b&&j&&(b=cs(b,j)||b);const k=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let C=x===p||!o&&x.startsWith(p)&&x.charAt(k)==="/",w=b!=null&&(b===p||!o&&b.startsWith(p)&&b.charAt(p.length)==="/"),L={isActive:C,isPending:w,isTransitioning:g},F=C?n:void 0,$;typeof l=="function"?$=l(L):$=[l,C?"active":null,w?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(L):i;return v.createElement(X,Ta({},f,{"aria-current":F,className:$,ref:r,style:D,to:c,viewTransition:d}),typeof u=="function"?u(L):u)});var Mo;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mo||(Mo={}));var id;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(id||(id={}));function vg(e){let t=v.useContext(Ja);return t||ue(!1),t}function jg(e,t){let{target:r,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:i}=t===void 0?{}:t,c=Xe(),d=gs(),u=Xa(e,{relative:o});return v.useCallback(f=>{if(cg(f,r)){f.preventDefault();let m=n!==void 0?n:La(d)===La(u);c(e,{replace:m,state:a,preventScrollReset:l,relative:o,viewTransition:i})}},[d,c,u,n,a,r,e,l,o,i])}function bg(e,t){t===void 0&&(t={});let r=v.useContext(pg);r==null&&ue(!1);let{basename:n}=vg(Mo.useViewTransitionState),a=Xa(e,{relative:t.relative});if(!r.isTransitioning)return!1;let l=cs(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=cs(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Fo(a.pathname,o)!=null||Fo(a.pathname,l)!=null}const Ng={},cd=e=>{let t;const r=new Set,n=(u,f)=>{const m=typeof u=="function"?u(t):u;if(!Object.is(m,t)){const N=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(h=>h(t,N))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(Ng?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,a,c);return c},wg=e=>e?cd(e):cd;var rp={exports:{}},sp={},np={exports:{}},ap={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=v;function kg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sg=typeof Object.is=="function"?Object.is:kg,Cg=ds.useState,Eg=ds.useEffect,_g=ds.useLayoutEffect,Pg=ds.useDebugValue;function Lg(e,t){var r=t(),n=Cg({inst:{value:r,getSnapshot:t}}),a=n[0].inst,l=n[1];return _g(function(){a.value=r,a.getSnapshot=t,Ol(a)&&l({inst:a})},[e,r,t]),Eg(function(){return Ol(a)&&l({inst:a}),e(function(){Ol(a)&&l({inst:a})})},[e]),Pg(r),r}function Ol(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Sg(e,r)}catch{return!0}}function Tg(e,t){return t()}var Rg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Tg:Lg;ap.useSyncExternalStore=ds.useSyncExternalStore!==void 0?ds.useSyncExternalStore:Rg;np.exports=ap;var Ag=np.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=v,Ig=Ag;function Dg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Og=typeof Object.is=="function"?Object.is:Dg,Fg=Ig.useSyncExternalStore,$g=Za.useRef,Ug=Za.useEffect,Mg=Za.useMemo,Bg=Za.useDebugValue;sp.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var l=$g(null);if(l.current===null){var o={hasValue:!1,value:null};l.current=o}else o=l.current;l=Mg(function(){function c(N){if(!d){if(d=!0,u=N,N=n(N),a!==void 0&&o.hasValue){var h=o.value;if(a(h,N))return f=h}return f=N}if(h=f,Og(u,N))return h;var y=n(N);return a!==void 0&&a(h,y)?(u=N,h):(u=N,f=y)}var d=!1,u,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,a]);var i=Fg(e,l[0],l[1]);return Ug(function(){o.hasValue=!0,o.value=i},[i]),Bg(i),i};rp.exports=sp;var zg=rp.exports;const Hg=Ad(zg),lp={},{useDebugValue:Vg}=Ia,{useSyncExternalStoreWithSelector:Wg}=Hg;let dd=!1;const qg=e=>e;function Qg(e,t=qg,r){(lp?"production":void 0)!=="production"&&r&&!dd&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),dd=!0);const n=Wg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Vg(n),n}const ud=e=>{(lp?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?wg(e):e,r=(n,a)=>Qg(t,n,a);return Object.assign(r,t),r},vs=e=>e?ud(e):ud;function op(e,t){return function(){return e.apply(t,arguments)}}const{toString:Kg}=Object.prototype,{getPrototypeOf:zi}=Object,{iterator:el,toStringTag:ip}=Symbol,tl=(e=>t=>{const r=Kg.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),bt=e=>(e=e.toLowerCase(),t=>tl(t)===e),rl=e=>t=>typeof t===e,{isArray:js}=Array,us=rl("undefined");function yn(e){return e!==null&&!us(e)&&e.constructor!==null&&!us(e.constructor)&&Je(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cp=bt("ArrayBuffer");function Gg(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cp(e.buffer),t}const Jg=rl("string"),Je=rl("function"),dp=rl("number"),vn=e=>e!==null&&typeof e=="object",Yg=e=>e===!0||e===!1,ra=e=>{if(tl(e)!=="object")return!1;const t=zi(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ip in e)&&!(el in e)},Xg=e=>{if(!vn(e)||yn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zg=bt("Date"),ey=bt("File"),ty=bt("Blob"),ry=bt("FileList"),sy=e=>vn(e)&&Je(e.pipe),ny=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Je(e.append)&&((t=tl(e))==="formdata"||t==="object"&&Je(e.toString)&&e.toString()==="[object FormData]"))},ay=bt("URLSearchParams"),[ly,oy,iy,cy]=["ReadableStream","Request","Response","Headers"].map(bt),dy=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jn(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),js(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(yn(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),o=l.length;let i;for(n=0;n<o;n++)i=l[n],t.call(null,e[i],i,e)}}function up(e,t){if(yn(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const jr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mp=e=>!us(e)&&e!==jr;function Bo(){const{caseless:e,skipUndefined:t}=mp(this)&&this||{},r={},n=(a,l)=>{const o=e&&up(r,l)||l;ra(r[o])&&ra(a)?r[o]=Bo(r[o],a):ra(a)?r[o]=Bo({},a):js(a)?r[o]=a.slice():(!t||!us(a))&&(r[o]=a)};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&jn(arguments[a],n);return r}const uy=(e,t,r,{allOwnKeys:n}={})=>(jn(t,(a,l)=>{r&&Je(a)?Object.defineProperty(e,l,{value:op(a,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,l,{value:a,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),my=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),py=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},hy=(e,t,r,n)=>{let a,l,o;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),l=a.length;l-- >0;)o=a[l],(!n||n(o,e,t))&&!i[o]&&(t[o]=e[o],i[o]=!0);e=r!==!1&&zi(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},fy=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},xy=e=>{if(!e)return null;if(js(e))return e;let t=e.length;if(!dp(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},gy=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&zi(Uint8Array)),yy=(e,t)=>{const n=(e&&e[el]).call(e);let a;for(;(a=n.next())&&!a.done;){const l=a.value;t.call(e,l[0],l[1])}},vy=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},jy=bt("HTMLFormElement"),by=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),md=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ny=bt("RegExp"),pp=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};jn(r,(a,l)=>{let o;(o=t(a,l,e))!==!1&&(n[l]=o||a)}),Object.defineProperties(e,n)},wy=e=>{pp(e,(t,r)=>{if(Je(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Je(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ky=(e,t)=>{const r={},n=a=>{a.forEach(l=>{r[l]=!0})};return js(e)?n(e):n(String(e).split(t)),r},Sy=()=>{},Cy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ey(e){return!!(e&&Je(e.append)&&e[ip]==="FormData"&&e[el])}const _y=e=>{const t=new Array(10),r=(n,a)=>{if(vn(n)){if(t.indexOf(n)>=0)return;if(yn(n))return n;if(!("toJSON"in n)){t[a]=n;const l=js(n)?[]:{};return jn(n,(o,i)=>{const c=r(o,a+1);!us(c)&&(l[i]=c)}),t[a]=void 0,l}}return n};return r(e,0)},Py=bt("AsyncFunction"),Ly=e=>e&&(vn(e)||Je(e))&&Je(e.then)&&Je(e.catch),hp=((e,t)=>e?setImmediate:t?((r,n)=>(jr.addEventListener("message",({source:a,data:l})=>{a===jr&&l===r&&n.length&&n.shift()()},!1),a=>{n.push(a),jr.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Je(jr.postMessage)),Ty=typeof queueMicrotask<"u"?queueMicrotask.bind(jr):typeof process<"u"&&process.nextTick||hp,Ry=e=>e!=null&&Je(e[el]),S={isArray:js,isArrayBuffer:cp,isBuffer:yn,isFormData:ny,isArrayBufferView:Gg,isString:Jg,isNumber:dp,isBoolean:Yg,isObject:vn,isPlainObject:ra,isEmptyObject:Xg,isReadableStream:ly,isRequest:oy,isResponse:iy,isHeaders:cy,isUndefined:us,isDate:Zg,isFile:ey,isBlob:ty,isRegExp:Ny,isFunction:Je,isStream:sy,isURLSearchParams:ay,isTypedArray:gy,isFileList:ry,forEach:jn,merge:Bo,extend:uy,trim:dy,stripBOM:my,inherits:py,toFlatObject:hy,kindOf:tl,kindOfTest:bt,endsWith:fy,toArray:xy,forEachEntry:yy,matchAll:vy,isHTMLForm:jy,hasOwnProperty:md,hasOwnProp:md,reduceDescriptors:pp,freezeMethods:wy,toObjectSet:ky,toCamelCase:by,noop:Sy,toFiniteNumber:Cy,findKey:up,global:jr,isContextDefined:mp,isSpecCompliantForm:Ey,toJSONObject:_y,isAsyncFn:Py,isThenable:Ly,setImmediate:hp,asap:Ty,isIterable:Ry};let Q=class fp extends Error{static from(t,r,n,a,l,o){const i=new fp(t.message,r||t.code,n,a,l);return i.cause=t,i.name=t.name,o&&Object.assign(i,o),i}constructor(t,r,n,a,l){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),a&&(this.request=a),l&&(this.response=l,this.status=l.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.status}}};Q.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Q.ERR_BAD_OPTION="ERR_BAD_OPTION";Q.ECONNABORTED="ECONNABORTED";Q.ETIMEDOUT="ETIMEDOUT";Q.ERR_NETWORK="ERR_NETWORK";Q.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Q.ERR_DEPRECATED="ERR_DEPRECATED";Q.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Q.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Q.ERR_CANCELED="ERR_CANCELED";Q.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Q.ERR_INVALID_URL="ERR_INVALID_URL";const Ay=null;function zo(e){return S.isPlainObject(e)||S.isArray(e)}function xp(e){return S.endsWith(e,"[]")?e.slice(0,-2):e}function pd(e,t,r){return e?e.concat(t).map(function(a,l){return a=xp(a),!r&&l?"["+a+"]":a}).join(r?".":""):t}function Iy(e){return S.isArray(e)&&!e.some(zo)}const Dy=S.toFlatObject(S,{},null,function(t){return/^is[A-Z]/.test(t)});function sl(e,t,r){if(!S.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=S.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,j){return!S.isUndefined(j[y])});const n=r.metaTokens,a=r.visitor||u,l=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(t);if(!S.isFunction(a))throw new TypeError("visitor must be a function");function d(h){if(h===null)return"";if(S.isDate(h))return h.toISOString();if(S.isBoolean(h))return h.toString();if(!c&&S.isBlob(h))throw new Q("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(h)||S.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,y,j){let g=h;if(h&&!j&&typeof h=="object"){if(S.endsWith(y,"{}"))y=n?y:y.slice(0,-2),h=JSON.stringify(h);else if(S.isArray(h)&&Iy(h)||(S.isFileList(h)||S.endsWith(y,"[]"))&&(g=S.toArray(h)))return y=xp(y),g.forEach(function(x,b){!(S.isUndefined(x)||x===null)&&t.append(o===!0?pd([y],b,l):o===null?y:y+"[]",d(x))}),!1}return zo(h)?!0:(t.append(pd(j,y,l),d(h)),!1)}const f=[],m=Object.assign(Dy,{defaultVisitor:u,convertValue:d,isVisitable:zo});function N(h,y){if(!S.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(h),S.forEach(h,function(g,p){(!(S.isUndefined(g)||g===null)&&a.call(t,g,S.isString(p)?p.trim():p,y,m))===!0&&N(g,y?y.concat(p):[p])}),f.pop()}}if(!S.isObject(e))throw new TypeError("data must be an object");return N(e),t}function hd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Hi(e,t){this._pairs=[],e&&sl(e,this,t)}const gp=Hi.prototype;gp.append=function(t,r){this._pairs.push([t,r])};gp.toString=function(t){const r=t?function(n){return t.call(this,n,hd)}:hd;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function Oy(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yp(e,t,r){if(!t)return e;const n=r&&r.encode||Oy,a=S.isFunction(r)?{serialize:r}:r,l=a&&a.serialize;let o;if(l?o=l(t,a):o=S.isURLSearchParams(t)?t.toString():new Hi(t,a).toString(n),o){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class fd{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){S.forEach(this.handlers,function(n){n!==null&&t(n)})}}const vp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fy=typeof URLSearchParams<"u"?URLSearchParams:Hi,$y=typeof FormData<"u"?FormData:null,Uy=typeof Blob<"u"?Blob:null,My={isBrowser:!0,classes:{URLSearchParams:Fy,FormData:$y,Blob:Uy},protocols:["http","https","file","blob","url","data"]},Vi=typeof window<"u"&&typeof document<"u",Ho=typeof navigator=="object"&&navigator||void 0,By=Vi&&(!Ho||["ReactNative","NativeScript","NS"].indexOf(Ho.product)<0),zy=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Hy=Vi&&window.location.href||"http://localhost",Vy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vi,hasStandardBrowserEnv:By,hasStandardBrowserWebWorkerEnv:zy,navigator:Ho,origin:Hy},Symbol.toStringTag,{value:"Module"})),De={...Vy,...My};function Wy(e,t){return sl(e,new De.classes.URLSearchParams,{visitor:function(r,n,a,l){return De.isNode&&S.isBuffer(r)?(this.append(n,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function qy(e){return S.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qy(e){const t={},r=Object.keys(e);let n;const a=r.length;let l;for(n=0;n<a;n++)l=r[n],t[l]=e[l];return t}function jp(e){function t(r,n,a,l){let o=r[l++];if(o==="__proto__")return!0;const i=Number.isFinite(+o),c=l>=r.length;return o=!o&&S.isArray(a)?a.length:o,c?(S.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!i):((!a[o]||!S.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],l)&&S.isArray(a[o])&&(a[o]=Qy(a[o])),!i)}if(S.isFormData(e)&&S.isFunction(e.entries)){const r={};return S.forEachEntry(e,(n,a)=>{t(qy(n),a,r,0)}),r}return null}function Ky(e,t,r){if(S.isString(e))try{return(t||JSON.parse)(e),S.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const bn={transitional:vp,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,l=S.isObject(t);if(l&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return a?JSON.stringify(jp(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t)||S.isReadableStream(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Wy(t,this.formSerializer).toString();if((i=S.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return sl(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return l||a?(r.setContentType("application/json",!1),Ky(t)):t}],transformResponse:[function(t){const r=this.transitional||bn.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(S.isResponse(t)||S.isReadableStream(t))return t;if(t&&S.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(i){if(o)throw i.name==="SyntaxError"?Q.from(i,Q.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:De.classes.FormData,Blob:De.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],e=>{bn.headers[e]={}});const Gy=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jy=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&Gy[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},xd=Symbol("internals");function Ps(e){return e&&String(e).trim().toLowerCase()}function sa(e){return e===!1||e==null?e:S.isArray(e)?e.map(sa):String(e)}function Yy(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Xy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Fl(e,t,r,n,a){if(S.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!S.isString(t)){if(S.isString(n))return t.indexOf(n)!==-1;if(S.isRegExp(n))return n.test(t)}}function Zy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function e0(e,t){const r=S.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,l,o){return this[n].call(this,t,a,l,o)},configurable:!0})})}let Ye=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function l(i,c,d){const u=Ps(c);if(!u)throw new Error("header name must be a non-empty string");const f=S.findKey(a,u);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||c]=sa(i))}const o=(i,c)=>S.forEach(i,(d,u)=>l(d,u,c));if(S.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(S.isString(t)&&(t=t.trim())&&!Xy(t))o(Jy(t),r);else if(S.isObject(t)&&S.isIterable(t)){let i={},c,d;for(const u of t){if(!S.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?S.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(i,r)}else t!=null&&l(r,t,n);return this}get(t,r){if(t=Ps(t),t){const n=S.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return Yy(a);if(S.isFunction(r))return r.call(this,a,n);if(S.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ps(t),t){const n=S.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Fl(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function l(o){if(o=Ps(o),o){const i=S.findKey(n,o);i&&(!r||Fl(n,n[i],i,r))&&(delete n[i],a=!0)}}return S.isArray(t)?t.forEach(l):l(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const l=r[n];(!t||Fl(this,this[l],l,t,!0))&&(delete this[l],a=!0)}return a}normalize(t){const r=this,n={};return S.forEach(this,(a,l)=>{const o=S.findKey(n,l);if(o){r[o]=sa(a),delete r[l];return}const i=t?Zy(l):String(l).trim();i!==l&&delete r[l],r[i]=sa(a),n[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return S.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&S.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[xd]=this[xd]={accessors:{}}).accessors,a=this.prototype;function l(o){const i=Ps(o);n[i]||(e0(a,o),n[i]=!0)}return S.isArray(t)?t.forEach(l):l(t),this}};Ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.reduceDescriptors(Ye.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});S.freezeMethods(Ye);function $l(e,t){const r=this||bn,n=t||r,a=Ye.from(n.headers);let l=n.data;return S.forEach(e,function(i){l=i.call(r,l,a.normalize(),t?t.status:void 0)}),a.normalize(),l}function bp(e){return!!(e&&e.__CANCEL__)}let Nn=class extends Q{constructor(t,r,n){super(t??"canceled",Q.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function Np(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Q("Request failed with status code "+r.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function t0(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function r0(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,l=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[l];o||(o=d),r[a]=c,n[a]=d;let f=l,m=0;for(;f!==a;)m+=r[f++],f=f%e;if(a=(a+1)%e,a===l&&(l=(l+1)%e),d-o<t)return;const N=u&&d-u;return N?Math.round(m*1e3/N):void 0}}function s0(e,t){let r=0,n=1e3/t,a,l;const o=(d,u=Date.now())=>{r=u,a=null,l&&(clearTimeout(l),l=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-r;f>=n?o(d,u):(a=d,l||(l=setTimeout(()=>{l=null,o(a)},n-f)))},()=>a&&o(a)]}const Ra=(e,t,r=3)=>{let n=0;const a=r0(50,250);return s0(l=>{const o=l.loaded,i=l.lengthComputable?l.total:void 0,c=o-n,d=a(c),u=o<=i;n=o;const f={loaded:o,total:i,progress:i?o/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-o)/d:void 0,event:l,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},r)},gd=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},yd=e=>(...t)=>S.asap(()=>e(...t)),n0=De.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,De.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(De.origin),De.navigator&&/(msie|trident)/i.test(De.navigator.userAgent)):()=>!0,a0=De.hasStandardBrowserEnv?{write(e,t,r,n,a,l,o){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];S.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),S.isString(n)&&i.push(`path=${n}`),S.isString(a)&&i.push(`domain=${a}`),l===!0&&i.push("secure"),S.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function l0(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function o0(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function wp(e,t,r){let n=!l0(t);return e&&(n||r==!1)?o0(e,t):t}const vd=e=>e instanceof Ye?{...e}:e;function Lr(e,t){t=t||{};const r={};function n(d,u,f,m){return S.isPlainObject(d)&&S.isPlainObject(u)?S.merge.call({caseless:m},d,u):S.isPlainObject(u)?S.merge({},u):S.isArray(u)?u.slice():u}function a(d,u,f,m){if(S.isUndefined(u)){if(!S.isUndefined(d))return n(void 0,d,f,m)}else return n(d,u,f,m)}function l(d,u){if(!S.isUndefined(u))return n(void 0,u)}function o(d,u){if(S.isUndefined(u)){if(!S.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function i(d,u,f){if(f in t)return n(d,u);if(f in e)return n(void 0,d)}const c={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(d,u,f)=>a(vd(d),vd(u),f,!0)};return S.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||a,m=f(e[u],t[u],u);S.isUndefined(m)&&f!==i||(r[u]=m)}),r}const kp=e=>{const t=Lr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:l,headers:o,auth:i}=t;if(t.headers=o=Ye.from(o),t.url=yp(wp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),S.isFormData(r)){if(De.hasStandardBrowserEnv||De.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(S.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&o.set(u,f)})}}if(De.hasStandardBrowserEnv&&(n&&S.isFunction(n)&&(n=n(t)),n||n!==!1&&n0(t.url))){const c=a&&l&&a0.read(l);c&&o.set(a,c)}return t},i0=typeof XMLHttpRequest<"u",c0=i0&&function(e){return new Promise(function(r,n){const a=kp(e);let l=a.data;const o=Ye.from(a.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=a,u,f,m,N,h;function y(){N&&N(),h&&h(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let j=new XMLHttpRequest;j.open(a.method.toUpperCase(),a.url,!0),j.timeout=a.timeout;function g(){if(!j)return;const x=Ye.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),k={data:!i||i==="text"||i==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:x,config:e,request:j};Np(function(w){r(w),y()},function(w){n(w),y()},k),j=null}"onloadend"in j?j.onloadend=g:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(g)},j.onabort=function(){j&&(n(new Q("Request aborted",Q.ECONNABORTED,e,j)),j=null)},j.onerror=function(b){const k=b&&b.message?b.message:"Network Error",C=new Q(k,Q.ERR_NETWORK,e,j);C.event=b||null,n(C),j=null},j.ontimeout=function(){let b=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||vp;a.timeoutErrorMessage&&(b=a.timeoutErrorMessage),n(new Q(b,k.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,e,j)),j=null},l===void 0&&o.setContentType(null),"setRequestHeader"in j&&S.forEach(o.toJSON(),function(b,k){j.setRequestHeader(k,b)}),S.isUndefined(a.withCredentials)||(j.withCredentials=!!a.withCredentials),i&&i!=="json"&&(j.responseType=a.responseType),d&&([m,h]=Ra(d,!0),j.addEventListener("progress",m)),c&&j.upload&&([f,N]=Ra(c),j.upload.addEventListener("progress",f),j.upload.addEventListener("loadend",N)),(a.cancelToken||a.signal)&&(u=x=>{j&&(n(!x||x.type?new Nn(null,e,j):x),j.abort(),j=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const p=t0(a.url);if(p&&De.protocols.indexOf(p)===-1){n(new Q("Unsupported protocol "+p+":",Q.ERR_BAD_REQUEST,e));return}j.send(l||null)})},d0=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const l=function(d){if(!a){a=!0,i();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Q?u:new Nn(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,l(new Q(`timeout of ${t}ms exceeded`,Q.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),e=null)};e.forEach(d=>d.addEventListener("abort",l));const{signal:c}=n;return c.unsubscribe=()=>S.asap(i),c}},u0=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},m0=async function*(e,t){for await(const r of p0(e))yield*u0(r,t)},p0=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},jd=(e,t,r,n)=>{const a=m0(e,t);let l=0,o,i=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){i(),c.close();return}let f=u.byteLength;if(r){let m=l+=f;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),a.return()}},{highWaterMark:2})},bd=64*1024,{isFunction:Bn}=S,h0=(({Request:e,Response:t})=>({Request:e,Response:t}))(S.global),{ReadableStream:Nd,TextEncoder:wd}=S.global,kd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},f0=e=>{e=S.merge.call({skipUndefined:!0},h0,e);const{fetch:t,Request:r,Response:n}=e,a=t?Bn(t):typeof fetch=="function",l=Bn(r),o=Bn(n);if(!a)return!1;const i=a&&Bn(Nd),c=a&&(typeof wd=="function"?(h=>y=>h.encode(y))(new wd):async h=>new Uint8Array(await new r(h).arrayBuffer())),d=l&&i&&kd(()=>{let h=!1;const y=new r(De.origin,{body:new Nd,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!y}),u=o&&i&&kd(()=>S.isReadableStream(new n("").body)),f={stream:u&&(h=>h.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!f[h]&&(f[h]=(y,j)=>{let g=y&&y[h];if(g)return g.call(y);throw new Q(`Response type '${h}' is not supported`,Q.ERR_NOT_SUPPORT,j)})});const m=async h=>{if(h==null)return 0;if(S.isBlob(h))return h.size;if(S.isSpecCompliantForm(h))return(await new r(De.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(S.isArrayBufferView(h)||S.isArrayBuffer(h))return h.byteLength;if(S.isURLSearchParams(h)&&(h=h+""),S.isString(h))return(await c(h)).byteLength},N=async(h,y)=>{const j=S.toFiniteNumber(h.getContentLength());return j??m(y)};return async h=>{let{url:y,method:j,data:g,signal:p,cancelToken:x,timeout:b,onDownloadProgress:k,onUploadProgress:C,responseType:w,headers:L,withCredentials:F="same-origin",fetchOptions:$}=kp(h),D=t||fetch;w=w?(w+"").toLowerCase():"text";let H=d0([p,x&&x.toAbortSignal()],b),U=null;const A=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let q;try{if(C&&d&&j!=="get"&&j!=="head"&&(q=await N(L,g))!==0){let K=new r(y,{method:"POST",body:g,duplex:"half"}),W;if(S.isFormData(g)&&(W=K.headers.get("content-type"))&&L.setContentType(W),K.body){const[ge,ie]=gd(q,Ra(yd(C)));g=jd(K.body,bd,ge,ie)}}S.isString(F)||(F=F?"include":"omit");const O=l&&"credentials"in r.prototype,P={...$,signal:H,method:j.toUpperCase(),headers:L.normalize().toJSON(),body:g,duplex:"half",credentials:O?F:void 0};U=l&&new r(y,P);let E=await(l?D(U,$):D(y,P));const T=u&&(w==="stream"||w==="response");if(u&&(k||T&&A)){const K={};["status","statusText","headers"].forEach(Le=>{K[Le]=E[Le]});const W=S.toFiniteNumber(E.headers.get("content-length")),[ge,ie]=k&&gd(W,Ra(yd(k),!0))||[];E=new n(jd(E.body,bd,ge,()=>{ie&&ie(),A&&A()}),K)}w=w||"text";let M=await f[S.findKey(f,w)||"text"](E,h);return!T&&A&&A(),await new Promise((K,W)=>{Np(K,W,{data:M,headers:Ye.from(E.headers),status:E.status,statusText:E.statusText,config:h,request:U})})}catch(O){throw A&&A(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,h,U),{cause:O.cause||O}):Q.from(O,O&&O.code,h,U)}}},x0=new Map,Sp=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,l=[n,a,r];let o=l.length,i=o,c,d,u=x0;for(;i--;)c=l[i],d=u.get(c),d===void 0&&u.set(c,d=i?new Map:f0(t)),u=d;return d};Sp();const Wi={http:Ay,xhr:c0,fetch:{get:Sp}};S.forEach(Wi,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Sd=e=>`- ${e}`,g0=e=>S.isFunction(e)||e===null||e===!1;function y0(e,t){e=S.isArray(e)?e:[e];const{length:r}=e;let n,a;const l={};for(let o=0;o<r;o++){n=e[o];let i;if(a=n,!g0(n)&&(a=Wi[(i=String(n)).toLowerCase()],a===void 0))throw new Q(`Unknown adapter '${i}'`);if(a&&(S.isFunction(a)||(a=a.get(t))))break;l[i||"#"+o]=a}if(!a){const o=Object.entries(l).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=r?o.length>1?`since :
`+o.map(Sd).join(`
`):" "+Sd(o[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a}const Cp={getAdapter:y0,adapters:Wi};function Ul(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nn(null,e)}function Cd(e){return Ul(e),e.headers=Ye.from(e.headers),e.data=$l.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Cp.getAdapter(e.adapter||bn.adapter,e)(e).then(function(n){return Ul(e),n.data=$l.call(e,e.transformResponse,n),n.headers=Ye.from(n.headers),n},function(n){return bp(n)||(Ul(e),n&&n.response&&(n.response.data=$l.call(e,e.transformResponse,n.response),n.response.headers=Ye.from(n.response.headers))),Promise.reject(n)})}const Ep="1.13.4",nl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nl[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ed={};nl.transitional=function(t,r,n){function a(l,o){return"[Axios v"+Ep+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,i)=>{if(t===!1)throw new Q(a(o," has been removed"+(r?" in "+r:"")),Q.ERR_DEPRECATED);return r&&!Ed[o]&&(Ed[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,o,i):!0}};nl.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function v0(e,t,r){if(typeof e!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const l=n[a],o=t[l];if(o){const i=e[l],c=i===void 0||o(i,l,e);if(c!==!0)throw new Q("option "+l+" must be "+c,Q.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Q("Unknown option "+l,Q.ERR_BAD_OPTION)}}const na={assertOptions:v0,validators:nl},kt=na.validators;let wr=class{constructor(t){this.defaults=t||{},this.interceptors={request:new fd,response:new fd}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Lr(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:l}=r;n!==void 0&&na.assertOptions(n,{silentJSONParsing:kt.transitional(kt.boolean),forcedJSONParsing:kt.transitional(kt.boolean),clarifyTimeoutError:kt.transitional(kt.boolean)},!1),a!=null&&(S.isFunction(a)?r.paramsSerializer={serialize:a}:na.assertOptions(a,{encode:kt.function,serialize:kt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),na.assertOptions(r,{baseUrl:kt.spelling("baseURL"),withXsrfToken:kt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=l&&S.merge(l.common,l[r.method]);l&&S.forEach(["delete","get","head","post","put","patch","common"],h=>{delete l[h]}),r.headers=Ye.concat(o,l);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,f=0,m;if(!c){const h=[Cd.bind(this),void 0];for(h.unshift(...i),h.push(...d),m=h.length,u=Promise.resolve(r);f<m;)u=u.then(h[f++],h[f++]);return u}m=i.length;let N=r;for(;f<m;){const h=i[f++],y=i[f++];try{N=h(N)}catch(j){y.call(this,j);break}}try{u=Cd.call(this,N)}catch(h){return Promise.reject(h)}for(f=0,m=d.length;f<m;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=Lr(this.defaults,t);const r=wp(t.baseURL,t.url,t.allowAbsoluteUrls);return yp(r,t.params,t.paramsSerializer)}};S.forEach(["delete","get","head","options"],function(t){wr.prototype[t]=function(r,n){return this.request(Lr(n||{},{method:t,url:r,data:(n||{}).data}))}});S.forEach(["post","put","patch"],function(t){function r(n){return function(l,o,i){return this.request(Lr(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}wr.prototype[t]=r(),wr.prototype[t+"Form"]=r(!0)});let j0=class _p{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const n=this;this.promise.then(a=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](a);n._listeners=null}),this.promise.then=a=>{let l;const o=new Promise(i=>{n.subscribe(i),l=i}).then(a);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,i){n.reason||(n.reason=new Nn(l,o,i),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new _p(function(a){t=a}),cancel:t}}};function b0(e){return function(r){return e.apply(null,r)}}function N0(e){return S.isObject(e)&&e.isAxiosError===!0}const Vo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Vo).forEach(([e,t])=>{Vo[t]=e});function Pp(e){const t=new wr(e),r=op(wr.prototype.request,t);return S.extend(r,wr.prototype,t,{allOwnKeys:!0}),S.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return Pp(Lr(e,a))},r}const pe=Pp(bn);pe.Axios=wr;pe.CanceledError=Nn;pe.CancelToken=j0;pe.isCancel=bp;pe.VERSION=Ep;pe.toFormData=sl;pe.AxiosError=Q;pe.Cancel=pe.CanceledError;pe.all=function(t){return Promise.all(t)};pe.spread=b0;pe.isAxiosError=N0;pe.mergeConfig=Lr;pe.AxiosHeaders=Ye;pe.formToJSON=e=>jp(S.isHTMLForm(e)?new FormData(e):e);pe.getAdapter=Cp.getAdapter;pe.HttpStatusCode=Vo;pe.default=pe;const{Axios:_v,AxiosError:w0,CanceledError:Pv,isCancel:Lv,CancelToken:Tv,VERSION:Rv,all:Av,Cancel:Iv,isAxiosError:Dv,spread:Ov,toFormData:Fv,AxiosHeaders:$v,HttpStatusCode:Uv,formToJSON:Mv,getAdapter:Bv,mergeConfig:zv}=pe,k0="http://localhost:3000/api/v1",B=pe.create({baseURL:k0,headers:{"Content-Type":"application/json"}});B.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));B.interceptors.response.use(e=>e,async e=>{var r;const t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry){t._retry=!0;try{const n=localStorage.getItem("refreshToken");if(!n)return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e);const a=await B.post("/auth/refresh",{refreshToken:n}),{accessToken:l,refreshToken:o}=a.data;return localStorage.setItem("accessToken",l),localStorage.setItem("refreshToken",o),t.headers.Authorization=`Bearer ${l}`,B(t)}catch(n){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(n)}}return Promise.reject(e)});const xr={register:(e,t,r)=>B.post("/auth/register",{username:e,email:t,password:r}),login:(e,t)=>B.post("/auth/login",{username:e,password:t}),refresh:e=>B.post("/auth/refresh",{refreshToken:e}),logout:()=>B.post("/auth/logout"),getMe:()=>B.get("/auth/me"),getAllUsers:()=>B.get("/auth/users"),updateUser:(e,t)=>B.put(`/auth/users/${e}`,t)},S0={getAll:()=>B.get("/units")},Ae={getAll:()=>B.get("/cost-items"),getCostItems:e=>B.get("/cost-items",{params:e}),getById:e=>B.get(`/cost-items/${e}`),create:e=>B.post("/cost-items",e),update:(e,t)=>B.put(`/cost-items/${e}`,t),delete:e=>B.delete(`/cost-items/${e}`),getCategories:()=>B.get("/cost-categories"),createCategory:e=>B.post("/cost-categories",e),updateCategory:(e,t)=>B.put(`/cost-categories/${e}`,t),deleteCategory:e=>B.delete(`/cost-categories/${e}`),getSubElements:()=>B.get("/cost-sub-elements"),getSubElementsByCategory:e=>B.get("/cost-sub-elements",{params:{category_id:e}}),createSubElement:e=>B.post("/cost-sub-elements",e),updateSubElement:(e,t)=>B.put(`/cost-sub-elements/${e}`,t),deleteSubElement:e=>B.delete(`/cost-sub-elements/${e}`),getUnits:()=>B.get("/units"),createCostItem:e=>B.post("/cost-items",e),updateCostItem:(e,t)=>B.put(`/cost-items/${e}`,t),deleteCostItem:e=>B.delete(`/cost-items/${e}`)},Lt={getAll:()=>B.get("/projects"),getById:e=>B.get(`/projects/${e}`),create:e=>B.post("/projects",e),update:(e,t)=>B.put(`/projects/${e}`,t),delete:e=>B.delete(`/projects/${e}`),submitEstimate:e=>B.post(`/projects/${e}/submit-estimate`),approveEstimate:(e,t)=>B.post(`/projects/${e}/approve-estimate`,{notes:t}),rejectEstimate:(e,t)=>B.post(`/projects/${e}/reject-estimate`,{reason:t}),duplicate:(e,t)=>B.post(`/projects/${e}/duplicate`,t)},Ls={getAll:e=>B.get(`/projects/${e}/estimates`),getById:(e,t)=>B.get(`/projects/${e}/estimates/${t}`),create:(e,t)=>B.post(`/projects/${e}/estimates`,t),update:(e,t,r)=>B.put(`/projects/${e}/estimates/${t}`,r),delete:(e,t)=>B.delete(`/projects/${e}/estimates/${t}`),getSummary:e=>B.get(`/projects/${e}/estimate-summary`)},Os={getAll:e=>B.get("/clients",{params:e}),getById:e=>B.get(`/clients/${e}`),create:e=>B.post("/clients",e),update:(e,t)=>B.put(`/clients/${e}`,t),delete:e=>B.delete(`/clients/${e}`)},Fs={getAll:e=>B.get("/contractors",{params:e}),getById:e=>B.get(`/contractors/${e}`),create:e=>B.post("/contractors",e),update:(e,t)=>B.put(`/contractors/${e}`,t),delete:e=>B.delete(`/contractors/${e}`)},Dr={getAll:(e=!0)=>B.get("/estimate-templates",{params:{shared:e}}),getById:e=>B.get(`/estimate-templates/${e}`),create:e=>B.post("/estimate-templates",e),update:(e,t)=>B.put(`/estimate-templates/${e}`,t),delete:e=>B.delete(`/estimate-templates/${e}`),applyToProject:(e,t)=>B.post(`/estimate-templates/apply/${e}/to/${t}`)},cr=vs((e,t)=>({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null,register:async(r,n,a)=>{var l,o;try{e({isLoading:!0,error:null});const i=await xr.register(r,n,a);e({isLoading:!1}),await t().login(r,a)}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Registration failed";throw e({error:c,isLoading:!1}),i}},login:async(r,n)=>{var a,l;try{e({isLoading:!0,error:null});const o=await xr.login(r,n),{user:i,accessToken:c,refreshToken:d}=o.data;localStorage.setItem("accessToken",c),localStorage.setItem("refreshToken",d),localStorage.setItem("user",JSON.stringify(i)),e({user:i,accessToken:c,refreshToken:d,isLoading:!1})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Login failed";throw e({error:i,isLoading:!1}),o}},logout:async()=>{try{e({isLoading:!0}),t().accessToken&&await xr.logout()}catch(r){console.error("Logout error:",r)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),e({user:null,accessToken:null,refreshToken:null,isLoading:!1,error:null})}},refreshAccessToken:async()=>{try{const r=t().refreshToken;if(!r)throw new Error("No refresh token available");const n=await xr.refresh(r),{accessToken:a,refreshToken:l}=n.data;localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",l),e({accessToken:a,refreshToken:l})}catch(r){throw await t().logout(),r}},checkAuth:async()=>{try{e({isLoading:!0});const r=await xr.getMe(),{user:n}=r.data;e({user:n,isLoading:!1})}catch{e({user:null,accessToken:null,refreshToken:null,isLoading:!1})}},clearError:()=>{e({error:null})},hydrate:()=>{const r=localStorage.getItem("accessToken"),n=localStorage.getItem("refreshToken"),a=localStorage.getItem("user");if(r&&n&&a)try{const l=JSON.parse(a);e({user:l,accessToken:r,refreshToken:n})}catch(l){console.error("Failed to hydrate auth state:",l)}}}));function C0(){const[e,t]=v.useState("monthly"),r=[{name:"Starter",description:"Perfect for freelancers starting out",price:e==="monthly"?19:190,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Up to 10 projects","Custom cost database access","Basic cost estimation","Up to 5 clients","PDF report generation","Email support"],highlighted:!1},{name:"Professional",description:"For established quantity surveyors",price:e==="monthly"?49:490,period:e==="monthly"?"/month":"/year",savings:e==="annual"?"Save 17%":"",features:["Unlimited projects","Full cost database + regional pricing","Advanced cost estimation","Unlimited clients & contractors","Project templates","PDF & Word export","Multi-currency support","Priority support","Cost analysis & benchmarking"],highlighted:!0},{name:"Enterprise",description:"For consulting firms & teams",price:"Custom",period:"",savings:"",features:["Everything in Professional","Team collaboration (unlimited users)","Advanced analytics & reporting","Custom integrations","API access","Dedicated account manager","Custom database modules","On-premise option available"],highlighted:!1}],n=[{name:"Emma Richardson",role:"Freelance Quantity Surveyor",image:"",quote:"QSCostingPro has cut my estimation time in half. The comprehensive cost database and PDF export feature impresses my clients every time.",location:"London, UK"},{name:"David Chen",role:"Senior Cost Consultant",image:"",quote:"Finally a tool built by QS professionals for QS professionals. The regional pricing data and project templates save me hours on every project.",location:"Manchester, UK"},{name:"Sarah McCann",role:"Independent QS",image:"",quote:"The contractor management and client portal features make me look like I have a full team behind me. Absolutely transformed my business.",location:"Edinburgh, UK"},{name:"Michael Patel",role:"Construction Cost Manager",image:"",quote:"Multi-currency support and the ability to work with international projects has opened up new opportunities for my practice.",location:"Birmingham, UK"}],a=[{icon:"",title:"Cost Database",description:"Access comprehensive cost data with regional variations, elemental breakdowns, and specialist pricing. Always up-to-date with market rates."},{icon:"",title:"Client & Contractor Management",description:"Organize all your clients and contractors in one place. Track contact info, specializations, ratings, and project history."},{icon:"",title:"Professional Estimates",description:"Create detailed, branded cost estimates in PDF and Word formats. Impress clients with polished reports and detailed breakdowns."},{icon:"",title:"Cost Analysis & Benchmarking",description:"Analyze historical project data by region, building type, and specification. Make data-driven decisions on future projects."},{icon:"",title:"Multi-Currency & Regional Support",description:"Work with clients worldwide. Support for multiple currencies, regions, and localized cost databases."},{icon:"",title:"Project Templates",description:"Build reusable templates for common project types. Speed up estimation and ensure consistency across all projects."},{icon:"",title:"Easy Data Management",description:"Import/export data easily. Integrate with your existing workflows. APIs available for custom integrations."},{icon:"",title:"Enterprise Security",description:"Bank-level encryption, regular backups, and GDPR compliant. Your client data and estimates are always secure and private."}];return s.jsxs("div",{className:"bg-blue-200",children:[s.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs(X,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold",children:"QS"})}),s.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"QSCostingPro"})]}),s.jsxs("div",{className:"space-x-4",children:[s.jsx(X,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),s.jsx(X,{to:"/register",className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg font-medium transition",children:"Sign Up Free"})]})]})})}),s.jsx("section",{className:"py-32 bg-cover bg-center bg-no-repeat relative flex items-center justify-center bg-gray-700",style:{backgroundImage:"linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://images.unsplash.com/photo-1581092162384-8987c1d64718?w=1200&h=600&fit=crop')"},children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6",children:"Cost Estimation for QS's & SME Contractors"}),s.jsxs("p",{className:"text-lg text-khc-light mb-8 max-w-3xl mx-auto",children:["All-in-one platform with built-in cost database",s.jsx("br",{}),s.jsx("span",{className:"block mt-2",children:"all from 19/month"})]}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(X,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Free Trial"}),s.jsx("button",{className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Watch Demo"})]})]})})}),s.jsx("section",{className:"py-20 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need to Succeed"}),s.jsx("p",{className:"text-xl text-gray-600",children:"From cost estimation to client management, QSCostingPro has the tools QS professionals rely on."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map((l,o)=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition",children:[s.jsx("div",{className:"text-4xl mb-4",children:l.icon}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:l.title}),s.jsx("p",{className:"text-gray-600",children:l.description})]},o))})]})}),s.jsx("section",{className:"py-20 bg-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Simple, Transparent Pricing"}),s.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Choose the plan that fits your practice"}),s.jsxs("div",{className:"flex justify-center gap-4 mb-12",children:[s.jsx("button",{onClick:()=>t("monthly"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="monthly"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Monthly"}),s.jsx("button",{onClick:()=>t("annual"),className:`px-6 py-2 rounded-lg font-semibold transition ${e==="annual"?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Annual (Save 17%)"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:r.map((l,o)=>s.jsxs("div",{className:`rounded-lg shadow overflow-hidden transition ${l.highlighted?"ring-2 ring-khc-primary scale-105":""}`,children:[s.jsxs("div",{className:`p-8 ${l.highlighted?"bg-khc-primary":"bg-gray-50"}`,children:[s.jsx("h3",{className:`text-2xl font-bold mb-2 ${l.highlighted?"text-white":"text-gray-900"}`,children:l.name}),s.jsx("p",{className:`mb-6 ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.description}),s.jsxs("div",{className:`mb-6 ${l.highlighted?"text-white":"text-gray-900"}`,children:[s.jsxs("span",{className:"text-4xl font-bold",children:[typeof l.price=="number"?"":"",l.price]}),s.jsx("span",{className:`text-lg ${l.highlighted?"text-khc-light":"text-gray-600"}`,children:l.period}),l.savings&&s.jsx("p",{className:`text-sm font-semibold mt-2 ${l.highlighted?"text-khc-light":"text-khc-primary"}`,children:l.savings})]}),s.jsx(X,{to:"/register",className:`block text-center py-3 rounded-lg font-bold transition mb-8 ${l.highlighted?"bg-white text-khc-primary hover:bg-gray-100":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:"Get Started"})]}),s.jsx("div",{className:"p-8",children:s.jsx("ul",{className:"space-y-4",children:l.features.map((i,c)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx("span",{className:"text-khc-primary font-bold mt-1",children:""}),s.jsx("span",{className:"text-gray-700",children:i})]},c))})})]},o))})]})}),s.jsx("section",{className:"py-20 bg-gray-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Loved by QS Professionals"}),s.jsx("p",{className:"text-xl text-gray-600",children:"See how QSCostingPro has transformed practices worldwide"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((l,o)=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("span",{className:"text-5xl",children:l.image}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-900",children:l.name}),s.jsx("p",{className:"text-sm text-gray-600",children:l.role}),s.jsx("p",{className:"text-xs text-gray-500",children:l.location})]})]}),s.jsxs("p",{className:"text-gray-700 italic",children:['"',l.quote,'"']})]},o))})]})}),s.jsx("section",{className:"py-20 bg-khc-primary text-white",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Work Smarter?"}),s.jsx("p",{className:"text-xl text-khc-light mb-8",children:"Join hundreds of quantity surveyors who are using QSCostingPro to save time and impress clients."}),s.jsxs("div",{className:"flex gap-4 justify-center",children:[s.jsx(X,{to:"/register",className:"px-8 py-3 bg-white text-khc-primary font-bold rounded-lg hover:bg-gray-100 transition text-lg",children:"Start Your Free Trial"}),s.jsx(X,{to:"/login",className:"px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-khc-primary transition text-lg",children:"Sign In"})]}),s.jsx("p",{className:"text-khc-light text-sm mt-6",children:"No credit card required. 14-day free trial on all plans."})]})}),s.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),s.jsx("span",{className:"font-bold text-white",children:"QSCostingPro"})]}),s.jsx("p",{className:"text-sm",children:"Professional cost estimation for quantity surveyors worldwide."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-4",children:"Product"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"Features"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"Pricing"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"Security"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-4",children:"Company"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx(X,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"})}),s.jsx("li",{children:s.jsx(X,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-4",children:"Connect"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"})}),s.jsx("li",{children:s.jsx("a",{href:"#",className:"hover:text-white transition",children:"Support"})})]})]})]}),s.jsx("div",{className:"border-t border-gray-800 pt-8",children:s.jsx("p",{className:"text-sm text-center",children:" 2026 QSCostingPro. All rights reserved."})})]})})]})}function E0(){const e=Xe(),{login:t,error:r,clearError:n,isLoading:a}=cr(),[l,o]=v.useState(""),[i,c]=v.useState(""),[d,u]=v.useState({}),f=()=>{const h={};return l.trim()||(h.username="Username is required"),i||(h.password="Password is required"),u(h),Object.keys(h).length===0},m=async h=>{if(h.preventDefault(),!!f())try{await t(l,i),e("/dashboard",{replace:!0})}catch{}},N=()=>{r&&n()};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),s.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Login"}),s.jsx(X,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),r&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:r}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),s.jsx("input",{id:"username",type:"text",value:l,onChange:h=>{o(h.target.value),N()},placeholder:"Enter your username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.username?"border-red-500":"border-gray-300"}`,disabled:a}),d.username&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.username})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),s.jsx("input",{id:"password",type:"password",value:i,onChange:h=>{c(h.target.value),N()},placeholder:"Enter your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${d.password?"border-red-500":"border-gray-300"}`,disabled:a}),d.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:d.password})]}),s.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Signing in...":"Sign In"})]}),s.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Don't have an account?"," ",s.jsx(X,{to:"/register",className:"text-khc-primary hover:underline font-medium",children:"Register here"})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:[s.jsx("p",{className:"font-semibold mb-2",children:"Demo Credentials:"}),s.jsx("p",{className:"text-xs",children:"Admin: username: admin | password: admin123456"}),s.jsx("p",{className:"text-xs",children:"Try creating a new account to get started!"})]})]})})}function _0(){const e=Xe(),{register:t,error:r,clearError:n,isLoading:a}=cr(),[l,o]=v.useState({username:"",email:"",password:"",confirmPassword:""}),[i,c]=v.useState({}),d=()=>{const m={};return l.username.trim()?l.username.length<3&&(m.username="Username must be at least 3 characters"):m.username="Username is required",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(m.email="Invalid email format"):m.email="Email is required",l.password?l.password.length<8&&(m.password="Password must be at least 8 characters"):m.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(m.confirmPassword="Passwords do not match"):m.confirmPassword="Please confirm your password",c(m),Object.keys(m).length===0},u=async m=>{if(m.preventDefault(),!!d())try{await t(l.username,l.email,l.password),e("/dashboard",{replace:!0})}catch{}},f=m=>{const{name:N,value:h,type:y,checked:j}=m.target;o(g=>({...g,[N]:y==="checkbox"?j:h})),r&&n()};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-khc-primary to-khc-secondary flex items-center justify-center px-4 py-8",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"QSCostingPro"}),s.jsx("p",{className:"text-khc-light",children:"Professional Cost Estimation for Quantity Surveyors"})]}),s.jsxs("div",{className:"bg-white rounded-lg p-8",style:{boxShadow:"0 30px 80px 10px rgba(0, 0, 0, 0.35), 0 15px 40px 5px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.2)",transform:"translateY(-12px)"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-khc-primary flex-1 text-center",children:"Create Account"}),s.jsx(X,{to:"/",className:"text-gray-500 hover:text-gray-700 transition text-lg font-semibold",title:"Back to home",children:""})]}),r&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded text-red-700",children:r}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Username"}),s.jsx("input",{id:"username",type:"text",name:"username",value:l.username,onChange:f,placeholder:"Choose a username",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.username?"border-red-500":"border-gray-300"}`,disabled:a}),i.username&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.username})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Email"}),s.jsx("input",{id:"email",type:"email",name:"email",value:l.email,onChange:f,placeholder:"Enter your email",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.email?"border-red-500":"border-gray-300"}`,disabled:a}),i.email&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.email})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Password"}),s.jsx("input",{id:"password",type:"password",name:"password",value:l.password,onChange:f,placeholder:"Create a password (min 8 characters)",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.password?"border-red-500":"border-gray-300"}`,disabled:a}),i.password&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.password})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-khc-neutral mb-1",children:"Confirm Password"}),s.jsx("input",{id:"confirmPassword",type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:f,placeholder:"Confirm your password",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${i.confirmPassword?"border-red-500":"border-gray-300"}`,disabled:a}),i.confirmPassword&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:i.confirmPassword})]}),s.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all ${a?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:a?"Creating Account...":"Create Account"})]}),s.jsxs("div",{className:"mt-6 text-center text-sm text-khc-neutral",children:["Already have an account?"," ",s.jsx(X,{to:"/login",className:"text-khc-primary hover:underline font-medium",children:"Sign in here"})]})]}),s.jsx("div",{className:"mt-6 p-4 bg-white/10 rounded-lg text-khc-light text-sm",children:s.jsxs("p",{className:"text-xs",children:[s.jsx("strong",{children:"Note:"})," After registration, you can add clients and contractors from your dashboard."]})})]})})}function P0(){return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs(X,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold",children:"K"})}),s.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),s.jsxs("div",{className:"space-x-4",children:[s.jsx(X,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),s.jsx(X,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),s.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),s.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Introduction"}),s.jsx("p",{children:'KHConstruct ("we," "us," "our," or "Company") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you visit our website and use our application.'}),s.jsx("p",{children:"Please read this Privacy Policy carefully. If you do not agree with our policies and practices, please do not use our services."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Information We Collect"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.1 Information You Provide"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"Account registration information (username, email, password)"}),s.jsx("li",{children:"Project data and cost estimates"}),s.jsx("li",{children:"Cost item data including dates, codes, descriptions, and amounts"}),s.jsx("li",{children:"Any communications with our support team"})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mt-4 mb-2",children:"2.2 Automatically Collected Information"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"Device information (browser type, IP address, operating system)"}),s.jsx("li",{children:"Usage analytics (pages visited, features used, time spent)"}),s.jsx("li",{children:"Cookies and similar tracking technologies"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. How We Use Your Information"}),s.jsx("p",{children:"We use the information we collect to:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"Provide, maintain, and improve our services"}),s.jsx("li",{children:"Process transactions and send related information"}),s.jsx("li",{children:"Send informational and promotional communications"}),s.jsx("li",{children:"Respond to your inquiries and customer support requests"}),s.jsx("li",{children:"Monitor and analyze trends and usage of our services"}),s.jsx("li",{children:"Detect and prevent fraudulent transactions and other illegal activities"}),s.jsx("li",{children:"Comply with legal obligations"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Data Security"}),s.jsx("p",{children:"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. These measures include:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"SSL/TLS encryption for data in transit"}),s.jsx("li",{children:"Hashed password storage"}),s.jsx("li",{children:"Regular security audits and updates"}),s.jsx("li",{children:"Limited access to personal information on a need-to-know basis"})]}),s.jsx("p",{className:"mt-4",children:"However, no method of transmission over the Internet or electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Data Retention"}),s.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and fulfill the purposes outlined in this Privacy Policy. You can request deletion of your account and associated data at any time by contacting our support team."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Sharing Your Information"}),s.jsx("p",{children:"We do not sell, trade, or rent your personal information to third parties. We may share information:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"With your explicit consent"}),s.jsx("li",{children:"To comply with legal obligations"}),s.jsx("li",{children:"With service providers who assist in operating our website and services"}),s.jsx("li",{children:"In connection with a merger, acquisition, or sale of assets"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Your Rights and Choices"}),s.jsx("p",{children:"Depending on your jurisdiction, you may have the right to:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"Access your personal information"}),s.jsx("li",{children:"Correct inaccurate information"}),s.jsx("li",{children:"Request deletion of your information"}),s.jsx("li",{children:"Opt-out of marketing communications"}),s.jsx("li",{children:"Data portability"})]}),s.jsx("p",{className:"mt-4",children:"To exercise these rights, please contact us using the information provided at the end of this policy."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Cookies"}),s.jsx("p",{children:"We use cookies to enhance your experience on our website. You can control cookies through your browser settings. However, disabling cookies may affect the functionality of our services."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Children's Privacy"}),s.jsx("p",{children:"Our services are not intended for children under 13 years old. We do not knowingly collect personal information from children. If we become aware that a child has provided us with personal information, we will delete such information and terminate the child's account."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. Changes to This Privacy Policy"}),s.jsx("p",{children:'We may update this Privacy Policy from time to time to reflect changes in our practices or for other operational, legal, or regulatory reasons. We will notify you of any material changes by posting the new Privacy Policy on our website and updating the "Last updated" date.'})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Contact Us"}),s.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us at:"}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),s.jsx("p",{children:"Email: privacy@khconstruct.com"}),s.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),s.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[s.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),s.jsxs("div",{className:"mt-4 space-x-4",children:[s.jsx(X,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),s.jsx("span",{children:"|"}),s.jsx(X,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function L0(){return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("nav",{className:"fixed top-0 w-full bg-white shadow-md z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs(X,{to:"/",className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold",children:"K"})}),s.jsx("span",{className:"text-xl font-bold text-khc-primary hidden sm:inline",children:"KHConstruct"})]}),s.jsxs("div",{className:"space-x-4",children:[s.jsx(X,{to:"/login",className:"px-4 py-2 text-khc-primary font-medium hover:text-khc-secondary transition",children:"Login"}),s.jsx(X,{to:"/register",className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary transition",children:"Sign Up"})]})]})})}),s.jsx("main",{className:"pt-24 pb-12 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("article",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Terms of Service"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Last updated: January 2024"}),s.jsxs("div",{className:"prose max-w-none text-gray-700 space-y-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"1. Agreement to Terms"}),s.jsx("p",{children:"By accessing and using the KHConstruct application and website, you accept and agree to be bound by and comply with these Terms of Service. If you do not agree to abide by the above, please do not use this service."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"2. Use License"}),s.jsx("p",{children:"Permission is granted to temporarily download one copy of the materials (information or software) from KHConstruct for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"Modifying or copying the materials"}),s.jsx("li",{children:"Using the materials for any commercial purpose or for any public display"}),s.jsx("li",{children:"Attempting to decompile, disassemble, or reverse engineer any software contained on KHConstruct"}),s.jsx("li",{children:"Removing any copyright or other proprietary notations from the materials"}),s.jsx("li",{children:'Transferring the materials to another person or "mirroring" the materials on any other server'}),s.jsx("li",{children:"Using the materials for illegal purposes or in violation of any laws or regulations"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"3. Disclaimer"}),s.jsx("p",{children:"The materials on KHConstruct are provided on an 'as is' basis. KHConstruct makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."}),s.jsx("p",{className:"mt-4",children:"Further, KHConstruct does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its Internet web site or otherwise relating to such materials or on any sites linked to this site."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"4. Limitations"}),s.jsx("p",{children:"In no event shall KHConstruct or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption,) arising out of the use or inability to use the materials on KHConstruct, even if KHConstruct or a KHConstruct authorized representative has been notified orally or in writing of the possibility of such damage."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"5. Accuracy of Materials"}),s.jsx("p",{children:"The materials appearing on KHConstruct could include technical, typographical, or photographic errors. KHConstruct does not warrant that any of the materials on its website are accurate, complete, or current. KHConstruct may make changes to the materials contained on its website at any time without notice."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"6. Materials and Content"}),s.jsx("p",{children:"The materials and content on KHConstruct are protected by copyright and may be owned by or licensed to KHConstruct by others. You may not distribute, modify, transmit, reuse, download, repost, copy, or use said content, whether in whole or in part, for commercial purposes or for personal gain without express advance written permission from KHConstruct."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"7. Links"}),s.jsx("p",{children:"KHConstruct has not reviewed all of the sites linked to its website and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by KHConstruct of the site. Use of any such linked website is at the user's own risk."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"8. Modifications"}),s.jsx("p",{children:"KHConstruct may revise these terms of service for its website at any time without notice. By using this website, you are agreeing to be bound by the then current version of these terms of service."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"9. Governing Law"}),s.jsx("p",{children:"These terms and conditions are governed by and construed in accordance with the laws of the United Kingdom, and you irrevocably submit to the exclusive jurisdiction of the courts in that location."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"10. User Accounts"}),s.jsx("p",{children:"When you create an account on KHConstruct, you are responsible for maintaining the confidentiality of your account information and password. You agree to accept responsibility for all activities that occur under your account. You must notify us immediately of any unauthorized use of your account."}),s.jsx("p",{className:"mt-4",children:"You represent and warrant that the information you provide upon registration and at all other times is accurate, complete, and truthful."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"11. Prohibited Activities"}),s.jsx("p",{children:"You agree that you will not engage in any activity that:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[s.jsx("li",{children:"Violates any laws, regulations, or third-party rights"}),s.jsx("li",{children:"Infringes intellectual property rights"}),s.jsx("li",{children:"Contains viruses, malware, or other harmful code"}),s.jsx("li",{children:"Is defamatory, obscene, or offensive"}),s.jsx("li",{children:"Harasses or threatens others"}),s.jsx("li",{children:"Disrupts the normal flow of dialogue within our services"}),s.jsx("li",{children:"Attempts to gain unauthorized access to our systems"})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"12. Intellectual Property Rights"}),s.jsx("p",{children:"Unless otherwise stated, KHConstruct and/or its licensors own the intellectual property rights for all material on KHConstruct. All intellectual property rights are reserved. You may access this from KHConstruct for your own personal use subject to restrictions set in these terms and conditions."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"13. Payment Terms"}),s.jsx("p",{children:"If you subscribe to a paid plan, you agree to pay the subscription fees as advertised. Billing occurs monthly or annually depending on your selected plan. You authorize us to charge your payment method for the subscription fees and any applicable taxes."}),s.jsx("p",{className:"mt-4",children:"You may cancel your subscription at any time. Refunds are subject to our refund policy, which is provided separately."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"14. Termination of Service"}),s.jsx("p",{children:"We reserve the right to suspend or terminate your account and access to our services at any time, for any reason, including but not limited to violation of these Terms of Service or for any unlawful purpose."})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"15. Contact Information"}),s.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("p",{className:"font-semibold",children:"KHConstruct Support"}),s.jsx("p",{children:"Email: support@khconstruct.com"}),s.jsx("p",{children:"Address: [Your Company Address]"})]})]})]})]})}),s.jsx("footer",{className:"bg-khc-neutral text-khc-light py-8 mt-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm text-gray-400",children:[s.jsx("p",{children:" 2024 KHConstruct. All rights reserved."}),s.jsxs("div",{className:"mt-4 space-x-4",children:[s.jsx(X,{to:"/privacy",className:"hover:text-white transition",children:"Privacy Policy"}),s.jsx("span",{children:"|"}),s.jsx(X,{to:"/terms",className:"hover:text-white transition",children:"Terms of Service"})]})]})})]})}function Ht(){const{user:e,accessToken:t,isLoading:r,error:n,login:a,register:l,logout:o,refreshToken:i,clearError:c}=cr();return{user:e,accessToken:t,isLoading:r,error:n,isAuthenticated:!!e,login:a,register:l,logout:o,refreshToken:i,clearError:c,isAdmin:(e==null?void 0:e.role)==="admin",isEstimator:(e==null?void 0:e.role)==="estimator",isViewer:(e==null?void 0:e.role)==="viewer",hasPermission:d=>e?Array.isArray(d)?d.includes(e.role):e.role===d:!1}}const Mt=vs((e,t)=>({projects:[],currentProject:null,isLoading:!1,error:null,filters:{},fetchProjects:async()=>{var r,n;e({isLoading:!0,error:null});try{const a=await Lt.getAll();e({projects:a.data.data,isLoading:!1})}catch(a){const l=((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.error)||"Failed to fetch projects";throw e({error:l,isLoading:!1}),a}},fetchProjectById:async r=>{var n,a;e({isLoading:!0,error:null});try{const l=await Lt.getById(r);e({currentProject:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch project";throw e({error:o,isLoading:!1,currentProject:null}),l}},createProject:async r=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Lt.create(r)).data.data;return e(i=>({projects:[o,...i.projects],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to create project";throw e({error:o,isLoading:!1}),l}},updateProject:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Lt.update(r,n)).data.data;return e(c=>{var d;return{projects:c.projects.map(u=>u.id===r?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===r?i:c.currentProject,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update project";throw e({error:i,isLoading:!1}),o}},deleteProject:async r=>{var n,a;e({isLoading:!0,error:null});try{await Lt.delete(r),e(l=>{var o;return{projects:l.projects.filter(i=>i.id!==r),currentProject:((o=l.currentProject)==null?void 0:o.id)===r?null:l.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete project";throw e({error:o,isLoading:!1}),l}},duplicateProject:async(r,n,a,l)=>{var o,i;e({isLoading:!0,error:null});try{const d=(await Lt.duplicate(r,{name:n,include_estimates:a,copy_status:l})).data.data;return e(u=>({projects:[d,...u.projects],isLoading:!1})),d}catch(c){const d=((i=(o=c.response)==null?void 0:o.data)==null?void 0:i.error)||"Failed to duplicate project";throw e({error:d,isLoading:!1}),c}},submitEstimate:async r=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Lt.submitEstimate(r)).data.data;e(i=>{var c;return{projects:i.projects.map(d=>d.id===r?o:d),currentProject:((c=i.currentProject)==null?void 0:c.id)===r?o:i.currentProject,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to submit estimate";throw e({error:o,isLoading:!1}),l}},approveEstimate:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Lt.approveEstimate(r,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===r?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===r?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to approve estimate";throw e({error:i,isLoading:!1}),o}},rejectEstimate:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Lt.rejectEstimate(r,n)).data.data;e(c=>{var d;return{projects:c.projects.map(u=>u.id===r?i:u),currentProject:((d=c.currentProject)==null?void 0:d.id)===r?i:c.currentProject,isLoading:!1}})}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to reject estimate";throw e({error:i,isLoading:!1}),o}},setFilters:r=>{e(n=>({filters:{...n.filters,...r}}))},clearError:()=>{e({error:null})},setCurrentProject:r=>{e({currentProject:r})}}));function Y(e,t="GBP",r="en-GB"){return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function T0(e,t=0,r="en-GB"){return new Intl.NumberFormat(r,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e)}function Lp(e,t="en-GB",r){const n=typeof e=="string"?new Date(e):e,a={year:"numeric",month:"long",day:"numeric",...r};return new Intl.DateTimeFormat(t,a).format(n)}function al(e,t=1,r="en-GB"){return`${T0(e,t,r)}%`}function R0(e){return e.filter(t=>t.status!=="completed").reduce((t,r)=>{var a;const n=((a=r.estimate_totals)==null?void 0:a.grand_total)||r.budget_cost||0;return t+n},0)}function A0(e){const t=e.filter(n=>{var a,l;return((a=n.estimate_totals)==null?void 0:a.floor_area_m2)&&n.estimate_totals.floor_area_m2>0&&((l=n.estimate_totals)==null?void 0:l.grand_total)});if(t.length===0)return null;const r=t.reduce((n,a)=>{const l=a.estimate_totals.grand_total/a.estimate_totals.floor_area_m2;return n+l},0);return Math.round(r/t.length*100)/100}function I0(e){const t=e.filter(c=>{var d;return c.budget_cost&&((d=c.estimate_totals)==null?void 0:d.grand_total)}),r=t.reduce((c,d)=>c+(d.budget_cost||0),0),n=t.reduce((c,d)=>{var u;return c+(((u=d.estimate_totals)==null?void 0:u.grand_total)||0)},0),a=n-r,l=r>0?Math.round(a/r*1e3)/10:0,o=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)>(c.budget_cost||0)}).length,i=t.filter(c=>{var d;return(((d=c.estimate_totals)==null?void 0:d.grand_total)||0)<(c.budget_cost||0)}).length;return{totalBudget:r,totalEstimate:n,variance:a,variancePercentage:l,projectsOverBudget:o,projectsUnderBudget:i}}function Tp(e){const t={};let r=0;return e.forEach(a=>{var o;(((o=a.estimate_totals)==null?void 0:o.categories)||[]).forEach(i=>{t[i.category_name]||(t[i.category_name]={total_cost:0,project_count:0}),t[i.category_name].total_cost+=i.subtotal||0,t[i.category_name].project_count+=1,r+=i.total||0})}),Object.entries(t).map(([a,l])=>({category_name:a,total_cost:l.total_cost,project_count:l.project_count,percentage:r>0?Math.round(l.total_cost/r*1e3)/10:0,avg_cost_per_project:Math.round(l.total_cost/l.project_count*100)/100})).sort((a,l)=>l.total_cost-a.total_cost)}function Rp(e,t=5){return e.filter(n=>{var a;return n.budget_cost&&((a=n.estimate_totals)==null?void 0:a.grand_total)}).map(n=>{var a,l,o,i;return{project_id:n.id,project_name:n.name||`Project ${n.id}`,budget:n.budget_cost||0,estimate:((a=n.estimate_totals)==null?void 0:a.grand_total)||0,variance:(((l=n.estimate_totals)==null?void 0:l.grand_total)||0)-(n.budget_cost||0),variancePercentage:(n.budget_cost||0)>0?Math.round(((((o=n.estimate_totals)==null?void 0:o.grand_total)||0)-(n.budget_cost||0))/(n.budget_cost||0)*1e3)/10:0,isOverBudget:(((i=n.estimate_totals)==null?void 0:i.grand_total)||0)>(n.budget_cost||0)}}).sort((n,a)=>a.estimate-n.estimate).slice(0,t)}function D0({projects:e,isLoading:t=!1}){const r=I0(e),n=r.variance>0,a=n?"border-khc-accent":"border-green-500",l=n?"text-khc-accent":"text-green-600",o=n?"bg-orange-50":"bg-green-50";if(t)return s.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a}`,children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]})});const i=r.projectsOverBudget,c=r.projectsUnderBudget;return s.jsx("div",{className:`bg-white rounded-lg shadow-md p-6 border-l-4 ${a} transition-all hover:shadow-lg`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Budget Variance"}),s.jsxs("p",{className:`text-3xl font-bold mt-2 ${l}`,children:[n?"+":"",Y(r.variance)]}),s.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[s.jsxs("span",{className:`inline-flex items-center ${n?"text-khc-accent":"text-green-600"} text-sm font-medium`,children:[n?s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12 15a1 1 0 01-.707-.293l-2.828-2.829a1 1 0 011.414-1.414L11 11.414V5a1 1 0 112 0v5.414l1.121-1.121a1 1 0 111.414 1.414l-2.828 2.829A1 1 0 0112 15z",clipRule:"evenodd"})}):s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M12 5a1 1 0 01.707.293l2.828 2.829a1 1 0 11-1.414 1.414L13 8.586V15a1 1 0 11-2 0V8.586l-1.121 1.121a1 1 0 11-1.414-1.414l2.828-2.829A1 1 0 0112 5z",clipRule:"evenodd"})}),al(Math.abs(r.variancePercentage),1)]}),s.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",n?"over":"under"," budget)"]})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[i>0&&`${i} project${i!==1?"s":""} over budget  `,c>0&&`${c} under budget`,i===0&&c===0&&"No budget data available"]})]}),s.jsx("div",{className:`${o} rounded-lg w-16 h-16 flex items-center justify-center flex-shrink-0 text-2xl`,children:n?"":""})]})})}function O0({projects:e,isLoading:t=!1}){const r=Rp(e,5);if(t)return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),s.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(a=>s.jsxs("div",{children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-8 bg-gray-100 rounded"})]},a))})]});if(r.length===0)return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),s.jsx("p",{className:"text-center text-gray-600 py-8",children:"Set budgets to compare estimates"})]});const n=Math.max(...r.flatMap(a=>[a.budget,a.estimate]));return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Budget vs Estimate"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Top 5 projects by estimate value"})]}),s.jsx("div",{className:"space-y-5",children:r.map(a=>{const l=a.budget/n*100,o=a.estimate/n*100,i=a.isOverBudget?"text-khc-accent":"text-green-600";return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate flex-1",children:a.project_name}),s.jsxs("span",{className:`text-xs font-semibold ${i}`,children:[a.isOverBudget?"+":"",al(a.variancePercentage,1)]})]}),s.jsxs("div",{className:"relative h-5 bg-gray-100 rounded overflow-hidden",children:[s.jsx("div",{className:"absolute h-full bg-khc-primary rounded",style:{width:`${l}%`}}),s.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:l>20&&Y(a.budget)})]}),s.jsxs("div",{className:"relative h-5 rounded overflow-hidden",style:{backgroundColor:"#f3f4f6"},children:[s.jsx("div",{className:`absolute h-full rounded ${a.isOverBudget?"bg-khc-accent":"bg-green-500"}`,style:{width:`${o}%`}}),s.jsx("div",{className:"relative h-full flex items-center px-2 text-xs font-medium text-white",children:o>20&&Y(a.estimate)})]}),s.jsx("div",{className:"flex justify-between text-xs text-gray-600 px-1",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Budget:"})," ",Y(a.budget)]}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium",children:"Estimate:"})," ",Y(a.estimate)]})]})})]},a.project_id)})}),s.jsxs("div",{className:"mt-6 pt-4 border-t flex gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-khc-primary"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Budget"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-khc-accent"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Over)"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded bg-green-500"}),s.jsx("span",{className:"text-xs text-gray-600",children:"Estimate (Under)"})]})]})]})}const _d=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function F0({projects:e,isLoading:t=!1}){const r=Tp(e);if(t)return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),s.jsx("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded"})]});if(r.length===0)return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),s.jsx("p",{className:"text-center text-gray-600 py-12",children:"No category data available"})]});const n=r.reduce((i,c)=>i+c.total_cost,0),a=70;let l=-90;const o=r.map((i,c)=>{const d=i.total_cost/n*100,u=l*(Math.PI/180),f=(l+d/100*360)*(Math.PI/180),m=100+a*Math.cos(u),N=100+a*Math.sin(u),h=100+a*Math.cos(f),y=100+a*Math.sin(f),j=d>50?1:0,g=`M ${m} ${N} A ${a} ${a} 0 ${j} 1 ${h} ${y} L ${100+(a-25)*Math.cos(f)} ${100+(a-25)*Math.sin(f)} A ${a-25} ${a-25} 0 ${j} 0 ${100+(a-25)*Math.cos(u)} ${100+(a-25)*Math.sin(u)} Z`;return l+=d/100*360,{path:g,color:_d[c%_d.length],...i}});return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Cost Distribution by Category"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Project breakdown"})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-8",children:[s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"relative w-64 h-64",children:[s.jsx("svg",{viewBox:"0 0 200 200",className:"w-full h-full",children:o.map((i,c)=>s.jsx("g",{children:s.jsx("path",{d:i.path,fill:i.color,opacity:"0.9",className:"hover:opacity-100 transition-opacity cursor-pointer"})},c))}),s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-khc-primary",children:Y(n)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total Cost"})]})})]})}),s.jsx("div",{className:"flex-1 space-y-3",children:o.map((i,c)=>s.jsxs("div",{className:"flex items-start gap-3 p-2 rounded hover:bg-gray-50 transition",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:i.color}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.category_name}),s.jsxs("div",{className:"flex items-center justify-between gap-2 mt-0.5",children:[s.jsx("p",{className:"text-xs text-gray-600",children:Y(i.total_cost)}),s.jsx("p",{className:"text-xs font-semibold text-gray-700",children:al(i.percentage,1)})]})]})]},c))})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Categories"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:r.length})]}),s.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[s.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Avg per Category"}),s.jsx("p",{className:"text-lg font-bold text-gray-900",children:Y(n/r.length)})]})]})]})}const zn=["#2C5F8D","#4A7BA7","#10b981","#8b5cf6","#f43f5e","#f59e0b","#06b6d4","#6366f1"];function $0({projects:e,isLoading:t=!1}){const r=Tp(e),n=r.reduce((a,l)=>a+l.total_cost,0);return t?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),s.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(a=>s.jsx("div",{className:"h-12 bg-gray-100 rounded"},a))})]}):r.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Cost by Category"}),s.jsx("p",{className:"text-center text-gray-600 py-8",children:"No category data available"})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-khc-primary to-khc-secondary",children:[s.jsx("h3",{className:"font-semibold text-white",children:" Cost by Category"}),s.jsxs("p",{className:"text-xs text-gray-200 mt-1",children:[r.length," categories across projects"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-gray-50",children:[s.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Total Cost"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"%"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-gray-700",children:"Projects"}),s.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-gray-700",children:"Avg/Project"})]})}),s.jsx("tbody",{className:"divide-y",children:r.map((a,l)=>s.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:zn[l%zn.length]}}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:a.category_name})]})}),s.jsx("td",{className:"px-4 py-4 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:Y(a.total_cost)})}),s.jsx("td",{className:"px-4 py-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all",style:{width:`${a.percentage}%`,backgroundColor:zn[l%zn.length]}})}),s.jsx("span",{className:"text-xs font-semibold text-gray-600 w-10 text-right",children:al(a.percentage,1)})]})}),s.jsx("td",{className:"px-4 py-4 text-right",children:s.jsx("span",{className:"text-sm font-medium text-gray-600",children:a.project_count})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsx("span",{className:"text-sm font-medium text-gray-900",children:Y(a.avg_cost_per_project)})})]},l))})]})}),s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Project Total"}),s.jsx("span",{className:"text-lg font-bold text-khc-primary",children:Y(n)})]})})]})}function U0(){const{user:e}=Ht(),{projects:t,isLoading:r,fetchProjects:n}=Mt();v.useEffect(()=>{n()},[n]);const a=R0(t),l=A0(t),o=t.filter(d=>d.status!=="completed").length,i=Rp(t).length,c=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="estimator";return s.jsxs("div",{className:"space-y-6",children:[c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-6",children:[s.jsx("div",{className:"md:col-span-2 lg:col-span-6 lg:row-span-2",children:s.jsx("div",{className:"bg-gradient-to-br from-khc-primary to-khc-secondary rounded-lg shadow-md p-8 text-white h-full flex flex-col justify-between overflow-hidden relative",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:r?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/3 mb-4"}),s.jsx("div",{className:"h-12 bg-white bg-opacity-20 rounded w-1/2"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-white text-opacity-80 mb-2",children:"Total Project Value"}),s.jsx("h2",{className:"text-4xl font-bold mb-1",children:Y(a)}),s.jsxs("p",{className:"text-xs text-white text-opacity-70",children:[t.length," active projects"]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-white border-opacity-20",children:[s.jsxs("svg",{className:"w-full h-16",viewBox:"0 0 200 60",children:[s.jsx("polyline",{points:"0,40 25,35 50,30 75,25 100,20 125,25 150,30 175,35 200,40",fill:"none",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2"}),s.jsx("polyline",{points:"0,45 25,40 50,35 75,30 100,25 125,30 150,35 175,40 200,45",fill:"rgba(255,255,255,0.1)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"1"})]}),s.jsx("p",{className:"text-xs text-white text-opacity-70 mt-2",children:"Cumulative estimate trend"})]})]})})}),s.jsx("div",{className:"md:col-span-1 lg:col-span-3 lg:row-span-2",children:s.jsx(D0,{projects:t,isLoading:r})}),s.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:r?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Active Projects"}),s.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:o})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"bg-green-50 rounded p-2",children:[s.jsx("p",{className:"text-gray-600",children:"In Progress"}),s.jsx("p",{className:"font-bold text-green-700",children:t.filter(d=>d.status==="in_progress").length})]}),s.jsxs("div",{className:"bg-blue-50 rounded p-2",children:[s.jsx("p",{className:"text-gray-600",children:"Draft"}),s.jsx("p",{className:"font-bold text-blue-700",children:t.filter(d=>d.status==="draft").length})]})]})]})})}),l&&s.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500 h-full flex flex-col justify-between",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:r?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 text-sm font-medium",children:"Avg Cost per m"}),s.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:Y(l)})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx("p",{children:"Per square meter"}),s.jsx("p",{className:"text-purple-600 font-semibold",children:"Industry metric"})]})})]})})}),s.jsx("div",{className:"md:col-span-1 lg:col-span-3",children:s.jsx(X,{to:"/projects",className:"block bg-gradient-to-br from-khc-accent to-orange-600 rounded-lg shadow-md p-6 text-white h-full hover:shadow-lg transition-shadow cursor-pointer",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},children:r?s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-1/2 mb-4"}),s.jsx("div",{className:"h-8 bg-white bg-opacity-20 rounded w-1/3"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-white text-opacity-90 mb-2",children:"Projects at Risk"}),s.jsx("p",{className:"text-4xl font-bold",children:i}),s.jsx("p",{className:"text-xs text-white text-opacity-80 mt-1",children:"Over budget"})]}),s.jsx("div",{className:"text-4xl",children:""})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-white border-opacity-20",children:s.jsx("p",{className:"text-xs text-white text-opacity-70",children:"View details "})})]})})}),s.jsx("div",{className:"md:col-span-2 lg:col-span-7",children:s.jsx(O0,{projects:t,isLoading:r})}),s.jsx("div",{className:"md:col-span-1 lg:col-span-5",children:s.jsx(F0,{projects:t,isLoading:r})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx($0,{projects:t,isLoading:r}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(X,{to:"/projects/new",className:"group block bg-khc-primary hover:bg-khc-neutral text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("h3",{className:"font-semibold",children:"Create Project"}),s.jsx("p",{className:"text-xs text-gray-200 mt-2",children:"Start a new project"})]}),s.jsxs(X,{to:"/projects",className:"group block bg-khc-secondary hover:bg-khc-primary text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("h3",{className:"font-semibold",children:"All Projects"}),s.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:["View ",t.length," projects"]})]}),s.jsxs(X,{to:"/projects",className:"group block bg-gradient-to-br from-emerald-500 to-green-600 text-white rounded-lg p-6 transition-all text-center hover:scale-105 transform",style:{boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)"},children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("h3",{className:"font-semibold",children:"Completed"}),s.jsxs("p",{className:"text-xs text-gray-200 mt-2",children:[t.filter(d=>d.status==="completed").length," finished"]})]})]})]})]}),!c&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),s.jsx("p",{className:"text-gray-600",children:"Financial metrics are available to administrators and estimators."})]})]})}const M0=e=>{const[t,r]=v.useState(new Set),n=v.useCallback(u=>{r(f=>{const m=new Set(f);return m.has(u)?m.delete(u):m.add(u),m})},[]),a=v.useCallback(()=>{const u=new Set(e.map(f=>f.id));r(u)},[e]),l=v.useCallback(()=>{r(new Set)},[]),o=v.useCallback(()=>{t.size===e.length?l():a()},[t.size,e.length,a,l]),i=v.useCallback(u=>t.has(u),[t]),c=v.useCallback(()=>e.filter(u=>t.has(u.id)),[e,t]),d=v.useCallback(()=>{r(new Set)},[]);return{selectedIds:t,selectedCount:t.size,isAllSelected:t.size===e.length&&e.length>0,isPartiallySelected:t.size>0&&t.size<e.length,toggleSelection:n,selectAll:a,deselectAll:l,toggleAll:o,isSelected:i,getSelectedItems:c,clearSelection:d}};function B0({selectedCount:e,totalCount:t,isAllSelected:r,isPartiallySelected:n,onSelectAll:a,onDeselectAll:l,onBulkDelete:o,onBulkStatusChange:i,isLoading:c=!1}){return s.jsx("div",{className:"bg-khc-light border-b-2 border-khc-primary sticky top-16 z-30 transition-all duration-300",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",children:[s.jsx("input",{type:"checkbox",checked:r,ref:d=>{d&&(d.indeterminate=n)},onChange:r?l:a,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:r?"Deselect All":"Select All"})]}),s.jsx("div",{className:"h-6 w-px bg-gray-300"}),s.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e," of ",t," selected"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("button",{disabled:e===0||c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Change status for selected projects",children:" Change Status"}),s.jsxs("div",{className:"absolute right-0 mt-0 w-48 bg-white rounded-lg shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[s.jsx("button",{onClick:()=>i("draft"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Draft"}),s.jsx("button",{onClick:()=>i("in_progress"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" In Progress"}),s.jsx("button",{onClick:()=>i("completed"),disabled:c,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:" Completed"})]})]}),s.jsxs("button",{onClick:o,disabled:e===0||c,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium disabled:bg-gray-400 transition-colors",title:"Delete selected projects",children:[" Delete (",e,")"]}),s.jsx("button",{onClick:l,disabled:e===0,className:"px-4 py-2 border border-gray-300 text-gray-700 hover:bg-gray-100 rounded-lg text-sm font-medium disabled:opacity-50 transition-colors",children:" Clear"})]})]})})})}function wn({isOpen:e,onClose:t,title:r,children:n,footer:a,size:l="md"}){if(!e)return null;const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center modal-overlay",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),s.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl ${o[l]} w-full mx-4 modal-content`,children:[r&&s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 py-4",children:n}),a&&s.jsx("div",{className:"flex justify-end gap-2 px-6 py-4 border-t border-gray-200",children:a})]})]})}function z0({isOpen:e,onClose:t,onDuplicate:r,projectName:n,isLoading:a=!1}){const[l,o]=v.useState(`${n} - Copy`),[i,c]=v.useState(!1),[d,u]=v.useState(!1),[f,m]=v.useState({}),N=async()=>{const h={};if(l.trim()||(h.name="Project name is required"),l.length>255&&(h.name="Project name must be less than 255 characters"),Object.keys(h).length>0){m(h);return}try{await r({name:l.trim(),includeEstimates:i,copyStatus:d}),o(`${n} - Copy`),c(!1),u(!1),m({}),t()}catch{}};return s.jsx(wn,{isOpen:e,onClose:t,title:"Duplicate Project",size:"md",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Project Name *"}),s.jsx("input",{type:"text",value:l,onChange:h=>{o(h.target.value),f.name&&m({...f,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Project Name - Copy",maxLength:255}),f.name&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:f.name})]}),s.jsxs("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Copy Options"}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:h=>c(h.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Include Estimates"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Copy all line items and estimates from the original project"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:h=>u(h.target.checked),disabled:!i,className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer disabled:opacity-50"}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${d?"text-gray-900":"text-gray-600"}`,children:"Copy Status (if estimates included)"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Copy estimate status (approved, rejected, etc.)"})]})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-blue-900",children:" The new project will be created as a draft. You can edit it after creation."})}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:t,disabled:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:N,disabled:a,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:a?"Duplicating...":"Duplicate Project"})]})]})})}function H0({id:e,type:t,message:r,duration:n=4e3,onClose:a}){v.useEffect(()=>{const i=setTimeout(()=>a(e),n);return()=>clearTimeout(i)},[e,n,a]);const l={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[t],o={success:"",error:"",warning:"",info:""}[t];return s.jsxs("div",{className:`${l} text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-in fade-in slide-in-from-right-2 duration-300`,role:"alert",children:[s.jsx("span",{className:"font-bold text-lg",children:o}),s.jsx("span",{className:"text-sm",children:r})]})}let aa=null;const ll=()=>{const e=aa;return{success:(t,r)=>{e&&e.addToast("success",t,r)},error:(t,r)=>{e&&e.addToast("error",t,r)},warning:(t,r)=>{e&&e.addToast("warning",t,r)},info:(t,r)=>{e&&e.addToast("info",t,r)}}};function V0({maxToasts:e=3}){const[t,r]=v.useState([]),n=v.useRef(null),a=v.useCallback((o,i,c)=>{const u={id:`toast-${Date.now()}-${Math.random()}`,type:o,message:i,duration:c};r(f=>{const m=[...f,u];return m.length>e?m.slice(-e):m})},[e]),l=v.useCallback(o=>{r(i=>i.filter(c=>c.id!==o))},[]);return v.useEffect(()=>(n.current={addToast:a,removeToast:l},aa=n.current,()=>{aa===n.current&&(aa=null)}),[a,l]),s.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2",children:t.map(o=>s.jsx(H0,{id:o.id,type:o.type,message:o.message,duration:o.duration,onClose:l},o.id))})}function kr(e){var t,r,n,a,l,o,i;if(pe.isAxiosError(e)){const c=e;if((r=(t=c.response)==null?void 0:t.data)!=null&&r.error)return c.response.data.error;if((a=(n=c.response)==null?void 0:n.data)!=null&&a.message)return c.response.data.message;if((o=(l=c.response)==null?void 0:l.data)!=null&&o.errors){const d=c.response.data.errors;if(Array.isArray(d))return d.map(u=>u.message).join(", ")}if((i=c.response)!=null&&i.status)switch(c.response.status){case 400:return"Invalid request. Please check your input.";case 401:return"Authentication failed. Please login again.";case 403:return"You do not have permission to perform this action.";case 404:return"The requested resource was not found.";case 409:return"This resource already exists.";case 422:return"Validation failed. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Please try again later.";case 503:return"Service unavailable. Please try again later.";default:return`Error: ${c.response.status} ${c.response.statusText}`}return c.message==="Network Error"?"Network error. Please check your internet connection.":c.message||"An error occurred"}return e instanceof Error?e.message:"An unknown error occurred"}function W0(){Xe();const e=ll(),{user:t,isEstimator:r,isAdmin:n}=Ht(),{projects:a,isLoading:l,error:o,fetchProjects:i,deleteProject:c,updateProject:d,duplicateProject:u}=Mt(),[f,m]=v.useState({status:"",estimateStatus:"",progress:"",search:""}),[N,h]=v.useState(!1),[y,j]=v.useState(!1),[g,p]=v.useState(!1),[x,b]=v.useState(null),[k,C]=v.useState(""),w=M0(a);v.useEffect(()=>{i()},[i]);const L=a.filter(A=>!(f.status&&A.status!==f.status||f.estimateStatus&&A.estimate_status!==f.estimateStatus||f.progress&&A.progress!==f.progress||f.search&&!A.name.toLowerCase().includes(f.search.toLowerCase()))),F=async A=>{if(window.confirm("Are you sure you want to delete this project?"))try{await c(A)}catch{}},$=async()=>{const A=w.getSelectedItems(),q=`Delete ${A.length} project${A.length!==1?"s":""}? This cannot be undone.`;if(window.confirm(q))try{h(!0);let O=0,P=0;for(const E of A)try{await c(E.id),O++}catch(T){P++,`${E.id}`}w.clearSelection(),e.success(`Deleted ${O} project${O!==1?"s":""}`),P>0&&e.error(`Failed to delete ${P} project${P!==1?"s":""}`)}finally{h(!1)}},D=async A=>{const q=w.getSelectedItems();try{h(!0);let O=0;for(const P of q)try{await d(P.id,{status:A}),O++}catch(E){`${P.id}`}w.clearSelection(),await i(),e.success(`Updated ${O} project${O!==1?"s":""}`)}finally{h(!1)}},H=(A,q)=>{b(A),C(q),p(!0)},U=async A=>{if(x)try{j(!0),await u(x,A.name,A.includeEstimates,A.copyStatus),await i(),e.success("Project duplicated successfully"),p(!1)}catch{e.error("Failed to duplicate project")}finally{j(!1)}};return s.jsxs("div",{className:"space-y-6",children:[w.selectedCount>0&&s.jsx(B0,{selectedCount:w.selectedCount,totalCount:a.length,isAllSelected:w.isAllSelected,isPartiallySelected:w.isPartiallySelected,onSelectAll:w.selectAll,onDeselectAll:w.deselectAll,onBulkDelete:$,onBulkStatusChange:D,isLoading:N}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Projects"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your estimation projects"})]}),(n||r)&&s.jsx(X,{to:"/projects/new",className:"bg-khc-primary hover:bg-khc-secondary text-white font-medium py-2 px-4 rounded-lg transition",children:"+ New Project"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4 space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),s.jsx("input",{type:"text",placeholder:"Search by name...",value:f.search,onChange:A=>m({...f,search:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),s.jsxs("select",{value:f.status,onChange:A=>m({...f,status:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimate Status"}),s.jsxs("select",{value:f.estimateStatus,onChange:A=>m({...f,estimateStatus:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"",children:"All Estimates"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"submitted",children:"Submitted"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"rejected",children:"Rejected"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Progress"}),s.jsxs("select",{value:f.progress,onChange:A=>m({...f,progress:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"",children:"All Progress"}),s.jsx("option",{value:"Not Started",children:"Not Started"}),s.jsx("option",{value:"Progressing",children:"Progressing"}),s.jsx("option",{value:"Completed",children:"Completed"})]})]})]})}),o&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:o}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l?s.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading projects..."}):L.length===0?s.jsx("div",{className:"p-6 text-center text-gray-600",children:a.length===0?"No projects yet.":"No projects match your filters."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700 w-12",children:s.jsx("input",{type:"checkbox",checked:w.isAllSelected,ref:A=>{A&&(A.indeterminate=w.isPartiallySelected)},onChange:w.toggleAll,className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Progress"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Estimate"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y",children:L.map(A=>s.jsxs("tr",{className:`hover:bg-gray-50 transition ${w.isSelected(A.id)?"bg-khc-light":""}`,children:[s.jsx("td",{className:"px-6 py-4 w-12",children:s.jsx("input",{type:"checkbox",checked:w.isSelected(A.id),onChange:()=>w.toggleSelection(A.id),className:"w-5 h-5 rounded border-2 border-khc-primary cursor-pointer"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(X,{to:`/projects/${A.id}`,className:"text-khc-primary hover:underline font-medium",children:A.name})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:A.project_address||A.description||"N/A"}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${A.progress==="Completed"?"bg-green-100 text-green-700":A.progress==="Progressing"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:A.progress||"Not Started"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded font-medium",children:A.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs rounded font-medium ${A.estimate_status==="approved"?"bg-green-100 text-green-700":A.estimate_status==="submitted"?"bg-blue-100 text-blue-700":A.estimate_status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:A.estimate_status})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(A.created_at).toLocaleDateString()}),s.jsxs("td",{className:"px-6 py-4 space-x-2 flex",children:[s.jsx(X,{to:`/projects/${A.id}`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"View"}),(n||(t==null?void 0:t.id)===A.created_by&&r)&&s.jsxs(s.Fragment,{children:[s.jsx(X,{to:`/projects/${A.id}/edit`,className:"text-khc-primary hover:text-khc-secondary text-sm font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>H(A.id,A.name),className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Duplicate"}),n&&s.jsx("button",{onClick:()=>F(A.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})]})]})]},A.id))})]})})}),s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Showing ",L.length," of ",a.length," projects"]}),s.jsx(z0,{isOpen:g,onClose:()=>p(!1),onDuplicate:U,projectName:k,isLoading:y})]})}function ze({label:e="Back",className:t=""}){const r=Xe();return s.jsxs("button",{onClick:()=>r(-1),className:`
        inline-flex items-center gap-2 px-4 py-2
        bg-gray-200 hover:bg-gray-300
        text-gray-700
        rounded-lg font-medium
        transition duration-200
        ${t}
      `,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e]})}function Pd(){const{id:e}=ys(),t=Xe(),{currentProject:r,isLoading:n,error:a,fetchProjectById:l,createProject:o,updateProject:i}=Mt(),c=!!e,[d,u]=v.useState({name:"",client_id:"",contractor_id:"",budget_cost:"",start_date:"",project_address:"",description:"",notes:"",progress:"Not Started"}),[f,m]=v.useState([]),[N,h]=v.useState([]),[y,j]=v.useState(!0),[g,p]=v.useState(!0),[x,b]=v.useState({});v.useEffect(()=>{(async()=>{try{const[$,D]=await Promise.all([Os.getAll(),Fs.getAll()]);m($.data.data||[]),h(D.data.data||[])}catch{console.error("Failed to load clients/contractors")}finally{j(!1),p(!1)}})()},[]),v.useEffect(()=>{c&&e&&l(Number(e)).then(()=>{var F,$,D;r&&u({name:r.name||"",client_id:((F=r.client_id)==null?void 0:F.toString())||"",contractor_id:(($=r.contractor_id)==null?void 0:$.toString())||"",budget_cost:((D=r.budget_cost)==null?void 0:D.toString())||"",start_date:r.start_date||"",project_address:r.project_address||"",description:r.description||"",notes:r.notes||"",progress:r.progress||"Not Started"})})},[e,c,l,r==null?void 0:r.id]);const k=()=>{const F={};return d.name.trim()||(F.name="Project name is required"),d.client_id.trim()||(F.client_id="Client is required"),d.start_date||(F.start_date="Start date is required"),d.budget_cost&&isNaN(Number(d.budget_cost))&&(F.budget_cost="Must be a valid number"),b(F),Object.keys(F).length===0},C=async F=>{if(F.preventDefault(),!!k())try{const $={name:d.name,client_id:Number(d.client_id),contractor_id:d.contractor_id?Number(d.contractor_id):void 0,budget_cost:d.budget_cost?Number(d.budget_cost):void 0,start_date:d.start_date,project_address:d.project_address||void 0,description:d.description||void 0,notes:d.notes||void 0};if(c&&e)await i(Number(e),$),t(`/projects/${e}`);else{const D=await o($);t(`/projects/${D.id}`)}}catch{}},w=F=>{const{name:$,value:D}=F.target;u(H=>({...H,[$]:D}))},L=async()=>{if(!(!c||!e)&&window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{const F=JSON.parse(localStorage.getItem("deletedProjects")||"[]");F.push(Number(e)),localStorage.setItem("deletedProjects",JSON.stringify(F));const D=JSON.parse(localStorage.getItem("projects")||"[]").filter(H=>H.id!==Number(e));localStorage.setItem("projects",JSON.stringify(D)),t("/projects")}catch(F){console.error("Error deleting project:",F)}};return s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx(ze,{}),s.jsx("div",{className:"mb-6",children:s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:c?"Edit Project":"Create New Project"})}),a&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:a}),s.jsxs("form",{onSubmit:C,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[c&&r&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Project ID:"}),s.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",r.id]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),s.jsx("input",{type:"text",name:"name",value:d.name,onChange:w,placeholder:"E.g., Kitchen Renovation, Office Expansion",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${x.name?"border-red-500":"border-gray-300"}`,disabled:n}),x.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.name})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name *"}),s.jsxs("select",{name:"client_id",value:d.client_id,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${x.client_id?"border-red-500":"border-gray-300"}`,disabled:n||y,children:[s.jsx("option",{value:"",children:"Select a client..."}),f.map(F=>s.jsx("option",{value:F.id,children:F.name},F.id))]}),x.client_id&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.client_id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contractor Name"}),s.jsxs("select",{name:"contractor_id",value:d.contractor_id,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n||g,children:[s.jsx("option",{value:"",children:"Select a contractor (optional)..."}),N.map(F=>s.jsx("option",{value:F.id,children:F.name},F.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),s.jsx("input",{type:"date",name:"start_date",value:d.start_date,onChange:w,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${x.start_date?"border-red-500":"border-gray-300"}`,disabled:n}),x.start_date&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.start_date})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget Cost ()"}),s.jsx("input",{type:"number",name:"budget_cost",value:d.budget_cost,onChange:w,placeholder:"0.00",step:"0.01",min:"0",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary ${x.budget_cost?"border-red-500":"border-gray-300"}`,disabled:n}),x.budget_cost&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.budget_cost})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Progress"}),s.jsxs("select",{name:"progress",value:d.progress,onChange:w,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n,children:[s.jsx("option",{value:"Not Started",children:"Not Started"}),s.jsx("option",{value:"Progressing",children:"Progressing"}),s.jsx("option",{value:"Completed",children:"Completed"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Address"}),s.jsx("input",{type:"text",name:"project_address",value:d.project_address,onChange:w,placeholder:"E.g., 123 Main Street, London, SW1A 1AA",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{name:"description",value:d.description,onChange:w,placeholder:"Project scope, objectives, and key details...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),s.jsx("textarea",{name:"notes",value:d.notes,onChange:w,placeholder:"Additional notes, constraints, special requirements...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",disabled:n})]}),s.jsxs("div",{className:"flex gap-4 justify-between pt-6 border-t",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>t(-1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",disabled:n,children:"Cancel"}),c&&s.jsx("button",{type:"button",onClick:L,className:"px-6 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition font-medium",disabled:n,children:"Delete Project"})]}),s.jsx("button",{type:"submit",disabled:n,className:`px-6 py-2 rounded-lg text-white font-medium transition ${n?"bg-gray-400 cursor-not-allowed":"bg-khc-primary hover:bg-khc-secondary active:scale-95"}`,children:n?"Saving...":c?"Update Project":"Create Project"})]})]})]})}const Ap=vs((e,t)=>({estimates:[],estimateTotals:null,isLoading:!1,error:null,currentProjectId:null,fetchEstimates:async r=>{var n,a;e({isLoading:!0,error:null,currentProjectId:r});try{const l=await Ls.getAll(r);e({estimates:l.data.data.estimates,estimateTotals:l.data.data.totals,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimates";throw e({error:o,isLoading:!1,estimates:[],estimateTotals:null}),l}},fetchEstimateSummary:async r=>{var n,a;e({isLoading:!0,error:null});try{const l=await Ls.getSummary(r);e({estimateTotals:l.data.data.estimate,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch estimate summary";throw e({error:o,isLoading:!1,estimateTotals:null}),l}},addEstimate:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Ls.create(r,n)).data.data;return await t().fetchEstimates(r),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to add estimate";throw e({error:i,isLoading:!1}),o}},updateEstimate:async(r,n,a)=>{var l,o;e({isLoading:!0,error:null});try{const c=(await Ls.update(r,n,a)).data.data;return await t().fetchEstimates(r),c}catch(i){const c=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.error)||"Failed to update estimate";throw e({error:c,isLoading:!1}),i}},deleteEstimate:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{await Ls.delete(r,n),await t().fetchEstimates(r)}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to delete estimate";throw e({error:i,isLoading:!1}),o}},clearError:()=>{e({error:null})},clearEstimates:()=>{e({estimates:[],estimateTotals:null,currentProjectId:null})}})),Ml="qscostingpro_recent_projects",q0=5,Q0=()=>{const e=()=>{try{const n=localStorage.getItem(Ml);return n?JSON.parse(n):[]}catch{return[]}};return{getRecent:e,addRecent:(n,a)=>{try{const o=e().filter(d=>d.id!==n),c=[{id:Number(n),name:String(a||"Unknown"),viewed_at:Date.now()},...o].slice(0,q0);localStorage.setItem(Ml,JSON.stringify(c))}catch(l){console.error("Failed to add recent project:",l)}},clearRecent:()=>{try{localStorage.removeItem(Ml)}catch{}}}};function Ip({projectId:e,projectName:t,isDisabled:r=!1}){const[n,a]=v.useState(!1),[l,o]=v.useState(null),i=async()=>{var c,d;a(!0),o(null);try{const u=localStorage.getItem("accessToken");if(!u)throw new Error("No authentication token found");const f=await pe.get(`http://localhost:3000/api/v1/projects/${e}/estimates/export-pdf`,{headers:{Authorization:`Bearer ${u}`},responseType:"blob"}),m=new Blob([f.data],{type:"application/pdf"}),N=window.URL.createObjectURL(m),h=document.createElement("a");h.href=N;const y=new Date().toISOString().split("T")[0],j=`BOQ_${t.replace(/[^a-z0-9]/gi,"_")}_${y}.pdf`;h.setAttribute("download",j),document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(N)}catch(u){console.error("PDF export failed:",u),o(((d=(c=u.response)==null?void 0:c.data)==null?void 0:d.error)||"Failed to export PDF. Please ensure there are line items to export.")}finally{a(!1)}};return s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:i,disabled:r||n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 flex items-center gap-2 justify-center",children:n?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Generating..."]}):s.jsx(s.Fragment,{children:" Export PDF"})}),l&&s.jsx("p",{className:"text-red-600 text-sm",children:l})]})}function K0(){var K;const{id:e}=ys();Xe();const{user:t,isAdmin:r}=Ht(),n=ll(),{addRecent:a}=Q0(),l=Number(e),{currentProject:o,isLoading:i,error:c,fetchProjectById:d}=Mt(),{estimateTotals:u,isLoading:f,error:m,fetchEstimateSummary:N,clearEstimates:h}=Ap(),[y,j]=v.useState(""),[g,p]=v.useState(""),[x,b]=v.useState(!1),[k,C]=v.useState(!1),[w,L]=v.useState(!1);v.useEffect(()=>(l&&(d(l),N(l)),()=>{h()}),[l,d,N,h]),v.useEffect(()=>{o!=null&&o.name&&a(l,o.name)},[l,o==null?void 0:o.name,a]);const{submitEstimate:F,approveEstimate:$,rejectEstimate:D}=Mt(),H=async()=>{if(l)try{L(!0),await F(l),await d(l),await N(l),n.success("Estimate submitted for approval"),L(!1)}catch(W){n.error(kr(W)),L(!1)}},U=async()=>{if(l)try{L(!0),await $(l,y),await d(l),await N(l),n.success("Estimate approved successfully"),b(!1),j(""),L(!1)}catch(W){n.error(kr(W)),L(!1)}},A=async()=>{if(l)try{L(!0),await D(l,g),await d(l),await N(l),n.success("Estimate rejected"),C(!1),p(""),L(!1)}catch(W){n.error(kr(W)),L(!1)}},q=i||f,O=c||m,P=!i&&o&&(r||(t==null?void 0:t.id)===o.created_by),E=r&&(o==null?void 0:o.estimate_status)==="submitted",T=r&&(o==null?void 0:o.estimate_status)==="submitted",M=!i&&o&&((t==null?void 0:t.id)===o.created_by||r)&&o.estimate_status==="draft";return q?s.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading project..."}):o?s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:o.name}),s.jsx("p",{className:"text-gray-600 mt-2",children:o.project_address||o.description||"No address provided"})]}),s.jsxs("div",{className:"flex gap-2",children:[u&&u.grand_total>0&&s.jsx(Ip,{projectId:l,projectName:o.name}),P&&s.jsx(X,{to:`/projects/${l}/edit`,className:"px-4 py-2 border border-khc-primary text-khc-primary hover:bg-khc-light rounded-lg transition",children:"Edit"})]})]}),O&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:O}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),s.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:o.status})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Estimate Status"}),s.jsx("p",{className:`text-lg font-semibold mt-1 ${o.estimate_status==="approved"?"text-green-600":o.estimate_status==="submitted"?"text-blue-600":o.estimate_status==="rejected"?"text-red-600":"text-gray-600"}`,children:o.estimate_status})]}),o.budget_cost&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Budget Cost"}),s.jsxs("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:["",o.budget_cost.toLocaleString()]})]}),o.start_date&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Start Date"}),s.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:new Date(o.start_date).toLocaleDateString()})]})]}),o.description&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700",children:o.description})]}),u&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:"Estimate Summary"}),s.jsx(X,{to:`/projects/${l}/estimates`,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:"Manage Estimates"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Cost Breakdown by Category"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Items"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Subtotal"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Contractor"})]})}),s.jsx("tbody",{className:"divide-y",children:u.categories.map(W=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:W.category_name}),s.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:W.line_count}),s.jsxs("td",{className:"px-4 py-3 text-right font-semibold text-khc-primary",children:["",W.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),s.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:["",W.contractor_items_subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]},W.category_id))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),s.jsxs("span",{className:"font-semibold",children:["",u.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-700",children:["Contingency (",u.contingency_percentage,"%):"]}),s.jsxs("span",{className:"font-semibold",children:["",u.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between text-lg border-t pt-3",children:[s.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),s.jsxs("span",{className:"font-bold text-khc-primary text-xl",children:["",u.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[u.floor_area_m2&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Cost per m:"}),s.jsxs("span",{className:"font-semibold",children:["",(K=u.cost_per_m2)==null?void 0:K.toLocaleString("en-GB",{maximumFractionDigits:2})," / m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Volunteer Cost:"}),s.jsxs("span",{className:"font-semibold",children:["",u.volunteer_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Contractor Cost:"}),s.jsxs("span",{className:"font-semibold",children:["",u.contractor_cost_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]})]})]})]}),(M||E||T)&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-khc-primary mb-4",children:"Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[M&&s.jsx("button",{onClick:H,disabled:w,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition disabled:bg-gray-400",children:w?"Submitting...":"Submit Estimate for Approval"}),E&&s.jsx("button",{onClick:()=>b(!0),className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition",children:"Approve Estimate"}),T&&s.jsx("button",{onClick:()=>C(!0),className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition",children:"Reject Estimate"})]})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Approve Estimate"}),s.jsx("textarea",{value:y,onChange:W=>j(W.target.value),placeholder:"Add approval notes (optional)",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{b(!1),j("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:U,disabled:w,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Approving...":"Approve"})]})]})}),k&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Reject Estimate"}),s.jsx("textarea",{value:g,onChange:W=>p(W.target.value),placeholder:"Reason for rejection",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-khc-primary"}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{C(!1),p("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:A,disabled:w,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:bg-gray-400",children:w?"Rejecting...":"Reject"})]})]})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Project not found"}),s.jsx(X,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to projects"})]})}const Dp=vs((e,t)=>({templates:[],currentTemplate:null,isLoading:!1,error:null,fetchTemplates:async(r=!0)=>{var n,a;e({isLoading:!0,error:null});try{const l=await Dr.getAll(r);e({templates:l.data.data||[],isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch templates";throw e({error:o,isLoading:!1}),l}},fetchTemplateById:async r=>{var n,a;e({isLoading:!0,error:null});try{const l=await Dr.getById(r);e({currentTemplate:l.data.data,isLoading:!1})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to fetch template";throw e({error:o,isLoading:!1,currentTemplate:null}),l}},saveTemplate:async r=>{var n,a;e({isLoading:!0,error:null});try{const o=(await Dr.create(r)).data.data;return e(i=>({templates:[o,...i.templates],isLoading:!1})),o}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to save template";throw e({error:o,isLoading:!1}),l}},updateTemplate:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Dr.update(r,n)).data.data;return e(c=>{var d;return{templates:c.templates.map(u=>u.id===r?i:u),currentTemplate:((d=c.currentTemplate)==null?void 0:d.id)===r?i:c.currentTemplate,isLoading:!1}}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to update template";throw e({error:i,isLoading:!1}),o}},deleteTemplate:async r=>{var n,a;e({isLoading:!0,error:null});try{await Dr.delete(r),e(l=>{var o;return{templates:l.templates.filter(i=>i.id!==r),currentTemplate:((o=l.currentTemplate)==null?void 0:o.id)===r?null:l.currentTemplate,isLoading:!1}})}catch(l){const o=((a=(n=l.response)==null?void 0:n.data)==null?void 0:a.error)||"Failed to delete template";throw e({error:o,isLoading:!1}),l}},applyTemplate:async(r,n)=>{var a,l;e({isLoading:!0,error:null});try{const i=(await Dr.applyToProject(r,n)).data.data;return e({currentTemplate:i,isLoading:!1}),i}catch(o){const i=((l=(a=o.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to apply template";throw e({error:i,isLoading:!1}),o}},setCurrentTemplate:r=>{e({currentTemplate:r})},clearError:()=>{e({error:null})}}));function G0({tabs:e,activeTab:t,onChange:r}){return s.jsx("div",{className:"border-b border-gray-200 mb-6",children:s.jsx("div",{className:"flex space-x-8",children:e.map(n=>s.jsxs("button",{onClick:()=>r(n.id),className:`px-1 py-4 border-b-2 font-medium text-sm transition-colors ${t===n.id?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[n.icon&&s.jsx("span",{className:"mr-2",children:n.icon}),n.label]},n.id))})})}function J0({items:e,isLoading:t,onSelectItem:r,selectedItemId:n}){const[a,l]=v.useState(""),o=e.filter(i=>i.description.toLowerCase().includes(a.toLowerCase())||i.code.toLowerCase().includes(a.toLowerCase()));return s.jsxs("div",{className:"bg-gray-50 rounded p-4",children:[s.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:a,onChange:i=>l(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm mb-4"}),s.jsx("div",{className:"max-h-64 overflow-y-auto divide-y border rounded",children:t?s.jsx("div",{className:"p-4 text-center text-gray-600",children:"Loading items..."}):o.length===0?s.jsx("div",{className:"p-4 text-center text-gray-600",children:"No items found"}):o.slice(0,20).map(i=>{var c;return s.jsxs("div",{onClick:()=>r(i.id),className:`p-4 cursor-pointer transition ${n===i.id?"bg-khc-light border-l-4 border-khc-primary":"hover:bg-gray-100"}`,children:[s.jsx("p",{className:"font-semibold text-sm text-gray-900",children:i.description}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["",i.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})," ","/ ",((c=i.unit)==null?void 0:c.code)||"unit"]})]},i.id)})})]})}const Hn="qscostingpro_estimate_presets",Y0=10,Op=()=>{const e=v.useCallback(()=>{try{const l=localStorage.getItem(Hn);return l?JSON.parse(l):[]}catch{return[]}},[]),t=v.useCallback((l,o)=>{try{const i=e(),c={id:`preset-${Date.now()}`,name:String(l||""),description:String(o.description||""),custom_description:String(o.custom_description||""),quantity:Number(o.quantity||1),custom_unit:String(o.custom_unit||""),custom_unit_rate:Number(o.custom_unit_rate||0),category_id:Number(o.category_id||0),created_at:Date.now(),usage_count:0},d=[c,...i].slice(0,Y0);return localStorage.setItem(Hn,JSON.stringify(d)),c}catch(i){return console.error("Failed to save preset:",i),null}},[e]),r=v.useCallback(l=>{try{const i=e().filter(c=>c.id!==l);localStorage.setItem(Hn,JSON.stringify(i))}catch{}},[e]),n=v.useCallback(l=>{try{const i=e().map(c=>({...c,usage_count:c.id===l?c.usage_count+1:c.usage_count}));localStorage.setItem(Hn,JSON.stringify(i))}catch(o){console.error("Failed to increment usage count:",o)}},[e]),a=v.useCallback((l=5)=>e().sort((o,i)=>i.usage_count-o.usage_count).slice(0,l),[e]);return{getPresets:e,savePreset:t,deletePreset:r,incrementUsageCount:n,getTopPresets:a}};function X0({onSelectPreset:e,onSaveAsPreset:t,showSaveOption:r=!1}){const{getTopPresets:n,deletePreset:a}=Op(),l=n(5);return l.length===0?s.jsxs("div",{className:"p-4 text-center text-gray-500",children:[s.jsx("p",{className:"text-sm",children:"No presets saved yet"}),r&&s.jsx("p",{className:"text-xs mt-2",children:"Save frequently used items as presets to reuse them"})]}):s.jsx("div",{className:"space-y-2",children:l.map(o=>s.jsx("div",{className:"p-3 bg-gray-50 rounded border border-gray-200 hover:border-khc-primary hover:bg-khc-light transition-all",children:s.jsxs("div",{className:"flex justify-between items-start gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-sm text-gray-900 truncate",children:o.custom_description}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[o.quantity,"  ",o.custom_unit_rate," ",o.custom_unit]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Used ",o.usage_count," times"]})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[s.jsx("button",{onClick:()=>e(o),className:"px-2 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-xs rounded transition-colors",children:"Use"}),s.jsx("button",{onClick:()=>a(o.id),className:"px-2 py-1 bg-red-100 hover:bg-red-200 text-red-600 text-xs rounded transition-colors",title:"Delete preset",children:""})]})]})},o.id))})}function Z0({isOpen:e,onClose:t,onAddFromLibrary:r,onAddCustom:n,costItems:a,categories:l,units:o,isSubmitting:i,costItemsLoading:c=!1}){const d=ll(),{incrementUsageCount:u,savePreset:f}=Op(),[m,N]=v.useState("library"),[h,y]=v.useState(null),[j,g]=v.useState("1"),[p,x]=v.useState(""),[b,k]=v.useState(""),[C,w]=v.useState(""),[L,F]=v.useState("1"),[$,D]=v.useState(""),[H,U]=v.useState(""),[A,q]=v.useState(""),[O,P]=v.useState(""),[E,T]=v.useState({}),[M,K]=v.useState(!1),[W,ge]=v.useState(""),ie=a.find(V=>V.id===h),Le=()=>{y(null),g("1"),x(""),k(""),w(""),F("1"),D(""),U(""),q(""),P(""),T({})},Fe=V=>{w(V.custom_description),F(String(V.quantity)),D(V.custom_unit),U(String(V.custom_unit_rate)),q(V.category_id),N("custom"),u(V.id)},Ze=()=>{Le(),t()},Nt=()=>{const V={};return h||(V.item="Please select an item"),(!j||parseFloat(j)<=0)&&(V.quantity="Quantity must be greater than 0"),p&&isNaN(parseFloat(p))&&(V.costOverride="Cost override must be a valid number"),T(V),Object.keys(V).length===0},R=()=>{const V={};return C.trim()||(V.description="Description is required"),(!L||parseFloat(L)<=0)&&(V.quantity="Quantity must be greater than 0"),$.trim()||(V.unit="Unit is required"),(!H||parseFloat(H)<0)&&(V.unitRate="Unit rate must be 0 or greater"),A||(V.category="Category is required"),T(V),Object.keys(V).length===0},he=async()=>{if(Nt())try{await r({cost_item_id:h,quantity:parseFloat(j),unit_cost_override:p?parseFloat(p):void 0,notes:b||void 0}),d.success("Line item added successfully"),Le()}catch(V){const pr=kr(V);d.error(pr)}},pt=async()=>{if(R())try{await n({custom_description:C,quantity:parseFloat(L),custom_unit:$,custom_unit_rate:parseFloat(H),category_id:Number(A),notes:O||void 0}),d.success("Custom item added successfully"),Le()}catch(V){const pr=kr(V);d.error(pr)}},je=()=>{if(!R())return;if(!W.trim()){d.error("Please enter a preset name");return}f(W,{name:W,description:`${C} - ${L}  ${H}`,custom_description:C,quantity:parseFloat(L),custom_unit:$,custom_unit_rate:parseFloat(H),category_id:Number(A)})?(d.success(`Preset "${W}" saved successfully`),K(!1),ge("")):d.error("Failed to save preset")};return s.jsx(wn,{isOpen:e,onClose:Ze,title:"Add Line Item",size:"lg",children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(G0,{tabs:[{id:"library",label:"From Library",icon:""},{id:"presets",label:"Quick Add",icon:""},{id:"custom",label:"Custom Item",icon:""}],activeTab:m,onChange:N}),m==="presets"&&s.jsx("div",{className:"space-y-4",children:s.jsx(X0,{onSelectPreset:Fe})}),m==="library"&&s.jsxs("div",{className:"space-y-4",children:[E.item&&s.jsx("div",{className:"text-sm text-red-600",children:E.item}),s.jsx(J0,{items:a,isLoading:c,onSelectItem:y,selectedItemId:h}),ie&&s.jsxs("div",{className:"bg-khc-light rounded-lg p-4 border border-khc-primary space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-gray-700",children:ie.description}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Material: ",ie.material_cost.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),s.jsx("input",{type:"number",value:j,onChange:V=>g(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),E.quantity&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.quantity})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cost Override ()"}),s.jsx("input",{type:"number",value:p,onChange:V=>x(V.target.value),placeholder:"Optional",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),E.costOverride&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.costOverride})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:b,onChange:V=>k(V.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]})]}),m==="custom"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),s.jsx("input",{type:"text",value:C,onChange:V=>w(V.target.value),placeholder:"Enter item description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),E.description&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),s.jsx("input",{type:"number",value:L,onChange:V=>F(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),E.quantity&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.quantity})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),s.jsx("input",{type:"text",value:$,onChange:V=>D(V.target.value),placeholder:"e.g., m2, sqm, item",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),E.unit&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.unit})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Rate () *"}),s.jsx("input",{type:"number",value:H,onChange:V=>U(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"}),E.unitRate&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.unitRate})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),s.jsxs("select",{value:A,onChange:V=>q(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",children:[s.jsx("option",{value:"",children:"Select category..."}),l.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]}),E.category&&s.jsx("p",{className:"text-xs text-red-600 mt-1",children:E.category})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:O,onChange:V=>P(V.target.value),placeholder:"Optional notes",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm"})]})]}),M&&m==="custom"&&s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200 space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Save as Preset"}),s.jsx("input",{type:"text",value:W,onChange:V=>ge(V.target.value),placeholder:"Preset name (e.g., 'Standard Labor Cost')",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary text-sm",autoFocus:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{K(!1),ge("")},className:"flex-1 px-3 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Cancel"}),s.jsx("button",{onClick:je,className:"flex-1 px-3 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Save Preset"})]})]}),s.jsxs("div",{className:"flex gap-2 justify-between",children:[m==="custom"&&!M&&s.jsx("button",{onClick:()=>K(!0),className:"px-4 py-2 border border-blue-300 text-blue-600 hover:bg-blue-50 rounded-lg text-sm transition-colors",children:" Save as Preset"}),s.jsxs("div",{className:"flex gap-2 ml-auto",children:[s.jsx("button",{onClick:Ze,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 text-sm",children:"Cancel"}),m!=="presets"&&s.jsx("button",{onClick:m==="library"?he:pt,disabled:i||m==="library"&&!ie,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400 text-sm",children:i?"Adding...":"Add Item"})]})]})]})})}function ev({categories:e,onUpdateQuantity:t,onDeleteItem:r,isLoading:n,isEmpty:a}){const[l,o]=v.useState(null),[i,c]=v.useState(""),[d,u]=v.useState(!1),f=async N=>{const h=parseFloat(i);if(isNaN(h)||h<=0){alert("Please enter a valid quantity");return}try{u(!0),await t(N,h),o(null),c("")}finally{u(!1)}},m=async N=>{if(window.confirm("Remove this item from the estimate?"))try{u(!0),await r(N)}finally{u(!1)}};return n?s.jsx("div",{className:"bg-white rounded-lg shadow",children:s.jsx("div",{className:"p-8 text-center text-gray-600",children:"Loading estimates..."})}):a?s.jsx("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx("p",{className:"text-lg font-semibold mb-2",children:" Build Your Estimate"}),s.jsx("p",{className:"text-sm",children:'No line items yet. Click "Quick Add Item" to start building your estimate.'})]})}):s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b bg-gray-50",children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"#"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700",children:"Qty"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700",children:"Unit"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(N=>s.jsxs(Ia.Fragment,{children:[s.jsx("tr",{className:"bg-khc-light border-b hover:bg-opacity-75",children:s.jsx("td",{colSpan:6,className:"px-6 py-3",children:s.jsx("p",{className:"font-semibold text-khc-primary text-sm",children:N.category_name})})}),N.line_items.map((h,y)=>s.jsxs("tr",{className:"border-b hover:bg-gray-50 transition",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 w-8",children:y+1}),s.jsx("td",{className:"px-6 py-4 text-sm",children:s.jsx("p",{className:"font-medium text-gray-900",children:h.description})}),s.jsx("td",{className:"px-6 py-4 text-sm text-right",children:l===h.estimate_id?s.jsx("input",{type:"number",step:"0.01",min:"0",value:i,onChange:j=>c(j.target.value),autoFocus:!0,className:"w-20 px-2 py-1 border border-gray-300 rounded text-right"}):s.jsx("span",{className:"font-medium",children:h.quantity})}),s.jsx("td",{className:"px-6 py-4 text-sm text-center text-gray-600",children:h.unit_code}),s.jsx("td",{className:"px-6 py-4 text-sm text-right",children:s.jsxs("span",{className:"font-bold text-khc-primary",children:["",h.line_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})}),s.jsx("td",{className:"px-6 py-4 text-sm",children:s.jsx("div",{className:"flex gap-2 justify-center",children:l===h.estimate_id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>f(h.estimate_id),disabled:d,className:"px-3 py-1 bg-khc-primary text-white text-xs rounded hover:bg-khc-secondary disabled:bg-gray-400",children:"Save"}),s.jsx("button",{onClick:()=>o(null),className:"px-3 py-1 border border-gray-300 text-xs rounded hover:bg-gray-100",children:"Cancel"})]}):s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{o(h.estimate_id),c(h.quantity.toString())},className:"text-khc-primary hover:text-khc-secondary text-xs hover:underline",children:"Edit"}),s.jsx("button",{onClick:()=>m(h.estimate_id),disabled:d,className:"text-red-600 hover:text-red-700 text-xs hover:underline disabled:text-gray-400",children:"Delete"})]})})})]},h.estimate_id)),s.jsxs("tr",{className:"bg-gray-50 border-b",children:[s.jsxs("td",{colSpan:4,className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:[N.category_name," Subtotal:"]}),s.jsxs("td",{className:"px-6 py-3 text-right text-sm font-bold text-khc-primary",children:["",N.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]}),s.jsx("td",{})]})]},N.category_id))})]})})})}function tv({isOpen:e,onClose:t,onSave:r,isLoading:n=!1}){const[a,l]=v.useState(""),[o,i]=v.useState(""),[c,d]=v.useState("standard"),[u,f]=v.useState(!1),[m,N]=v.useState({}),h=async()=>{const y={};if(a.trim()||(y.name="Template name is required"),a.length>255&&(y.name="Template name must be less than 255 characters"),Object.keys(y).length>0){N(y);return}try{await r(a,o,c,u),l(""),i(""),d("standard"),f(!1),N({}),t()}catch{}};return s.jsx(wn,{isOpen:e,onClose:t,title:"Save as Template",size:"md",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),s.jsx("input",{type:"text",value:a,onChange:y=>{l(y.target.value),m.name&&N({...m,name:""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., Residential Interior",maxLength:255}),m.name&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:o,onChange:y=>i(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary resize-none",placeholder:"Describe what this template is for...",rows:3,maxLength:500}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.length,"/500"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Type"}),s.jsxs("select",{value:c,onChange:y=>d(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"quick",children:"Quick (5-10 items)"}),s.jsx("option",{value:"standard",children:"Standard (10-50 items)"}),s.jsx("option",{value:"complex",children:"Complex (50+ items)"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",id:"isPublic",checked:u,onChange:y=>f(y.target.checked),className:"w-4 h-4 rounded border-2 border-gray-300 cursor-pointer"}),s.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Share template with team"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsx("p",{className:"text-sm text-blue-900",children:" Save this estimate as a template to quickly create similar estimates in the future."})}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:t,disabled:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:h,disabled:n,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg disabled:bg-gray-400",children:n?"Saving...":"Save Template"})]})]})})}function rv({isOpen:e,onClose:t,onSelectTemplate:r,showShared:n=!0}){const{templates:a,isLoading:l,fetchTemplates:o}=Dp(),[i,c]=v.useState(""),[d,u]=v.useState("all");v.useEffect(()=>{e&&o(n)},[e,o,n]);const f=a.filter(m=>!(d!=="all"&&m.template_type!==d||i&&!m.name.toLowerCase().includes(i.toLowerCase())));return s.jsx(wn,{isOpen:e,onClose:t,title:"Template Library",size:"lg",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:m=>c(m.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),s.jsxs("select",{value:d,onChange:m=>u(m.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"quick",children:"Quick"}),s.jsx("option",{value:"standard",children:"Standard"}),s.jsx("option",{value:"complex",children:"Complex"})]})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:l?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading templates..."}):f.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:a.length===0?"No templates available":"No templates match your search"}):s.jsx("div",{className:"divide-y",children:f.map(m=>s.jsx("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:m.name}),m.description&&s.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.description}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${m.template_type==="quick"?"bg-blue-100 text-blue-700":m.template_type==="standard"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:m.template_type}),m.is_public&&s.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",children:"Shared"})]})]}),s.jsx("button",{onClick:()=>{r(m),t()},className:"ml-4 px-3 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded text-sm font-medium transition-colors",children:"Use"})]})},m.id))})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100",children:"Close"})})]})})}function sv(){const{id:e}=ys();Xe();const t=ll(),r=Number(e),{currentProject:n,fetchProjectById:a,isLoading:l}=Mt(),{estimates:o,estimateTotals:i,isLoading:c,error:d,fetchEstimates:u,addEstimate:f,updateEstimate:m,deleteEstimate:N}=Ap(),{saveTemplate:h,applyTemplate:y}=Dp(),[j,g]=v.useState(!1),[p,x]=v.useState(!1),[b,k]=v.useState(!1),[C,w]=v.useState([]),[L,F]=v.useState([]),[$,D]=v.useState([]),[H,U]=v.useState(!1),[A,q]=v.useState(null),[O,P]=v.useState(""),[E,T]=v.useState(!1),[M,K]=v.useState(!1),[W,ge]=v.useState(!1);v.useEffect(()=>{r&&(a(r),u(r),ie(),Le(),Fe())},[r,a,u]);const ie=async()=>{U(!0);try{const _=await Ae.getAll();w(_.data.data||[])}catch(_){console.error("Failed to fetch cost items:",_)}finally{U(!1)}},Le=async()=>{try{const _=await S0.getAll();F(_.data.data||[])}catch(_){console.error("Failed to fetch units:",_)}},Fe=async()=>{try{const _=await Ae.getCategories();D(_.data.data||[])}catch(_){console.error("Failed to fetch categories:",_)}},Ze=async _=>{try{T(!0),await f(r,{cost_item_id:_.cost_item_id,quantity:_.quantity,unit_cost_override:_.unit_cost_override,notes:_.notes}),g(!1)}finally{T(!1)}},Nt=async _=>{try{T(!0),await f(r,{custom_description:_.custom_description,quantity:_.quantity,custom_unit:_.custom_unit,custom_unit_rate:_.custom_unit_rate,category_id:_.category_id,notes:_.notes}),g(!1)}finally{T(!1)}},R=async _=>{try{T(!0),await m(r,_,{quantity:parseFloat(O)}),t.success("Quantity updated successfully"),q(null),P(""),T(!1)}catch(G){t.error(kr(G)),T(!1)}},he=async _=>{if(window.confirm("Remove this item from the estimate?"))try{T(!0),await N(r,_),t.success("Item removed successfully"),T(!1)}catch(G){t.error(kr(G)),T(!1)}},pt=async(_,G,J,be)=>{try{ge(!0);const Ce=o.map(He=>({cost_item_id:He.cost_item_id||void 0,custom_description:He.custom_description||void 0,custom_unit_rate:He.custom_unit_rate||void 0,custom_unit:He.custom_unit||void 0,category_id:He.category_id||void 0,quantity:He.quantity,unit_cost_override:He.unit_cost_override||void 0,notes:He.notes||void 0}));await h({name:_,description:G,template_type:J,is_public:be,line_items:Ce}),t.success("Template saved successfully"),x(!1)}catch{t.error("Failed to save template")}finally{ge(!1)}},je=async _=>{try{ge(!0),await y(_.id,r),t.success(`Template "${_.name}" loaded. Add quantities to create estimates.`)}catch{t.error("Failed to load template")}finally{ge(!1)}};if((l||c||H)&&!n)return s.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading..."});if(!n)return s.jsx("div",{className:"text-center py-12",children:"Project not found"});const pr=(i==null?void 0:i.categories)||[];return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Build Estimate"}),s.jsx("p",{className:"text-gray-600 mt-2",children:n.name})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap justify-end",children:[s.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Load a saved estimate template",children:" Load Template"}),s.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg flex items-center gap-2",children:" Add Line Item"}),o.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg flex items-center gap-2 text-sm",title:"Save current estimate as template",children:" Save Template"}),s.jsx(Ip,{projectId:r,projectName:n.name,isDisabled:o.length===0})]})]})]}),d&&!M&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[s.jsx("span",{children:d}),s.jsx("button",{onClick:()=>K(!0),className:"text-red-600 hover:text-red-800 font-bold",children:""})]}),s.jsx(Z0,{isOpen:j,onClose:()=>g(!1),onAddFromLibrary:Ze,onAddCustom:Nt,costItems:C,categories:$,units:L,isSubmitting:E,costItemsLoading:H}),s.jsx(tv,{isOpen:p,onClose:()=>x(!1),onSave:pt,isLoading:W}),s.jsx(rv,{isOpen:b,onClose:()=>k(!1),onSelectTemplate:je,showShared:!0}),s.jsx(ev,{categories:pr,onUpdateQuantity:R,onDeleteItem:he,isLoading:c,isEmpty:o.length===0}),i&&s.jsxs("div",{className:"bg-khc-light rounded-lg p-6 border border-khc-primary",children:[s.jsx("h3",{className:"font-bold text-lg text-khc-primary mb-4",children:"Estimate Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{className:"font-semibold",children:["",i.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between text-gray-700",children:[s.jsxs("span",{children:["Contingency (",i.contingency_percentage,"%):"]}),s.jsxs("span",{className:"font-semibold",children:["",i.contingency_amount.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between border-t border-khc-primary pt-3",children:[s.jsx("span",{className:"font-bold text-khc-primary",children:"Grand Total:"}),s.jsxs("span",{className:"font-bold text-khc-primary text-lg",children:["",i.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})]})]}),i.cost_per_m2&&s.jsxs("div",{className:"text-sm text-gray-600 text-right pt-2",children:["",i.cost_per_m2.toLocaleString("en-GB",{maximumFractionDigits:2})," per m"]})]})]})]})}const Fp=vs((e,t)=>({categories:[],subElements:[],costItems:[],units:[],isLoading:!1,error:null,selectedCategoryId:null,searchTerm:"",fetchCategories:async()=>{e({isLoading:!0,error:null});try{const r=await Ae.getCategories();e({categories:r.data.data||r.data,isLoading:!1})}catch(r){const n=r instanceof Error?r.message:"Failed to fetch categories";e({error:n,isLoading:!1})}},fetchSubElements:async r=>{e({isLoading:!0,error:null});try{const n=r?await Ae.getSubElementsByCategory(r):await Ae.getSubElements();e({subElements:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch sub-elements";e({error:a,isLoading:!1})}},fetchCostItems:async r=>{e({isLoading:!0,error:null});try{const n=await Ae.getCostItems(r);e({costItems:n.data.data||n.data,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch cost items";e({error:a,isLoading:!1})}},fetchUnits:async()=>{e({isLoading:!0,error:null});try{const r=await Ae.getUnits();e({units:r.data.data||r.data,isLoading:!1})}catch(r){const n=r instanceof Error?r.message:"Failed to fetch units";e({error:n,isLoading:!1})}},createCategory:async r=>{try{const n=await Ae.createCategory(r);return e(a=>({categories:[...a.categories,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create category";throw e({error:a}),n}},updateCategory:async(r,n)=>{try{const a=await Ae.updateCategory(r,n);return e(l=>({categories:l.categories.map(o=>o.id===r?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update category";throw e({error:l}),a}},deleteCategory:async r=>{try{await Ae.deleteCategory(r),e(n=>({categories:n.categories.filter(a=>a.id!==r)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete category";throw e({error:a}),n}},createSubElement:async r=>{try{const n=await Ae.createSubElement(r);return e(a=>({subElements:[...a.subElements,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create sub-element";throw e({error:a}),n}},updateSubElement:async(r,n)=>{try{const a=await Ae.updateSubElement(r,n);return e(l=>({subElements:l.subElements.map(o=>o.id===r?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update sub-element";throw e({error:l}),a}},deleteSubElement:async r=>{try{await Ae.deleteSubElement(r),e(n=>({subElements:n.subElements.filter(a=>a.id!==r)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete sub-element";throw e({error:a}),n}},createCostItem:async r=>{try{const n=await Ae.createCostItem(r);return e(a=>({costItems:[...a.costItems,n.data.data||n.data]})),n.data.data||n.data}catch(n){const a=n instanceof Error?n.message:"Failed to create cost item";throw e({error:a}),n}},updateCostItem:async(r,n)=>{try{const a=await Ae.updateCostItem(r,n);return e(l=>({costItems:l.costItems.map(o=>o.id===r?a.data.data||a.data:o)})),a.data.data||a.data}catch(a){const l=a instanceof Error?a.message:"Failed to update cost item";throw e({error:l}),a}},deleteCostItem:async r=>{try{await Ae.deleteCostItem(r),e(n=>({costItems:n.costItems.filter(a=>a.id!==r)}))}catch(n){const a=n instanceof Error?n.message:"Failed to delete cost item";throw e({error:a}),n}},setSelectedCategory:r=>{e({selectedCategoryId:r})},setSearchTerm:r=>{e({searchTerm:r})},clearError:()=>{e({error:null})},getSubElementsByCategory:r=>t().subElements.filter(n=>n.category_id===r),getCostItemsBySubElement:r=>t().costItems.filter(n=>n.sub_element_id===r),searchCostItems:r=>{const n=r.toLowerCase();return t().costItems.filter(a=>a.description.toLowerCase().includes(n)||a.code.toLowerCase().includes(n))}}));function nv(){const{isAdmin:e}=Ht(),{categories:t,subElements:r,costItems:n,units:a,isLoading:l,error:o,selectedCategoryId:i,searchTerm:c,fetchCategories:d,fetchSubElements:u,fetchCostItems:f,fetchUnits:m,setSelectedCategory:N,setSearchTerm:h,clearError:y,createCategory:j,updateCategory:g,deleteCategory:p,createSubElement:x,updateSubElement:b,deleteSubElement:k,createCostItem:C,updateCostItem:w,deleteCostItem:L}=Fp(),[F,$]=v.useState("costItems"),[D,H]=v.useState(!1),[U,A]=v.useState(null),[q,O]=v.useState({code:"",name:"",description:"",sort_order:0}),[P,E]=v.useState({category_id:0,code:"",name:"",description:"",sort_order:0}),[T,M]=v.useState({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05});v.useEffect(()=>{d(),u(),f(),m()},[d,u,f,m]);const K=async()=>{try{U?(await g(U,q),A(null)):await j(q),O({code:"",name:"",description:"",sort_order:0}),H(!1)}catch(R){console.error("Failed to save category:",R)}},W=async R=>{if(window.confirm("Delete this category? This will affect all sub-elements."))try{await p(R)}catch(he){console.error("Failed to delete category:",he)}},ge=async()=>{try{U?(await b(U,P),A(null)):await x(P),E({category_id:0,code:"",name:"",description:"",sort_order:0}),H(!1)}catch(R){console.error("Failed to save sub-element:",R)}},ie=async R=>{if(window.confirm("Delete this sub-element? This will affect all cost items."))try{await k(R)}catch(he){console.error("Failed to delete sub-element:",he)}},Le=async()=>{try{U?(await w(U,T),A(null)):await C(T),M({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05}),H(!1)}catch(R){console.error("Failed to save cost item:",R)}},Fe=async R=>{if(window.confirm("Delete this cost item?"))try{await L(R)}catch(he){console.error("Failed to delete cost item:",he)}},Ze=i?r.filter(R=>R.category_id===i):r,Nt=n.filter(R=>R.description.toLowerCase().includes(c.toLowerCase())||R.code.toLowerCase().includes(c.toLowerCase()));return e?s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Cost Database Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage categories, sub-elements, and cost items"})]}),o&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-red-700 flex justify-between items-center",children:[s.jsx("span",{children:o}),s.jsx("button",{onClick:y,className:"text-red-600 hover:text-red-800",children:""})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("div",{className:"flex gap-8",children:[s.jsx("button",{onClick:()=>$("categories"),className:`py-4 px-2 border-b-2 font-medium transition ${F==="categories"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Categories"}),s.jsx("button",{onClick:()=>$("subElements"),className:`py-4 px-2 border-b-2 font-medium transition ${F==="subElements"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Sub-Elements"}),s.jsx("button",{onClick:()=>$("costItems"),className:`py-4 px-2 border-b-2 font-medium transition ${F==="costItems"?"border-khc-primary text-khc-primary":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Cost Items"})]})}),s.jsxs("div",{className:"space-y-4",children:[F==="categories"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Categories"}),s.jsx("button",{onClick:()=>{H(!D),A(null),O({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:D?"Cancel":"+ Add Category"})]}),D&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),s.jsx("input",{type:"text",value:q.code,onChange:R=>O({...q,code:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., CAT-001"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),s.jsx("input",{type:"text",value:q.name,onChange:R=>O({...q,name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Category name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:q.description||"",onChange:R=>O({...q,description:R.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{H(!1),A(null),O({code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:K,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:U?"Update":"Create"})]})]}),l&&!t.length?s.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading categories..."}):s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y",children:t.map(R=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:R.code}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:R.name}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:R.description||"-"}),s.jsx("td",{className:"px-6 py-4 text-center text-sm",children:s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx("button",{onClick:()=>{O(R),A(R.id),H(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),s.jsx("button",{onClick:()=>W(R.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},R.id))})]})})]}),F==="subElements"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Sub-Elements"}),s.jsx("button",{onClick:()=>{H(!D),A(null),E({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:D?"Cancel":"+ Add Sub-Element"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N(null),className:`px-3 py-2 rounded-lg text-sm transition ${i===null?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All Categories"}),t.map(R=>s.jsx("button",{onClick:()=>N(R.id),className:`px-3 py-2 rounded-lg text-sm transition ${i===R.id?"bg-khc-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:R.name},R.id))]}),D&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),s.jsxs("select",{value:P.category_id,onChange:R=>E({...P,category_id:Number(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:0,children:"Select a category"}),t.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),s.jsx("input",{type:"text",value:P.code,onChange:R=>E({...P,code:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., SUB-001"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),s.jsx("input",{type:"text",value:P.name,onChange:R=>E({...P,name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Sub-element name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:P.description||"",onChange:R=>E({...P,description:R.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Optional description"})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{H(!1),A(null),E({category_id:0,code:"",name:"",description:"",sort_order:0})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:ge,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:U?"Update":"Create"})]})]}),l&&!r.length?s.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading sub-elements..."}):s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y",children:Ze.map(R=>{const he=t.find(pt=>pt.id===R.category_id);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(he==null?void 0:he.name)||"-"}),s.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:R.code}),s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:R.name}),s.jsx("td",{className:"px-6 py-4 text-center text-sm",children:s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx("button",{onClick:()=>{E(R),A(R.id),H(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),s.jsx("button",{onClick:()=>ie(R.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},R.id)})})]})})]}),F==="costItems"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Cost Items"}),s.jsx("button",{onClick:()=>{H(!D),A(null),M({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:D?"Cancel":"+ Add Cost Item"})]}),s.jsx("div",{children:s.jsx("input",{type:"text",placeholder:"Search cost items by description or code...",value:c,onChange:R=>h(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})}),D&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sub-Element *"}),s.jsxs("select",{value:T.sub_element_id,onChange:R=>M({...T,sub_element_id:Number(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:0,children:"Select a sub-element"}),r.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),s.jsx("input",{type:"text",value:T.code,onChange:R=>M({...T,code:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"e.g., ITM-001"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),s.jsx("input",{type:"text",value:T.description,onChange:R=>M({...T,description:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"Item description"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit *"}),s.jsxs("select",{value:T.unit_id,onChange:R=>M({...T,unit_id:Number(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:0,children:"Select unit"}),a.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Waste Factor"}),s.jsx("input",{type:"number",step:"0.01",value:T.waste_factor,onChange:R=>M({...T,waste_factor:parseFloat(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"1.05"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Required"}),s.jsx("input",{type:"checkbox",checked:T.is_contractor_required,onChange:R=>M({...T,is_contractor_required:R.target.checked}),className:"w-4 h-4 mt-2"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Cost *"}),s.jsx("input",{type:"number",step:"0.01",value:T.material_cost,onChange:R=>M({...T,material_cost:parseFloat(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Management Cost"}),s.jsx("input",{type:"number",step:"0.01",value:T.management_cost,onChange:R=>M({...T,management_cost:parseFloat(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Cost"}),s.jsx("input",{type:"number",step:"0.01",value:T.contractor_cost,onChange:R=>M({...T,contractor_cost:parseFloat(R.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",placeholder:"0.00"})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:()=>{H(!1),A(null),M({sub_element_id:0,code:"",description:"",unit_id:0,material_cost:0,management_cost:0,contractor_cost:0,is_contractor_required:!1,waste_factor:1.05})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),s.jsx("button",{onClick:Le,className:"px-4 py-2 bg-khc-primary hover:bg-khc-secondary text-white rounded-lg transition",children:U?"Update":"Create"})]})]}),l&&!n.length?s.jsx("div",{className:"text-center py-8 text-gray-600",children:"Loading cost items..."}):s.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Code"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Sub-Element"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Material Cost"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Mgmt Cost"}),s.jsx("th",{className:"px-6 py-3 text-right text-sm font-semibold text-gray-700",children:"Contractor Cost"}),s.jsx("th",{className:"px-6 py-3 text-center text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y",children:Nt.map(R=>{const he=r.find(pt=>pt.id===R.sub_element_id);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:R.code}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:R.description}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:(he==null?void 0:he.name)||"-"}),s.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",R.material_cost.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",R.management_cost.toFixed(2)]}),s.jsxs("td",{className:"px-6 py-4 text-sm text-right font-mono text-gray-900",children:["",R.contractor_cost.toFixed(2)]}),s.jsx("td",{className:"px-6 py-4 text-center text-sm",children:s.jsxs("div",{className:"flex gap-2 justify-center",children:[s.jsx("button",{onClick:()=>{M(R),A(R.id),H(!0)},className:"text-khc-primary hover:underline text-xs",children:"Edit"}),s.jsx("button",{onClick:()=>Fe(R.id),className:"text-red-600 hover:underline text-xs",children:"Delete"})]})})]},R.id)})})]})})]})]})]}):s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access cost management"})})}const Or=e=>{var t;if(e instanceof w0){const r=(t=e.response)==null?void 0:t.data;return(r==null?void 0:r.message)||e.message||"Unknown error"}return"Unknown error"},Fr={getReportData:async e=>{try{return(await B.get(`/projects/${e}/report`)).data.data}catch(t){throw new Error(`Failed to fetch report data: ${Or(t)}`)}},getHistoricAnalysis:async e=>{try{return[]}catch(t){throw new Error(`Failed to fetch historic analysis: ${Or(t)}`)}},getProjectActuals:async e=>{try{return(await B.get(`/projects/${e}/actuals`)).data.data}catch(t){throw new Error(`Failed to fetch project actuals: ${Or(t)}`)}},createProjectActual:async(e,t)=>{try{return(await B.post(`/projects/${e}/actuals`,t)).data.data}catch(r){throw new Error(`Failed to create project actual: ${Or(r)}`)}},updateProjectActual:async(e,t,r)=>{try{return(await B.put(`/projects/${e}/actuals/${t}`,r)).data.data}catch(n){throw new Error(`Failed to update project actual: ${Or(n)}`)}},deleteProjectActual:async(e,t)=>{try{await B.delete(`/projects/${e}/actuals/${t}`)}catch(r){throw new Error(`Failed to delete project actual: ${Or(r)}`)}}},ol=vs((e,t)=>({reportData:null,historicAnalysis:[],projectActuals:[],isLoading:!1,error:null,fetchReportData:async r=>{e({isLoading:!0,error:null});try{const n=await Fr.getReportData(r);e({reportData:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch report";e({error:a,isLoading:!1})}},fetchHistoricAnalysis:async r=>{e({isLoading:!0,error:null});try{const n=await Fr.getHistoricAnalysis(r);e({historicAnalysis:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch historic analysis";e({error:a,isLoading:!1})}},fetchProjectActuals:async r=>{e({isLoading:!0,error:null});try{const n=await Fr.getProjectActuals(r);e({projectActuals:n,isLoading:!1})}catch(n){const a=n instanceof Error?n.message:"Failed to fetch project actuals";e({error:a,isLoading:!1})}},addProjectActual:async(r,n)=>{try{const a=await Fr.createProjectActual(r,n);return e(l=>({projectActuals:[...l.projectActuals,a]})),a}catch(a){const l=a instanceof Error?a.message:"Failed to add project actual";throw e({error:l}),a}},updateProjectActual:async(r,n,a)=>{try{const l=await Fr.updateProjectActual(r,n,a);return e(o=>({projectActuals:o.projectActuals.map(i=>i.id===n?l:i)})),l}catch(l){const o=l instanceof Error?l.message:"Failed to update project actual";throw e({error:o}),l}},deleteProjectActual:async(r,n)=>{try{await Fr.deleteProjectActual(r,n),e(a=>({projectActuals:a.projectActuals.filter(l=>l.id!==n)}))}catch(a){const l=a instanceof Error?a.message:"Failed to delete project actual";throw e({error:l}),a}},clearError:()=>{e({error:null})},clearReportData:()=>{e({reportData:null})}}));function xe({variant:e="primary",size:t="md",loading:r=!1,fullWidth:n=!1,disabled:a,className:l="",children:o,...i}){const c={primary:"bg-khc-primary hover:bg-khc-secondary text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white",outline:"border border-khc-primary text-khc-primary hover:bg-khc-light"},d={sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return s.jsx("button",{...i,disabled:a||r,className:`
        rounded-lg font-medium transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed
        ${c[e]}
        ${d[t]}
        ${n?"w-full":""}
        ${l}
      `,children:r?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),o]}):o})}function Bl({label:e,error:t,helperText:r,className:n="",id:a,...l}){const o=a||`input-${Math.random().toString(36).substr(2,9)}`;return s.jsxs("div",{className:"space-y-1",children:[e&&s.jsxs("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700",children:[e,l.required&&s.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),s.jsx("input",{...l,id:o,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${l.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${n}
        `}),t&&s.jsx("p",{className:"text-sm text-red-600",children:t}),r&&!t&&s.jsx("p",{className:"text-sm text-gray-500",children:r})]})}function Ld({label:e,error:t,helperText:r,options:n,placeholder:a,className:l="",id:o,...i}){const c=o||`select-${Math.random().toString(36).substr(2,9)}`;return s.jsxs("div",{className:"space-y-1",children:[e&&s.jsxs("label",{htmlFor:c,className:"block text-sm font-medium text-gray-700",children:[e,i.required&&s.jsx("span",{className:"text-red-600 ml-1",children:"*"})]}),s.jsxs("select",{...i,id:c,className:`
          w-full px-4 py-2 border rounded-lg
          focus:outline-none focus:ring-2 focus:ring-khc-primary
          transition duration-200
          ${t?"border-red-500 focus:ring-red-500":"border-gray-300"}
          ${i.disabled?"bg-gray-100 cursor-not-allowed":"bg-white"}
          ${l}
        `,children:[a&&s.jsx("option",{value:"",disabled:!0,selected:!0,children:a}),n.map(d=>s.jsx("option",{value:d.value,children:d.label},d.value))]}),t&&s.jsx("p",{className:"text-sm text-red-600",children:t}),r&&!t&&s.jsx("p",{className:"text-sm text-gray-500",children:r})]})}function Z({children:e,title:t,subtitle:r,className:n="",hover:a=!1}){return s.jsxs("div",{className:`
        bg-white rounded-lg shadow-md p-6
        ${a?"hover:shadow-lg transition-shadow duration-200 cursor-pointer":""}
        ${n}
      `,children:[t&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r&&s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r})]}),e]})}function Td({children:e,variant:t="default",size:r="md"}){const n={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"},a={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"};return s.jsx("span",{className:`
        inline-block rounded-full font-medium
        ${n[t]}
        ${a[r]}
      `,children:e})}function il({size:e="md",text:t="Loading..."}){const r={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},n={sm:"text-sm",md:"text-base",lg:"text-lg"};return s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:`
          border-4 border-gray-200 border-t-khc-primary rounded-full animate-spin
          ${r[e]}
        `}),t&&s.jsx("p",{className:`text-gray-600 ${n[e]}`,children:t})]})}function Ar({message:e,onDismiss:t,autoClose:r=!1,autoCloseDuration:n=5e3}){const[a,l]=v.useState(!0);if(v.useEffect(()=>{if(r&&a){const i=setTimeout(()=>{l(!1),t==null||t()},n);return()=>clearTimeout(i)}},[r,n,a,t]),!a)return null;const o=()=>{l(!1),t==null||t()};return s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 pt-0.5",children:s.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm font-medium text-red-800",children:e})}),t&&s.jsx("button",{onClick:o,className:"text-red-600 hover:text-red-800 transition",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function av(e,t="report.csv"){const r=[];if(r.push(["KHConstruct Report"]),r.push([""]),r.push(["Project Name",e.project_name]),r.push(["Project ID",e.project_id.toString()]),e.completion_date&&r.push(["Completion Date",e.completion_date]),r.push([""]),r.push(["Cost Summary"]),r.push(["","Estimated",e.estimated_costs.grand_total.toString()]),e.actual_costs){r.push(["","Actual",e.actual_costs.grand_total.toString()]);const a=e.actual_costs.grand_total-e.estimated_costs.grand_total;r.push(["","Variance",a.toString()])}r.push([""]),r.push(["Cost Breakdown"]),r.push(["Subtotal",e.estimated_costs.subtotal.toString()]),r.push(["Contingency",e.estimated_costs.contingency.toString()]),r.push(["Grand Total",e.estimated_costs.grand_total.toString()]),e.estimated_costs.cost_per_m2&&r.push(["Cost per m",e.estimated_costs.cost_per_m2.toString()]),r.push([""]),r.push(["Line Items"]),r.push(["Description","Category","Estimated","Actual","Variance"]),e.line_items.forEach(a=>{var l,o;r.push([a.description,a.category,a.estimated.toString(),((l=a.actual)==null?void 0:l.toString())||"",((o=a.variance)==null?void 0:o.toString())||""])}),e.notes&&(r.push([""]),r.push(["Notes",e.notes]));const n=r.map(a=>a.map(l=>`"${l}"`).join(",")).join(`
`);$p(n,t,"text/csv")}function lv(e,t="report.json"){const r=JSON.stringify(e,null,2);$p(r,t,"application/json")}function $p(e,t,r){const n=new Blob([e],{type:r}),a=URL.createObjectURL(n),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}function Up(e){return`
    <!DOCTYPE html>
    <html>
      <head>
        <title>KHConstruct Report - ${e.project_name}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { background-color: #2C5F8D; color: white; padding: 20px; margin-bottom: 20px; }
          .section { margin-bottom: 30px; }
          .section-title { font-size: 18px; font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #2C5F8D; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
          th { background-color: #f2f2f2; font-weight: bold; }
          tr:hover { background-color: #f5f5f5; }
          .summary { display: flex; gap: 40px; }
          .summary-item { flex: 1; }
          .summary-item label { font-weight: bold; display: block; margin-bottom: 5px; }
          .summary-item value { font-size: 16px; color: #2C5F8D; }
          .variance-under { color: green; }
          .variance-over { color: red; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>KHConstruct Project Report</h1>
          <p>Project: ${e.project_name}</p>
          ${e.completion_date?`<p>Completion Date: ${new Date(e.completion_date).toLocaleDateString()}</p>`:""}
        </div>

        <div class="section">
          <div class="section-title">Cost Summary</div>
          <div class="summary">
            <div class="summary-item">
              <label>Estimated Total:</label>
              <div>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
            </div>
            ${e.actual_costs?`
              <div class="summary-item">
                <label>Actual Total:</label>
                <div>${e.actual_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</div>
              </div>
              <div class="summary-item">
                <label>Variance:</label>
                <div class="${e.actual_costs.grand_total>e.estimated_costs.grand_total?"variance-over":"variance-under"}">
                  ${(e.actual_costs.grand_total-e.estimated_costs.grand_total).toLocaleString("en-GB",{maximumFractionDigits:2})}
                </div>
              </div>
            `:""}
          </div>
        </div>

        <div class="section">
          <div class="section-title">Cost Breakdown</div>
          <table>
            <tr>
              <th>Item</th>
              <th>Amount</th>
            </tr>
            <tr>
              <td>Subtotal</td>
              <td>${e.estimated_costs.subtotal.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr>
              <td>Contingency</td>
              <td>${e.estimated_costs.contingency.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
            <tr style="font-weight: bold;">
              <td>Grand Total</td>
              <td>${e.estimated_costs.grand_total.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
            </tr>
          </table>
        </div>

        <div class="section">
          <div class="section-title">Line Items</div>
          <table>
            <tr>
              <th>Description</th>
              <th>Category</th>
              <th>Estimated</th>
              ${e.actual_costs?"<th>Actual</th><th>Variance</th>":""}
            </tr>
            ${e.line_items.map(t=>`
              <tr>
                <td>${t.description}</td>
                <td>${t.category}</td>
                <td>${t.estimated.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                ${e.actual_costs&&t.actual?`
                  <td>${t.actual.toLocaleString("en-GB",{maximumFractionDigits:2})}</td>
                  <td class="${t.variance&&t.variance>0?"variance-over":"variance-under"}">
                    ${t.variance?""+t.variance.toLocaleString("en-GB",{maximumFractionDigits:2}):"-"}
                  </td>
                `:""}
              </tr>
            `).join("")}
          </table>
        </div>

        ${e.notes?`
          <div class="section">
            <div class="section-title">Notes</div>
            <p>${e.notes}</p>
          </div>
        `:""}

        <div style="margin-top: 40px; text-align: center; color: #999; font-size: 12px;">
          <p>Generated by KHConstruct on ${new Date().toLocaleDateString()}</p>
        </div>
      </body>
    </html>
  `}function ov(e){const t=Up(e),r=window.open("","","height=800,width=1000");r&&(r.document.write(t),r.document.close(),r.print())}function iv(){const{id:e}=ys();Xe();const t=Number(e),{reportData:r,isLoading:n,error:a,fetchReportData:l,clearReportData:o,clearError:i}=ol(),[c,d]=v.useState("csv"),[u,f]=v.useState(!1);v.useEffect(()=>(t&&l(t),()=>{o()}),[t,l,o]);const m=async()=>{if(r)try{f(!0);const h=new Date().toISOString().split("T")[0],y=`report-${r.project_name}-${h}`;switch(c){case"csv":av(r,`${y}.csv`);break;case"json":lv(r,`${y}.json`);break;case"html":const j=Up(r),g=new Blob([j],{type:"text/html"}),p=URL.createObjectURL(g),x=document.createElement("a");x.href=p,x.download=`${y}.html`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(p);break}f(!1)}catch(h){console.error("Export failed:",h),f(!1)}},N=()=>{r&&ov(r)};return n?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(il,{size:"lg",text:"Loading report..."})}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:r.project_name}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Project Report"})]}),a&&s.jsx(Ar,{message:a,onDismiss:i}),s.jsx(Z,{title:"Export Report",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"csv",checked:c==="csv",onChange:h=>d(h.target.value)}),s.jsx("span",{children:"Export as CSV"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"json",checked:c==="json",onChange:h=>d(h.target.value)}),s.jsx("span",{children:"Export as JSON"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",value:"html",checked:c==="html",onChange:h=>d(h.target.value)}),s.jsx("span",{children:"Export as HTML"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(xe,{variant:"primary",onClick:m,loading:u,children:" Download Report"}),s.jsx(xe,{variant:"secondary",onClick:N,children:" Print to PDF"})]})]})}),s.jsx(Z,{title:"Cost Summary",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),s.jsx("span",{className:"font-semibold",children:Y(r.estimated_costs.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Contingency:"}),s.jsx("span",{className:"font-semibold",children:Y(r.estimated_costs.contingency)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-3",children:[s.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),s.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(r.estimated_costs.grand_total)})]}),r.estimated_costs.cost_per_m2&&s.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",Y(r.estimated_costs.cost_per_m2)]})]}),r.actual_costs&&s.jsxs("div",{className:"space-y-3 border-l pl-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),s.jsx("span",{className:"font-semibold",children:Y(r.actual_costs.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Contingency:"}),s.jsx("span",{className:"font-semibold",children:Y(r.actual_costs.contingency)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-3",children:[s.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),s.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(r.actual_costs.grand_total)})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),s.jsx("span",{className:`font-bold text-lg ${r.actual_costs.grand_total>r.estimated_costs.grand_total?"text-red-600":"text-green-600"}`,children:Y(r.actual_costs.grand_total-r.estimated_costs.grand_total)})]})}),r.actual_costs.cost_per_m2&&s.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",Y(r.actual_costs.cost_per_m2)]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Z,{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Project ID"}),s.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:r.project_id})]}),r.completion_date&&s.jsxs(Z,{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completion Date"}),s.jsx("p",{className:"text-lg font-semibold text-khc-primary mt-1",children:Lp(r.completion_date)})]})]}),s.jsx(Z,{title:"Line Items Breakdown",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Estimated"}),r.actual_costs&&s.jsxs(s.Fragment,{children:[s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Variance"})]})]})}),s.jsx("tbody",{className:"divide-y",children:r.line_items.map((h,y)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:h.description}),s.jsx("td",{className:"px-4 py-3 text-gray-600",children:h.category}),s.jsx("td",{className:"px-4 py-3 text-right font-mono",children:Y(h.estimated)}),r.actual_costs&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3 text-right font-mono",children:h.actual?Y(h.actual):"-"}),s.jsx("td",{className:`px-4 py-3 text-right font-mono ${h.variance&&h.variance>0?"text-red-600":"text-green-600"}`,children:h.variance?Y(h.variance):"-"})]})]},y))})]})})}),r.notes&&s.jsx(Z,{title:"Notes",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.notes})})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Report data not available"}),s.jsx(X,{to:"/projects",className:"text-khc-primary hover:underline",children:"Back to Projects"})]})}function cv(){const{historicAnalysis:e,isLoading:t,error:r,fetchHistoricAnalysis:n,clearError:a}=ol(),{categories:l,fetchCategories:o}=Fp(),[i,c]=v.useState(""),[d,u]=v.useState("all");v.useEffect(()=>{o(),n()},[o,n]);const f=y=>{c(y),y?n(Number(y)):n()},m=e.filter(y=>!(d!=="all"&&y.region!==d)),N=["all",...new Set(e.map(y=>y.region).filter(y=>!!y))],h=m.reduce((y,j)=>{const g=j.building_age_range;return y[g]||(y[g]=[]),y[g].push(j),y},{});return t?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(il,{size:"lg",text:"Loading cost analysis..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Historic Cost Analysis"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"View cost benchmarks based on completed projects in your region"})]}),r&&s.jsx(Ar,{message:r,onDismiss:a}),s.jsx(Z,{title:"Filters",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Ld,{label:"Category",value:i,onChange:y=>f(y.target.value),options:[{value:"",label:"All Categories"},...l.map(y=>({value:y.id.toString(),label:y.name}))]}),s.jsx(Ld,{label:"Region",value:d,onChange:y=>u(y.target.value),options:N.map(y=>({value:y,label:y==="all"?"All Regions":y}))})]})}),m.length===0?s.jsxs("div",{className:"text-center py-12 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-blue-800 font-semibold mb-2",children:"No Historic Cost Analysis Data"}),s.jsx("p",{className:"text-blue-700 text-sm",children:"Historic cost analysis will be available once completed projects with actual costs are recorded in the system."})]}):s.jsx("div",{className:"space-y-6",children:Object.entries(h).sort(([y],[j])=>{const g={"0-10":0,"10-20":1,"20-30":2,"30+":3};return(g[y]??999)-(g[j]??999)}).map(([y,j])=>s.jsx(Z,{title:`Building Age: ${y} years`,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Condition Rating"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Cost per m"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Std Deviation"}),s.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Sample Size"}),s.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Confidence"})]})}),s.jsx("tbody",{className:"divide-y",children:j.map(g=>{const p=g.sample_size>=3?"High":"Low";return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:g.condition_rating_range}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:Y(g.cost_per_m2)}),s.jsxs("td",{className:"px-4 py-3 text-right font-mono text-gray-600",children:["",Y(g.std_deviation)]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsxs(Td,{variant:g.sample_size>=3?"success":"warning",children:[g.sample_size," projects"]})}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx(Td,{variant:p==="High"?"success":"warning",children:p})})]},g.id)})})]})})},y))}),s.jsx(Z,{children:s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:s.jsx("strong",{children:"How to interpret this data:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Cost per m:"})," Average cost for this category based on similar projects"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Std Deviation:"})," Expected variance from the average cost"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Sample Size:"})," Number of completed projects this benchmark is based on"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Confidence:"})," Higher confidence indicates more reliable data (3+ projects)"]})]})]})})]})}function dv(){const{id:e}=ys();Xe();const t=Number(e),{projectActuals:r,isLoading:n,error:a,fetchProjectActuals:l,updateProjectActual:o,deleteProjectActual:i,clearError:c}=ol(),{currentProject:d,fetchProjectById:u}=Mt(),[f,m]=v.useState(!1),[N,h]=v.useState(null),[y,j]=v.useState({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]}),[g,p]=v.useState(!1);v.useEffect(()=>{t&&(u(t),l(t))},[t,u,l]);const x=w=>{if(w){const L=r.find(F=>F.id===w);L&&(h(w),j({actual_quantity:L.actual_quantity,actual_cost:L.actual_cost,variance_reason:L.variance_reason||"",completed_date:L.completed_date}))}else h(null),j({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]});m(!0)},b=()=>{m(!1),h(null),j({actual_quantity:0,actual_cost:0,variance_reason:"",completed_date:new Date().toISOString().split("T")[0]})},k=async()=>{if(!(y.actual_quantity<=0||y.actual_cost<0))try{p(!0),N?await o(t,N,{actual_quantity:y.actual_quantity,actual_cost:y.actual_cost,variance_reason:y.variance_reason||void 0,completed_date:y.completed_date}):console.warn("Adding new actual cost requires cost item selection"),p(!1),b()}catch(w){p(!1),console.error("Failed to save actual cost:",w)}},C=async w=>{if(confirm("Are you sure you want to delete this actual cost record?"))try{await i(t,w)}catch(L){console.error("Failed to delete actual cost:",L)}};return n?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(il,{size:"lg",text:"Loading project actuals..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Actuals"}),s.jsx("p",{className:"text-gray-600 mt-2",children:d==null?void 0:d.name})]}),a&&s.jsx(Ar,{message:a,onDismiss:c}),s.jsx(Z,{children:s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:s.jsx("strong",{children:"Record Actual Costs:"})}),s.jsx("p",{children:"Enter actual quantities and costs for completed work items. The system will calculate variances between estimated and actual costs to help track project performance."})]})}),r.length===0?s.jsxs("div",{className:"text-center py-12 bg-white rounded-lg",children:[s.jsx("p",{className:"text-gray-600",children:"No actual cost records yet"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Complete project work items and record actual costs here"})]}):s.jsx(Z,{title:"Recorded Actuals",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Completed Date"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Quantity"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Actual Cost"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Variance Reason"}),s.jsx("th",{className:"px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y",children:r.map(w=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:Lp(w.completed_date)}),s.jsx("td",{className:"px-4 py-3 text-right",children:w.actual_quantity}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:Y(w.actual_cost)}),s.jsx("td",{className:"px-4 py-3 text-gray-600 text-xs",children:w.variance_reason||s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsxs("td",{className:"px-4 py-3 text-center space-x-2 flex justify-center",children:[s.jsx("button",{onClick:()=>x(w.id),className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition",children:"Edit"}),s.jsx("button",{onClick:()=>C(w.id),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition",children:"Delete"})]})]},w.id))})]})})}),s.jsx(wn,{isOpen:f,onClose:b,title:"Edit Actual Cost",children:s.jsxs("div",{className:"space-y-4 p-4",children:[s.jsx(Bl,{label:"Actual Quantity",type:"number",min:"0",step:"0.01",value:y.actual_quantity,onChange:w=>j({...y,actual_quantity:parseFloat(w.target.value)||0}),required:!0}),s.jsx(Bl,{label:"Actual Cost ()",type:"number",min:"0",step:"0.01",value:y.actual_cost,onChange:w=>j({...y,actual_cost:parseFloat(w.target.value)||0}),required:!0}),s.jsx(Bl,{label:"Completed Date",type:"date",value:y.completed_date,onChange:w=>j({...y,completed_date:w.target.value}),required:!0}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Variance Reason"}),s.jsx("textarea",{value:y.variance_reason,onChange:w=>j({...y,variance_reason:w.target.value}),placeholder:"Explain any significant variance from estimate",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(xe,{variant:"secondary",onClick:b,disabled:g,children:"Cancel"}),s.jsx(xe,{variant:"primary",onClick:k,loading:g,children:"Save Changes"})]})]})})]})}function uv(){var L,F,$;const{id:e}=ys(),t=Xe(),r=Number(e),{reportData:n,isLoading:a,error:l,fetchReportData:o,clearError:i}=ol(),{currentProject:c,fetchProjectById:d}=Mt(),[u,f]=v.useState("none"),[m,N]=v.useState("csv"),[h,y]=v.useState({});v.useEffect(()=>{r&&(d(r),o(r))},[r,d,o]),v.useEffect(()=>{if(n&&n.line_items){const D={};u==="none"?y({}):(n.line_items.forEach(H=>{let U="";u==="pdCode"?U=H.category||"Uncategorized":u==="areaCode"?U="Area: "+H.category||"Uncategorized":u==="projectNumber"?U=String(r)||"Unknown":u==="itemDescription"&&(U=H.description||"Uncategorized"),U&&(D[U]=(D[U]||0)+(H.estimated||0))}),y(D))}},[n,u,r]);const j=()=>{if(!n)return;const D=new Date().toISOString().split("T")[0],H=`project-cost-total-${(c==null?void 0:c.name)||"project"}-${D}`,U={projectName:n.project_name,projectId:n.project_id,contingencyPercentage:10,estimatedCosts:n.estimated_costs,actualCosts:n.actual_costs,lineItems:n.line_items,breakdown:h,exportedAt:new Date().toISOString()};m==="csv"?g(U,`${H}.csv`):p(U,`${H}.json`)},g=(D,H)=>{var q,O,P,E,T;const U=[];U.push(["PROJECT COST TOTAL REPORT"]),U.push([]),U.push(["Project Name",D.projectName]),U.push(["Project ID",String(D.projectId)]),U.push(["Contingency %",String(D.contingencyPercentage)+"%"]),U.push([]),U.push(["COST SUMMARY"]),U.push(["Estimated Subtotal",String((q=D.estimatedCosts)==null?void 0:q.subtotal)]),U.push(["Contingency Amount",String((O=D.estimatedCosts)==null?void 0:O.contingency)]),U.push(["Estimated Total",String((P=D.estimatedCosts)==null?void 0:P.grand_total)]),(E=D.estimatedCosts)!=null&&E.cost_per_m2&&U.push(["Cost per m",String(D.estimatedCosts.cost_per_m2)]),D.actualCosts&&(U.push([]),U.push(["Actual Subtotal",String(D.actualCosts.subtotal)]),U.push(["Actual Contingency",String(D.actualCosts.contingency)]),U.push(["Actual Total",String(D.actualCosts.grand_total)]),D.actualCosts.cost_per_m2&&U.push(["Actual Cost per m",String(D.actualCosts.cost_per_m2)])),U.push([]),U.push(["LINE ITEMS"]),U.push(["Description","Category","Estimated","Actual","Variance"]),(T=D.lineItems)==null||T.forEach(M=>{U.push([M.description||"",M.category||"",String(M.estimated||0),String(M.actual||""),String(M.variance||"")])});const A=U.map(M=>M.map(K=>`"${K}"`).join(",")).join(`
`);x(A,H,"text/csv")},p=(D,H)=>{const U=JSON.stringify(D,null,2);x(U,H,"application/json")},x=(D,H,U)=>{const A=new Blob([D],{type:U}),q=URL.createObjectURL(A),O=document.createElement("a");O.href=q,O.download=H,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(q)};if(a)return s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(il,{size:"lg",text:"Loading project costs..."})});if(!n)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Cost data not available"}),s.jsx(xe,{variant:"secondary",onClick:()=>t(`/projects/${r}`),children:"Back to Project"})]});const b=((L=n.estimated_costs)==null?void 0:L.grand_total)||0,k=(F=n.actual_costs)==null?void 0:F.grand_total,C=10,w=($=n.estimated_costs)==null?void 0:$.cost_per_m2;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Total"}),s.jsx("p",{className:"text-gray-600 mt-2",children:n.project_name})]}),l&&s.jsx(Ar,{message:l,onDismiss:i}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Z,{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Contingency %"}),s.jsxs("p",{className:"text-4xl font-bold text-khc-primary mt-2",children:[C,"%"]})]}),s.jsxs(Z,{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Project Total"}),s.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:Y(b)}),k&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Actual: ",Y(k)]})]}),s.jsxs(Z,{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Cost per m"}),s.jsx("p",{className:"text-3xl font-bold text-khc-primary mt-2",children:w?Y(w):"N/A"})]})]}),s.jsx(Z,{title:"Cost Breakdown",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group By"}),s.jsxs("select",{value:u,onChange:D=>f(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[s.jsx("option",{value:"none",children:"No Grouping (Total Only)"}),s.jsx("option",{value:"pdCode",children:"PD Code / Category"}),s.jsx("option",{value:"areaCode",children:"Area Code"}),s.jsx("option",{value:"projectNumber",children:"Project Number"}),s.jsx("option",{value:"itemDescription",children:"Item Description"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),s.jsxs("select",{value:m,onChange:D=>N(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-khc-primary focus:border-transparent",children:[s.jsx("option",{value:"csv",children:"CSV (Excel)"}),s.jsx("option",{value:"json",children:"JSON (Data)"})]})]})]}),s.jsx(xe,{variant:"primary",onClick:j,fullWidth:!0,children:" Export Cost Total"})]})}),u!=="none"&&Object.keys(h).length>0&&s.jsx(Z,{title:"Cost Breakdown by Category",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Category"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"Amount"}),s.jsx("th",{className:"px-4 py-3 text-right font-semibold text-gray-700",children:"% of Total"})]})}),s.jsx("tbody",{className:"divide-y",children:Object.entries(h).sort(([,D],[,H])=>H-D).map(([D,H])=>{const U=(H/b*100).toFixed(1);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:D}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-semibold text-khc-primary",children:Y(H)}),s.jsxs("td",{className:"px-4 py-3 text-right text-gray-600",children:[U,"%"]})]},D)})}),s.jsx("tfoot",{className:"bg-gray-50 border-t-2",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 font-bold text-gray-900",children:"Total"}),s.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-khc-primary text-lg",children:Y(b)}),s.jsx("td",{className:"px-4 py-3 text-right font-bold text-gray-600",children:"100%"})]})})]})})}),s.jsx(Z,{title:"Summary",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),s.jsx("span",{className:"font-semibold",children:Y(n.estimated_costs.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-700",children:["Contingency (",C,"%):"]}),s.jsx("span",{className:"font-semibold",children:Y(n.estimated_costs.contingency)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-3",children:[s.jsx("span",{className:"font-bold text-khc-primary",children:"Estimated Total:"}),s.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(b)})]}),n.estimated_costs.cost_per_m2&&s.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Cost per m: ",Y(n.estimated_costs.cost_per_m2)]})]}),k&&n.actual_costs&&s.jsxs("div",{className:"space-y-3 border-l pl-6",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Actual Subtotal:"}),s.jsx("span",{className:"font-semibold",children:Y(n.actual_costs.subtotal)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Actual Contingency:"}),s.jsx("span",{className:"font-semibold",children:Y(n.actual_costs.contingency)})]}),s.jsxs("div",{className:"flex justify-between border-t pt-3",children:[s.jsx("span",{className:"font-bold text-khc-primary",children:"Actual Total:"}),s.jsx("span",{className:"font-bold text-khc-primary text-lg",children:Y(k)})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-bold text-gray-700",children:"Variance:"}),s.jsx("span",{className:`font-bold text-lg ${k>b?"text-red-600":"text-green-600"}`,children:Y(k-b)})]})}),n.actual_costs.cost_per_m2&&s.jsxs("div",{className:"text-sm text-gray-600 pt-2",children:["Actual cost per m: ",Y(n.actual_costs.cost_per_m2)]})]})]})})]})}function mv(){const{user:e}=Ht(),[t,r]=v.useState([]),[n,a]=v.useState(!0),[l,o]=v.useState(null),[i,c]=v.useState(null),[d,u]=v.useState(null),[f,m]=v.useState(!1);if((e==null?void 0:e.role)!=="admin")return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-red-700",children:"Only administrators can access user management."})]})});v.useEffect(()=>{N()},[]);const N=async()=>{var g,p;try{a(!0),o(null);const x=await xr.getAllUsers();r(x.data.users)}catch(x){o(((p=(g=x.response)==null?void 0:g.data)==null?void 0:p.error)||"Failed to load users")}finally{a(!1)}},h=g=>{c(g.id),u({id:g.id,username:g.username,email:g.email,role:g.role,is_active:g.is_active})},y=()=>{c(null),u(null)},j=async()=>{var g,p;if(d)try{m(!0);const x={},b=t.find(k=>k.id===d.id);if(!b)return;if(d.username!==b.username&&(x.username=d.username),d.email!==b.email&&(x.email=d.email),d.role!==b.role&&(x.role=d.role),d.is_active!==b.is_active&&(x.is_active=d.is_active),Object.keys(x).length===0){y();return}await xr.updateUser(d.id,x),r(t.map(k=>k.id===d.id?{...k,username:d.username,email:d.email,role:d.role,is_active:d.is_active}:k)),y()}catch(x){o(((p=(g=x.response)==null?void 0:g.data)==null?void 0:p.error)||"Failed to update user")}finally{m(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"User Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"View and manage all users in the system"})]}),l&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:l}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n?s.jsx("div",{className:"p-6 text-center text-gray-600",children:"Loading users..."}):t.length===0?s.jsx("div",{className:"p-6 text-center text-gray-600",children:"No users found"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 border-b",children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Username"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Created"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y",children:t.map(g=>s.jsx("tr",{className:"hover:bg-gray-50",children:i===g.id?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"text",value:(d==null?void 0:d.username)||"",onChange:p=>u({...d,username:p.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"email",value:(d==null?void 0:d.email)||"",onChange:p=>u({...d,email:p.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("select",{value:(d==null?void 0:d.role)||"",onChange:p=>u({...d,role:p.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"estimator",children:"Estimator"}),s.jsx("option",{value:"viewer",children:"Viewer"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:(d==null?void 0:d.is_active)||!1,onChange:p=>u({...d,is_active:p.target.checked}),className:"h-4 w-4 text-khc-primary"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:d!=null&&d.is_active?"Active":"Inactive"})]})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(g.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:j,disabled:f,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded disabled:bg-gray-400",children:f?"Saving...":"Save"}),s.jsx("button",{onClick:y,disabled:f,className:"px-3 py-1 bg-gray-400 hover:bg-gray-500 text-white text-sm rounded disabled:bg-gray-300",children:"Cancel"})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:g.username}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:g.email}),s.jsx("td",{className:"px-6 py-4 text-sm",children:s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium",children:g.role})}),s.jsx("td",{className:"px-6 py-4 text-sm",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${g.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(g.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:()=>h(g),className:"px-3 py-1 bg-khc-primary hover:bg-khc-secondary text-white text-sm rounded",children:"Edit"})})]})},g.id))})]})})})]})}function pv(){Ht();const[e,t]=v.useState([]),[r,n]=v.useState(!1),[a,l]=v.useState(""),[o,i]=v.useState(!1),[c,d]=v.useState(null),[u,f]=v.useState(""),[m,N]=v.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),h=async()=>{var x,b;n(!0),l("");try{const k=await Os.getAll({search:u});t(k.data.data||[])}catch(k){l(((b=(x=k.response)==null?void 0:x.data)==null?void 0:b.error)||"Failed to load clients")}finally{n(!1)}};v.useEffect(()=>{h()},[u]);const y=async x=>{var b;x.preventDefault(),l("");try{c?await Os.update(c,m):await Os.create(m),p(),h()}catch(k){const C=(b=k.response)==null?void 0:b.data;let w="Failed to save client";if(C!=null&&C.error&&(w=C.error,C.details&&Array.isArray(C.details))){const L=C.details.map(F=>`${F.field}: ${F.message}`).join(", ");w=`${C.error} - ${L}`}l(w)}},j=async x=>{var b,k;if(confirm("Are you sure you want to delete this client?"))try{await Os.delete(x),h()}catch(C){l(((k=(b=C.response)==null?void 0:b.data)==null?void 0:k.error)||"Failed to delete client")}},g=x=>{N({name:x.name,email:x.email||"",phone:x.phone||"",address:x.address||"",city:x.city||"",postcode:x.postcode||"",country:x.country||"United Kingdom",website:x.website||"",notes:x.notes||""}),d(x.id),i(!0)},p=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",notes:""}),d(null),i(!1)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Clients"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your client contacts"})]}),s.jsx("button",{onClick:()=>{p(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Client"})]}),a&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:s.jsx("input",{type:"text",placeholder:"Search clients by name, email, or city...",value:u,onChange:x=>f(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Client":"New Client"}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name *"}),s.jsx("input",{type:"text",required:!0,value:m.name,onChange:x=>N({...m,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:m.email||"",onChange:x=>N({...m,email:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:m.phone||"",onChange:x=>N({...m,phone:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),s.jsx("input",{type:"url",value:m.website||"",onChange:x=>N({...m,website:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("input",{type:"text",value:m.address||"",onChange:x=>N({...m,address:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),s.jsx("input",{type:"text",value:m.city||"",onChange:x=>N({...m,city:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),s.jsx("input",{type:"text",value:m.postcode||"",onChange:x=>N({...m,postcode:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),s.jsx("input",{type:"text",value:m.country||"United Kingdom",onChange:x=>N({...m,country:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:m.notes||"",onChange:x=>N({...m,notes:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Client":"Add Client"}),s.jsx("button",{type:"button",onClick:p,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading clients..."}):e.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No clients found. ",!o&&s.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Create one now"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(x=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:x.name}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.email||"-"}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.phone||"-"}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x.city||"-"}),s.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[s.jsx("button",{onClick:()=>g(x),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>j(x.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},x.id))})]})})})]})}function hv(){Ht();const[e,t]=v.useState([]),[r,n]=v.useState(!1),[a,l]=v.useState(""),[o,i]=v.useState(!1),[c,d]=v.useState(null),[u,f]=v.useState(""),[m,N]=v.useState({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),h=async()=>{var b,k;n(!0),l("");try{const C=await Fs.getAll({search:u});t(C.data.data||[])}catch(C){l(((k=(b=C.response)==null?void 0:b.data)==null?void 0:k.error)||"Failed to load contractors")}finally{n(!1)}};v.useEffect(()=>{h()},[u]);const y=async b=>{var k;b.preventDefault(),l("");try{c?await Fs.update(c,m):await Fs.create(m),p(),h()}catch(C){const w=(k=C.response)==null?void 0:k.data;let L="Failed to save contractor";if(w!=null&&w.error&&(L=w.error,w.details&&Array.isArray(w.details))){const F=w.details.map($=>`${$.field}: ${$.message}`).join(", ");L=`${w.error} - ${F}`}l(L)}},j=async b=>{var k,C;if(confirm("Are you sure you want to delete this contractor?"))try{await Fs.delete(b),h()}catch(w){l(((C=(k=w.response)==null?void 0:k.data)==null?void 0:C.error)||"Failed to delete contractor")}},g=b=>{N({name:b.name,email:b.email||"",phone:b.phone||"",address:b.address||"",city:b.city||"",postcode:b.postcode||"",country:b.country||"United Kingdom",website:b.website||"",specialization:b.specialization||"",notes:b.notes||""}),d(b.id),i(!0)},p=()=>{N({name:"",email:"",phone:"",address:"",city:"",postcode:"",country:"United Kingdom",website:"",specialization:"",notes:""}),d(null),i(!1)},x=({rating:b,size:k="sm"})=>{const C=k==="md"?"w-5 h-5":"w-4 h-4";return s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(w=>s.jsx("span",{className:`${C} ${w<=b?"text-yellow-400":"text-gray-300"}`,children:""},w))})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Building Contractors"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your contractor network and specializations"})]}),s.jsx("button",{onClick:()=>{p(),i(!0)},className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:"+ Add Contractor"})]}),a&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:s.jsx("input",{type:"text",placeholder:"Search contractors by name, email, specialty, or city...",value:u,onChange:b=>f(b.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})}),o&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Edit Contractor":"New Contractor"}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contractor Name *"}),s.jsx("input",{type:"text",required:!0,value:m.name,onChange:b=>N({...m,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),s.jsx("input",{type:"text",placeholder:"e.g., Electrical, Plumbing, Carpentry",value:m.specialization||"",onChange:b=>N({...m,specialization:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:m.email||"",onChange:b=>N({...m,email:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:m.phone||"",onChange:b=>N({...m,phone:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),s.jsx("input",{type:"url",value:m.website||"",onChange:b=>N({...m,website:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("input",{type:"text",value:m.address||"",onChange:b=>N({...m,address:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),s.jsx("input",{type:"text",value:m.city||"",onChange:b=>N({...m,city:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),s.jsx("input",{type:"text",value:m.postcode||"",onChange:b=>N({...m,postcode:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),s.jsx("input",{type:"text",value:m.country||"United Kingdom",onChange:b=>N({...m,country:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:m.notes||"",onChange:b=>N({...m,notes:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-khc-primary"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",className:"bg-khc-primary hover:bg-khc-secondary text-white font-semibold py-2 px-6 rounded-lg transition",children:c?"Update Contractor":"Add Contractor"}),s.jsx("button",{type:"button",onClick:p,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-6 rounded-lg transition",children:"Cancel"})]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading contractors..."}):e.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:["No contractors found. ",!o&&s.jsx("a",{href:"#",onClick:()=>i(!0),className:"text-khc-primary font-semibold",children:"Add one now"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Specialization"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"City"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Rating"}),s.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),s.jsx("tbody",{children:e.map(b=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:b.name}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.specialization||"-"}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.city||"-"}),s.jsx("td",{className:"px-6 py-4 text-sm",children:s.jsx(x,{rating:Math.round(b.rating)})}),s.jsxs("td",{className:"px-6 py-4 text-sm space-x-2",children:[s.jsx("button",{onClick:()=>g(b),className:"text-khc-primary hover:underline font-medium",children:"Edit"}),s.jsx("button",{onClick:()=>j(b.id),className:"text-red-600 hover:underline font-medium",children:"Delete"})]})]},b.id))})]})})})]})}function fv(){const[e,t]=v.useState([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),[r,n]=v.useState(!1),[a,l]=v.useState(null),[o,i]=v.useState(null),c=v.useRef(null),d=(j,g,p)=>{const x=[...e],b={...x[j]};g==="labour"||g==="materials"||g==="plant"||g==="ohp"||g==="rate"?b[g]=typeof p=="number"?p:parseFloat(String(p))||0:b[g]=String(p),x[j]=b,t(x)},u=()=>{t([...e,{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}])},f=j=>{t(e.filter((g,p)=>p!==j))},m=j=>{j.preventDefault();const p=j.clipboardData.getData("text").trim().split(`
`),x=[];for(const b of p){let k=b.split("	");if(k.length<8&&(k=b.split(",")),k.length>=8){const C=k.map(w=>w.trim());x.push({description:C[0]||"",uniqueId:C[1]||"",labour:parseFloat(C[2])||0,materials:parseFloat(C[3])||0,plant:parseFloat(C[4])||0,ohp:parseFloat(C[5])||0,uom:C[6]||"",rate:parseFloat(C[7])||0})}}if(x.length>0){const b=e.filter(C=>!C.description&&!C.uniqueId&&C.rate===0),k=e.filter(C=>C.description||C.uniqueId||C.rate>0);x.length>1&&b.length>0&&k.length===0?t(x):t([...e,...x])}},N=()=>{for(let j=0;j<e.length;j++){const g=e[j];if(!g.description||!g.uniqueId||!g.uom||g.rate<=0)return l(`Row ${j+1} has missing or invalid required fields`),!1}return!0},h=async()=>{if(N())try{n(!0),l(null);const j=e.filter(x=>x.description&&x.uniqueId&&x.uom&&x.rate>0);if(j.length===0){l("No valid rows to import"),n(!1);return}const p=[...JSON.parse(localStorage.getItem("personalCostDatabase")||"[]"),...j];localStorage.setItem("personalCostDatabase",JSON.stringify(p)),i(` Successfully saved ${j.length} cost item${j.length!==1?"s":""} to your personal database`),t([{description:"",uniqueId:"",labour:0,materials:0,plant:0,ohp:0,uom:"",rate:0}]),n(!1)}catch(j){n(!1),l(j instanceof Error?j.message:"Failed to save items")}},y=e.filter(j=>j.description&&j.uniqueId&&j.uom&&j.rate>0).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Personal Cost Database"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Build your custom cost database with labour, materials, plant and overhead costs"})]}),a&&s.jsx(Ar,{message:a,onDismiss:()=>l(null)}),o&&s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:s.jsx("p",{className:"font-semibold",children:o})}),s.jsx(Z,{title:"Cost Items",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border border-dashed border-gray-300 rounded-lg p-3 bg-gray-50 text-sm text-gray-600",children:[" ",s.jsx("strong",{children:"Tip:"})," Click in the table and paste full rows of data (from Excel/Google Sheets). Table auto-expands to fit all rows!"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{ref:c,onPaste:m,className:"w-full text-sm border-collapse focus:outline-none",tabIndex:0,children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-khc-primary text-white",children:[s.jsx("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:"#"}),s.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Description",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["Unique ID",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Labour"}),s.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Materials"}),s.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"Plant"}),s.jsx("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:"OHP"}),s.jsxs("th",{className:"px-3 py-3 text-left font-semibold border border-gray-200",children:["UOM",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsxs("th",{className:"px-3 py-3 text-right font-semibold border border-gray-200",children:["Rate",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("th",{className:"px-3 py-3 text-center font-semibold border border-gray-200",children:"Action"})]})}),s.jsx("tbody",{children:e.map((j,g)=>s.jsxs("tr",{className:"hover:bg-blue-50",children:[s.jsx("td",{className:"px-3 py-2 border border-gray-200 text-gray-600",children:g+1}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"text",value:j.description,onChange:p=>d(g,"description",p.target.value),placeholder:"Item description",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"text",value:j.uniqueId,onChange:p=>d(g,"uniqueId",p.target.value),placeholder:"e.g., ID001",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"number",value:j.labour||"",onChange:p=>d(g,"labour",p.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"number",value:j.materials||"",onChange:p=>d(g,"materials",p.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"number",value:j.plant||"",onChange:p=>d(g,"plant",p.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"number",value:j.ohp||"",onChange:p=>d(g,"ohp",p.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"text",value:j.uom,onChange:p=>d(g,"uom",p.target.value),placeholder:"e.g., m2, m3, no",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200",children:s.jsx("input",{type:"number",value:j.rate||"",onChange:p=>d(g,"rate",p.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-right focus:ring-2 focus:ring-khc-primary focus:border-transparent"})}),s.jsx("td",{className:"px-3 py-2 border border-gray-200 text-center",children:s.jsx("button",{onClick:()=>f(g),className:"text-red-600 hover:text-red-800 font-semibold text-lg",title:"Delete row",children:""})})]},g))})]})}),s.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600",children:s.jsxs("p",{children:[s.jsx("span",{className:"text-red-400",children:"*"})," Required fields: Description, Unique ID, UOM, Rate"]})}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(xe,{variant:"secondary",onClick:u,children:"+ Add Row"}),s.jsx(xe,{variant:"primary",onClick:h,loading:r,fullWidth:!0,disabled:y===0,children:r?"Saving...":`Save ${y} Cost Item${y!==1?"s":""}`})]})]})}),s.jsx(Z,{title:"How to Use",children:s.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:" Fastest Method: Paste Full Database"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-600",children:[s.jsx("li",{children:"Select all data in Excel/Google Sheets (Ctrl+A)"}),s.jsx("li",{children:"Copy (Ctrl+C or Cmd+C)"}),s.jsx("li",{children:s.jsx("strong",{children:"Click anywhere in the table below"})}),s.jsx("li",{children:"Paste (Ctrl+V or Cmd+V)"}),s.jsx("li",{children:" Table auto-expands to match pasted rows!"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Columns must be in order: Description, Unique ID, Labour, Materials, Plant, OHP, UOM, Rate"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Single Row Paste"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Copy one row of data from Excel"}),s.jsx("li",{children:"Click in the table and paste"}),s.jsx("li",{children:"Row is added to table automatically"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Manual Entry"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Click into any field and type the value"}),s.jsx("li",{children:"Tab or click to move to next field"}),s.jsx("li",{children:"Use the  button to delete a row"}),s.jsx("li",{children:'Click "+ Add Row" for additional entries'})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Field Guide"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Description:"})," Clear description of the cost item"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Unique ID:"})," Unique identifier (e.g., ID001, LB01)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Labour:"})," Labour cost component ( per unit)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Materials:"})," Material cost component ( per unit)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Plant:"})," Plant/equipment cost component ( per unit)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"OHP:"})," Overheads and profit ( per unit)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"UOM:"})," Unit of measure (e.g., m2, m3, no, tonne)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Rate:"})," Total rate per unit (Labour + Materials + Plant + OHP)"]})]})]})]})})]})}const xv=["Preliminaries","Excavation & Earthworks","Foundations","Structure","Roofing","External Walls","Windows & Doors","Partitions & Screens","Finishings","Mechanical Services","Electrical Services","Plumbing & Drainage","Site Works"];function gv(){const[e,t]=v.useState([]),[r,n]=v.useState([]),[a,l]=v.useState(null),[o,i]=v.useState(null),[c,d]=v.useState(""),[u,f]=v.useState("all"),[m,N]=v.useState(!1),[h,y]=v.useState(null),[j,g]=v.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),[p,x]=v.useState(""),[b,k]=v.useState(!1);v.useEffect(()=>{C(),w()},[]);const C=()=>{const P=localStorage.getItem("internalRates");P&&t(JSON.parse(P))},w=()=>{const P=localStorage.getItem("rateCategories");if(P)n(JSON.parse(P));else{const E=xv.map((T,M)=>({id:`cat-${M}`,name:T,isCustom:!1}));n(E),localStorage.setItem("rateCategories",JSON.stringify(E))}},L=P=>{localStorage.setItem("internalRates",JSON.stringify(P)),t(P)},F=()=>{if(!p.trim()){l("Category name is required");return}if(r.some(T=>T.name.toLowerCase()===p.toLowerCase())){l("Category already exists");return}const P={id:`cat-${Date.now()}`,name:p,isCustom:!0},E=[...r,P];n(E),localStorage.setItem("rateCategories",JSON.stringify(E)),x(""),k(!1),i("Category added successfully"),setTimeout(()=>i(null),3e3)},$=()=>{if(!j.description.trim()||!j.category||!j.uom||j.labour+j.materials+j.plant+j.ohp===0){l("Description, Category, UOM, and at least one cost component are required");return}let P;if(h)P=e.map(E=>E.id===h?{...j,id:h,labour:parseFloat(String(j.labour))||0,materials:parseFloat(String(j.materials))||0,plant:parseFloat(String(j.plant))||0,ohp:parseFloat(String(j.ohp))||0,createdAt:E.createdAt}:E),i("Rate updated successfully");else{const E={id:`rate-${Date.now()}`,description:j.description,category:j.category,labour:parseFloat(String(j.labour))||0,materials:parseFloat(String(j.materials))||0,plant:parseFloat(String(j.plant))||0,ohp:parseFloat(String(j.ohp))||0,uom:j.uom,createdAt:new Date().toISOString()};P=[...e,E],i("Rate added successfully")}L(P),U(),setTimeout(()=>i(null),3e3)},D=P=>{window.confirm("Are you sure you want to delete this rate?")&&(L(e.filter(E=>E.id!==P)),i("Rate deleted successfully"),setTimeout(()=>i(null),3e3))},H=P=>{g({description:P.description,category:P.category,labour:P.labour,materials:P.materials,plant:P.plant,ohp:P.ohp,uom:P.uom}),y(P.id),N(!0)},U=()=>{g({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:""}),y(null),N(!1)},A=e.filter(P=>{const E=u==="all"||P.category===u,T=P.description.toLowerCase().includes(c.toLowerCase());return E&&T}),q=A.reduce((P,E)=>(P[E.category]||(P[E.category]=[]),P[E.category].push(E),P),{}),O=P=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(P);return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Internal Rates Builder"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage your organization's rate book"})]}),a&&s.jsx(Ar,{message:a,onDismiss:()=>l(null)}),o&&s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:s.jsx("p",{className:"font-semibold",children:o})}),m&&s.jsx(Z,{title:h?"Edit Rate":"Add New Rate",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description*"}),s.jsx("input",{type:"text",value:j.description,onChange:P=>g({...j,description:P.target.value}),placeholder:"Rate description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category*"}),s.jsxs("select",{value:j.category,onChange:P=>g({...j,category:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"",children:"Select category"}),r.map(P=>s.jsx("option",{value:P.name,children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Labour ()*"}),s.jsx("input",{type:"number",value:j.labour||"",onChange:P=>g({...j,labour:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Materials ()*"}),s.jsx("input",{type:"number",value:j.materials||"",onChange:P=>g({...j,materials:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Plant ()*"}),s.jsx("input",{type:"number",value:j.plant||"",onChange:P=>g({...j,plant:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OHP ()*"}),s.jsx("input",{type:"number",value:j.ohp||"",onChange:P=>g({...j,ohp:parseFloat(P.target.value)||0}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"UOM*"}),s.jsx("input",{type:"text",value:j.uom,onChange:P=>g({...j,uom:P.target.value}),placeholder:"e.g., m2, m3, no",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(xe,{variant:"primary",onClick:$,children:h?"Update Rate":"Add Rate"}),s.jsx(xe,{variant:"secondary",onClick:U,children:"Cancel"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[!m&&s.jsx(xe,{variant:"primary",onClick:()=>N(!0),fullWidth:!0,children:"+ Add New Rate"}),!b&&s.jsx(xe,{variant:"secondary",onClick:()=>k(!0),fullWidth:!0,children:"+ Add Category"}),b&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:p,onChange:P=>x(P.target.value),placeholder:"New category name",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),s.jsx("button",{onClick:F,className:"px-4 py-2 bg-khc-primary text-white rounded-lg hover:bg-khc-secondary",children:""}),s.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:""})]})]}),s.jsx(Z,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"text",placeholder:"Search rates by description...",value:c,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"}),s.jsxs("select",{value:u,onChange:P=>f(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary",children:[s.jsx("option",{value:"all",children:"All Categories"}),r.map(P=>s.jsx("option",{value:P.name,children:P.name},P.id))]})]})}),A.length===0?s.jsx(Z,{children:s.jsxs("p",{className:"text-center text-gray-500",children:["No rates found. ",!m&&s.jsx("span",{onClick:()=>N(!0),className:"text-khc-primary cursor-pointer hover:underline",children:"Add one now"})]})}):Object.entries(q).map(([P,E])=>s.jsx(Z,{title:P,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 border-b",children:[s.jsx("th",{className:"px-3 py-2 text-left font-semibold",children:"Description"}),s.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Labour"}),s.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Materials"}),s.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"Plant"}),s.jsx("th",{className:"px-3 py-2 text-right font-semibold",children:"OHP"}),s.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Total"}),s.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"UOM"}),s.jsx("th",{className:"px-3 py-2 text-center font-semibold",children:"Action"})]})}),s.jsx("tbody",{children:E.map(T=>{const M=T.labour+T.materials+T.plant+T.ohp;return s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2",children:T.description}),s.jsx("td",{className:"px-3 py-2 text-right",children:O(T.labour)}),s.jsx("td",{className:"px-3 py-2 text-right",children:O(T.materials)}),s.jsx("td",{className:"px-3 py-2 text-right",children:O(T.plant)}),s.jsx("td",{className:"px-3 py-2 text-right",children:O(T.ohp)}),s.jsx("td",{className:"px-3 py-2 text-right font-semibold text-khc-primary",children:O(M)}),s.jsx("td",{className:"px-3 py-2 text-center",children:T.uom}),s.jsxs("td",{className:"px-3 py-2 text-center space-x-2",children:[s.jsx("button",{onClick:()=>H(T),className:"text-blue-600 hover:text-blue-800 font-semibold",title:"Edit",children:""}),s.jsx("button",{onClick:()=>D(T.id),className:"text-red-600 hover:text-red-800 font-semibold",title:"Delete",children:""})]})]},T.id)})})]})})},P)),s.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-200 rounded p-3",children:s.jsxs("p",{children:[s.jsx("strong",{children:"Total Rates:"})," ",e.length]})})]})}function yv(){const e=Xe(),{projects:t,isLoading:r,fetchProjects:n}=Mt(),[a,l]=v.useState(null),[o,i]=v.useState(null),[c,d]=v.useState([]),[u,f]=v.useState([]),[m,N]=v.useState([]),[h,y]=v.useState([]),[j,g]=v.useState(0),[p,x]=v.useState(!1),[b,k]=v.useState(""),[C,w]=v.useState("all"),[L,F]=v.useState(!1),[$,D]=v.useState(!1),[H,U]=v.useState(null),[A,q]=v.useState(null),[O,P]=v.useState({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0});v.useEffect(()=>{n(),E(),T()},[n]);const E=()=>{const _=JSON.parse(localStorage.getItem("internalRates")||"[]"),G=JSON.parse(localStorage.getItem("personalCostDatabase")||"[]");d(_),f(G)},T=()=>{const _=localStorage.getItem("rateCategories");_&&N(JSON.parse(_))},M=_=>{l(_);const G=t.find(J=>J.id===_);i(G||null),y([]),q(`Project "${G==null?void 0:G.name}" selected`),setTimeout(()=>q(null),2e3)},ge=[...c,...u].filter(_=>{const G=C==="all"||_.category===C,J=_.description.toLowerCase().includes(b.toLowerCase());return G&&J}).reduce((_,G)=>(_[G.category]||(_[G.category]=[]),_[G.category].push(G),_),{}),ie=_=>{if(!o){U("Please select a project first");return}const G={id:`line-${Date.now()}`,description:_.description,source:c.some(J=>J.id===_.id)?"internal":"imported",labour:_.labour,materials:_.materials,plant:_.plant,ohp:_.ohp,uom:_.uom,quantity:1,markupPercentage:0,category:_.category};y([...h,G]),q("Rate added to assembly"),setTimeout(()=>q(null),2e3)},Le=()=>{if(!o){U("Please select a project first");return}if(!O.description||!O.category||!O.uom){U("Description, category, and UOM are required");return}if(O.labour+O.materials+O.plant+O.ohp===0){U("At least one cost component is required");return}const _={id:`line-${Date.now()}`,description:O.description,source:"custom",labour:O.labour,materials:O.materials,plant:O.plant,ohp:O.ohp,uom:O.uom,quantity:O.quantity,markupPercentage:O.markupPercentage,category:O.category};y([...h,_]),P({description:"",category:"",labour:0,materials:0,plant:0,ohp:0,uom:"",quantity:1,markupPercentage:0}),D(!1),q("Custom line item added"),setTimeout(()=>q(null),2e3)},Fe=(_,G,J)=>{y(h.map(be=>be.id===_?{...be,[G]:J}:be))},Ze=_=>{y(h.filter(G=>G.id!==_))},Nt=_=>{const G=(_.labour+_.materials+_.plant+_.ohp)*_.quantity,J=p?j:_.markupPercentage;return G*(1+J/100)},he=(()=>{const _={};return h.forEach(G=>{_[G.category]||(_[G.category]=0),_[G.category]+=Nt(G)}),_})(),pt=Object.values(he).reduce((_,G)=>_+G,0),je=_=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2}).format(_),V=()=>{if(!o||h.length===0){U("Select a project and add line items before exporting");return}const _=`
      <html>
        <head>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; }
            h1 { color: #003366; }
            .header { margin-bottom: 20px; }
            .section { margin-bottom: 30px; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #003366; color: white; }
            .total { font-weight: bold; background-color: #f0f0f0; }
            .grand-total { font-weight: bold; font-size: 16px; background-color: #e0e0e0; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${o.name}</h1>
            <p><strong>Project ID:</strong> ${o.id}</p>
            <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
          </div>
          ${Object.entries(he).map(([Ce,He])=>`
            <div class="section">
              <h2>${Ce}</h2>
              <table>
                <thead>
                  <tr>
                    <th>Description</th>
                    <th>Qty</th>
                    <th>UOM</th>
                    <th>Labour</th>
                    <th>Materials</th>
                    <th>Plant</th>
                    <th>OHP</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  ${h.filter(Ve=>Ve.category===Ce).map(Ve=>`
                    <tr>
                      <td>${Ve.description}</td>
                      <td>${Ve.quantity}</td>
                      <td>${Ve.uom}</td>
                      <td>${je(Ve.labour*Ve.quantity)}</td>
                      <td>${je(Ve.materials*Ve.quantity)}</td>
                      <td>${je(Ve.plant*Ve.quantity)}</td>
                      <td>${je(Ve.ohp*Ve.quantity)}</td>
                      <td>${je(Nt(Ve))}</td>
                    </tr>
                  `).join("")}
                  <tr class="total">
                    <td colspan="7">Category Total</td>
                    <td>${je(He)}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          `).join("")}
          <div class="section">
            <table>
              <tr class="grand-total">
                <td colspan="7">GRAND TOTAL</td>
                <td>${je(pt)}</td>
              </tr>
            </table>
          </div>
        </body>
      </html>
    `,G=new Blob([_],{type:"text/html"}),J=window.URL.createObjectURL(G),be=document.createElement("a");be.href=J,be.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(J),q("Estimate exported"),setTimeout(()=>q(null),2e3)},pr=()=>{if(!o||h.length===0){U("Select a project and add line items before exporting");return}let _=`Project Name,Project ID,Date
`;_+=`"${o.name}",${o.id},"${new Date().toLocaleDateString()}"

`,_+=`Category,Description,Qty,UOM,Labour,Materials,Plant,OHP,Total
`,h.forEach(Ce=>{const He=Nt(Ce);_+=`"${Ce.category}","${Ce.description}",${Ce.quantity},"${Ce.uom}",${Ce.labour},${Ce.materials},${Ce.plant},${Ce.ohp},${He}
`}),_+=`
Category Totals
`,Object.entries(he).forEach(([Ce,He])=>{_+=`"${Ce}",,,,,,,,${He}
`}),_+=`
GRAND TOTAL,,,,,,,,,${pt}
`;const G=new Blob([_],{type:"text/csv"}),J=window.URL.createObjectURL(G),be=document.createElement("a");be.href=J,be.download=`${o.name}-estimate-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(be),be.click(),document.body.removeChild(be),window.URL.revokeObjectURL(J),q("Estimate exported"),setTimeout(()=>q(null),2e3)};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Project Cost Assembly"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Build cost estimates from rates or custom line items"})]}),H&&s.jsx(Ar,{message:H,onDismiss:()=>U(null)}),A&&s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:s.jsx("p",{className:"font-semibold",children:A})}),o?s.jsxs(s.Fragment,{children:[s.jsx(Z,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Selected Project"}),s.jsx("h2",{className:"text-2xl font-bold text-khc-primary",children:o.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",o.id]})]}),s.jsx(xe,{variant:"secondary",onClick:()=>i(null),children:"Change Project"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(xe,{variant:"primary",onClick:()=>F(!L),fullWidth:!0,children:L?" Close Rate Browser":"+ Add Rate"}),s.jsx(xe,{variant:"secondary",onClick:()=>D(!$),fullWidth:!0,children:$?" Cancel Custom":"+ Custom Line Item"})]}),L&&s.jsx(Z,{title:"Available Rates",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"text",placeholder:"Search rates...",value:b,onChange:_=>k(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),s.jsxs("select",{value:C,onChange:_=>w(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"all",children:"All Categories"}),m.map(_=>s.jsx("option",{value:_.name,children:_.name},_.id))]}),Object.entries(ge).map(([_,G])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:_}),s.jsx("div",{className:"space-y-2",children:G.map(J=>s.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded hover:bg-gray-100",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:J.description}),s.jsxs("p",{className:"text-xs text-gray-600",children:[je(J.labour+J.materials+J.plant+J.ohp)," / ",J.uom]})]}),s.jsx("button",{onClick:()=>ie(J),className:"px-3 py-1 bg-khc-primary text-white rounded text-sm hover:bg-khc-secondary",children:"Add"})]},J.id))})]},_))]})}),$&&s.jsx(Z,{title:"Add Custom Line Item",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description*"}),s.jsx("input",{type:"text",value:O.description,onChange:_=>P({...O,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category*"}),s.jsxs("select",{value:O.category,onChange:_=>P({...O,category:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[s.jsx("option",{value:"",children:"Select category"}),m.map(_=>s.jsx("option",{value:_.name,children:_.name},_.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),s.jsx("input",{type:"number",value:O.quantity,onChange:_=>P({...O,quantity:parseFloat(_.target.value)||1}),min:"0.01",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"UOM*"}),s.jsx("input",{type:"text",value:O.uom,onChange:_=>P({...O,uom:_.target.value}),placeholder:"m2, m3, etc",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Labour ()"}),s.jsx("input",{type:"number",value:O.labour||"",onChange:_=>P({...O,labour:parseFloat(_.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Materials ()"}),s.jsx("input",{type:"number",value:O.materials||"",onChange:_=>P({...O,materials:parseFloat(_.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plant ()"}),s.jsx("input",{type:"number",value:O.plant||"",onChange:_=>P({...O,plant:parseFloat(_.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"OHP ()"}),s.jsx("input",{type:"number",value:O.ohp||"",onChange:_=>P({...O,ohp:parseFloat(_.target.value)||0}),step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Markup %"}),s.jsx("input",{type:"number",value:O.markupPercentage||"",onChange:_=>P({...O,markupPercentage:parseFloat(_.target.value)||0}),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(xe,{variant:"primary",onClick:Le,children:"Add Line Item"}),s.jsx(xe,{variant:"secondary",onClick:()=>D(!1),children:"Cancel"})]})]})}),s.jsx(Z,{title:"Markup Settings",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:_=>x(_.target.checked),className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Apply global markup percentage"})]}),p&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Global Markup %"}),s.jsx("input",{type:"number",value:j||"",onChange:_=>g(parseFloat(_.target.value)||0),step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})}),h.length>0&&s.jsxs(s.Fragment,{children:[Object.entries(he).map(([_,G])=>s.jsx(Z,{title:_,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50 border-b",children:[s.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Qty"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Labour"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Materials"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Plant"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"OHP"}),s.jsx("th",{className:"px-3 py-2 text-right",children:"Total"}),s.jsx("th",{className:"px-3 py-2 text-center",children:"Action"})]})}),s.jsxs("tbody",{children:[h.filter(J=>J.category===_).map(J=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2",children:J.description}),s.jsx("td",{className:"px-3 py-2 text-right",children:s.jsx("input",{type:"number",value:J.quantity,onChange:be=>Fe(J.id,"quantity",parseFloat(be.target.value)||1),step:"0.01",min:"0.01",className:"w-16 px-2 py-1 border border-gray-300 rounded text-right text-sm"})}),s.jsx("td",{className:"px-3 py-2 text-right",children:je(J.labour*J.quantity)}),s.jsx("td",{className:"px-3 py-2 text-right",children:je(J.materials*J.quantity)}),s.jsx("td",{className:"px-3 py-2 text-right",children:je(J.plant*J.quantity)}),s.jsx("td",{className:"px-3 py-2 text-right",children:je(J.ohp*J.quantity)}),s.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:je(Nt(J))}),s.jsx("td",{className:"px-3 py-2 text-center",children:s.jsx("button",{onClick:()=>Ze(J.id),className:"text-red-600 hover:text-red-800",children:""})})]},J.id)),s.jsxs("tr",{className:"bg-gray-100 font-semibold",children:[s.jsx("td",{colSpan:6,className:"px-3 py-2 text-right",children:"Category Total:"}),s.jsx("td",{className:"px-3 py-2 text-right text-khc-primary",children:je(G)})]})]})]})})},_)),s.jsx(Z,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"GRAND TOTAL"}),s.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:je(pt)})]}),s.jsxs("div",{className:"flex flex-col justify-end gap-2",children:[s.jsx(xe,{variant:"primary",onClick:V,fullWidth:!0,children:" Export as HTML/PDF"}),s.jsx(xe,{variant:"secondary",onClick:pr,fullWidth:!0,children:" Export as CSV"})]})]})})]})]}):s.jsx(Z,{title:"Select a Project",children:r?s.jsx("p",{className:"text-center text-gray-500",children:"Loading projects..."}):t.length===0?s.jsxs("p",{className:"text-center text-gray-500",children:["No projects found. ",s.jsx("span",{onClick:()=>e("/projects/new"),className:"text-khc-primary cursor-pointer hover:underline",children:"Create one first"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map(_=>s.jsxs("button",{onClick:()=>M(_.id),className:"text-left p-4 border border-gray-300 rounded-lg hover:border-khc-primary hover:bg-blue-50 transition",children:[s.jsx("p",{className:"font-semibold text-gray-900",children:_.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",_.id]}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(_.start_date).toLocaleDateString()})]},_.id))})})]})}function vv(){const{user:e}=cr(),[t,r]=v.useState([]),[n,a]=v.useState(!1),[l,o]=v.useState("bank_transfer"),[i,c]=v.useState({accountName:"",accountNumber:"",sortCode:""});v.useEffect(()=>{const y=localStorage.getItem(`referrals_${e==null?void 0:e.id}`);y&&r(JSON.parse(y))},[e==null?void 0:e.id]);const d=`${window.location.origin}/register?ref=${e==null?void 0:e.username}`,u=()=>{navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3)},f=t.filter(y=>y.status==="completed"),m=f.reduce((y,j)=>y+j.amount,0),N=t.filter(y=>y.status==="pending").reduce((y,j)=>y+j.amount,0),h=y=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(y);return s.jsxs("div",{className:"space-y-6",children:[s.jsx(ze,{}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-khc-primary",children:"Referral Program"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Earn 20 for each successful referral"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Z,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"Total Earnings"}),s.jsx("p",{className:"text-4xl font-bold text-khc-primary",children:h(m)}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[f.length," completed referrals"]})]})}),s.jsx(Z,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"Pending Earnings"}),s.jsx("p",{className:"text-4xl font-bold text-yellow-600",children:h(N)}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[t.filter(y=>y.status==="pending").length," pending referrals"]})]})}),s.jsx(Z,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"Next Payout"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:h(m)}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Monthly on 1st"})]})})]}),s.jsx(Z,{title:"Your Referral Link",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-gray-700",children:"Share this link with your network and earn 20 for each successful sign-up:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 font-mono text-sm text-gray-700 overflow-auto",children:d}),s.jsx("button",{onClick:u,className:`px-4 py-2 rounded-lg font-medium transition ${n?"bg-green-500 text-white":"bg-khc-primary text-white hover:bg-khc-secondary"}`,children:n?" Copied":"Copy"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:" Tip:"})," Share this link on social media, email, or directly with colleagues. You'll earn 20 each time someone signs up using your link."]})})]})}),s.jsx(Z,{title:"How the Referral Program Works",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"1"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Share Your Link"}),s.jsx("p",{className:"text-gray-600",children:"Copy your unique referral link and share it with QS professionals and SME contractors."})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"2"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"They Sign Up"}),s.jsx("p",{className:"text-gray-600",children:"When someone clicks your link and creates an account, they become your referral."})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"3"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"You Earn 20"}),s.jsx("p",{className:"text-gray-600",children:"Once they complete their first purchase, you earn 20. No limits on how many you can refer!"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-khc-primary text-white font-bold",children:"4"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Get Paid"}),s.jsx("p",{className:"text-gray-600",children:"Payouts are processed monthly on the 1st of each month to your selected bank account."})]})]})]})}),s.jsx(Z,{title:"Referral History",children:t.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("p",{className:"mb-4",children:"No referrals yet. Start sharing your link to earn!"}),s.jsx(xe,{variant:"primary",onClick:u,children:"Copy Link"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Name"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Email"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Earnings"}),s.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Date"})]})}),s.jsx("tbody",{className:"divide-y",children:t.map(y=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 font-medium",children:y.username}),s.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.email}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})}),s.jsx("td",{className:"px-4 py-3 font-semibold text-khc-primary",children:h(y.amount)}),s.jsx("td",{className:"px-4 py-3 text-gray-600",children:y.earnedAt?new Date(y.earnedAt).toLocaleDateString():"Pending"})]},y.id))})]})})}),s.jsx(Z,{title:"Payout Settings",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payout Method"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"payout",value:"bank_transfer",checked:l==="bank_transfer",onChange:y=>o(y.target.value),className:"w-4 h-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"UK Bank Transfer"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Direct to your bank account (recommended)"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[s.jsx("input",{type:"radio",name:"payout",value:"paypal",checked:l==="paypal",onChange:y=>o(y.target.value),className:"w-4 h-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"PayPal"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Sent to your PayPal account"})]})]})]})]}),l==="bank_transfer"&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Bank Account Details"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),s.jsx("input",{type:"text",value:i.accountName,onChange:y=>c({...i,accountName:y.target.value}),placeholder:"As it appears on your bank account",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Code"}),s.jsx("input",{type:"text",value:i.sortCode,onChange:y=>c({...i,sortCode:y.target.value}),placeholder:"XX-XX-XX",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),s.jsx("input",{type:"text",value:i.accountNumber,onChange:y=>c({...i,accountNumber:y.target.value}),placeholder:"8 digits",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]})]}),s.jsx(xe,{variant:"primary",fullWidth:!0,children:"Save Bank Details"})]}),l==="paypal"&&s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"PayPal Account"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PayPal Email"}),s.jsx("input",{type:"email",placeholder:"your@paypal.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})]}),s.jsx(xe,{variant:"primary",fullWidth:!0,children:"Save PayPal Details"})]})]})}),s.jsx(Z,{title:"Frequently Asked Questions",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"How much can I earn?"}),s.jsx("p",{className:"text-gray-700",children:"Unlimited! There are no caps on referrals. Earn 20 for each person who signs up with your link."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"When do I get paid?"}),s.jsx("p",{className:"text-gray-700",children:"Referral earnings are paid out monthly on the 1st of each month to your chosen payout method."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"What counts as a valid referral?"}),s.jsx("p",{className:"text-gray-700",children:"A valid referral is someone who clicks your unique link and completes their first paid subscription."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Can I share my link on social media?"}),s.jsx("p",{className:"text-gray-700",children:"Yes! Share it anywhere - LinkedIn, Twitter, Facebook, email, or directly with colleagues. The more you share, the more you earn."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Is there a minimum payout?"}),s.jsx("p",{className:"text-gray-700",children:"No minimum. Once you have earnings, they'll be paid out monthly on the 1st."})]})]})})]})}function jv({children:e,requiredRoles:t}){const r=cr(a=>a.user);return cr(a=>a.isLoading)?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-khc-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(r.role)?s.jsx($o,{to:"/",replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx($o,{to:"/login",replace:!0})}function bv({onMenuClick:e}){const t=Xe(),{user:r,logout:n}=cr(),a=async()=>{await n(),t("/login",{replace:!0})};return s.jsx("header",{className:"bg-khc-primary shadow-md sticky top-0 z-30",children:s.jsxs("div",{className:"h-16 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:e,className:"md:hidden text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",title:"Toggle sidebar",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),s.jsxs(X,{to:"/dashboard",className:"flex md:hidden items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"QS"})}),s.jsx("span",{className:"text-white font-bold hidden sm:inline",children:"QSCostingPro"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"hidden sm:block relative group",children:[s.jsxs("button",{className:"flex items-center space-x-2 text-khc-light hover:bg-khc-secondary px-3 py-2 rounded-md transition",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-bold",children:r&&r.username.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"text-sm font-medium",children:r==null?void 0:r.username}),s.jsx("p",{className:"text-xs text-khc-light",children:r&&r.role.charAt(0).toUpperCase()+r.role.slice(1)})]})]}),s.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[s.jsx(X,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]}),s.jsxs("div",{className:"sm:hidden relative group",children:[s.jsx("button",{className:"text-khc-light hover:bg-khc-secondary p-2 rounded-md transition",children:s.jsx("div",{className:"w-8 h-8 bg-khc-accent rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-bold",children:r&&r.username.charAt(0).toUpperCase()})})}),s.jsxs("div",{className:"absolute right-0 mt-0 w-40 bg-white rounded-md shadow-lg py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[s.jsx(X,{to:"/referrals",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Referrals"}),s.jsx("div",{className:"border-t border-gray-200 my-1"}),s.jsx("button",{onClick:a,className:"w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]})]})]})]})})}function et({to:e,icon:t,label:r,requiredRoles:n}){const{hasPermission:a}=Ht();return n&&!a(n)?null:s.jsxs(yg,{to:e,className:({isActive:l})=>`flex items-center gap-3 px-4 py-3 rounded-md transition-all duration-200 ${l?"bg-khc-light border-l-4 border-khc-primary text-khc-primary font-medium scale-[1.02]":"text-gray-700 hover:bg-gray-50 hover:scale-[1.01]"}`,children:[s.jsx("span",{className:"text-lg",children:t}),s.jsx("span",{children:r})]})}function Ts({title:e,icon:t,children:r,defaultOpen:n=!0,searchQuery:a=""}){const[l,o]=v.useState(n),i=!a||e.toLowerCase().includes(a.toLowerCase());return a&&!i?null:s.jsxs("div",{className:"border-t border-gray-200 pt-4 first:border-t-0 first:pt-0",children:[s.jsxs("button",{onClick:()=>o(!l),className:"w-full flex items-center gap-2 px-4 mb-2 text-xs font-semibold uppercase text-gray-500 hover:text-gray-700 transition-colors",children:[s.jsx("span",{className:`transition-transform duration-200 ${l?"rotate-90":""}`,children:""}),t&&s.jsx("span",{children:t}),e]}),l&&s.jsx("div",{className:"space-y-1 animate-slide-in-top",children:r})]})}function Nv({onSearch:e}){const[t,r]=v.useState("");return s.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:s.jsx("input",{type:"text",placeholder:"Search pages...",value:t,onChange:n=>{r(n.target.value),e(n.target.value)},className:"w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-khc-primary"})})}function Rd({onClose:e}){const{user:t}=Ht(),[r,n]=v.useState(""),a=()=>{e==null||e()};return s.jsxs("div",{className:"w-64 h-screen bg-white border-r border-gray-200 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-khc-primary rounded-lg flex items-center justify-center text-white font-bold text-lg",children:"QS"}),s.jsxs("div",{children:[s.jsx("h1",{className:"font-bold text-lg text-gray-900",children:"QSCostingPro"}),s.jsx("p",{className:"text-xs text-gray-500",children:"v1.0"})]})]}),s.jsx(Nv,{onSearch:n}),s.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[s.jsx("div",{onClick:a,className:"space-y-1",children:s.jsx(et,{to:"/dashboard",icon:"",label:"Home"})}),s.jsx(Ts,{title:"Projects",icon:"",searchQuery:r,children:s.jsxs("div",{onClick:a,className:"space-y-1",children:[s.jsx(et,{to:"/projects",icon:"",label:"All Projects"}),s.jsx(et,{to:"/projects/new",icon:"",label:"New"}),s.jsx(et,{to:"/projects?status=current",icon:"",label:"Current"}),s.jsx(et,{to:"/projects?status=completed",icon:"",label:"Completed"})]})}),s.jsx(Ts,{title:"Estimate Builder",icon:"",searchQuery:r,children:s.jsxs("div",{onClick:a,className:"space-y-1",children:[s.jsx(et,{to:"/projects",icon:"",label:"Build Estimate",requiredRoles:["admin","estimator"]}),s.jsx(et,{to:"/internal-rates",icon:"",label:"Build Rates",requiredRoles:["admin","estimator"]})]})}),s.jsx(Ts,{title:"Contacts",icon:"",searchQuery:r,children:s.jsxs("div",{onClick:a,className:"space-y-1",children:[s.jsx(et,{to:"/clients",icon:"",label:"Clients"}),s.jsx(et,{to:"/contractors",icon:"",label:"Contractors"})]})}),s.jsx(Ts,{title:"Admin",icon:"",searchQuery:r,children:s.jsxs("div",{onClick:a,className:"space-y-1",children:[s.jsx(et,{to:"/cost-items",icon:"",label:"Cost Database",requiredRoles:"admin"}),s.jsx(et,{to:"/users",icon:"",label:"User Management",requiredRoles:"admin"}),s.jsx(et,{to:"/personal-database",icon:"",label:"Cost Uploader",requiredRoles:"admin"})]})}),s.jsx(Ts,{title:"Account",icon:"",searchQuery:r,children:s.jsx("div",{onClick:a,className:"space-y-1",children:s.jsx(et,{to:"/referrals",icon:"",label:"Referrals"})})})]}),t&&s.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-khc-primary rounded-full flex items-center justify-center text-white font-medium text-sm",children:t.username.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.username}),s.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:t.role})]})]})})]})}function wv(){const[e,t]=v.useState(!1);return s.jsxs("div",{className:"min-h-screen bg-khc-light flex",children:[s.jsx("div",{className:"hidden md:block",children:s.jsx(Rd,{})}),e&&s.jsxs("div",{className:"fixed inset-0 z-40 md:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>t(!1)}),s.jsx("div",{className:"relative h-full w-80 max-w-[80%] bg-white shadow-xl",children:s.jsx(Rd,{onClose:()=>t(!1)})})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx(bv,{onMenuClick:()=>t(!0)}),s.jsx("main",{className:"flex-1 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx(ag,{})}),s.jsx("footer",{className:"bg-khc-neutral text-khc-light py-6 mt-12",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{children:s.jsx("p",{className:"text-sm",children:" 2026 QSCostingPro. Professional Cost Estimation for Quantity Surveyors."})}),s.jsx("div",{className:"text-sm",children:s.jsx("p",{children:"Version 1.0.0"})})]})})})]}),s.jsx(V0,{})]})}function kv(){const{hydrate:e,user:t,accessToken:r}=cr();v.useEffect(()=>{e()},[e]);const n=!!t&&!!r;return s.jsx(fg,{children:s.jsxs(og,{children:[s.jsx(se,{path:"/",element:s.jsx(C0,{})}),s.jsx(se,{path:"/login",element:s.jsx(E0,{})}),s.jsx(se,{path:"/register",element:s.jsx(_0,{})}),s.jsx(se,{path:"/privacy",element:s.jsx(P0,{})}),s.jsx(se,{path:"/terms",element:s.jsx(L0,{})}),s.jsxs(se,{element:s.jsx(jv,{children:s.jsx(wv,{})}),children:[s.jsx(se,{path:"/dashboard",element:s.jsx(U0,{})}),s.jsx(se,{path:"/projects",element:s.jsx(W0,{})}),s.jsx(se,{path:"/projects/new",element:s.jsx(Pd,{})}),s.jsx(se,{path:"/projects/:id",element:s.jsx(K0,{})}),s.jsx(se,{path:"/projects/:id/edit",element:s.jsx(Pd,{})}),s.jsx(se,{path:"/projects/:id/estimates",element:s.jsx(sv,{})}),s.jsx(se,{path:"/projects/:id/actuals",element:s.jsx(dv,{})}),s.jsx(se,{path:"/projects/:id/report",element:s.jsx(iv,{})}),s.jsx(se,{path:"/projects/:id/cost-total",element:s.jsx(uv,{})}),s.jsx(se,{path:"/cost-items",element:s.jsx(nv,{})}),s.jsx(se,{path:"/cost-analysis",element:s.jsx(cv,{})}),s.jsx(se,{path:"/personal-database",element:s.jsx(fv,{})}),s.jsx(se,{path:"/internal-rates",element:s.jsx(gv,{})}),s.jsx(se,{path:"/cost-assembly",element:s.jsx(yv,{})}),s.jsx(se,{path:"/referrals",element:s.jsx(vv,{})}),s.jsx(se,{path:"/users",element:s.jsx(mv,{})}),s.jsx(se,{path:"/clients",element:s.jsx(pv,{})}),s.jsx(se,{path:"/contractors",element:s.jsx(hv,{})})]}),s.jsx(se,{path:"*",element:s.jsx($o,{to:n?"/dashboard":"/",replace:!0})})]})})}zl.createRoot(document.getElementById("root")).render(s.jsx(Ia.StrictMode,{children:s.jsx(kv,{})}));
//# sourceMappingURL=index-DsO173O3.js.map
